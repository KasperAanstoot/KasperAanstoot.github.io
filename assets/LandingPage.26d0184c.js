import{q as bp,i as Ri,u as Xa,v as Z$,P as R$,c as ce,h as Bt,t as L$,g as Cs,an as mr,ao as wp,_ as ge,ap as xp,G as B$,r as ft,aq as I$,ar as Yf,x as Q0,B as N$,as as z$,aj as W$,L as q$,at as Y$,au as X$,w as Da,al as V$,av as F$,n as A0,aw as j$,ax as ir,a5 as Ke,ay as D0,az as Oa,aA as Ic,aB as Er,aC as cl,aD as Nc,a2 as le,aE as ri,aF as It,f as L,a4 as _,aG as et,a6 as se,aH as sr,K as Te,a3 as fe,aI as be,aJ as J,aK as Be,aL as Me,aM as gr,p as Qt,a9 as ni,a8 as dt,aN as _0,aO as pn,aP as Ee,a7 as Li,o as Sp,aQ as G$,aR as M0,aS as zu,aT as U$,aU as kp,aV as H$,aW as K$,aX as J$,m as nv,aY as eP,aZ as $t,a_ as fl,a$ as as,b0 as ss,b1 as iv,b2 as Z0,F as Gh,b3 as Uh,b4 as Hh,b5 as tP,b6 as rP,b7 as nP,b8 as iP,b9 as aP,a1 as sP}from"./index.efc25c54.js";import{T as oP,b as es}from"./format.e332677a.js";import{u as lP}from"./index.61529dc7.js";var uP=bp({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(r,{slots:e}){const{proxy:{$q:t}}=Cs(),n=Ri(Z$,Xa);if(n===Xa)return console.error("QPage needs to be a deep child of QLayout"),Xa;if(Ri(R$,Xa)===Xa)return console.error("QPage needs to be child of QPageContainer"),Xa;const a=ce(()=>{const l=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof r.styleFn=="function"){const u=n.isContainer.value===!0?n.containerHeight.value:t.screen.height;return r.styleFn(l,u)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-l+"px":t.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":t.screen.height-l+"px"}}),s=ce(()=>`q-page${r.padding===!0?" q-layout-padding":""}`);return()=>Bt("main",{class:s.value,style:a.value},L$(e.default))}});function cP(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Ur=cP,fP=typeof mr=="object"&&mr&&mr.Object===Object&&mr,R0=fP,hP=R0,dP=typeof self=="object"&&self&&self.Object===Object&&self,pP=hP||dP||Function("return this")(),Sn=pP,gP=Sn,vP=function(){return gP.Date.now()},L0=vP,mP=/\s/;function yP(r){for(var e=r.length;e--&&mP.test(r.charAt(e)););return e}var OP=yP,bP=OP,wP=/^\s+/;function xP(r){return r&&r.slice(0,bP(r)+1).replace(wP,"")}var SP=xP,kP=Sn,$P=kP.Symbol,Es=$P,av=Es,B0=Object.prototype,PP=B0.hasOwnProperty,CP=B0.toString,Hs=av?av.toStringTag:void 0;function EP(r){var e=PP.call(r,Hs),t=r[Hs];try{r[Hs]=void 0;var n=!0}catch{}var i=CP.call(r);return n&&(e?r[Hs]=t:delete r[Hs]),i}var TP=EP,QP=Object.prototype,AP=QP.toString;function DP(r){return AP.call(r)}var _P=DP,sv=Es,MP=TP,ZP=_P,RP="[object Null]",LP="[object Undefined]",ov=sv?sv.toStringTag:void 0;function BP(r){return r==null?r===void 0?LP:RP:ov&&ov in Object(r)?MP(r):ZP(r)}var _a=BP;function IP(r){return r!=null&&typeof r=="object"}var Fn=IP,NP=_a,zP=Fn,WP="[object Symbol]";function qP(r){return typeof r=="symbol"||zP(r)&&NP(r)==WP}var Ma=qP,YP=SP,lv=Ur,XP=Ma,uv=0/0,VP=/^[-+]0x[0-9a-f]+$/i,FP=/^0b[01]+$/i,jP=/^0o[0-7]+$/i,GP=parseInt;function UP(r){if(typeof r=="number")return r;if(XP(r))return uv;if(lv(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=lv(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=YP(r);var t=FP.test(r);return t||jP.test(r)?GP(r.slice(2),t?2:8):VP.test(r)?uv:+r}var I0=UP,HP=Ur,Xf=L0,cv=I0,KP="Expected a function",JP=Math.max,eC=Math.min;function tC(r,e,t){var n,i,a,s,l,u,c=0,f=!1,h=!1,d=!0;if(typeof r!="function")throw new TypeError(KP);e=cv(e)||0,HP(t)&&(f=!!t.leading,h="maxWait"in t,a=h?JP(cv(t.maxWait)||0,e):a,d="trailing"in t?!!t.trailing:d);function p($){var S=n,T=i;return n=i=void 0,c=$,s=r.apply(T,S),s}function g($){return c=$,l=setTimeout(v,e),f?p($):s}function y($){var S=$-u,T=$-c,k=e-S;return h?eC(k,a-T):k}function m($){var S=$-u,T=$-c;return u===void 0||S>=e||S<0||h&&T>=a}function v(){var $=Xf();if(m($))return O($);l=setTimeout(v,y($))}function O($){return l=void 0,d&&n?p($):(n=i=void 0,s)}function b(){l!==void 0&&clearTimeout(l),c=0,n=u=i=l=void 0}function w(){return l===void 0?s:O(Xf())}function x(){var $=Xf(),S=m($);if(n=arguments,i=this,u=$,S){if(l===void 0)return g(u);if(h)return clearTimeout(l),l=setTimeout(v,e),p(u)}return l===void 0&&(l=setTimeout(v,e)),s}return x.cancel=b,x.flush=w,x}var rC=tC,N0={exports:{}};(function(r,e){(function(){var t,n,i,a,s,l,u,c,f,h,d,p,g,y,m;i=Math.floor,h=Math.min,n=function(v,O){return v<O?-1:v>O?1:0},f=function(v,O,b,w,x){var $;if(b==null&&(b=0),x==null&&(x=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=v.length);b<w;)$=i((b+w)/2),x(O,v[$])<0?w=$:b=$+1;return[].splice.apply(v,[b,b-b].concat(O)),O},l=function(v,O,b){return b==null&&(b=n),v.push(O),y(v,0,v.length-1,b)},s=function(v,O){var b,w;return O==null&&(O=n),b=v.pop(),v.length?(w=v[0],v[0]=b,m(v,0,O)):w=b,w},c=function(v,O,b){var w;return b==null&&(b=n),w=v[0],v[0]=O,m(v,0,b),w},u=function(v,O,b){var w;return b==null&&(b=n),v.length&&b(v[0],O)<0&&(w=[v[0],O],O=w[0],v[0]=w[1],m(v,0,b)),O},a=function(v,O){var b,w,x,$,S,T;for(O==null&&(O=n),$=function(){T=[];for(var k=0,E=i(v.length/2);0<=E?k<E:k>E;0<=E?k++:k--)T.push(k);return T}.apply(this).reverse(),S=[],w=0,x=$.length;w<x;w++)b=$[w],S.push(m(v,b,O));return S},g=function(v,O,b){var w;if(b==null&&(b=n),w=v.indexOf(O),w!==-1)return y(v,0,w,b),m(v,w,b)},d=function(v,O,b){var w,x,$,S,T;if(b==null&&(b=n),x=v.slice(0,O),!x.length)return x;for(a(x,b),T=v.slice(O),$=0,S=T.length;$<S;$++)w=T[$],u(x,w,b);return x.sort(b).reverse()},p=function(v,O,b){var w,x,$,S,T,k,E,P,C;if(b==null&&(b=n),O*10<=v.length){if($=v.slice(0,O).sort(b),!$.length)return $;for(x=$[$.length-1],E=v.slice(O),S=0,k=E.length;S<k;S++)w=E[S],b(w,x)<0&&(f($,w,0,null,b),$.pop(),x=$[$.length-1]);return $}for(a(v,b),C=[],T=0,P=h(O,v.length);0<=P?T<P:T>P;0<=P?++T:--T)C.push(s(v,b));return C},y=function(v,O,b,w){var x,$,S;for(w==null&&(w=n),x=v[b];b>O;){if(S=b-1>>1,$=v[S],w(x,$)<0){v[b]=$,b=S;continue}break}return v[b]=x},m=function(v,O,b){var w,x,$,S,T;for(b==null&&(b=n),x=v.length,T=O,$=v[O],w=2*O+1;w<x;)S=w+1,S<x&&!(b(v[w],v[S])<0)&&(w=S),v[O]=v[w],O=w,w=2*O+1;return v[O]=$,y(v,T,O,b)},t=function(){v.push=l,v.pop=s,v.replace=c,v.pushpop=u,v.heapify=a,v.updateItem=g,v.nlargest=d,v.nsmallest=p;function v(O){this.cmp=O!=null?O:n,this.nodes=[]}return v.prototype.push=function(O){return l(this.nodes,O,this.cmp)},v.prototype.pop=function(){return s(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(O){return this.nodes.indexOf(O)!==-1},v.prototype.replace=function(O){return c(this.nodes,O,this.cmp)},v.prototype.pushpop=function(O){return u(this.nodes,O,this.cmp)},v.prototype.heapify=function(){return a(this.nodes,this.cmp)},v.prototype.updateItem=function(O){return g(this.nodes,O,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var O;return O=new v,O.nodes=this.nodes.slice(0),O},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,O){return r.exports=O()}(this,function(){return t})}).call(mr)})(N0);var nC=N0.exports,iC=Array.isArray,zt=iC,aC=zt,sC=Ma,oC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lC=/^\w*$/;function uC(r,e){if(aC(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||sC(r)?!0:lC.test(r)||!oC.test(r)||e!=null&&r in Object(e)}var $p=uC,cC=_a,fC=Ur,hC="[object AsyncFunction]",dC="[object Function]",pC="[object GeneratorFunction]",gC="[object Proxy]";function vC(r){if(!fC(r))return!1;var e=cC(r);return e==dC||e==pC||e==hC||e==gC}var hl=vC,mC=Sn,yC=mC["__core-js_shared__"],OC=yC,Vf=OC,fv=function(){var r=/[^.]+$/.exec(Vf&&Vf.keys&&Vf.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function bC(r){return!!fv&&fv in r}var wC=bC,xC=Function.prototype,SC=xC.toString;function kC(r){if(r!=null){try{return SC.call(r)}catch{}try{return r+""}catch{}}return""}var z0=kC,$C=hl,PC=wC,CC=Ur,EC=z0,TC=/[\\^$.*+?()[\]{}|]/g,QC=/^\[object .+?Constructor\]$/,AC=Function.prototype,DC=Object.prototype,_C=AC.toString,MC=DC.hasOwnProperty,ZC=RegExp("^"+_C.call(MC).replace(TC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RC(r){if(!CC(r)||PC(r))return!1;var e=$C(r)?ZC:QC;return e.test(EC(r))}var LC=RC;function BC(r,e){return r==null?void 0:r[e]}var IC=BC,NC=LC,zC=IC;function WC(r,e){var t=zC(r,e);return NC(t)?t:void 0}var Za=WC,qC=Za,YC=qC(Object,"create"),zc=YC,hv=zc;function XC(){this.__data__=hv?hv(null):{},this.size=0}var VC=XC;function FC(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var jC=FC,GC=zc,UC="__lodash_hash_undefined__",HC=Object.prototype,KC=HC.hasOwnProperty;function JC(r){var e=this.__data__;if(GC){var t=e[r];return t===UC?void 0:t}return KC.call(e,r)?e[r]:void 0}var e2=JC,t2=zc,r2=Object.prototype,n2=r2.hasOwnProperty;function i2(r){var e=this.__data__;return t2?e[r]!==void 0:n2.call(e,r)}var a2=i2,s2=zc,o2="__lodash_hash_undefined__";function l2(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=s2&&e===void 0?o2:e,this}var u2=l2,c2=VC,f2=jC,h2=e2,d2=a2,p2=u2;function Ts(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ts.prototype.clear=c2;Ts.prototype.delete=f2;Ts.prototype.get=h2;Ts.prototype.has=d2;Ts.prototype.set=p2;var g2=Ts;function v2(){this.__data__=[],this.size=0}var m2=v2;function y2(r,e){return r===e||r!==r&&e!==e}var Qs=y2,O2=Qs;function b2(r,e){for(var t=r.length;t--;)if(O2(r[t][0],e))return t;return-1}var Wc=b2,w2=Wc,x2=Array.prototype,S2=x2.splice;function k2(r){var e=this.__data__,t=w2(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():S2.call(e,t,1),--this.size,!0}var $2=k2,P2=Wc;function C2(r){var e=this.__data__,t=P2(e,r);return t<0?void 0:e[t][1]}var E2=C2,T2=Wc;function Q2(r){return T2(this.__data__,r)>-1}var A2=Q2,D2=Wc;function _2(r,e){var t=this.__data__,n=D2(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var M2=_2,Z2=m2,R2=$2,L2=E2,B2=A2,I2=M2;function As(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}As.prototype.clear=Z2;As.prototype.delete=R2;As.prototype.get=L2;As.prototype.has=B2;As.prototype.set=I2;var qc=As,N2=Za,z2=Sn,W2=N2(z2,"Map"),Pp=W2,dv=g2,q2=qc,Y2=Pp;function X2(){this.size=0,this.__data__={hash:new dv,map:new(Y2||q2),string:new dv}}var V2=X2;function F2(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var j2=F2,G2=j2;function U2(r,e){var t=r.__data__;return G2(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Yc=U2,H2=Yc;function K2(r){var e=H2(this,r).delete(r);return this.size-=e?1:0,e}var J2=K2,eE=Yc;function tE(r){return eE(this,r).get(r)}var rE=tE,nE=Yc;function iE(r){return nE(this,r).has(r)}var aE=iE,sE=Yc;function oE(r,e){var t=sE(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var lE=oE,uE=V2,cE=J2,fE=rE,hE=aE,dE=lE;function Ds(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ds.prototype.clear=uE;Ds.prototype.delete=cE;Ds.prototype.get=fE;Ds.prototype.has=hE;Ds.prototype.set=dE;var Cp=Ds,W0=Cp,pE="Expected a function";function Ep(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(pE);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var s=r.apply(this,n);return t.cache=a.set(i,s)||a,s};return t.cache=new(Ep.Cache||W0),t}Ep.Cache=W0;var gE=Ep,vE=gE,mE=500;function yE(r){var e=vE(r,function(n){return t.size===mE&&t.clear(),n}),t=e.cache;return e}var OE=yE,bE=OE,wE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xE=/\\(\\)?/g,SE=bE(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(wE,function(t,n,i,a){e.push(i?a.replace(xE,"$1"):n||t)}),e}),q0=SE;function kE(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var dl=kE,pv=Es,$E=dl,PE=zt,CE=Ma,EE=1/0,gv=pv?pv.prototype:void 0,vv=gv?gv.toString:void 0;function Y0(r){if(typeof r=="string")return r;if(PE(r))return $E(r,Y0)+"";if(CE(r))return vv?vv.call(r):"";var e=r+"";return e=="0"&&1/r==-EE?"-0":e}var TE=Y0,QE=TE;function AE(r){return r==null?"":QE(r)}var Tp=AE,DE=zt,_E=$p,ME=q0,ZE=Tp;function RE(r,e){return DE(r)?r:_E(r,e)?[r]:ME(ZE(r))}var Xc=RE,LE=Ma,BE=1/0;function IE(r){if(typeof r=="string"||LE(r))return r;var e=r+"";return e=="0"&&1/r==-BE?"-0":e}var _s=IE,NE=Xc,zE=_s;function WE(r,e){e=NE(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[zE(e[t++])];return t&&t==n?r:void 0}var Vc=WE,qE=Vc;function YE(r,e,t){var n=r==null?void 0:qE(r,e);return n===void 0?t:n}var X0=YE,XE=Za,VE=function(){try{var r=XE(Object,"defineProperty");return r({},"",{}),r}catch{}}(),V0=VE,mv=V0;function FE(r,e,t){e=="__proto__"&&mv?mv(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var Fc=FE,jE=Fc,GE=Qs,UE=Object.prototype,HE=UE.hasOwnProperty;function KE(r,e,t){var n=r[e];(!(HE.call(r,e)&&GE(n,t))||t===void 0&&!(e in r))&&jE(r,e,t)}var jc=KE,JE=9007199254740991,eT=/^(?:0|[1-9]\d*)$/;function tT(r,e){var t=typeof r;return e=e==null?JE:e,!!e&&(t=="number"||t!="symbol"&&eT.test(r))&&r>-1&&r%1==0&&r<e}var Gc=tT,rT=jc,nT=Xc,iT=Gc,yv=Ur,aT=_s;function sT(r,e,t,n){if(!yv(r))return r;e=nT(e,r);for(var i=-1,a=e.length,s=a-1,l=r;l!=null&&++i<a;){var u=aT(e[i]),c=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return r;if(i!=s){var f=l[u];c=n?n(f,u,l):void 0,c===void 0&&(c=yv(f)?f:iT(e[i+1])?[]:{})}rT(l,u,c),l=l[u]}return r}var F0=sT,oT=F0;function lT(r,e,t){return r==null?r:oT(r,e,t)}var uT=lT;function cT(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var Qp=cT,fT=dl,hT=Qp,dT=zt,pT=Ma,gT=q0,vT=_s,mT=Tp;function yT(r){return dT(r)?fT(r,vT):pT(r)?[r]:hT(gT(mT(r)))}var OT=yT,bT=rC,wT=nC,xT=X0,ST=uT,kT=OT;function pl(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Uc=pl(bT),gl=pl(wT),$T=pl(xT),PT=pl(ST),CT=pl(kT);function Gt(r){return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(r)}function Ap(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ov(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Dp(r,e,t){return e&&Ov(r.prototype,e),t&&Ov(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function j0(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gn(r,e){return ET(r)||TT(r,e)||QT(r,e)||AT()}function ET(r){if(Array.isArray(r))return r}function TT(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,s,l;try{for(t=t.call(r);!(i=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(u){a=!0,l=u}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw l}}return n}}function QT(r,e){if(!!r){if(typeof r=="string")return bv(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bv(r,e)}}function bv(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function AT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xt=typeof window=="undefined"?null:window,wv=Xt?Xt.navigator:null;Xt&&Xt.document;var DT=Gt(""),G0=Gt({}),_T=Gt(function(){}),MT=typeof HTMLElement=="undefined"?"undefined":Gt(HTMLElement),vl=function(e){return e&&e.instanceString&&_t(e.instanceString)?e.instanceString():null},Le=function(e){return e!=null&&Gt(e)==DT},_t=function(e){return e!=null&&Gt(e)===_T},gt=function(e){return!jr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},it=function(e){return e!=null&&Gt(e)===G0&&!gt(e)&&e.constructor===Object},ZT=function(e){return e!=null&&Gt(e)===G0},ve=function(e){return e!=null&&Gt(e)===Gt(1)&&!isNaN(e)},RT=function(e){return ve(e)&&Math.floor(e)===e},Wu=function(e){if(MT!=="undefined")return e!=null&&e instanceof HTMLElement},jr=function(e){return ml(e)||U0(e)},ml=function(e){return vl(e)==="collection"&&e._private.single},U0=function(e){return vl(e)==="collection"&&!e._private.single},_p=function(e){return vl(e)==="core"},H0=function(e){return vl(e)==="stylesheet"},LT=function(e){return vl(e)==="event"},Bi=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},BT=function(e){return typeof HTMLElement=="undefined"?!1:e instanceof HTMLElement},IT=function(e){return it(e)&&ve(e.x1)&&ve(e.x2)&&ve(e.y1)&&ve(e.y2)},NT=function(e){return ZT(e)&&_t(e.then)},zT=function(){return wv&&wv.userAgent.match(/msie|trident|edge/i)},Ro=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],s=0;s<arguments.length;s++)a.push(arguments[s]);return a.join("$")});var n=function i(){var a=this,s=arguments,l,u=t.apply(a,s),c=i.cache;return(l=c[u])||(l=c[u]=e.apply(a,s)),l};return n.cache={},n},Mp=Ro(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Hc=Ro(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),K0=Ro(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),xv=function(e){return Bi(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Ft="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",WT="rgb[a]?\\(("+Ft+"[%]?)\\s*,\\s*("+Ft+"[%]?)\\s*,\\s*("+Ft+"[%]?)(?:\\s*,\\s*("+Ft+"))?\\)",qT="rgb[a]?\\((?:"+Ft+"[%]?)\\s*,\\s*(?:"+Ft+"[%]?)\\s*,\\s*(?:"+Ft+"[%]?)(?:\\s*,\\s*(?:"+Ft+"))?\\)",YT="hsl[a]?\\(("+Ft+")\\s*,\\s*("+Ft+"[%])\\s*,\\s*("+Ft+"[%])(?:\\s*,\\s*("+Ft+"))?\\)",XT="hsl[a]?\\((?:"+Ft+")\\s*,\\s*(?:"+Ft+"[%])\\s*,\\s*(?:"+Ft+"[%])(?:\\s*,\\s*(?:"+Ft+"))?\\)",VT="\\#[0-9a-fA-F]{3}",FT="\\#[0-9a-fA-F]{6}",J0=function(e,t){return e<t?-1:e>t?1:0},jT=function(e,t){return-1*J0(e,t)},We=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];r[s]=n[s]}}return r},GT=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,a,s=16;return t?(n=parseInt(e[1]+e[1],s),i=parseInt(e[2]+e[2],s),a=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),i=parseInt(e[3]+e[4],s),a=parseInt(e[5]+e[6],s)),[n,i,a]}},UT=function(e){var t,n,i,a,s,l,u,c;function f(g,y,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?g+(y-g)*6*m:m<1/2?y:m<2/3?g+(y-g)*(2/3-m)*6:g}var h=new RegExp("^"+YT+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(h[2]),i<0||i>100||(i=i/100,a=parseFloat(h[3]),a<0||a>100)||(a=a/100,s=h[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(i===0)l=u=c=Math.round(a*255);else{var d=a<.5?a*(1+i):a+i-a*i,p=2*a-d;l=Math.round(255*f(p,d,n+1/3)),u=Math.round(255*f(p,d,n)),c=Math.round(255*f(p,d,n-1/3))}t=[l,u,c,s]}return t},HT=function(e){var t,n=new RegExp("^"+WT+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var s=n[a];if(s[s.length-1]==="%"&&(i[a]=!0),s=parseFloat(s),i[a]&&(s=s/100*255),s<0||s>255)return;t.push(Math.floor(s))}var l=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(l&&!u)return;var c=n[4];if(c!==void 0){if(c=parseFloat(c),c<0||c>1)return;t.push(c)}}return t},KT=function(e){return eQ[e.toLowerCase()]},JT=function(e){return(gt(e)?e:null)||KT(e)||GT(e)||HT(e)||UT(e)},eQ={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},eb=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(it(s))throw Error("Tried to set map with object key");a<n.length-1?(t[s]==null&&(t[s]={}),t=t[s]):t[s]=e.value}},tb=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(it(s))throw Error("Tried to get map with object key");if(t=t[s],t==null)return t}return t},Ff=Xt?Xt.performance:null,rb=Ff&&Ff.now?function(){return Ff.now()}:function(){return Date.now()},tQ=function(){if(Xt){if(Xt.requestAnimationFrame)return function(r){Xt.requestAnimationFrame(r)};if(Xt.mozRequestAnimationFrame)return function(r){Xt.mozRequestAnimationFrame(r)};if(Xt.webkitRequestAnimationFrame)return function(r){Xt.webkitRequestAnimationFrame(r)};if(Xt.msRequestAnimationFrame)return function(r){Xt.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(rb())},1e3/60)}}(),qu=function(e){return tQ(e)},ii=rb,ts=9261,nb=65599,fo=5381,ib=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ts,n=t,i;i=e.next(),!i.done;)n=n*nb+i.value|0;return n},Lo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ts;return t*nb+e|0},Bo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fo;return(t<<5)+t+e|0},rQ=function(e,t){return e*2097152+t},vi=function(e){return e[0]*2097152+e[1]},Il=function(e,t){return[Lo(e[0],t[0]),Bo(e[1],t[1])]},nQ=function(e,t){var n={value:0,done:!1},i=0,a=e.length,s={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return ib(s,t)},ba=function(e,t){var n={value:0,done:!1},i=0,a=e.length,s={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return ib(s,t)},ab=function(){return iQ(arguments)},iQ=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=ba(i):t=ba(i,t)}return t},Sv=!0,aQ=console.warn!=null,sQ=console.trace!=null,Zp=Number.MAX_SAFE_INTEGER||9007199254740991,sb=function(){return!0},Yu=function(){return!1},kv=function(){return 0},Rp=function(){},Mt=function(e){throw new Error(e)},ob=function(e){if(e!==void 0)Sv=!!e;else return Sv},ct=function(e){!ob()||(aQ?console.warn(e):(console.log(e),sQ&&console.trace()))},oQ=function(e){return We({},e)},Rn=function(e){return e==null?e:gt(e)?e.slice():it(e)?oQ(e):e},lQ=function(e){return e.slice()},lb=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},uQ={},ub=function(){return uQ},fr=function(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var s=t[a],l=n==null?void 0:n[s];i[s]=l===void 0?e[s]:l}return i}},Ii=function(e,t,n){for(var i=e.length-1;i>=0&&!(e[i]===t&&(e.splice(i,1),n));i--);},Lp=function(e){e.splice(0,e.length)},cQ=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},mn=function(e,t,n){return n&&(t=K0(n,t)),e[t]},wi=function(e,t,n,i){n&&(t=K0(n,t)),e[t]=i},fQ=function(){function r(){Ap(this,r),this._obj={}}return Dp(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),Ln=typeof Map!="undefined"?Map:fQ,hQ="undefined",dQ=function(){function r(e){if(Ap(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Dp(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),Ms=(typeof Set=="undefined"?"undefined":Gt(Set))!==hQ?Set:dQ,Kc=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!_p(e)){Mt("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Mt("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new Ms,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var s=t.renderedPosition,l=e.pan(),u=e.zoom();a.position={x:(s.x-l.x)/u,y:(s.y-l.y)/u}}var c=[];gt(t.classes)?c=t.classes:Le(t.classes)&&(c=t.classes.split(/\s+/));for(var f=0,h=c.length;f<h;f++){var d=c[f];!d||d===""||a.classes.add(d)}this.createEmitter();var p=t.style||t.css;p&&(ct("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p)),(n===void 0||n)&&this.restore()},$v=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var s;it(n)&&!jr(n)&&(s=n,n=s.roots||s.root,i=s.visit,a=s.directed),a=arguments.length===2&&!_t(i)?i:a,i=_t(i)?i:function(){};for(var l=this._private.cy,u=n=Le(n)?this.filter(n):n,c=[],f=[],h={},d={},p={},g=0,y,m=this.byGroup(),v=m.nodes,O=m.edges,b=0;b<u.length;b++){var w=u[b],x=w.id();w.isNode()&&(c.unshift(w),e.bfs&&(p[x]=!0,f.push(w)),d[x]=0)}for(var $=function(){var M=e.bfs?c.shift():c.pop(),D=M.id();if(e.dfs){if(p[D])return"continue";p[D]=!0,f.push(M)}var I=d[D],A=h[D],Q=A!=null?A.source():null,B=A!=null?A.target():null,Y=A==null?void 0:M.same(Q)?B[0]:Q[0],X=void 0;if(X=i(M,A,Y,g++,I),X===!0)return y=M,"break";if(X===!1)return"break";for(var W=M.connectedEdges().filter(function(V){return(!a||V.source().same(M))&&O.has(V)}),q=0;q<W.length;q++){var F=W[q],Z=F.connectedNodes().filter(function(V){return!V.same(M)&&v.has(V)}),N=Z.id();Z.length!==0&&!p[N]&&(Z=Z[0],c.push(Z),e.bfs&&(p[N]=!0,f.push(Z)),h[N]=F,d[N]=d[D]+1)}};c.length!==0;){var S=$();if(S!=="continue"&&S==="break")break}for(var T=l.collection(),k=0;k<f.length;k++){var E=f[k],P=h[E.id()];P!=null&&T.push(P),T.push(E)}return{path:l.collection(T),found:l.collection(y)}}},Io={breadthFirstSearch:$v({bfs:!0}),depthFirstSearch:$v({dfs:!0})};Io.bfs=Io.breadthFirstSearch;Io.dfs=Io.depthFirstSearch;var pQ=fr({root:null,weight:function(e){return 1},directed:!1}),gQ={dijkstra:function(e){if(!it(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=pQ(e),i=n.root,a=n.weight,s=n.directed,l=this,u=a,c=Le(i)?this.filter(i)[0]:i[0],f={},h={},d={},p=this.byGroup(),g=p.nodes,y=p.edges;y.unmergeBy(function(I){return I.isLoop()});for(var m=function(A){return f[A.id()]},v=function(A,Q){f[A.id()]=Q,O.updateItem(A)},O=new gl.default(function(I,A){return m(I)-m(A)}),b=0;b<g.length;b++){var w=g[b];f[w.id()]=w.same(c)?0:1/0,O.push(w)}for(var x=function(A,Q){for(var B=(s?A.edgesTo(Q):A.edgesWith(Q)).intersect(y),Y=1/0,X,W=0;W<B.length;W++){var q=B[W],F=u(q);(F<Y||!X)&&(Y=F,X=q)}return{edge:X,dist:Y}};O.size()>0;){var $=O.pop(),S=m($),T=$.id();if(d[T]=S,S!==1/0)for(var k=$.neighborhood().intersect(g),E=0;E<k.length;E++){var P=k[E],C=P.id(),M=x($,P),D=S+M.dist;D<m(P)&&(v(P,D),h[C]={node:$,edge:M.edge})}}return{distanceTo:function(A){var Q=Le(A)?g.filter(A)[0]:A[0];return d[Q.id()]},pathTo:function(A){var Q=Le(A)?g.filter(A)[0]:A[0],B=[],Y=Q,X=Y.id();if(Q.length>0)for(B.unshift(Q);h[X];){var W=h[X];B.unshift(W.edge),B.unshift(W.node),Y=W.node,X=Y.id()}return l.spawn(B)}}}},vQ={kruskal:function(e){e=e||function(b){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,s=new Array(a),l=n,u=function(w){for(var x=0;x<s.length;x++){var $=s[x];if($.has(w))return x}},c=0;c<a;c++)s[c]=this.spawn(n[c]);for(var f=i.sort(function(b,w){return e(b)-e(w)}),h=0;h<f.length;h++){var d=f[h],p=d.source()[0],g=d.target()[0],y=u(p),m=u(g),v=s[y],O=s[m];y!==m&&(l.merge(d),v.merge(O),s.splice(m,1))}return l}},mQ=fr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),yQ={aStar:function(e){var t=this.cy(),n=mQ(e),i=n.root,a=n.goal,s=n.heuristic,l=n.directed,u=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var c=i.id(),f=a.id(),h={},d={},p={},g=new gl.default(function(X,W){return d[X.id()]-d[W.id()]}),y=new Ms,m={},v={},O=function(W,q){g.push(W),y.add(q)},b,w,x=function(){b=g.pop(),w=b.id(),y.delete(w)},$=function(W){return y.has(W)};O(i,c),h[c]=0,d[c]=s(i);for(var S=0;g.size()>0;){if(x(),S++,w===f){for(var T=[],k=a,E=f,P=v[E];T.unshift(k),P!=null&&T.unshift(P),k=m[E],k!=null;)E=k.id(),P=v[E];return{found:!0,distance:h[w],path:this.spawn(T),steps:S}}p[w]=!0;for(var C=b._private.edges,M=0;M<C.length;M++){var D=C[M];if(!!this.hasElementWithId(D.id())&&!(l&&D.data("source")!==w)){var I=D.source(),A=D.target(),Q=I.id()!==w?I:A,B=Q.id();if(!!this.hasElementWithId(B)&&!p[B]){var Y=h[w]+u(D);if(!$(B)){h[B]=Y,d[B]=Y+s(Q),O(Q,B),m[B]=b,v[B]=D;continue}Y<h[B]&&(h[B]=Y,d[B]=Y+s(Q),m[B]=b,v[B]=D)}}}}return{found:!1,distance:void 0,path:void 0,steps:S}}},OQ=fr({weight:function(e){return 1},directed:!1}),bQ={floydWarshall:function(e){for(var t=this.cy(),n=OQ(e),i=n.weight,a=n.directed,s=i,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,h=f*f,d=function(F){return u.indexOf(F)},p=function(F){return u[F]},g=new Array(h),y=0;y<h;y++){var m=y%f,v=(y-m)/f;v===m?g[y]=0:g[y]=1/0}for(var O=new Array(h),b=new Array(h),w=0;w<c.length;w++){var x=c[w],$=x.source()[0],S=x.target()[0];if($!==S){var T=d($),k=d(S),E=T*f+k,P=s(x);if(g[E]>P&&(g[E]=P,O[E]=k,b[E]=x),!a){var C=k*f+T;!a&&g[C]>P&&(g[C]=P,O[C]=T,b[C]=x)}}}for(var M=0;M<f;M++)for(var D=0;D<f;D++)for(var I=D*f+M,A=0;A<f;A++){var Q=D*f+A,B=M*f+A;g[I]+g[B]<g[Q]&&(g[Q]=g[I]+g[B],O[Q]=O[I])}var Y=function(F){return(Le(F)?t.filter(F):F)[0]},X=function(F){return d(Y(F))},W={distance:function(F,Z){var N=X(F),V=X(Z);return g[N*f+V]},path:function(F,Z){var N=X(F),V=X(Z),z=p(N);if(N===V)return z.collection();if(O[N*f+V]==null)return t.collection();var j=t.collection(),G=N,U;for(j.merge(z);N!==V;)G=N,N=O[N*f+V],U=b[G*f+N],j.merge(U),j.merge(p(N));return j}};return W}},wQ=fr({weight:function(e){return 1},directed:!1,root:null}),xQ={bellmanFord:function(e){var t=this,n=wQ(e),i=n.weight,a=n.directed,s=n.root,l=i,u=this,c=this.cy(),f=this.byGroup(),h=f.edges,d=f.nodes,p=d.length,g=new Ln,y=!1,m=[];s=c.collection(s)[0],h.unmergeBy(function(Pe){return Pe.isLoop()});for(var v=h.length,O=function(xe){var Qe=g.get(xe.id());return Qe||(Qe={},g.set(xe.id(),Qe)),Qe},b=function(xe){return(Le(xe)?c.$(xe):xe)[0]},w=function(xe){return O(b(xe)).dist},x=function(xe){for(var Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,qe=b(xe),Ye=[],Ie=qe;;){if(Ie==null)return t.spawn();var je=O(Ie),ee=je.edge,R=je.pred;if(Ye.unshift(Ie[0]),Ie.same(Qe)&&Ye.length>0)break;ee!=null&&Ye.unshift(ee),Ie=R}return u.spawn(Ye)},$=0;$<p;$++){var S=d[$],T=O(S);S.same(s)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var k=!1,E=function(xe,Qe,qe,Ye,Ie,je){var ee=Ye.dist+je;ee<Ie.dist&&!qe.same(Ye.edge)&&(Ie.dist=ee,Ie.pred=xe,Ie.edge=qe,k=!0)},P=1;P<p;P++){k=!1;for(var C=0;C<v;C++){var M=h[C],D=M.source(),I=M.target(),A=l(M),Q=O(D),B=O(I);E(D,I,M,Q,B,A),a||E(I,D,M,B,Q,A)}if(!k)break}if(k)for(var Y=[],X=0;X<v;X++){var W=h[X],q=W.source(),F=W.target(),Z=l(W),N=O(q).dist,V=O(F).dist;if(N+Z<V||!a&&V+Z<N)if(y||(ct("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),e.findNegativeWeightCycles!==!1){var z=[];N+Z<V&&z.push(q),!a&&V+Z<N&&z.push(F);for(var j=z.length,G=0;G<j;G++){var U=z[G],K=[U];K.push(O(U).edge);for(var de=O(U).pred;K.indexOf(de)===-1;)K.push(de),K.push(O(de).edge),de=O(de).pred;K=K.slice(K.indexOf(de));for(var Oe=K[0].id(),pe=0,he=2;he<K.length;he+=2)K[he].id()<Oe&&(Oe=K[he].id(),pe=he);K=K.slice(pe).concat(K.slice(0,pe)),K.push(K[0]);var me=K.map(function(Pe){return Pe.id()}).join(",");Y.indexOf(me)===-1&&(m.push(u.spawn(K)),Y.push(me))}}else break}return{distanceTo:w,pathTo:x,hasNegativeWeightCycle:y,negativeWeightCycles:m}}},SQ=Math.sqrt(2),kQ=function(e,t,n){n.length===0&&Mt("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],s=i[2],l=t[a],u=t[s],c=n,f=c.length-1;f>=0;f--){var h=c[f],d=h[1],p=h[2];(t[d]===l&&t[p]===u||t[d]===u&&t[p]===l)&&c.splice(f,1)}for(var g=0;g<c.length;g++){var y=c[g];y[1]===u?(c[g]=y.slice(),c[g][1]=l):y[2]===u&&(c[g]=y.slice(),c[g][2]=l)}for(var m=0;m<t.length;m++)t[m]===u&&(t[m]=l);return c},jf=function(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=kQ(a,e,t),n--}return t},$Q={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(B){return B.isLoop()});var a=n.length,s=i.length,l=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/SQ);if(a<2){Mt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var c=[],f=0;f<s;f++){var h=i[f];c.push([f,n.indexOf(h.source()),n.indexOf(h.target())])}for(var d=1/0,p=[],g=new Array(a),y=new Array(a),m=new Array(a),v=function(Y,X){for(var W=0;W<a;W++)X[W]=Y[W]},O=0;O<=l;O++){for(var b=0;b<a;b++)y[b]=b;var w=jf(y,c.slice(),a,u),x=w.slice();v(y,m);var $=jf(y,w,u,2),S=jf(m,x,u,2);$.length<=S.length&&$.length<d?(d=$.length,p=$,v(y,g)):S.length<=$.length&&S.length<d&&(d=S.length,p=S,v(m,g))}for(var T=this.spawn(p.map(function(B){return i[B[0]]})),k=this.spawn(),E=this.spawn(),P=g[0],C=0;C<g.length;C++){var M=g[C],D=n[C];M===P?k.merge(D):E.merge(D)}var I=function(Y){var X=e.spawn();return Y.forEach(function(W){X.merge(W),W.connectedEdges().forEach(function(q){e.contains(q)&&!T.contains(q)&&X.merge(q)})}),X},A=[I(k),I(E)],Q={cut:T,components:A,partition1:k,partition2:E};return Q}},PQ=function(e){return{x:e.x,y:e.y}},Jc=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},cb=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},rs=function(e){return{x:e[0],y:e[1]}},CQ=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=t;a<n;a++){var s=e[a];isFinite(s)&&(i=Math.min(s,i))}return i},EQ=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=t;a<n;a++){var s=e[a];isFinite(s)&&(i=Math.max(s,i))}return i},TQ=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,s=t;s<n;s++){var l=e[s];isFinite(l)&&(i+=l,a++)}return i/a},QQ=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var l=0,u=e.length-1;u>=0;u--){var c=e[u];s?isFinite(c)||(e[u]=-1/0,l++):e.splice(u,1)}a&&e.sort(function(d,p){return d-p});var f=e.length,h=Math.floor(f/2);return f%2!==0?e[h+1+l]:(e[h-1+l]+e[h+l])/2},AQ=function(e){return Math.PI*e/180},Nl=function(e,t){return Math.atan2(t,e)-Math.PI/2},Bp=Math.log2||function(r){return Math.log(r)/Math.log(2)},fb=function(e){return e>0?1:e<0?-1:0},wa=function(e,t){return Math.sqrt(oa(e,t))},oa=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},DQ=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},Ht=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},os=function(e,t,n,i){return{x:Ht(e.x,t.x,n.x,i),y:Ht(e.y,t.y,n.y,i)}},_Q=function(e,t,n,i){var a={x:t.x-e.x,y:t.y-e.y},s=wa(e,t),l={x:a.x/s,y:a.y/s};return n=n==null?0:n,i=i!=null?i:n*s,{x:e.x+l.x*i,y:e.y+l.y*i}},No=function(e,t,n){return Math.max(e,Math.min(n,t))},Br=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},MQ=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},ZQ=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},RQ=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},hb=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},LQ=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},wu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},xu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,s;if(t.length===1)n=i=a=s=t[0];else if(t.length===2)n=a=t[0],s=i=t[1];else if(t.length===4){var l=gn(t,4);n=l[0],i=l[1],a=l[2],s=l[3]}return e.x1-=s,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Pv=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Ip=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},ms=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},BQ=function(e,t){return ms(e,t.x,t.y)},db=function(e,t){return ms(e,t.x1,t.y1)&&ms(e,t.x2,t.y2)},pb=function(e,t,n,i,a,s,l){var u=yl(a,s),c=a/2,f=s/2,h;{var d=n-c+u-l,p=i-f-l,g=n+c-u+l,y=p;if(h=ki(e,t,n,i,d,p,g,y,!1),h.length>0)return h}{var m=n+c+l,v=i-f+u-l,O=m,b=i+f-u+l;if(h=ki(e,t,n,i,m,v,O,b,!1),h.length>0)return h}{var w=n-c+u-l,x=i+f+l,$=n+c-u+l,S=x;if(h=ki(e,t,n,i,w,x,$,S,!1),h.length>0)return h}{var T=n-c-l,k=i-f+u-l,E=T,P=i+f-u+l;if(h=ki(e,t,n,i,T,k,E,P,!1),h.length>0)return h}var C;{var M=n-c+u,D=i-f+u;if(C=ho(e,t,n,i,M,D,u+l),C.length>0&&C[0]<=M&&C[1]<=D)return[C[0],C[1]]}{var I=n+c-u,A=i-f+u;if(C=ho(e,t,n,i,I,A,u+l),C.length>0&&C[0]>=I&&C[1]<=A)return[C[0],C[1]]}{var Q=n+c-u,B=i+f-u;if(C=ho(e,t,n,i,Q,B,u+l),C.length>0&&C[0]>=Q&&C[1]>=B)return[C[0],C[1]]}{var Y=n-c+u,X=i+f-u;if(C=ho(e,t,n,i,Y,X,u+l),C.length>0&&C[0]<=Y&&C[1]>=X)return[C[0],C[1]]}return[]},IQ=function(e,t,n,i,a,s,l){var u=l,c=Math.min(n,a),f=Math.max(n,a),h=Math.min(i,s),d=Math.max(i,s);return c-u<=e&&e<=f+u&&h-u<=t&&t<=d+u},NQ=function(e,t,n,i,a,s,l,u,c){var f={x1:Math.min(n,l,a)-c,x2:Math.max(n,l,a)+c,y1:Math.min(i,u,s)-c,y2:Math.max(i,u,s)+c};return!(e<f.x1||e>f.x2||t<f.y1||t>f.y2)},zQ=function(e,t,n,i){n-=i;var a=t*t-4*e*n;if(a<0)return[];var s=Math.sqrt(a),l=2*e,u=(-t+s)/l,c=(-t-s)/l;return[u,c]},WQ=function(e,t,n,i,a){var s=1e-5;e===0&&(e=s),t/=e,n/=e,i/=e;var l,u,c,f,h,d,p,g;if(u=(3*n-t*t)/9,c=-(27*i)+t*(9*n-2*(t*t)),c/=54,l=u*u*u+c*c,a[1]=0,p=t/3,l>0){h=c+Math.sqrt(l),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),d=c-Math.sqrt(l),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),a[0]=-p+h+d,p+=(h+d)/2,a[4]=a[2]=-p,p=Math.sqrt(3)*(-d+h)/2,a[3]=p,a[5]=-p;return}if(a[5]=a[3]=0,l===0){g=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),a[0]=-p+2*g,a[4]=a[2]=-(g+p);return}u=-u,f=u*u*u,f=Math.acos(c/Math.sqrt(f)),g=2*Math.sqrt(u),a[0]=-p+g*Math.cos(f/3),a[2]=-p+g*Math.cos((f+2*Math.PI)/3),a[4]=-p+g*Math.cos((f+4*Math.PI)/3)},qQ=function(e,t,n,i,a,s,l,u){var c=1*n*n-4*n*a+2*n*l+4*a*a-4*a*l+l*l+i*i-4*i*s+2*i*u+4*s*s-4*s*u+u*u,f=1*9*n*a-3*n*n-3*n*l-6*a*a+3*a*l+9*i*s-3*i*i-3*i*u-6*s*s+3*s*u,h=1*3*n*n-6*n*a+n*l-n*e+2*a*a+2*a*e-l*e+3*i*i-6*i*s+i*u-i*t+2*s*s+2*s*t-u*t,d=1*n*a-n*n+n*e-a*e+i*s-i*i+i*t-s*t,p=[];WQ(c,f,h,d,p);for(var g=1e-7,y=[],m=0;m<6;m+=2)Math.abs(p[m+1])<g&&p[m]>=0&&p[m]<=1&&y.push(p[m]);y.push(1),y.push(0);for(var v=-1,O,b,w,x=0;x<y.length;x++)O=Math.pow(1-y[x],2)*n+2*(1-y[x])*y[x]*a+y[x]*y[x]*l,b=Math.pow(1-y[x],2)*i+2*(1-y[x])*y[x]*s+y[x]*y[x]*u,w=Math.pow(O-e,2)+Math.pow(b-t,2),v>=0?w<v&&(v=w):v=w;return v},YQ=function(e,t,n,i,a,s){var l=[e-n,t-i],u=[a-n,s-i],c=u[0]*u[0]+u[1]*u[1],f=l[0]*l[0]+l[1]*l[1],h=l[0]*u[0]+l[1]*u[1],d=h*h/c;return h<0?f:d>c?(e-a)*(e-a)+(t-s)*(t-s):f-d},_r=function(e,t,n){for(var i,a,s,l,u,c=0,f=0;f<n.length/2;f++)if(i=n[f*2],a=n[f*2+1],f+1<n.length/2?(s=n[(f+1)*2],l=n[(f+1)*2+1]):(s=n[(f+1-n.length/2)*2],l=n[(f+1-n.length/2)*2+1]),!(i==e&&s==e))if(i>=e&&e>=s||i<=e&&e<=s)u=(e-i)/(s-i)*(l-a)+a,u>t&&c++;else continue;return c%2!==0},ai=function(e,t,n,i,a,s,l,u,c){var f=new Array(n.length),h;u[0]!=null?(h=Math.atan(u[1]/u[0]),u[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=u;for(var d=Math.cos(-h),p=Math.sin(-h),g=0;g<f.length/2;g++)f[g*2]=s/2*(n[g*2]*d-n[g*2+1]*p),f[g*2+1]=l/2*(n[g*2+1]*d+n[g*2]*p),f[g*2]+=i,f[g*2+1]+=a;var y;if(c>0){var m=Vu(f,-c);y=Xu(m)}else y=f;return _r(e,t,y)},XQ=function(e,t,n,i,a,s,l){for(var u=new Array(n.length),c=s/2,f=l/2,h=Np(s,l),d=h*h,p=0;p<n.length/4;p++){var g=void 0,y=void 0;p===0?g=n.length-2:g=p*4-2,y=p*4+2;var m=i+c*n[p*4],v=a+f*n[p*4+1],O=-n[g]*n[y]-n[g+1]*n[y+1],b=h/Math.tan(Math.acos(O)/2),w=m-b*n[g],x=v-b*n[g+1],$=m+b*n[y],S=v+b*n[y+1];u[p*4]=w,u[p*4+1]=x,u[p*4+2]=$,u[p*4+3]=S;var T=n[g+1],k=-n[g],E=T*n[y]+k*n[y+1];E<0&&(T*=-1,k*=-1);var P=w+T*h,C=x+k*h,M=Math.pow(P-e,2)+Math.pow(C-t,2);if(M<=d)return!0}return _r(e,t,u)},Xu=function(e){for(var t=new Array(e.length/2),n,i,a,s,l,u,c,f,h=0;h<e.length/4;h++){n=e[h*4],i=e[h*4+1],a=e[h*4+2],s=e[h*4+3],h<e.length/4-1?(l=e[(h+1)*4],u=e[(h+1)*4+1],c=e[(h+1)*4+2],f=e[(h+1)*4+3]):(l=e[0],u=e[1],c=e[2],f=e[3]);var d=ki(n,i,a,s,l,u,c,f,!0);t[h*2]=d[0],t[h*2+1]=d[1]}return t},Vu=function(e,t){for(var n=new Array(e.length*2),i,a,s,l,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],l=e[(u+1)*2+1]):(s=e[0],l=e[1]);var c=l-a,f=-(s-i),h=Math.sqrt(c*c+f*f),d=c/h,p=f/h;n[u*4]=i+d*t,n[u*4+1]=a+p*t,n[u*4+2]=s+d*t,n[u*4+3]=l+p*t}return n},VQ=function(e,t,n,i,a,s){var l=n-e,u=i-t;l/=a,u/=s;var c=Math.sqrt(l*l+u*u),f=c-1;if(f<0)return[];var h=f/c;return[(n-e)*h+e,(i-t)*h+t]},ha=function(e,t,n,i,a,s,l){return e-=a,t-=s,e/=n/2+l,t/=i/2+l,e*e+t*t<=1},ho=function(e,t,n,i,a,s,l){var u=[n-e,i-t],c=[e-a,t-s],f=u[0]*u[0]+u[1]*u[1],h=2*(c[0]*u[0]+c[1]*u[1]),d=c[0]*c[0]+c[1]*c[1]-l*l,p=h*h-4*f*d;if(p<0)return[];var g=(-h+Math.sqrt(p))/(2*f),y=(-h-Math.sqrt(p))/(2*f),m=Math.min(g,y),v=Math.max(g,y),O=[];if(m>=0&&m<=1&&O.push(m),v>=0&&v<=1&&O.push(v),O.length===0)return[];var b=O[0]*u[0]+e,w=O[0]*u[1]+t;if(O.length>1){if(O[0]==O[1])return[b,w];var x=O[1]*u[0]+e,$=O[1]*u[1]+t;return[b,w,x,$]}else return[b,w]},Gf=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},ki=function(e,t,n,i,a,s,l,u,c){var f=e-a,h=n-e,d=l-a,p=t-s,g=i-t,y=u-s,m=d*p-y*f,v=h*p-g*f,O=y*h-d*g;if(O!==0){var b=m/O,w=v/O,x=.001,$=0-x,S=1+x;return $<=b&&b<=S&&$<=w&&w<=S?[e+b*h,t+b*g]:c?[e+b*h,t+b*g]:[]}else return m===0||v===0?Gf(e,n,l)===l?[l,u]:Gf(e,n,a)===a?[a,s]:Gf(a,l,n)===n?[n,i]:[]:[]},zo=function(e,t,n,i,a,s,l,u){var c=[],f,h=new Array(n.length),d=!0;s==null&&(d=!1);var p;if(d){for(var g=0;g<h.length/2;g++)h[g*2]=n[g*2]*s+i,h[g*2+1]=n[g*2+1]*l+a;if(u>0){var y=Vu(h,-u);p=Xu(y)}else p=h}else p=n;for(var m,v,O,b,w=0;w<p.length/2;w++)m=p[w*2],v=p[w*2+1],w<p.length/2-1?(O=p[(w+1)*2],b=p[(w+1)*2+1]):(O=p[0],b=p[1]),f=ki(e,t,i,a,m,v,O,b),f.length!==0&&c.push(f[0],f[1]);return c},FQ=function(e,t,n,i,a,s,l,u){for(var c=[],f,h=new Array(n.length),d=s/2,p=l/2,g=Np(s,l),y=0;y<n.length/4;y++){var m=void 0,v=void 0;y===0?m=n.length-2:m=y*4-2,v=y*4+2;var O=i+d*n[y*4],b=a+p*n[y*4+1],w=-n[m]*n[v]-n[m+1]*n[v+1],x=g/Math.tan(Math.acos(w)/2),$=O-x*n[m],S=b-x*n[m+1],T=O+x*n[v],k=b+x*n[v+1];y===0?(h[n.length-2]=$,h[n.length-1]=S):(h[y*4-2]=$,h[y*4-1]=S),h[y*4]=T,h[y*4+1]=k;var E=n[m+1],P=-n[m],C=E*n[v]+P*n[v+1];C<0&&(E*=-1,P*=-1);var M=$+E*g,D=S+P*g;f=ho(e,t,i,a,M,D,g),f.length!==0&&c.push(f[0],f[1])}for(var I=0;I<h.length/4;I++)f=ki(e,t,i,a,h[I*4],h[I*4+1],h[I*4+2],h[I*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var A=[c[0],c[1]],Q=Math.pow(A[0]-e,2)+Math.pow(A[1]-t,2),B=1;B<c.length/2;B++){var Y=Math.pow(c[B*2]-e,2)+Math.pow(c[B*2+1]-t,2);Y<=Q&&(A[0]=c[B*2],A[1]=c[B*2+1],Q=Y)}return A}return c},zl=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(a-n)/a;return s<0&&(s=1e-5),[t[0]+s*i[0],t[1]+s*i[1]]},$r=function(e,t){var n=Kh(e,t);return n=gb(n),n},gb=function(e){for(var t,n,i=e.length/2,a=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<i;c++)t=e[2*c],n=e[2*c+1],a=Math.min(a,t),l=Math.max(l,t),s=Math.min(s,n),u=Math.max(u,n);for(var f=2/(l-a),h=2/(u-s),d=0;d<i;d++)t=e[2*d]=e[2*d]*f,n=e[2*d+1]=e[2*d+1]*h,a=Math.min(a,t),l=Math.max(l,t),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var p=0;p<i;p++)n=e[2*p+1]=e[2*p+1]+(-1-s);return e},Kh=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=new Array(e*2),s,l=0;l<e;l++)s=l*n+i,a[2*l]=Math.cos(s),a[2*l+1]=Math.sin(-s);return a},yl=function(e,t){return Math.min(e/4,t/4,8)},Np=function(e,t){return Math.min(e/10,t/10,8)},vb=function(){return 8},jQ=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Jh=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},GQ=fr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),UQ={pageRank:function(e){for(var t=GQ(e),n=t.dampingFactor,i=t.precision,a=t.iterations,s=t.weight,l=this._private.cy,u=this.byGroup(),c=u.nodes,f=u.edges,h=c.length,d=h*h,p=f.length,g=new Array(d),y=new Array(h),m=(1-n)/h,v=0;v<h;v++){for(var O=0;O<h;O++){var b=v*h+O;g[b]=0}y[v]=0}for(var w=0;w<p;w++){var x=f[w],$=x.data("source"),S=x.data("target");if($!==S){var T=c.indexOfId($),k=c.indexOfId(S),E=s(x),P=k*h+T;g[P]+=E,y[T]+=E}}for(var C=1/h+m,M=0;M<h;M++)if(y[M]===0)for(var D=0;D<h;D++){var I=D*h+M;g[I]=C}else for(var A=0;A<h;A++){var Q=A*h+M;g[Q]=g[Q]/y[M]+m}for(var B=new Array(h),Y=new Array(h),X,W=0;W<h;W++)B[W]=1;for(var q=0;q<a;q++){for(var F=0;F<h;F++)Y[F]=0;for(var Z=0;Z<h;Z++)for(var N=0;N<h;N++){var V=Z*h+N;Y[Z]+=g[V]*B[N]}DQ(Y),X=B,B=Y,Y=X;for(var z=0,j=0;j<h;j++){var G=X[j]-B[j];z+=G*G}if(z<i)break}var U={rank:function(de){return de=l.collection(de)[0],B[c.indexOf(de)]}};return U}},Cv=fr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ls={degreeCentralityNormalized:function(e){e=Cv(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var f={},h={},d=0,p=0,g=0;g<i;g++){var y=n[g],m=y.id();e.root=y;var v=this.degreeCentrality(e);d<v.indegree&&(d=v.indegree),p<v.outdegree&&(p=v.outdegree),f[m]=v.indegree,h[m]=v.outdegree}return{indegree:function(b){return d==0?0:(Le(b)&&(b=t.filter(b)),f[b.id()]/d)},outdegree:function(b){return p===0?0:(Le(b)&&(b=t.filter(b)),h[b.id()]/p)}}}else{for(var a={},s=0,l=0;l<i;l++){var u=n[l];e.root=u;var c=this.degreeCentrality(e);s<c.degree&&(s=c.degree),a[u.id()]=c.degree}return{degree:function(b){return s===0?0:(Le(b)&&(b=t.filter(b)),a[b.id()]/s)}}}},degreeCentrality:function(e){e=Cv(e);var t=this.cy(),n=this,i=e,a=i.root,s=i.weight,l=i.directed,u=i.alpha;if(a=t.collection(a)[0],l){for(var p=a.connectedEdges(),g=p.filter(function($){return $.target().same(a)&&n.has($)}),y=p.filter(function($){return $.source().same(a)&&n.has($)}),m=g.length,v=y.length,O=0,b=0,w=0;w<g.length;w++)O+=s(g[w]);for(var x=0;x<y.length;x++)b+=s(y[x]);return{indegree:Math.pow(m,1-u)*Math.pow(O,u),outdegree:Math.pow(v,1-u)*Math.pow(b,u)}}else{for(var c=a.connectedEdges().intersection(n),f=c.length,h=0,d=0;d<c.length;d++)h+=s(c[d]);return{degree:Math.pow(f,1-u)*Math.pow(h,u)}}}};ls.dc=ls.degreeCentrality;ls.dcn=ls.degreeCentralityNormalised=ls.degreeCentralityNormalized;var Ev=fr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),us={closenessCentralityNormalized:function(e){for(var t=Ev(e),n=t.harmonic,i=t.weight,a=t.directed,s=this.cy(),l={},u=0,c=this.nodes(),f=this.floydWarshall({weight:i,directed:a}),h=0;h<c.length;h++){for(var d=0,p=c[h],g=0;g<c.length;g++)if(h!==g){var y=f.distance(p,c[g]);n?d+=1/y:d+=y}n||(d=1/d),u<d&&(u=d),l[p.id()]=d}return{closeness:function(v){return u==0?0:(Le(v)?v=s.filter(v)[0].id():v=v.id(),l[v]/u)}}},closenessCentrality:function(e){var t=Ev(e),n=t.root,i=t.weight,a=t.directed,s=t.harmonic;n=this.filter(n)[0];for(var l=this.dijkstra({root:n,weight:i,directed:a}),u=0,c=this.nodes(),f=0;f<c.length;f++){var h=c[f];if(!h.same(n)){var d=l.distanceTo(h);s?u+=1/d:u+=d}}return s?u:1/u}};us.cc=us.closenessCentrality;us.ccn=us.closenessCentralityNormalised=us.closenessCentralityNormalized;var HQ=fr({weight:null,directed:!1}),ed={betweennessCentrality:function(e){for(var t=HQ(e),n=t.directed,i=t.weight,a=i!=null,s=this.cy(),l=this.nodes(),u={},c={},f=0,h={set:function(b,w){c[b]=w,w>f&&(f=w)},get:function(b){return c[b]}},d=0;d<l.length;d++){var p=l[d],g=p.id();n?u[g]=p.outgoers().nodes():u[g]=p.openNeighborhood().nodes(),h.set(g,0)}for(var y=function(b){for(var w=l[b].id(),x=[],$={},S={},T={},k=new gl.default(function(N,V){return T[N]-T[V]}),E=0;E<l.length;E++){var P=l[E].id();$[P]=[],S[P]=0,T[P]=1/0}for(S[w]=1,T[w]=0,k.push(w);!k.empty();){var C=k.pop();if(x.push(C),a)for(var M=0;M<u[C].length;M++){var D=u[C][M],I=s.getElementById(C),A=void 0;I.edgesTo(D).length>0?A=I.edgesTo(D)[0]:A=D.edgesTo(I)[0];var Q=i(A);D=D.id(),T[D]>T[C]+Q&&(T[D]=T[C]+Q,k.nodes.indexOf(D)<0?k.push(D):k.updateItem(D),S[D]=0,$[D]=[]),T[D]==T[C]+Q&&(S[D]=S[D]+S[C],$[D].push(C))}else for(var B=0;B<u[C].length;B++){var Y=u[C][B].id();T[Y]==1/0&&(k.push(Y),T[Y]=T[C]+1),T[Y]==T[C]+1&&(S[Y]=S[Y]+S[C],$[Y].push(C))}}for(var X={},W=0;W<l.length;W++)X[l[W].id()]=0;for(;x.length>0;){for(var q=x.pop(),F=0;F<$[q].length;F++){var Z=$[q][F];X[Z]=X[Z]+S[Z]/S[q]*(1+X[q])}q!=l[b].id()&&h.set(q,h.get(q)+X[q])}},m=0;m<l.length;m++)y(m);var v={betweenness:function(b){var w=s.collection(b).id();return h.get(w)},betweennessNormalized:function(b){if(f==0)return 0;var w=s.collection(b).id();return h.get(w)/f}};return v.betweennessNormalised=v.betweennessNormalized,v}};ed.bc=ed.betweennessCentrality;var KQ=fr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),JQ=function(e){return KQ(e)},eA=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},tA=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},mb=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var s=0;s<t;s++)e[s*t+i]=e[s*t+i]/n}},rA=function(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var s=0;s<n;s++)i[a*n+s]=0;for(var l=0;l<n;l++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+l]*t[l*n+u]}return i},nA=function(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=rA(e,i,t);return e},iA=function(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return mb(i,t),i},aA=function(e,t,n,i){for(var a=0;a<n;a++){var s=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),l=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i);if(s!==l)return!1}return!0},sA=function(e,t,n,i){for(var a=[],s=0;s<t;s++){for(var l=[],u=0;u<t;u++)Math.round(e[s*t+u]*1e3)/1e3>0&&l.push(n[u]);l.length!==0&&a.push(i.collection(l))}return a},oA=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},lA=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&oA(e[t],e[n])&&e.splice(n,1);return e},Tv=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=JQ(e),s={},l=0;l<t.length;l++)s[t[l].id()]=l;for(var u=t.length,c=u*u,f=new Array(c),h,d=0;d<c;d++)f[d]=0;for(var p=0;p<n.length;p++){var g=n[p],y=s[g.source().id()],m=s[g.target().id()],v=eA(g,a.attributes);f[y*u+m]+=v,f[m*u+y]+=v}tA(f,u,a.multFactor),mb(f,u);for(var O=!0,b=0;O&&b<a.maxIterations;)O=!1,h=nA(f,u,a.expandFactor),f=iA(h,u,a.inflateFactor),aA(f,h,c,4)||(O=!0),b++;var w=sA(f,u,t,i);return w=lA(w),w},uA={markovClustering:Tv,mcl:Tv},cA=function(e){return e},yb=function(e,t){return Math.abs(t-e)},Qv=function(e,t,n){return e+yb(t,n)},Av=function(e,t,n){return e+Math.pow(n-t,2)},fA=function(e){return Math.sqrt(e)},hA=function(e,t,n){return Math.max(e,yb(t,n))},Ks=function(e,t,n,i,a){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:cA,l=i,u,c,f=0;f<e;f++)u=t(f),c=n(f),l=a(l,u,c);return s(l)},ys={euclidean:function(e,t,n){return e>=2?Ks(e,t,n,0,Av,fA):Ks(e,t,n,0,Qv)},squaredEuclidean:function(e,t,n){return Ks(e,t,n,0,Av)},manhattan:function(e,t,n){return Ks(e,t,n,0,Qv)},max:function(e,t,n){return Ks(e,t,n,-1/0,hA)}};ys["squared-euclidean"]=ys.squaredEuclidean;ys.squaredeuclidean=ys.squaredEuclidean;function ef(r,e,t,n,i,a){var s;return _t(r)?s=r:s=ys[r]||ys.euclidean,e===0&&_t(r)?s(i,a):s(e,t,n,i,a)}var dA=fr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),zp=function(e){return dA(e)},Fu=function(e,t,n,i,a){var s=a!=="kMedoids",l=s?function(h){return n[h]}:function(h){return i[h](n)},u=function(d){return i[d](t)},c=n,f=t;return ef(e,i.length,l,u,c,f)},Uf=function(e,t,n){for(var i=n.length,a=new Array(i),s=new Array(i),l=new Array(t),u=null,c=0;c<i;c++)a[c]=e.min(n[c]).value,s[c]=e.max(n[c]).value;for(var f=0;f<t;f++){u=[];for(var h=0;h<i;h++)u[h]=Math.random()*(s[h]-a[h])+a[h];l[f]=u}return l},Ob=function(e,t,n,i,a){for(var s=1/0,l=0,u=0;u<t.length;u++){var c=Fu(n,e,t[u],i,a);c<s&&(s=c,l=u)}return l},bb=function(e,t,n){for(var i=[],a=null,s=0;s<t.length;s++)a=t[s],n[a.id()]===e&&i.push(a);return i},pA=function(e,t,n){return Math.abs(t-e)<=n},gA=function(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var s=Math.abs(e[i][a]-t[i][a]);if(s>n)return!1}return!0},vA=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},Dv=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];vA(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var s=0;s<t;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},_v=function(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=Fu("manhattan",t[a],e,n,"kMedoids");return i},mA=function(e){var t=this.cy(),n=this.nodes(),i=null,a=zp(e),s=new Array(a.k),l={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=Uf(n,a.k,a.attributes)):Gt(a.testCentroids)==="object"?u=a.testCentroids:u=Uf(n,a.k,a.attributes):u=Uf(n,a.k,a.attributes);for(var c=!0,f=0;c&&f<a.maxIterations;){for(var h=0;h<n.length;h++)i=n[h],l[i.id()]=Ob(i,u,a.distance,a.attributes,"kMeans");c=!1;for(var d=0;d<a.k;d++){var p=bb(d,n,l);if(p.length!==0){for(var g=a.attributes.length,y=u[d],m=new Array(g),v=new Array(g),O=0;O<g;O++){v[O]=0;for(var b=0;b<p.length;b++)i=p[b],v[O]+=a.attributes[O](i);m[O]=v[O]/p.length,pA(m[O],y[O],a.sensitivityThreshold)||(c=!0)}u[d]=m,s[d]=t.collection(p)}}f++}return s},yA=function(e){var t=this.cy(),n=this.nodes(),i=null,a=zp(e),s=new Array(a.k),l,u={},c,f=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Gt(a.testCentroids)==="object"?l=a.testCentroids:l=Dv(n,a.k)):l=Dv(n,a.k);for(var h=!0,d=0;h&&d<a.maxIterations;){for(var p=0;p<n.length;p++)i=n[p],u[i.id()]=Ob(i,l,a.distance,a.attributes,"kMedoids");h=!1;for(var g=0;g<l.length;g++){var y=bb(g,n,u);if(y.length!==0){f[g]=_v(l[g],y,a.attributes);for(var m=0;m<y.length;m++)c=_v(y[m],y,a.attributes),c<f[g]&&(f[g]=c,l[g]=y[m],h=!0);s[g]=t.collection(y)}}d++}return s},OA=function(e,t,n,i,a){for(var s,l,u=0;u<t.length;u++)for(var c=0;c<e.length;c++)i[u][c]=Math.pow(n[u][c],a.m);for(var f=0;f<e.length;f++)for(var h=0;h<a.attributes.length;h++){s=0,l=0;for(var d=0;d<t.length;d++)s+=i[d][f]*a.attributes[h](t[d]),l+=i[d][f];e[f][h]=s/l}},bA=function(e,t,n,i,a){for(var s=0;s<e.length;s++)t[s]=e[s].slice();for(var l,u,c,f=2/(a.m-1),h=0;h<n.length;h++)for(var d=0;d<i.length;d++){l=0;for(var p=0;p<n.length;p++)u=Fu(a.distance,i[d],n[h],a.attributes,"cmeans"),c=Fu(a.distance,i[d],n[p],a.attributes,"cmeans"),l+=Math.pow(u/c,f);e[d][h]=1/l}},wA=function(e,t,n,i){for(var a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var l,u,c=0;c<t.length;c++){l=-1/0,u=-1;for(var f=0;f<t[0].length;f++)t[c][f]>l&&(l=t[c][f],u=f);a[u].push(e[c])}for(var h=0;h<a.length;h++)a[h]=i.collection(a[h]);return a},Mv=function(e){var t=this.cy(),n=this.nodes(),i=zp(e),a,s,l,u,c;u=new Array(n.length);for(var f=0;f<n.length;f++)u[f]=new Array(i.k);l=new Array(n.length);for(var h=0;h<n.length;h++)l[h]=new Array(i.k);for(var d=0;d<n.length;d++){for(var p=0,g=0;g<i.k;g++)l[d][g]=Math.random(),p+=l[d][g];for(var y=0;y<i.k;y++)l[d][y]=l[d][y]/p}s=new Array(i.k);for(var m=0;m<i.k;m++)s[m]=new Array(i.attributes.length);c=new Array(n.length);for(var v=0;v<n.length;v++)c[v]=new Array(i.k);for(var O=!0,b=0;O&&b<i.maxIterations;)O=!1,OA(s,n,l,c,i),bA(l,u,s,n,i),gA(l,u,i.sensitivityThreshold)||(O=!0),b++;return a=wA(n,l,i,t),{clusters:a,degreeOfMembership:l}},xA={kMeans:mA,kMedoids:yA,fuzzyCMeans:Mv,fcm:Mv},SA=fr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),kA={single:"min",complete:"max"},$A=function(e){var t=SA(e),n=kA[t.linkage];return n!=null&&(t.linkage=n),t},Zv=function(e,t,n,i,a){for(var s=0,l=1/0,u,c=a.attributes,f=function(k,E){return ef(a.distance,c.length,function(P){return c[P](k)},function(P){return c[P](E)},k,E)},h=0;h<e.length;h++){var d=e[h].key,p=n[d][i[d]];p<l&&(s=d,l=p)}if(a.mode==="threshold"&&l>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var g=t[s],y=t[i[s]],m;a.mode==="dendrogram"?m={left:g,right:y,key:g.key}:m={value:g.value.concat(y.value),key:g.key},e[g.index]=m,e.splice(y.index,1),t[g.key]=m;for(var v=0;v<e.length;v++){var O=e[v];g.key===O.key?u=1/0:a.linkage==="min"?(u=n[g.key][O.key],n[g.key][O.key]>n[y.key][O.key]&&(u=n[y.key][O.key])):a.linkage==="max"?(u=n[g.key][O.key],n[g.key][O.key]<n[y.key][O.key]&&(u=n[y.key][O.key])):a.linkage==="mean"?u=(n[g.key][O.key]*g.size+n[y.key][O.key]*y.size)/(g.size+y.size):a.mode==="dendrogram"?u=f(O.value,g.value):u=f(O.value[0],g.value[0]),n[g.key][O.key]=n[O.key][g.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(i[w]===g.key||i[w]===y.key){for(var x=w,$=0;$<e.length;$++){var S=e[$].key;n[w][S]<n[w][x]&&(x=S)}i[w]=x}e[b].index=b}return g.key=y.key=g.index=y.index=null,!0},Wl=function r(e,t,n){!e||(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},PA=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),i=r(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},CA=function r(e,t,n){if(!e)return[];var i=[],a=[],s=[];return t===0?(e.left&&Wl(e.left,i),e.right&&Wl(e.right,a),s=i.concat(a),[n.collection(s)]):t===1?e.value?[n.collection(e.value)]:(e.left&&Wl(e.left,i),e.right&&Wl(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=r(e.left,t-1,n)),e.right&&(a=r(e.right,t-1,n)),i.concat(a))},Rv=function(e){for(var t=this.cy(),n=this.nodes(),i=$A(e),a=i.attributes,s=function(b,w){return ef(i.distance,a.length,function(x){return a[x](b)},function(x){return a[x](w)},b,w)},l=[],u=[],c=[],f=[],h=0;h<n.length;h++){var d={value:i.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};l[h]=d,f[h]=d,u[h]=[],c[h]=0}for(var p=0;p<l.length;p++)for(var g=0;g<=p;g++){var y=void 0;i.mode==="dendrogram"?y=p===g?1/0:s(l[p].value,l[g].value):y=p===g?1/0:s(l[p].value[0],l[g].value[0]),u[p][g]=y,u[g][p]=y,y<u[p][c[p]]&&(c[p]=g)}for(var m=Zv(l,f,u,c,i);m;)m=Zv(l,f,u,c,i);var v;return i.mode==="dendrogram"?(v=CA(l[0],i.dendrogramDepth,t),i.addDendrogram&&PA(l[0],t)):(v=new Array(l.length),l.forEach(function(O,b){O.key=O.index=null,v[b]=t.collection(O.value)})),v},EA={hierarchicalClustering:Rv,hca:Rv},TA=fr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),QA=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||Mt("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||ve(n)||Mt("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),TA(e)},AA=function(e,t,n,i){var a=function(l,u){return i[u](l)};return-ef(e,i.length,function(s){return a(t,s)},function(s){return a(n,s)},t,n)},DA=function(e,t){var n=null;return t==="median"?n=QQ(e):t==="mean"?n=TQ(e):t==="min"?n=CQ(e):t==="max"?n=EQ(e):n=t,n},_A=function(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i},Lv=function(e,t,n){for(var i=[],a=0;a<e;a++){for(var s=-1,l=-1/0,u=0;u<n.length;u++){var c=n[u];t[a*e+c]>l&&(s=c,l=t[a*e+c])}s>0&&i.push(s)}for(var f=0;f<n.length;f++)i[n[f]]=n[f];return i},MA=function(e,t,n){for(var i=Lv(e,t,n),a=0;a<n.length;a++){for(var s=[],l=0;l<i.length;l++)i[l]===n[a]&&s.push(l);for(var u=-1,c=-1/0,f=0;f<s.length;f++){for(var h=0,d=0;d<s.length;d++)h+=t[s[d]*e+s[f]];h>c&&(u=f,c=h)}n[a]=s[u]}return i=Lv(e,t,n),i},Bv=function(e){for(var t=this.cy(),n=this.nodes(),i=QA(e),a={},s=0;s<n.length;s++)a[n[s].id()]=s;var l,u,c,f,h,d;l=n.length,u=l*l,c=new Array(u);for(var p=0;p<u;p++)c[p]=-1/0;for(var g=0;g<l;g++)for(var y=0;y<l;y++)g!==y&&(c[g*l+y]=AA(i.distance,n[g],n[y],i.attributes));f=DA(c,i.preference);for(var m=0;m<l;m++)c[m*l+m]=f;h=new Array(u);for(var v=0;v<u;v++)h[v]=0;d=new Array(u);for(var O=0;O<u;O++)d[O]=0;for(var b=new Array(l),w=new Array(l),x=new Array(l),$=0;$<l;$++)b[$]=0,w[$]=0,x[$]=0;for(var S=new Array(l*i.minIterations),T=0;T<S.length;T++)S[T]=0;var k;for(k=0;k<i.maxIterations;k++){for(var E=0;E<l;E++){for(var P=-1/0,C=-1/0,M=-1,D=0,I=0;I<l;I++)b[I]=h[E*l+I],D=d[E*l+I]+c[E*l+I],D>=P?(C=P,P=D,M=I):D>C&&(C=D);for(var A=0;A<l;A++)h[E*l+A]=(1-i.damping)*(c[E*l+A]-P)+i.damping*b[A];h[E*l+M]=(1-i.damping)*(c[E*l+M]-C)+i.damping*b[M]}for(var Q=0;Q<l;Q++){for(var B=0,Y=0;Y<l;Y++)b[Y]=d[Y*l+Q],w[Y]=Math.max(0,h[Y*l+Q]),B+=w[Y];B-=w[Q],w[Q]=h[Q*l+Q],B+=w[Q];for(var X=0;X<l;X++)d[X*l+Q]=(1-i.damping)*Math.min(0,B-w[X])+i.damping*b[X];d[Q*l+Q]=(1-i.damping)*(B-w[Q])+i.damping*b[Q]}for(var W=0,q=0;q<l;q++){var F=d[q*l+q]+h[q*l+q]>0?1:0;S[k%i.minIterations*l+q]=F,W+=F}if(W>0&&(k>=i.minIterations-1||k==i.maxIterations-1)){for(var Z=0,N=0;N<l;N++){x[N]=0;for(var V=0;V<i.minIterations;V++)x[N]+=S[V*l+N];(x[N]===0||x[N]===i.minIterations)&&Z++}if(Z===l)break}}for(var z=_A(l,h,d),j=MA(l,c,z),G={},U=0;U<z.length;U++)G[z[U]]=[];for(var K=0;K<n.length;K++){var de=a[n[K].id()],Oe=j[de];Oe!=null&&G[Oe].push(n[K])}for(var pe=new Array(z.length),he=0;he<z.length;he++)pe[he]=t.collection(G[z[he]]);return pe},ZA={affinityPropagation:Bv,ap:Bv},RA=fr({root:void 0,directed:!1}),LA={hierholzer:function(e){if(!it(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=RA(e),i=n.root,a=n.directed,s=this,l=!1,u,c,f;i&&(f=Le(i)?this.filter(i)[0].id():i[0].id());var h={},d={};a?s.forEach(function(O){var b=O.id();if(O.isNode()){var w=O.indegree(!0),x=O.outdegree(!0),$=w-x,S=x-w;$==1?u?l=!0:u=b:S==1?c?l=!0:c=b:(S>1||$>1)&&(l=!0),h[b]=[],O.outgoers().forEach(function(T){T.isEdge()&&h[b].push(T.id())})}else d[b]=[void 0,O.target().id()]}):s.forEach(function(O){var b=O.id();if(O.isNode()){var w=O.degree(!0);w%2&&(u?c?l=!0:c=b:u=b),h[b]=[],O.connectedEdges().forEach(function(x){return h[b].push(x.id())})}else d[b]=[O.source().id(),O.target().id()]});var p={found:!1,trail:void 0};if(l)return p;if(c&&u)if(a){if(f&&c!=f)return p;f=c}else{if(f&&c!=f&&u!=f)return p;f||(f=c)}else f||(f=s[0].id());var g=function(b){for(var w=b,x=[b],$,S,T;h[w].length;)$=h[w].shift(),S=d[$][0],T=d[$][1],w!=T?(h[T]=h[T].filter(function(k){return k!=$}),w=T):!a&&w!=S&&(h[S]=h[S].filter(function(k){return k!=$}),w=S),x.unshift($),x.unshift(w);return x},y=[],m=[];for(m=g(f);m.length!=1;)h[m[0]].length==0?(y.unshift(s.getElementById(m.shift())),y.unshift(s.getElementById(m.shift()))):m=g(m.shift()).concat(m);y.unshift(s.getElementById(m.shift()));for(var v in h)if(h[v].length)return p;return p.found=!0,p.trail=this.spawn(y,!0),p}},ql=function(){var e=this,t={},n=0,i=0,a=[],s=[],l={},u=function(d,p){for(var g=s.length-1,y=[],m=e.spawn();s[g].x!=d||s[g].y!=p;)y.push(s.pop().edge),g--;y.push(s.pop().edge),y.forEach(function(v){var O=v.connectedNodes().intersection(e);m.merge(v),O.forEach(function(b){var w=b.id(),x=b.connectedEdges().intersection(e);m.merge(b),t[w].cutVertex?m.merge(x.filter(function($){return $.isLoop()})):m.merge(x)})}),a.push(m)},c=function h(d,p,g){d===g&&(i+=1),t[p]={id:n,low:n++,cutVertex:!1};var y=e.getElementById(p).connectedEdges().intersection(e);if(y.size()===0)a.push(e.spawn(e.getElementById(p)));else{var m,v,O,b;y.forEach(function(w){m=w.source().id(),v=w.target().id(),O=m===p?v:m,O!==g&&(b=w.id(),l[b]||(l[b]=!0,s.push({x:p,y:O,edge:w})),O in t?t[p].low=Math.min(t[p].low,t[O].id):(h(d,O,p),t[p].low=Math.min(t[p].low,t[O].low),t[p].id<=t[O].low&&(t[p].cutVertex=!0,u(p,O))))})}};e.forEach(function(h){if(h.isNode()){var d=h.id();d in t||(i=0,c(d,d),t[d].cutVertex=i>1)}});var f=Object.keys(t).filter(function(h){return t[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(f),components:a}},BA={hopcroftTarjanBiconnected:ql,htbc:ql,htb:ql,hopcroftTarjanBiconnectedComponents:ql},Yl=function(){var e=this,t={},n=0,i=[],a=[],s=e.spawn(e),l=function u(c){a.push(c),t[c]={index:n,low:n++,explored:!1};var f=e.getElementById(c).connectedEdges().intersection(e);if(f.forEach(function(y){var m=y.target().id();m!==c&&(m in t||u(m),t[m].explored||(t[c].low=Math.min(t[c].low,t[m].low)))}),t[c].index===t[c].low){for(var h=e.spawn();;){var d=a.pop();if(h.merge(e.getElementById(d)),t[d].low=t[c].index,t[d].explored=!0,d===c)break}var p=h.edgesWith(h),g=h.merge(p);i.push(g),s=s.difference(g)}};return e.forEach(function(u){if(u.isNode()){var c=u.id();c in t||l(c)}}),{cut:s,components:i}},IA={tarjanStronglyConnected:Yl,tsc:Yl,tscc:Yl,tarjanStronglyConnectedComponents:Yl},wb={};[Io,gQ,vQ,yQ,bQ,xQ,$Q,UQ,ls,us,ed,uA,xA,EA,ZA,LA,BA,IA].forEach(function(r){We(wb,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var xb=0,Sb=1,kb=2,si=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=xb,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};si.prototype={fulfill:function(e){return Iv(this,Sb,"fulfillValue",e)},reject:function(e){return Iv(this,kb,"rejectReason",e)},then:function(e,t){var n=this,i=new si;return n.onFulfilled.push(zv(e,i,"fulfill")),n.onRejected.push(zv(t,i,"reject")),$b(n),i.proxy}};var Iv=function(e,t,n,i){return e.state===xb&&(e.state=t,e[n]=i,$b(e)),e},$b=function(e){e.state===Sb?Nv(e,"onFulfilled",e.fulfillValue):e.state===kb&&Nv(e,"onRejected",e.rejectReason)},Nv=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var a=function(){for(var l=0;l<i.length;l++)i[l](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},zv=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var a;try{a=e(i)}catch(s){t.reject(s);return}NA(t,a)}}},NA=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Gt(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(a){i||(i=!0,a===t?e.reject(new TypeError("circular thenable chain")):r(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(t)};si.all=function(r){return new si(function(e,t){for(var n=new Array(r.length),i=0,a=function(u,c){n[u]=c,i++,i===r.length&&e(n)},s=0;s<r.length;s++)(function(l){var u=r[l],c=u!=null&&u.then!=null;if(c)u.then(function(h){a(l,h)},function(h){t(h)});else{var f=u;a(l,f)}})(s)})};si.resolve=function(r){return new si(function(e,t){e(r)})};si.reject=function(r){return new si(function(e,t){t(r)})};var Zs=typeof Promise!="undefined"?Promise:si,td=function(e,t,n){var i=_p(e),a=!i,s=this._private=We({duration:1e3},t,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&_t(s.complete)&&s.completes.push(s.complete),a){var l=e.position();s.startPosition=s.startPosition||{x:l.x,y:l.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(i){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},xa=td.prototype;We(xa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),jr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(c,f){var h=e[c];h!=null&&(e[c]=e[f],e[f]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],s=a.name,l=e.startStyle[s];e.startStyle[s]=a,e.style[i]=l}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Zs(function(i,a){n.push(function(){i()})})}});xa.complete=xa.completed;xa.run=xa.play;xa.running=xa.playing;var zA={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return!1;var s=i[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var s=0;s<i.length;s++){var l=i[s];l._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,a=i.length!==void 0,s=a?i:[i],l=this._private.cy||this,u=!a,c=!u;if(!l.styleEnabled())return this;var f=l.style();t=We({},t,n);var h=Object.keys(t).length===0;if(h)return new td(s[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(c&&(t.style=f.getPropsList(t.style||t.css),t.css=void 0),c&&t.renderedPosition!=null){var d=t.renderedPosition,p=l.pan(),g=l.zoom();t.position=cb(d,g,p)}if(u&&t.panBy!=null){var y=t.panBy,m=l.pan();t.pan={x:m.x+y.x,y:m.y+y.y}}var v=t.center||t.centre;if(u&&v!=null){var O=l.getCenterPan(v.eles,t.zoom);O!=null&&(t.pan=O)}if(u&&t.fit!=null){var b=t.fit,w=l.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(t.pan=w.pan,t.zoom=w.zoom)}if(u&&it(t.zoom)){var x=l.getZoomedViewport(t.zoom);x!=null?(x.zoomed&&(t.zoom=x.zoom),x.panned&&(t.pan=x.pan)):t.zoom=null}return new td(s[0],t)}},animate:function(){return function(t,n){var i=this,a=i.length!==void 0,s=a?i:[i],l=this._private.cy||this;if(!l.styleEnabled())return this;n&&(t=We({},t,n));for(var u=0;u<s.length;u++){var c=s[u],f=c.animated()&&(t.queue===void 0||t.queue),h=c.animation(t,f?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(t,n){var i=this,a=i.length!==void 0,s=a?i:[i],l=this._private.cy||this;if(!l.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var c=s[u],f=c._private,h=f.animation.current,d=0;d<h.length;d++){var p=h[d],g=p._private;n&&(g.duration=0)}t&&(f.animation.queue=[]),n||(f.animation.current=[])}return l.notify("draw"),this}}},WA={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=We({},t,e),function(i,a){var s=e,l=this,u=l.length!==void 0,c=u?l:[l],f=u?l[0]:l;if(Le(i)){var h=i.indexOf(".")!==-1,d=h&&CT.default(i);if(s.allowGetting&&a===void 0){var p;return f&&(s.beforeGet(f),d&&f._private[s.field][i]===void 0?p=$T.default(f._private[s.field],d):p=f._private[s.field][i]),p}else if(s.allowSetting&&a!==void 0){var g=!s.immutableKeys[i];if(g){var y=j0({},i,a);s.beforeSet(l,y);for(var m=0,v=c.length;m<v;m++){var O=c[m];s.canSet(O)&&(d&&f._private[s.field][i]===void 0?PT.default(O._private[s.field],d,a):O._private[s.field][i]=a)}s.updateStyle&&l.updateStyle(),s.onSet(l),s.settingTriggersEvent&&l[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&it(i)){var b=i,w,x,$=Object.keys(b);s.beforeSet(l,b);for(var S=0;S<$.length;S++){w=$[S],x=b[w];var T=!s.immutableKeys[w];if(T)for(var k=0;k<c.length;k++){var E=c[k];s.canSet(E)&&(E._private[s.field][w]=x)}}s.updateStyle&&l.updateStyle(),s.onSet(l),s.settingTriggersEvent&&l[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&_t(i)){var P=i;l.on(s.bindingEvent,P)}else if(s.allowGetting&&i===void 0){var C;return f&&(s.beforeGet(f),C=f._private[s.field]),C}return l}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=We({},t,e),function(i){var a=e,s=this,l=s.length!==void 0,u=l?s:[s];if(Le(i)){for(var c=i.split(/\s+/),f=c.length,h=0;h<f;h++){var d=c[h];if(!Bi(d)){var p=!a.immutableKeys[d];if(p)for(var g=0,y=u.length;g<y;g++)u[g]._private[a.field][d]=void 0}}a.triggerEvent&&s[a.triggerFnName](a.event)}else if(i===void 0){for(var m=0,v=u.length;m<v;m++)for(var O=u[m]._private[a.field],b=Object.keys(O),w=0;w<b.length;w++){var x=b[w],$=!a.immutableKeys[x];$&&(O[x]=void 0)}a.triggerEvent&&s[a.triggerFnName](a.event)}return s}}},qA={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var a=this,s=Array.prototype.slice.call(arguments,0);return new Zs(function(l,u){var c=function(p){a.off.apply(a,h),l(p)},f=s.concat([c]),h=f.concat([]);a.on.apply(a,f)})}}},ut={};[zA,WA,qA].forEach(function(r){We(ut,r)});var YA={animate:ut.animate(),animation:ut.animation(),animated:ut.animated(),clearQueue:ut.clearQueue(),delay:ut.delay(),delayAnimation:ut.delayAnimation(),stop:ut.stop()},Su={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(g){return n.push(g)}),n}else gt(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new Ms(e),s=0;s<t.length;s++){for(var l=t[s],u=l._private,c=u.classes,f=!1,h=0;h<e.length;h++){var d=e[h],p=c.has(d);if(!p){f=!0;break}}f||(f=c.size!==e.length),f&&(u.classes=a,i.push(l))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){gt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,a=[],s=0,l=n.length;s<l;s++)for(var u=n[s],c=u._private.classes,f=!1,h=0;h<e.length;h++){var d=e[h],p=c.has(d),g=!1;t||i&&!p?(c.add(d),g=!0):(!t||i&&p)&&(c.delete(d),g=!0),!f&&g&&(a.push(u),f=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Su.className=Su.classNames=Su.classes;var rt={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Ft,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};rt.variable="(?:[\\w-.]|(?:\\\\"+rt.metaChar+"))+";rt.className="(?:[\\w-]|(?:\\\\"+rt.metaChar+"))+";rt.value=rt.string+"|"+rt.number;rt.id=rt.variable;(function(){var r,e,t;for(r=rt.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],rt.comparatorOp+="|@"+e;for(r=rt.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(rt.comparatorOp+="|\\!"+e)})();var ht=function(){return{checks:[]}},Ce={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},rd=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return jT(r.selector,e.selector)}),XA=function(){for(var r={},e,t=0;t<rd.length;t++)e=rd[t],r[e.selector]=e.matches;return r}(),VA=function(e,t){return XA[e](t)},FA="("+rd.map(function(r){return r.selector}).join("|")+")",Va=function(e){return e.replace(new RegExp("\\\\("+rt.metaChar+")","g"),function(t,n){return n})},mi=function(e,t,n){e[e.length-1]=n},nd=[{name:"group",query:!0,regex:"("+rt.group+")",populate:function(e,t,n){var i=gn(n,1),a=i[0];t.checks.push({type:Ce.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:FA,populate:function(e,t,n){var i=gn(n,1),a=i[0];t.checks.push({type:Ce.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+rt.id+")",populate:function(e,t,n){var i=gn(n,1),a=i[0];t.checks.push({type:Ce.ID,value:Va(a)})}},{name:"className",query:!0,regex:"\\.("+rt.className+")",populate:function(e,t,n){var i=gn(n,1),a=i[0];t.checks.push({type:Ce.CLASS,value:Va(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+rt.variable+")\\s*\\]",populate:function(e,t,n){var i=gn(n,1),a=i[0];t.checks.push({type:Ce.DATA_EXIST,field:Va(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+rt.variable+")\\s*("+rt.comparatorOp+")\\s*("+rt.value+")\\s*\\]",populate:function(e,t,n){var i=gn(n,3),a=i[0],s=i[1],l=i[2],u=new RegExp("^"+rt.string+"$").exec(l)!=null;u?l=l.substring(1,l.length-1):l=parseFloat(l),t.checks.push({type:Ce.DATA_COMPARE,field:Va(a),operator:s,value:l})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+rt.boolOp+")\\s*("+rt.variable+")\\s*\\]",populate:function(e,t,n){var i=gn(n,2),a=i[0],s=i[1];t.checks.push({type:Ce.DATA_BOOL,field:Va(s),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+rt.meta+")\\s*("+rt.comparatorOp+")\\s*("+rt.number+")\\s*\\]\\]",populate:function(e,t,n){var i=gn(n,3),a=i[0],s=i[1],l=i[2];t.checks.push({type:Ce.META_COMPARE,field:Va(a),operator:s,value:parseFloat(l)})}},{name:"nextQuery",separator:!0,regex:rt.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=i,s.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var l=e[e.length++]=ht();return l}},{name:"directedEdge",separator:!0,regex:rt.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=ht(),i=t,a=ht();return n.checks.push({type:Ce.DIRECTED_EDGE,source:i,target:a}),mi(e,t,n),e.edgeCount++,a}else{var s=ht(),l=t,u=ht();return s.checks.push({type:Ce.NODE_SOURCE,source:l,target:u}),mi(e,t,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:rt.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=ht(),i=t,a=ht();return n.checks.push({type:Ce.UNDIRECTED_EDGE,nodes:[i,a]}),mi(e,t,n),e.edgeCount++,a}else{var s=ht(),l=t,u=ht();return s.checks.push({type:Ce.NODE_NEIGHBOR,node:l,neighbor:u}),mi(e,t,s),u}}},{name:"child",separator:!0,regex:rt.child,populate:function(e,t){if(e.currentSubject==null){var n=ht(),i=ht(),a=e[e.length-1];return n.checks.push({type:Ce.CHILD,parent:a,child:i}),mi(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var s=ht(),l=e[e.length-1],u=ht(),c=ht(),f=ht(),h=ht();return s.checks.push({type:Ce.COMPOUND_SPLIT,left:l,right:u,subject:c}),c.checks=t.checks,t.checks=[{type:Ce.TRUE}],h.checks.push({type:Ce.TRUE}),u.checks.push({type:Ce.PARENT,parent:h,child:f}),mi(e,l,s),e.currentSubject=c,e.compoundCount++,f}else{var d=ht(),p=ht(),g=[{type:Ce.PARENT,parent:d,child:p}];return d.checks=t.checks,t.checks=g,e.compoundCount++,p}}},{name:"descendant",separator:!0,regex:rt.descendant,populate:function(e,t){if(e.currentSubject==null){var n=ht(),i=ht(),a=e[e.length-1];return n.checks.push({type:Ce.DESCENDANT,ancestor:a,descendant:i}),mi(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var s=ht(),l=e[e.length-1],u=ht(),c=ht(),f=ht(),h=ht();return s.checks.push({type:Ce.COMPOUND_SPLIT,left:l,right:u,subject:c}),c.checks=t.checks,t.checks=[{type:Ce.TRUE}],h.checks.push({type:Ce.TRUE}),u.checks.push({type:Ce.ANCESTOR,ancestor:h,descendant:f}),mi(e,l,s),e.currentSubject=c,e.compoundCount++,f}else{var d=ht(),p=ht(),g=[{type:Ce.ANCESTOR,ancestor:d,descendant:p}];return d.checks=t.checks,t.checks=g,e.compoundCount++,p}}},{name:"subject",modifier:!0,regex:rt.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return ct("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===Ce.DIRECTED_EDGE?i.type=Ce.NODE_TARGET:a===Ce.UNDIRECTED_EDGE&&(i.type=Ce.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];nd.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var jA=function(e){for(var t,n,i,a=0;a<nd.length;a++){var s=nd[a],l=s.name,u=e.match(s.regexObj);if(u!=null){n=u,t=s,i=l;var c=u[0];e=e.substring(c.length);break}}return{expr:t,match:n,name:i,remaining:e}},GA=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},UA=function(e){var t=this,n=t.inputText=e,i=t[0]=ht();for(t.length=1,n=GA(n);;){var a=jA(n);if(a.expr==null)return ct("The selector `"+e+"`is invalid"),!1;var s=a.match.slice(1),l=a.expr.populate(t,i,s);if(l===!1)return!1;if(l!=null&&(i=l),n=a.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var c=0;c<t.length;c++){var f=t[c];if(f.compoundCount>0&&f.edgeCount>0)return ct("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return ct("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&ct("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},HA=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f==null?"":f},t=function(f){return Le(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},i=function(f,h){var d=f.type,p=f.value;switch(d){case Ce.GROUP:{var g=e(p);return g.substring(0,g.length-1)}case Ce.DATA_COMPARE:{var y=f.field,m=f.operator;return"["+y+n(e(m))+t(p)+"]"}case Ce.DATA_BOOL:{var v=f.operator,O=f.field;return"["+e(v)+O+"]"}case Ce.DATA_EXIST:{var b=f.field;return"["+b+"]"}case Ce.META_COMPARE:{var w=f.operator,x=f.field;return"[["+x+n(e(w))+t(p)+"]]"}case Ce.STATE:return p;case Ce.ID:return"#"+p;case Ce.CLASS:return"."+p;case Ce.PARENT:case Ce.CHILD:return a(f.parent,h)+n(">")+a(f.child,h);case Ce.ANCESTOR:case Ce.DESCENDANT:return a(f.ancestor,h)+" "+a(f.descendant,h);case Ce.COMPOUND_SPLIT:{var $=a(f.left,h),S=a(f.subject,h),T=a(f.right,h);return $+($.length>0?" ":"")+S+T}case Ce.TRUE:return""}},a=function(f,h){return f.checks.reduce(function(d,p,g){return d+(h===f&&g===0?"$":"")+i(p,h)},"")},s="",l=0;l<this.length;l++){var u=this[l];s+=a(u,u.subject),this.length>1&&l<this.length-1&&(s+=", ")}return this.toStringCache=s,s},KA={parse:UA,toString:HA},Pb=function(e,t,n){var i,a=Le(e),s=ve(e),l=Le(n),u,c,f=!1,h=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),h=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),f=!0),(a||l||f)&&(u=!a&&!s?"":""+e,c=""+n),f&&(e=u=u.toLowerCase(),n=c=c.toLowerCase()),t){case"*=":i=u.indexOf(c)>=0;break;case"$=":i=u.indexOf(c,u.length-c.length)>=0;break;case"^=":i=u.indexOf(c)===0;break;case"=":i=e===n;break;case">":d=!0,i=e>n;break;case">=":d=!0,i=e>=n;break;case"<":d=!0,i=e<n;break;case"<=":d=!0,i=e<=n;break;default:i=!1;break}return h&&(e!=null||!d)&&(i=!i),i},JA=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},eD=function(e){return e!==void 0},Wp=function(e,t){return e.data(t)},tD=function(e,t){return e[t]()},Rt=[],Ct=function(e,t){return e.checks.every(function(n){return Rt[n.type](n,t)})};Rt[Ce.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Rt[Ce.STATE]=function(r,e){var t=r.value;return VA(t,e)};Rt[Ce.ID]=function(r,e){var t=r.value;return e.id()===t};Rt[Ce.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Rt[Ce.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return Pb(tD(e,t),n,i)};Rt[Ce.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return Pb(Wp(e,t),n,i)};Rt[Ce.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return JA(Wp(e,t),n)};Rt[Ce.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,eD(Wp(e,t))};Rt[Ce.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),a=e.target();return Ct(t,i)&&Ct(n,a)||Ct(n,i)&&Ct(t,a)};Rt[Ce.NODE_NEIGHBOR]=function(r,e){return Ct(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Ct(r.neighbor,t)})};Rt[Ce.DIRECTED_EDGE]=function(r,e){return Ct(r.source,e.source())&&Ct(r.target,e.target())};Rt[Ce.NODE_SOURCE]=function(r,e){return Ct(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Ct(r.target,t)})};Rt[Ce.NODE_TARGET]=function(r,e){return Ct(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Ct(r.source,t)})};Rt[Ce.CHILD]=function(r,e){return Ct(r.child,e)&&Ct(r.parent,e.parent())};Rt[Ce.PARENT]=function(r,e){return Ct(r.parent,e)&&e.children().some(function(t){return Ct(r.child,t)})};Rt[Ce.DESCENDANT]=function(r,e){return Ct(r.descendant,e)&&e.ancestors().some(function(t){return Ct(r.ancestor,t)})};Rt[Ce.ANCESTOR]=function(r,e){return Ct(r.ancestor,e)&&e.descendants().some(function(t){return Ct(r.descendant,t)})};Rt[Ce.COMPOUND_SPLIT]=function(r,e){return Ct(r.subject,e)&&Ct(r.left,e)&&Ct(r.right,e)};Rt[Ce.TRUE]=function(){return!0};Rt[Ce.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Rt[Ce.FILTER]=function(r,e){var t=r.value;return t(e)};var rD=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Ce.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(a){for(var s=0;s<t.length;s++){var l=t[s];if(Ct(l,a))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},nD=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(Ct(i,e))return!0}return!1},iD={matches:nD,filter:rD},Ni=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Le(e)&&e.match(/^\s*$/)||(jr(e)?this.addQuery({checks:[{type:Ce.COLLECTION,value:e.collection()}]}):_t(e)?this.addQuery({checks:[{type:Ce.FILTER,value:e}]}):Le(e)?this.parse(e)||(this.invalid=!0):Mt("A selector must be created from a string; found "))},zi=Ni.prototype;[KA,iD].forEach(function(r){return We(zi,r)});zi.text=function(){return this.inputText};zi.size=function(){return this.length};zi.eq=function(r){return this[r]};zi.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};zi.addQuery=function(r){this[this.length++]=r};zi.selector=zi.toString;var Qi={allAre:function(e){var t=new Ni(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Ni(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Qi.allAreNeighbours=Qi.allAreNeighbors;Qi.has=Qi.contains;Qi.equal=Qi.equals=Qi.same;var tn=function(e,t){return function(i,a,s,l){var u=i,c=this,f;if(u==null?f="":jr(u)&&u.length===1&&(f=u.id()),c.length===1&&f){var h=c[0]._private,d=h.traversalCache=h.traversalCache||{},p=d[t]=d[t]||[],g=ba(f),y=p[g];return y||(p[g]=e.call(c,i,a,s,l))}else return e.call(c,i,a,s,l)}},Os={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],s=a._private.parent;s&&t.push(s)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],a=i.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:tn(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var a=0;a<i.length;a++){var s=i[a];t.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function qp(r,e,t,n){for(var i=[],a=new Ms,s=r.cy(),l=s.hasCompoundNodes(),u=0;u<r.length;u++){var c=r[u];t?i.push(c):l&&n(i,a,c)}for(;i.length>0;){var f=i.shift();e(f),a.add(f.id()),l&&n(i,a,f)}return r}function Cb(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||r.push(a)}}Os.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return qp(this,r,e,Cb)};function Eb(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Os.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return qp(this,r,e,Eb)};function aD(r,e,t){Eb(r,e,t),Cb(r,e,t)}Os.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return qp(this,r,e,aD)};Os.ancestors=Os.parents;var Wo,Tb;Wo=Tb={data:ut.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ut.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ut.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ut.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ut.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ut.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Wo.attr=Wo.data;Wo.removeAttr=Wo.removeData;var sD=Tb,tf={};function Hf(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],a=i._private.edges,s=0;s<a.length;s++){var l=a[s];!e&&l.isLoop()||(n+=r(i,l))}return n}else return}}We(tf,{degree:Hf(function(r,e){return e.source().same(e.target())?2:1}),indegree:Hf(function(r,e){return e.target().same(r)?1:0}),outdegree:Hf(function(r,e){return e.source().same(r)?1:0})});function Fa(r,e){return function(t){for(var n,i=this.nodes(),a=0;a<i.length;a++){var s=i[a],l=s[r](t);l!==void 0&&(n===void 0||e(l,n))&&(n=l)}return n}}We(tf,{minDegree:Fa("degree",function(r,e){return r<e}),maxDegree:Fa("degree",function(r,e){return r>e}),minIndegree:Fa("indegree",function(r,e){return r<e}),maxIndegree:Fa("indegree",function(r,e){return r>e}),minOutdegree:Fa("outdegree",function(r,e){return r<e}),maxOutdegree:Fa("outdegree",function(r,e){return r>e})});We(tf,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var On,Qb,Ab=function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var s=a._private.position,l={x:t.x!=null?t.x-s.x:0,y:t.y!=null?t.y-s.y:0};a.isParent()&&!(l.x===0&&l.y===0)&&a.children().shift(l,n),a.dirtyBoundingBoxCache()}}},Wv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Ab(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};On=Qb={position:ut.data(Wv),silentPosition:ut.data(We({},Wv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Ab(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(it(e))t?this.silentPosition(e):this.position(e);else if(_t(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var s=this[a],l=void 0;(l=n(s,a))&&(t?s.silentPosition(l):s.position(l))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(it(e)?(i={x:ve(e.x)?e.x:0,y:ve(e.y)?e.y:0},n=t):Le(e)&&ve(t)&&(i={x:0,y:0},i[e]=t),i!=null){var a=this.cy();a.startBatch();for(var s=0;s<this.length;s++){var l=this[s];if(!(a.hasCompoundNodes()&&l.isChild()&&l.ancestors().anySame(this))){var u=l.position(),c={x:u.x+i.x,y:u.y+i.y};n?l.silentPosition(c):l.position(c)}}a.endBatch()}return this},silentShift:function(e,t){return it(e)?this.shift(e,!0):Le(e)&&ve(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),a=i.zoom(),s=i.pan(),l=it(e)?e:void 0,u=l!==void 0||t!==void 0&&Le(e);if(n&&n.isNode())if(u)for(var c=0;c<this.length;c++){var f=this[c];t!==void 0?f.position(e,(t-s[e])/a):l!==void 0&&f.position(cb(l,a,s))}else{var h=n.position();return l=Jc(h,a,s),e===void 0?l:l[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),a=it(e)?e:void 0,s=a!==void 0||t!==void 0&&Le(e),l=i.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var c=this[u],f=l?c.parent():null,h=f&&f.length>0,d=h;h&&(f=f[0]);var p=d?f.position():{x:0,y:0};t!==void 0?c.position(e,t+p[e]):a!==void 0&&c.position({x:a.x+p.x,y:a.y+p.y})}else{var g=n.position(),y=l?n.parent():null,m=y&&y.length>0,v=m;m&&(y=y[0]);var O=v?y.position():{x:0,y:0};return a={x:g.x-O.x,y:g.y-O.y},e===void 0?a:a[e]}else if(!s)return;return this}};On.modelPosition=On.point=On.position;On.modelPositions=On.points=On.positions;On.renderedPoint=On.renderedPosition;On.relativePoint=On.relativePosition;var oD=Qb,cs,Hi;cs=Hi={};Hi.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),a=e.x1*n+i.x,s=e.x2*n+i.x,l=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:s,y1:l,y2:u,w:s-a,h:u-l}};Hi.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Hi.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(s){if(!s.isParent())return;var l=s._private,u=s.children(),c=s.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},h=u.boundingBox({includeLabels:c,includeOverlays:!1,useCache:!1}),d=l.position;(h.w===0||h.h===0)&&(h={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},h.x1=d.x-h.w/2,h.x2=d.x+h.w/2,h.y1=d.y-h.h/2,h.y2=d.y+h.h/2);function p(k,E,P){var C=0,M=0,D=E+P;return k>0&&D>0&&(C=E/D*k,M=P/D*k),{biasDiff:C,biasComplementDiff:M}}function g(k,E,P,C){if(P.units==="%")switch(C){case"width":return k>0?P.pfValue*k:0;case"height":return E>0?P.pfValue*E:0;case"average":return k>0&&E>0?P.pfValue*(k+E)/2:0;case"min":return k>0&&E>0?k>E?P.pfValue*E:P.pfValue*k:0;case"max":return k>0&&E>0?k>E?P.pfValue*k:P.pfValue*E:0;default:return 0}else return P.units==="px"?P.pfValue:0}var y=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(y=y*100/f.width.val);var m=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(m=m*100/f.width.val);var v=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(v=v*100/f.height.val);var O=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(O=O*100/f.height.val);var b=p(f.width.val-h.w,y,m),w=b.biasDiff,x=b.biasComplementDiff,$=p(f.height.val-h.h,v,O),S=$.biasDiff,T=$.biasComplementDiff;l.autoPadding=g(h.w,h.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),l.autoWidth=Math.max(h.w,f.width.val),d.x=(-w+h.x1+h.x2+x)/2,l.autoHeight=Math.max(h.h,f.height.val),d.y=(-S+h.y1+h.y2+T)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||r)&&(t(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Jr=function(e){return e===1/0||e===-1/0?0:e},vn=function(e,t,n,i,a){i-t===0||a-n===0||t==null||n==null||i==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},la=function(e,t){return t==null?e:vn(e,t.x1,t.y1,t.x2,t.y2)},Js=function(e,t,n){return mn(e,t,n)},Xl=function(e,t,n){if(!t.cy().headless()){var i=t._private,a=i.rstyle,s=a.arrowWidth/2,l=t.pstyle(n+"-arrow-shape").value,u,c;if(l!=="none"){n==="source"?(u=a.srcX,c=a.srcY):n==="target"?(u=a.tgtX,c=a.tgtY):(u=a.midX,c=a.midY);var f=i.arrowBounds=i.arrowBounds||{},h=f[n]=f[n]||{};h.x1=u-s,h.y1=c-s,h.x2=u+s,h.y2=c+s,h.w=h.x2-h.x1,h.h=h.y2-h.y1,wu(h,1),vn(e,h.x1,h.y1,h.x2,h.y2)}}},Kf=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var a=t._private,s=a.rstyle,l=t.pstyle(i+"label").strValue;if(l){var u=t.pstyle("text-halign"),c=t.pstyle("text-valign"),f=Js(s,"labelWidth",n),h=Js(s,"labelHeight",n),d=Js(s,"labelX",n),p=Js(s,"labelY",n),g=t.pstyle(i+"text-margin-x").pfValue,y=t.pstyle(i+"text-margin-y").pfValue,m=t.isEdge(),v=t.pstyle(i+"text-rotation"),O=t.pstyle("text-outline-width").pfValue,b=t.pstyle("text-border-width").pfValue,w=b/2,x=t.pstyle("text-background-padding").pfValue,$=2,S=h,T=f,k=T/2,E=S/2,P,C,M,D;if(m)P=d-k,C=d+k,M=p-E,D=p+E;else{switch(u.value){case"left":P=d-T,C=d;break;case"center":P=d-k,C=d+k;break;case"right":P=d,C=d+T;break}switch(c.value){case"top":M=p-S,D=p;break;case"center":M=p-E,D=p+E;break;case"bottom":M=p,D=p+S;break}}P+=g-Math.max(O,w)-x-$,C+=g+Math.max(O,w)+x+$,M+=y-Math.max(O,w)-x-$,D+=y+Math.max(O,w)+x+$;var I=n||"main",A=a.labelBounds,Q=A[I]=A[I]||{};Q.x1=P,Q.y1=M,Q.x2=C,Q.y2=D,Q.w=C-P,Q.h=D-M;var B=m&&v.strValue==="autorotate",Y=v.pfValue!=null&&v.pfValue!==0;if(B||Y){var X=B?Js(a.rstyle,"labelAngle",n):v.pfValue,W=Math.cos(X),q=Math.sin(X),F=(P+C)/2,Z=(M+D)/2;if(!m){switch(u.value){case"left":F=C;break;case"right":F=P;break}switch(c.value){case"top":Z=D;break;case"bottom":Z=M;break}}var N=function(Oe,pe){return Oe=Oe-F,pe=pe-Z,{x:Oe*W-pe*q+F,y:Oe*q+pe*W+Z}},V=N(P,M),z=N(P,D),j=N(C,M),G=N(C,D);P=Math.min(V.x,z.x,j.x,G.x),C=Math.max(V.x,z.x,j.x,G.x),M=Math.min(V.y,z.y,j.y,G.y),D=Math.max(V.y,z.y,j.y,G.y)}var U=I+"Rot",K=A[U]=A[U]||{};K.x1=P,K.y1=M,K.x2=C,K.y2=D,K.w=C-P,K.h=D-M,vn(e,P,M,C,D),vn(a.labelBounds.all,P,M,C,D)}return e}},lD=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(n>0&&i>0){var a=t.pstyle("outline-offset").value,s=t.pstyle("shape").value,l=i+a,u=(e.w+l*2)/e.w,c=(e.h+l*2)/e.h,f=0,h=0;["diamond","pentagon","round-triangle"].includes(s)?(u=(e.w+l*2.4)/e.w,h=-l/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?u=(e.w+l*2.4)/e.w:s==="star"?(u=(e.w+l*2.8)/e.w,c=(e.h+l*2.6)/e.h,h=-l/3.8):s==="triangle"?(u=(e.w+l*2.8)/e.w,c=(e.h+l*2.4)/e.h,h=-l/1.4):s==="vee"&&(u=(e.w+l*4.4)/e.w,c=(e.h+l*3.8)/e.h,h=-l*.5);var d=e.h*c-e.h,p=e.w*u-e.w;if(xu(e,[Math.ceil(d/2),Math.ceil(p/2)]),f!=0||h!==0){var g=RQ(e,f,h);hb(e,g)}}}},uD=function(e,t){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),s=Br(),l=e._private,u=e.isNode(),c=e.isEdge(),f,h,d,p,g,y,m=l.rstyle,v=u&&i?e.pstyle("bounds-expansion").pfValue:[0],O=function(me){return me.pstyle("display").value!=="none"},b=!i||O(e)&&(!c||O(e.source())&&O(e.target()));if(b){var w=0,x=0;i&&t.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(x=e.pstyle("overlay-padding").value));var $=0,S=0;i&&t.includeUnderlays&&($=e.pstyle("underlay-opacity").value,$!==0&&(S=e.pstyle("underlay-padding").value));var T=Math.max(x,S),k=0,E=0;if(i&&(k=e.pstyle("width").pfValue,E=k/2),u&&t.includeNodes){var P=e.position();g=P.x,y=P.y;var C=e.outerWidth(),M=C/2,D=e.outerHeight(),I=D/2;f=g-M,h=g+M,d=y-I,p=y+I,vn(s,f,d,h,p),i&&t.includeOutlines&&lD(s,e)}else if(c&&t.includeEdges)if(i&&!a){var A=e.pstyle("curve-style").strValue;if(f=Math.min(m.srcX,m.midX,m.tgtX),h=Math.max(m.srcX,m.midX,m.tgtX),d=Math.min(m.srcY,m.midY,m.tgtY),p=Math.max(m.srcY,m.midY,m.tgtY),f-=E,h+=E,d-=E,p+=E,vn(s,f,d,h,p),A==="haystack"){var Q=m.haystackPts;if(Q&&Q.length===2){if(f=Q[0].x,d=Q[0].y,h=Q[1].x,p=Q[1].y,f>h){var B=f;f=h,h=B}if(d>p){var Y=d;d=p,p=Y}vn(s,f-E,d-E,h+E,p+E)}}else if(A==="bezier"||A==="unbundled-bezier"||A==="segments"||A==="taxi"){var X;switch(A){case"bezier":case"unbundled-bezier":X=m.bezierPts;break;case"segments":case"taxi":X=m.linePts;break}if(X!=null)for(var W=0;W<X.length;W++){var q=X[W];f=q.x-E,h=q.x+E,d=q.y-E,p=q.y+E,vn(s,f,d,h,p)}}}else{var F=e.source(),Z=F.position(),N=e.target(),V=N.position();if(f=Z.x,h=V.x,d=Z.y,p=V.y,f>h){var z=f;f=h,h=z}if(d>p){var j=d;d=p,p=j}f-=E,h+=E,d-=E,p+=E,vn(s,f,d,h,p)}if(i&&t.includeEdges&&c&&(Xl(s,e,"mid-source"),Xl(s,e,"mid-target"),Xl(s,e,"source"),Xl(s,e,"target")),i){var G=e.pstyle("ghost").value==="yes";if(G){var U=e.pstyle("ghost-offset-x").pfValue,K=e.pstyle("ghost-offset-y").pfValue;vn(s,s.x1+U,s.y1+K,s.x2+U,s.y2+K)}}var de=l.bodyBounds=l.bodyBounds||{};Pv(de,s),xu(de,v),wu(de,1),i&&(f=s.x1,h=s.x2,d=s.y1,p=s.y2,vn(s,f-T,d-T,h+T,p+T));var Oe=l.overlayBounds=l.overlayBounds||{};Pv(Oe,s),xu(Oe,v),wu(Oe,1);var pe=l.labelBounds=l.labelBounds||{};pe.all!=null?ZQ(pe.all):pe.all=Br(),i&&t.includeLabels&&(t.includeMainLabels&&Kf(s,e,null),c&&(t.includeSourceLabels&&Kf(s,e,"source"),t.includeTargetLabels&&Kf(s,e,"target")))}return s.x1=Jr(s.x1),s.y1=Jr(s.y1),s.x2=Jr(s.x2),s.y2=Jr(s.y2),s.w=Jr(s.x2-s.x1),s.h=Jr(s.y2-s.y1),s.w>0&&s.h>0&&b&&(xu(s,v),wu(s,1)),s},Db=function(e){var t=0,n=function(s){return(s?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},_b=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),i=function(s){return Math.round(s)};return nQ([i(t.x),i(t.y),i(n.x),i(n.y)])}else return 0},qv=function(e,t){var n=e._private,i,a=e.isEdge(),s=t==null?Yv:Db(t),l=s===Yv,u=_b(e),c=n.bbCachePosKey===u,f=t.useCache&&c,h=function(y){return y._private.bbCache==null||y._private.styleDirty},d=!f||h(e)||a&&h(e.source())||h(e.target());if(d?(c||e.recalculateRenderedStyle(f),i=uD(e,qo),n.bbCache=i,n.bbCachePosKey=u):i=n.bbCache,!l){var p=e.isNode();i=Br(),(t.includeNodes&&p||t.includeEdges&&!p)&&(t.includeOverlays?la(i,n.overlayBounds):la(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?la(i,n.labelBounds.all):(t.includeMainLabels&&la(i,n.labelBounds.mainRot),t.includeSourceLabels&&la(i,n.labelBounds.sourceRot),t.includeTargetLabels&&la(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},qo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Yv=Db(qo),Xv=fr(qo);Hi.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=qo:r=Xv(r),e=qv(this[0],r);else{e=Br(),r=r||qo;var t=Xv(r),n=this,i=n.cy(),a=i.styleEnabled();if(a)for(var s=0;s<n.length;s++){var l=n[s],u=l._private,c=_b(l),f=u.bbCachePosKey===c,h=t.useCache&&f&&!u.styleDirty;l.recalculateRenderedStyle(h)}this.updateCompoundBounds(!r.useCache);for(var d=0;d<n.length;d++){var p=n[d];la(e,qv(p,t))}}return e.x1=Jr(e.x1),e.y1=Jr(e.y1),e.x2=Jr(e.x2),e.y2=Jr(e.y2),e.w=Jr(e.x2-e.x1),e.h=Jr(e.y2-e.y1),e};Hi.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Hi.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(c){return c.isParent()}),e=e.not(i)),it(r)){var a=r;r=function(){return a}}var s=function(f,h){return f._private.bbAtOldPos=r(f,h)},l=function(f){return f._private.bbAtOldPos};t.startBatch(),e.forEach(s).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=MQ(this.boundingBox({useCache:!1}));return e.silentPositions(l),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};cs.boundingbox=cs.bb=cs.boundingBox;cs.renderedBoundingbox=cs.renderedBoundingBox;var cD=Hi,po,Ol;po=Ol={};var Mb=function(e){e.uppercaseName=xv(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=xv(e.outerName),po[e.name]=function(){var n=this[0],i=n._private,a=i.cy,s=a._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var l=n.pstyle(e.name);switch(l.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return l.pfValue}}else return 1},po["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,s=a._private.styleEnabled;if(n)if(s){var l=n[e.name](),u=n.pstyle("border-width").pfValue,c=2*n.padding();return l+u+c}else return 1},po["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},po["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};Mb({name:"width"});Mb({name:"height"});Ol.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Ol.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Ol.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var fD=Ol,hD=function(e,t){if(e.isEdge())return t(e)},dD=function(e,t){if(e.isEdge()){var n=e.cy();return Jc(t(e),n.zoom(),n.pan())}},pD=function(e,t){if(e.isEdge()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(s){return Jc(s,a,i)})}},gD=function(e){return e.renderer().getControlPoints(e)},vD=function(e){return e.renderer().getSegmentPoints(e)},mD=function(e){return e.renderer().getSourceEndpoint(e)},yD=function(e){return e.renderer().getTargetEndpoint(e)},OD=function(e){return e.renderer().getEdgeMidpoint(e)},Vv={controlPoints:{get:gD,mult:!0},segmentPoints:{get:vD,mult:!0},sourceEndpoint:{get:mD},targetEndpoint:{get:yD},midpoint:{get:OD}},bD=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},wD=Object.keys(Vv).reduce(function(r,e){var t=Vv[e],n=bD(e);return r[e]=function(){return hD(this,t.get)},t.mult?r[n]=function(){return pD(this,t.get)}:r[n]=function(){return dD(this,t.get)},r},{}),xD=We({},oD,cD,fD,wD);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Zb=function(e,t){this.recycle(e,t)};function eo(){return!1}function Vl(){return!0}Zb.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=eo,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Vl:eo):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Vl;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Vl;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Vl,this.stopPropagation()},isDefaultPrevented:eo,isPropagationStopped:eo,isImmediatePropagationStopped:eo};var Rb=/^([^.]+)(\.(?:[^.]+))?$/,SD=".*",Lb={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Fv=Object.keys(Lb),kD={};function rf(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kD,e=arguments.length>1?arguments[1]:void 0,t=0;t<Fv.length;t++){var n=Fv[t];this[n]=r[n]||Lb[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Wi=rf.prototype,Bb=function(e,t,n,i,a,s,l){_t(i)&&(a=i,i=null),l&&(s==null?s=l:s=We({},s,l));for(var u=gt(n)?n:n.split(/\s+/),c=0;c<u.length;c++){var f=u[c];if(!Bi(f)){var h=f.match(Rb);if(h){var d=h[1],p=h[2]?h[2]:null,g=t(e,f,d,p,i,a,s);if(g===!1)break}}}},jv=function(e,t){return e.addEventFields(e.context,t),new Zb(t.type,t)},$D=function(e,t,n){if(LT(n)){t(e,n);return}else if(it(n)){t(e,jv(e,n));return}for(var i=gt(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var s=i[a];if(!Bi(s)){var l=s.match(Rb);if(l){var u=l[1],c=l[2]?l[2]:null,f=jv(e,{type:u,namespace:c,target:e.context});t(e,f)}}}};Wi.on=Wi.addListener=function(r,e,t,n,i){return Bb(this,function(a,s,l,u,c,f,h){_t(f)&&a.listeners.push({event:s,callback:f,type:l,namespace:u,qualifier:c,conf:h})},r,e,t,n,i),this};Wi.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Wi.removeListener=Wi.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=lQ(this.listeners));for(var a=this.listeners,s=function(c){var f=a[c];Bb(i,function(h,d,p,g,y,m){if((f.type===p||r==="*")&&(!g&&f.namespace!==".*"||f.namespace===g)&&(!y||h.qualifierCompare(f.qualifier,y))&&(!m||f.callback===m))return a.splice(c,1),!1},r,e,t,n)},l=a.length-1;l>=0;l--)s(l);return this};Wi.removeAllListeners=function(){return this.removeListener("*")};Wi.emit=Wi.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,gt(e)||(e=[e]),$D(this,function(a,s){t!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:t}],i=n.length);for(var l=function(f){var h=n[f];if(h.type===s.type&&(!h.namespace||h.namespace===s.namespace||h.namespace===SD)&&a.eventMatches(a.context,h,s)){var d=[s];e!=null&&cQ(d,e),a.beforeEmit(a.context,h,s),h.conf&&h.conf.one&&(a.listeners=a.listeners.filter(function(y){return y!==h}));var p=a.callbackContext(a.context,h,s),g=h.callback.apply(p,d);a.afterEmit(a.context,h,s),g===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<i;u++)l(u);a.bubble(a.context)&&!s.isPropagationStopped()&&a.parent(a.context).emit(s,e)},r),this.emitting--,this};var PD={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&ml(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Fl=function(e){return Le(e)?new Ni(e):e},Ib={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new rf(PD,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=Fl(t),a=0;a<this.length;a++){var s=this[a];s.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=Fl(t),a=0;a<this.length;a++){var s=this[a];s.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=Fl(t),a=0;a<this.length;a++){var s=this[a];s.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=Fl(t),a=0;a<this.length;a++){var s=this[a];s.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};ut.eventAliasesOn(Ib);var Nb={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Le(e)||jr(e))return new Ni(e).filter(this);if(_t(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var s=i[a],l=t?e.apply(t,[s,a,i]):e(s,a,i);l&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){Le(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Le(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,a=e,s=this.length<e.length,l=s?i:a,u=s?a:i,c=0;c<l.length;c++){var f=l[c];u.has(f)&&n.push(f)}return n},xor:function(e){var t=this._private.cy;Le(e)&&(e=t.$(e));var n=this.spawn(),i=this,a=e,s=function(u,c){for(var f=0;f<u.length;f++){var h=u[f],d=h._private.data.id,p=c.hasElementWithId(d);p||n.push(h)}};return s(i,a),s(a,i),n},diff:function(e){var t=this._private.cy;Le(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),s=this,l=e,u=function(f,h,d){for(var p=0;p<f.length;p++){var g=f[p],y=g._private.data.id,m=h.hasElementWithId(y);m?a.merge(g):d.push(g)}};return u(s,l,n),u(l,s,i),{left:n,right:i,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(Le(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var s=e[a],l=!this.has(s);l&&i.push(s)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Le(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,s=0;s<e.length;s++){var l=e[s],u=l._private.data.id,c=!a.has(u);if(c){var f=this.length++;this[f]=l,a.set(u,{ele:l,index:f})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var l=this.length-1,u=this[l],c=u._private.data.id;this[l]=void 0,this[e]=u,a.set(c,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,a=i.get(n);if(!a)return this;var s=a.index;return this.unmergeAt(s),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Le(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var s=i[a],l=t?e.apply(t,[s,a,i]):e(s,a,i);n.push(l)}return n},reduce:function(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,t){for(var n=-1/0,i,a=this,s=0;s<a.length;s++){var l=a[s],u=t?e.apply(t,[l,s,a]):e(l,s,a);u>n&&(n=u,i=l)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,a=this,s=0;s<a.length;s++){var l=a[s],u=t?e.apply(t,[l,s,a]):e(l,s,a);u<n&&(n=u,i=l)}return{value:n,ele:i}}},st=Nb;st.u=st["|"]=st["+"]=st.union=st.or=st.add;st["\\"]=st["!"]=st["-"]=st.difference=st.relativeComplement=st.subtract=st.not;st.n=st["&"]=st["."]=st.and=st.intersection=st.intersect;st["^"]=st["(+)"]=st["(-)"]=st.symmetricDifference=st.symdiff=st.xor;st.fnFilter=st.filterFn=st.stdFilter=st.filter;st.complement=st.abscomp=st.absoluteComplement;var CD={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},zb=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function a(f){var h=f.pstyle("z-compound-depth");return h.value==="auto"?i?f.zDepth():0:h.value==="bottom"?-1:h.value==="top"?Zp:0}var s=a(e)-a(t);if(s!==0)return s;function l(f){var h=f.pstyle("z-index-compare");return h.value==="auto"&&f.isNode()?1:0}var u=l(e)-l(t);if(u!==0)return u;var c=e.pstyle("z-index").value-t.pstyle("z-index").value;return c!==0?c:e.poolIndex()-t.poolIndex()},ju={forEach:function(e,t){if(_t(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],s=t?e.apply(t,[a,i,this]):e(a,i,this);if(s===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!_t(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(zb)},zDepth:function(){var e=this[0];if(!!e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:Zp-1}else{var a=t.source,s=t.target,l=a.zDepth(),u=s.zDepth();return Math.max(l,u,0)}}}};ju.each=ju.forEach;var ED=function(){var e="undefined",t=(typeof Symbol=="undefined"?"undefined":Gt(Symbol))!=e&&Gt(Symbol.iterator)!=e;t&&(ju[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,s=this.length;return j0({next:function(){return a<s?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};ED();var TD=fr({nodeDimensionsIncludeLabels:!1}),ku={layoutDimensions:function(e){e=TD(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(x){return!x.isParent()}),a=this.cy(),s=t.eles,l=function($){return $.id()},u=Ro(n,l);e.emit({type:"layoutstart",layout:e}),e.animations=[];var c=function($,S,T){var k={x:S.x1+S.w/2,y:S.y1+S.h/2},E={x:(T.x-k.x)*$,y:(T.y-k.y)*$};return{x:k.x+E.x,y:k.y+E.y}},f=t.spacingFactor&&t.spacingFactor!==1,h=function(){if(!f)return null;for(var $=Br(),S=0;S<i.length;S++){var T=i[S],k=u(T,S);LQ($,k.x,k.y)}return $},d=h(),p=Ro(function(x,$){var S=u(x,$);if(f){var T=Math.abs(t.spacingFactor);S=c(T,d,S)}return t.transform!=null&&(S=t.transform(x,S)),S},l);if(t.animate){for(var g=0;g<i.length;g++){var y=i[g],m=p(y,g),v=t.animateFilter==null||t.animateFilter(y,g);if(v){var O=y.animation({position:m,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(O)}else y.position(m)}if(t.fit){var b=a.animation({fit:{boundingBox:s.boundingBoxAt(p),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}else if(t.zoom!==void 0&&t.pan!==void 0){var w=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}e.animations.forEach(function(x){return x.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Zs.all(e.animations.map(function(x){return x.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(p),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(We({},e,{eles:this}))}};ku.createLayout=ku.makeLayout=ku.layout;function Wb(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],a;return(a=i[r])!=null||(a=i[r]=e(t)),a}function nf(r,e){return r=ba(r),function(n){return Wb(r,e,n)}}function af(r,e){r=ba(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return Wb(r,t,i)}}var or={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=a;return e?s.emitAndNotify("style"):s.emit("style"),a.forEach(function(l){return l._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(!!i.styleEnabled()&&n){this.cleanStyle();var a=n._private.style[e];return a!=null?a:t?i.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(!!t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(!!t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(it(e)){var s=e;a.applyBypass(this,s,i),this.emitAndNotify("style")}else if(Le(e))if(t===void 0){var l=this[0];return l?a.getStylePropertyValue(l,e):void 0}else a.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(e===void 0)for(var s=0;s<a.length;s++){var l=a[s];i.removeAllBypasses(l,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var c=a[u];i.removeBypasses(c,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var s=i.data.parent?n.parents():null;if(s)for(var l=0;l<s.length;l++){var u=s[l],c=u.pstyle("opacity").value;a=c*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Jf(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function Yp(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],s=i.hasCompoundNodes();if(a){var l=a._private;if(!e(a))return!1;if(a.isNode())return!s||Jf(a,n);var u=l.source,c=l.target;return t(u)&&(!s||Jf(u,t))&&(u===c||t(c)&&(!s||Jf(c,t)))}}}var Rs=nf("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});or.takesUpSpace=af("takesUpSpace",Yp({ok:Rs}));var QD=nf("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Rs(r)}),AD=nf("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Rs(r)});or.interactive=af("interactive",Yp({ok:QD,parentOk:AD,edgeOkViaNode:Rs}));or.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var DD=nf("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Rs(r)}),_D=Rs;or.visible=af("visible",Yp({ok:DD,edgeOkViaNode:_D}));or.hidden=function(){var r=this[0];if(r)return!r.visible()};or.isBundledBezier=af("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});or.bypass=or.css=or.style;or.renderedCss=or.renderedStyle;or.removeBypass=or.removeCss=or.removeStyle;or.pstyle=or.parsedStyle;var Ai={};function Gv(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&_t(e[0])){var a=e[0];this.on(r.event,a)}else if(e.length===0||e.length===1&&gt(e[0])){for(var s=e.length===1?e[0]:null,l=0;l<this.length;l++){var u=this[l],c=!r.ableField||u._private[r.ableField],f=u._private[r.field]!=r.value;if(r.overrideAble){var h=r.overrideAble(u);if(h!==void 0&&(c=h,!h))return this}c&&(u._private[r.field]=r.value,f&&t.push(u))}var d=this.spawn(t);d.updateStyle(),d.emit(r.event),s&&d.emit(s)}return this}}function Ls(r){Ai[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},Ai[r.on]=Gv({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),Ai[r.off]=Gv({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}Ls({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Ls({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Ls({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Ls({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Ai.deselect=Ai.unselect;Ai.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};Ls({field:"active",on:"activate",off:"unactivate"});Ls({field:"pannable",on:"panify",off:"unpanify"});Ai.inactive=function(){var r=this[0];if(r)return!r._private.active};var Or={},Uv=function(e){return function(n){for(var i=this,a=[],s=0;s<i.length;s++){var l=i[s];if(!!l.isNode()){for(var u=!1,c=l.connectedEdges(),f=0;f<c.length;f++){var h=c[f],d=h.source(),p=h.target();if(e.noIncomingEdges&&p===l&&d!==l||e.noOutgoingEdges&&d===l&&p!==l){u=!0;break}}u||a.push(l)}}return this.spawn(a,!0).filter(n)}},Hv=function(e){return function(t){for(var n=this,i=[],a=0;a<n.length;a++){var s=n[a];if(!!s.isNode())for(var l=s.connectedEdges(),u=0;u<l.length;u++){var c=l[u],f=c.source(),h=c.target();e.outgoing&&f===s?(i.push(c),i.push(h)):e.incoming&&h===s&&(i.push(c),i.push(f))}}return this.spawn(i,!0).filter(t)}},Kv=function(e){return function(t){for(var n=this,i=[],a={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var l=!1,u=0;u<s.length;u++){var c=s[u],f=c.id();a[f]||(a[f]=!0,i.push(c),l=!0)}if(!l)break;n=s}return this.spawn(i,!0).filter(t)}};Or.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};We(Or,{roots:Uv({noIncomingEdges:!0}),leaves:Uv({noOutgoingEdges:!0}),outgoers:tn(Hv({outgoing:!0}),"outgoers"),successors:Kv({outgoing:!0}),incomers:tn(Hv({incoming:!0}),"incomers"),predecessors:Kv({incoming:!0})});We(Or,{neighborhood:tn(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target(),f=i===u?c:u;f.length>0&&e.push(f[0]),e.push(l[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Or.neighbourhood=Or.neighborhood;Or.closedNeighbourhood=Or.closedNeighborhood;Or.openNeighbourhood=Or.openNeighborhood;We(Or,{source:tn(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:tn(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Jv({attr:"source"}),targets:Jv({attr:"target"})});function Jv(r){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i],s=a._private[r.attr];s&&n.push(s)}return this.spawn(n,!0).filter(t)}}We(Or,{edgesWith:tn(em(),"edgesWith"),edgesTo:tn(em({thisIsSrc:!0}),"edgesTo")});function em(r){return function(t){var n=[],i=this._private.cy,a=r||{};Le(t)&&(t=i.$(t));for(var s=0;s<t.length;s++)for(var l=t[s]._private.edges,u=0;u<l.length;u++){var c=l[u],f=c._private.data,h=this.hasElementWithId(f.source)&&t.hasElementWithId(f.target),d=t.hasElementWithId(f.source)&&this.hasElementWithId(f.target),p=h||d;!p||(a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!h||a.thisIsTgt&&!d)||n.push(c)}return this.spawn(n,!0)}}We(Or,{connectedEdges:tn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(!!i.isNode())for(var a=i._private.edges,s=0;s<a.length;s++){var l=a[s];e.push(l)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:tn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];!i.isEdge()||(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:tn(tm(),"parallelEdges"),codirectedEdges:tn(tm({codirected:!0}),"codirectedEdges")});function tm(r){var e={codirected:!1};return r=We({},e,r),function(n){for(var i=[],a=this.edges(),s=r,l=0;l<a.length;l++)for(var u=a[l],c=u._private,f=c.source,h=f._private.data.id,d=c.data.target,p=f._private.edges,g=0;g<p.length;g++){var y=p[g],m=y._private.data,v=m.target,O=m.source,b=v===d&&O===h,w=h===v&&d===O;(s.codirected&&b||!s.codirected&&(b||w))&&i.push(y)}return this.spawn(i,!0).filter(n)}}We(Or,{components:function(e){var t=this,n=t.cy(),i=n.collection(),a=e==null?t.nodes():e.nodes(),s=[];e!=null&&a.empty()&&(a=e.sources());var l=function(f,h){i.merge(f),a.unmerge(f),h.merge(f)};if(a.empty())return t.spawn();var u=function(){var f=n.collection();s.push(f);var h=a[0];l(h,f),t.bfs({directed:!1,roots:h,visit:function(p){return l(p,f)}}),f.forEach(function(d){d.connectedEdges().forEach(function(p){t.has(p)&&f.has(p.source())&&f.has(p.target())&&f.merge(p)})})};do u();while(a.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Or.componentsOf=Or.components;var lr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Mt("A collection must have a reference to the core");return}var a=new Ln,s=!1;if(!t)t=[];else if(t.length>0&&it(t[0])&&!ml(t[0])){s=!0;for(var l=[],u=new Ms,c=0,f=t.length;c<f;c++){var h=t[c];h.data==null&&(h.data={});var d=h.data;if(d.id==null)d.id=lb();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var p=new Kc(e,h,!1);l.push(p),u.add(d.id)}t=l}this.length=0;for(var g=0,y=t.length;g<y;g++){var m=t[g][0];if(m!=null){var v=m._private.data.id;(!n||!a.has(v))&&(n&&a.set(v,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(O){this.lazyMap=O},rebuildMap:function(){for(var b=this.lazyMap=new Ln,w=this.eles,x=0;x<w.length;x++){var $=w[x];b.set($.id(),{index:x,ele:$})}}},n&&(this._private.map=a),s&&!i&&this.restore()},xt=Kc.prototype=lr.prototype=Object.create(Array.prototype);xt.instanceString=function(){return"collection"};xt.spawn=function(r,e){return new lr(this.cy(),r,e)};xt.spawnSelf=function(){return this.spawn(this)};xt.cy=function(){return this._private.cy};xt.renderer=function(){return this._private.cy.renderer()};xt.element=function(){return this[0]};xt.collection=function(){return U0(this)?this:new lr(this._private.cy,[this])};xt.unique=function(){return new lr(this._private.cy,this,!0)};xt.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};xt.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new lr(e)};xt.$id=xt.getElementById;xt.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};xt.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};xt.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};xt.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(it(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var a=!1,s={},l=r.data.source,u=r.data.target;l!=null&&l!=i.source&&(s.source=""+l,a=!0),u!=null&&u!=i.target&&(s.target=""+u,a=!0),a&&(e=e.move(s))}else{var c="parent"in r.data,f=r.data.parent;c&&(f!=null||i.parent!=null)&&f!=i.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}r.position&&e.position(r.position);var h=function(y,m,v){var O=r[y];O!=null&&O!==n[y]&&(O?e[m]():e[v]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var d={data:Rn(n.data),position:Rn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var p=0;return n.classes.forEach(function(g){return d.classes+=p++===0?g:" "+g}),d}}};xt.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};xt.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),a=new Kc(r,i,!1);e.push(a)}return new lr(r,e)};xt.copy=xt.clone;xt.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,a=[],s=[],l,u=0,c=t.length;u<c;u++){var f=t[u];e&&!f.removed()||(f.isNode()?a.push(f):s.push(f))}l=a.concat(s);var h,d=function(){l.splice(h,1),h--};for(h=0;h<l.length;h++){var p=l[h],g=p._private,y=g.data;if(p.clearTraversalCache(),!(!e&&!g.removed)){if(y.id===void 0)y.id=lb();else if(ve(y.id))y.id=""+y.id;else if(Bi(y.id)||!Le(y.id)){Mt("Can not create element with invalid string ID `"+y.id+"`"),d();continue}else if(n.hasElementWithId(y.id)){Mt("Can not create second element with ID `"+y.id+"`"),d();continue}}var m=y.id;if(p.isNode()){var v=g.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(p.isEdge()){for(var O=p,b=["source","target"],w=b.length,x=!1,$=0;$<w;$++){var S=b[$],T=y[S];ve(T)&&(T=y[S]=""+y[S]),T==null||T===""?(Mt("Can not create edge `"+m+"` with unspecified "+S),x=!0):n.hasElementWithId(T)||(Mt("Can not create edge `"+m+"` with nonexistant "+S+" `"+T+"`"),x=!0)}if(x){d();continue}var k=n.getElementById(y.source),E=n.getElementById(y.target);k.same(E)?k._private.edges.push(O):(k._private.edges.push(O),E._private.edges.push(O)),O._private.source=k,O._private.target=E}g.map=new Ln,g.map.set(m,{ele:p,index:0}),g.removed=!1,e&&n.addToPool(p)}for(var P=0;P<a.length;P++){var C=a[P],M=C._private.data;ve(M.parent)&&(M.parent=""+M.parent);var D=M.parent,I=D!=null;if(I||C._private.parent){var A=C._private.parent?n.collection().merge(C._private.parent):n.getElementById(D);if(A.empty())M.parent=void 0;else if(A[0].removed())ct("Node added with missing parent, reference to parent removed"),M.parent=void 0,C._private.parent=null;else{for(var Q=!1,B=A;!B.empty();){if(C.same(B)){Q=!0,M.parent=void 0;break}B=B.parent()}Q||(A[0]._private.children.push(C),C._private.parent=A[0],i.hasCompoundNodes=!0)}}}if(l.length>0){for(var Y=l.length===t.length?t:new lr(n,l),X=0;X<Y.length;X++){var W=Y[X];W.isNode()||(W.parallelEdges().clearTraversalCache(),W.source().clearTraversalCache(),W.target().clearTraversalCache())}var q;i.hasCompoundNodes?q=n.collection().merge(Y).merge(Y.connectedNodes()).merge(Y.parent()):q=Y,q.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?Y.emitAndNotify("add"):e&&Y.emit("add")}return t};xt.removed=function(){var r=this[0];return r&&r._private.removed};xt.inside=function(){var r=this[0];return r&&!r._private.removed};xt.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},a=t._private.cy;function s(D){for(var I=D._private.edges,A=0;A<I.length;A++)u(I[A])}function l(D){for(var I=D._private.children,A=0;A<I.length;A++)u(I[A])}function u(D){var I=i[D.id()];e&&D.removed()||I||(i[D.id()]=!0,D.isNode()?(n.push(D),s(D),l(D)):n.unshift(D))}for(var c=0,f=t.length;c<f;c++){var h=t[c];u(h)}function d(D,I){var A=D._private.edges;Ii(A,I),D.clearTraversalCache()}function p(D){D.clearTraversalCache()}var g=[];g.ids={};function y(D,I){I=I[0],D=D[0];var A=D._private.children,Q=D.id();Ii(A,I),I._private.parent=null,g.ids[Q]||(g.ids[Q]=!0,g.push(D))}t.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var m=0;m<n.length;m++){var v=n[m];if(v.isEdge()){var O=v.source()[0],b=v.target()[0];d(O,v),d(b,v);for(var w=v.parallelEdges(),x=0;x<w.length;x++){var $=w[x];p($),$.isBundledBezier()&&$.dirtyBoundingBoxCache()}}else{var S=v.parent();S.length!==0&&y(S,v)}e&&(v._private.removed=!0)}var T=a._private.elements;a._private.hasCompoundNodes=!1;for(var k=0;k<T.length;k++){var E=T[k];if(E.isParent()){a._private.hasCompoundNodes=!0;break}}var P=new lr(this.cy(),n);P.size()>0&&(r?P.emitAndNotify("remove"):e&&P.emit("remove"));for(var C=0;C<g.length;C++){var M=g[C];(!e||!M.removed())&&M.updateStyle()}return P};xt.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,a=function(g){return g==null?g:""+g};if(r.source!==void 0||r.target!==void 0){var s=a(r.source),l=a(r.target),u=s!=null&&e.hasElementWithId(s),c=l!=null&&e.hasElementWithId(l);(u||c)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var p=0;p<t.length;p++){var g=t[p],y=g._private.data;g.isEdge()&&(u&&(y.source=s),c&&(y.target=l))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var f=a(r.parent),h=f===null||e.hasElementWithId(f);if(h){var d=f===null?void 0:f;e.batch(function(){var p=t.remove(n,i);p.emitAndNotify("moveout");for(var g=0;g<t.length;g++){var y=t[g],m=y._private.data;y.isNode()&&(m.parent=d)}p.restore(n,i)}),t.emitAndNotify("move")}}return this};[wb,YA,Su,Qi,Os,sD,tf,xD,Ib,Nb,CD,ju,ku,or,Ai,Or].forEach(function(r){We(xt,r)});var MD={add:function(e){var t,n=this;if(jr(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],s=0;s<i.length;s++){var l=i[s];a.push(l.json())}t=new lr(n,a)}}else if(gt(e)){var u=e;t=new lr(n,u)}else if(it(e)&&(gt(e.nodes)||gt(e.edges))){for(var c=e,f=[],h=["nodes","edges"],d=0,p=h.length;d<p;d++){var g=h[d],y=c[g];if(gt(y))for(var m=0,v=y.length;m<v;m++){var O=We({group:g},y[m]);f.push(O)}}t=new lr(n,f)}else{var b=e;t=new Kc(n,b).collection()}return t},remove:function(e){if(!jr(e)){if(Le(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function ZD(r,e,t,n){var i=4,a=.001,s=1e-7,l=10,u=11,c=1/(u-1),f=typeof Float32Array!="undefined";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var d=f?new Float32Array(u):new Array(u);function p(E,P){return 1-3*P+3*E}function g(E,P){return 3*P-6*E}function y(E){return 3*E}function m(E,P,C){return((p(P,C)*E+g(P,C))*E+y(P))*E}function v(E,P,C){return 3*p(P,C)*E*E+2*g(P,C)*E+y(P)}function O(E,P){for(var C=0;C<i;++C){var M=v(P,r,t);if(M===0)return P;var D=m(P,r,t)-E;P-=D/M}return P}function b(){for(var E=0;E<u;++E)d[E]=m(E*c,r,t)}function w(E,P,C){var M,D,I=0;do D=P+(C-P)/2,M=m(D,r,t)-E,M>0?C=D:P=D;while(Math.abs(M)>s&&++I<l);return D}function x(E){for(var P=0,C=1,M=u-1;C!==M&&d[C]<=E;++C)P+=c;--C;var D=(E-d[C])/(d[C+1]-d[C]),I=P+D*c,A=v(I,r,t);return A>=a?O(E,I):A===0?I:w(E,P,P+c)}var $=!1;function S(){$=!0,(r!==e||t!==n)&&b()}var T=function(P){return $||S(),r===e&&t===n?P:P===0?0:P===1?1:m(x(P),e,n)};T.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var k="generateBezier("+[r,e,t,n]+")";return T.toString=function(){return k},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var RD=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var s={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:s.v,dv:r(s)}}function t(n,i){var a={dx:n.v,dv:r(n)},s=e(n,i*.5,a),l=e(n,i*.5,s),u=e(n,i,l),c=1/6*(a.dx+2*(s.dx+l.dx)+u.dx),f=1/6*(a.dv+2*(s.dv+l.dv)+u.dv);return n.x=n.x+c*i,n.v=n.v+f*i,n}return function n(i,a,s){var l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,f=1/1e4,h=16/1e3,d,p,g;for(i=parseFloat(i)||500,a=parseFloat(a)||20,s=s||null,l.tension=i,l.friction=a,d=s!==null,d?(c=n(i,a),p=c/s*h):p=h;g=t(g||l,p),u.push(1+g.x),c+=16,Math.abs(g.x)>f&&Math.abs(g.v)>f;);return d?function(y){return u[y*(u.length-1)|0]}:c}}(),mt=function(e,t,n,i){var a=ZD(e,t,n,i);return function(s,l,u){return s+(l-s)*a(u)}},$u={linear:function(e,t,n){return e+(t-e)*n},ease:mt(.25,.1,.25,1),"ease-in":mt(.42,0,1,1),"ease-out":mt(0,0,.58,1),"ease-in-out":mt(.42,0,.58,1),"ease-in-sine":mt(.47,0,.745,.715),"ease-out-sine":mt(.39,.575,.565,1),"ease-in-out-sine":mt(.445,.05,.55,.95),"ease-in-quad":mt(.55,.085,.68,.53),"ease-out-quad":mt(.25,.46,.45,.94),"ease-in-out-quad":mt(.455,.03,.515,.955),"ease-in-cubic":mt(.55,.055,.675,.19),"ease-out-cubic":mt(.215,.61,.355,1),"ease-in-out-cubic":mt(.645,.045,.355,1),"ease-in-quart":mt(.895,.03,.685,.22),"ease-out-quart":mt(.165,.84,.44,1),"ease-in-out-quart":mt(.77,0,.175,1),"ease-in-quint":mt(.755,.05,.855,.06),"ease-out-quint":mt(.23,1,.32,1),"ease-in-out-quint":mt(.86,0,.07,1),"ease-in-expo":mt(.95,.05,.795,.035),"ease-out-expo":mt(.19,1,.22,1),"ease-in-out-expo":mt(1,0,0,1),"ease-in-circ":mt(.6,.04,.98,.335),"ease-out-circ":mt(.075,.82,.165,1),"ease-in-out-circ":mt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return $u.linear;var i=RD(e,t,n);return function(a,s,l){return a+(s-a)*i(l)}},"cubic-bezier":mt};function rm(r,e,t,n,i){if(n===1||e===t)return t;var a=i(e,t,n);return r==null||((r.roundValue||r.color)&&(a=Math.round(a)),r.min!==void 0&&(a=Math.max(a,r.min)),r.max!==void 0&&(a=Math.min(a,r.max))),a}function nm(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function ja(r,e,t,n,i){var a=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var s=nm(r,i),l=nm(e,i);if(ve(s)&&ve(l))return rm(a,s,l,t,n);if(gt(s)&&gt(l)){for(var u=[],c=0;c<l.length;c++){var f=s[c],h=l[c];if(f!=null&&h!=null){var d=rm(a,f,h,t,n);u.push(d)}else u.push(h)}return u}}function LD(r,e,t,n){var i=!n,a=r._private,s=e._private,l=s.easing,u=s.startTime,c=n?r:r.cy(),f=c.style();if(!s.easingImpl)if(l==null)s.easingImpl=$u.linear;else{var h;if(Le(l)){var d=f.parse("transition-timing-function",l);h=d.value}else h=l;var p,g;Le(h)?(p=h,g=[]):(p=h[1],g=h.slice(2).map(function(Y){return+Y})),g.length>0?(p==="spring"&&g.push(s.duration),s.easingImpl=$u[p].apply(null,g)):s.easingImpl=$u[p]}var y=s.easingImpl,m;if(s.duration===0?m=1:m=(t-u)/s.duration,s.applying&&(m=s.progress),m<0?m=0:m>1&&(m=1),s.delay==null){var v=s.startPosition,O=s.position;if(O&&i&&!r.locked()){var b={};to(v.x,O.x)&&(b.x=ja(v.x,O.x,m,y)),to(v.y,O.y)&&(b.y=ja(v.y,O.y,m,y)),r.position(b)}var w=s.startPan,x=s.pan,$=a.pan,S=x!=null&&n;S&&(to(w.x,x.x)&&($.x=ja(w.x,x.x,m,y)),to(w.y,x.y)&&($.y=ja(w.y,x.y,m,y)),r.emit("pan"));var T=s.startZoom,k=s.zoom,E=k!=null&&n;E&&(to(T,k)&&(a.zoom=No(a.minZoom,ja(T,k,m,y),a.maxZoom)),r.emit("zoom")),(S||E)&&r.emit("viewport");var P=s.style;if(P&&P.length>0&&i){for(var C=0;C<P.length;C++){var M=P[C],D=M.name,I=M,A=s.startStyle[D],Q=f.properties[A.name],B=ja(A,I,m,y,Q);f.overrideBypass(r,D,B)}r.emit("style")}}return s.progress=m,m}function to(r,e){return r==null||e==null?!1:ve(r)&&ve(e)?!0:!!(r&&e)}function BD(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function im(r,e){var t=e._private.aniEles,n=[];function i(f,h){var d=f._private,p=d.animation.current,g=d.animation.queue,y=!1;if(p.length===0){var m=g.shift();m&&p.push(m)}for(var v=function($){for(var S=$.length-1;S>=0;S--){var T=$[S];T()}$.splice(0,$.length)},O=p.length-1;O>=0;O--){var b=p[O],w=b._private;if(w.stopped){p.splice(O,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||BD(f,b,r),LD(f,b,r,h),w.applying&&(w.applying=!1),v(w.frames),w.step!=null&&w.step(r),b.completed()&&(p.splice(O,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.completes)),y=!0)}return!h&&p.length===0&&g.length===0&&n.push(f),y}for(var a=!1,s=0;s<t.length;s++){var l=t[s],u=i(l);a=a||u}var c=i(e,!0);(a||c)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var ID={animate:ut.animate(),animation:ut.animation(),animated:ut.animated(),clearQueue:ut.clearQueue(),delay:ut.delay(),delayAnimation:ut.delayAnimation(),stop:ut.stop(),addToAnimationPool:function(e){var t=this;!t.styleEnabled()||t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){!e._private.animationsRunning||qu(function(a){im(a,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,s){im(s,e)},n.beforeRenderPriorities.animations):t()}},ND={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&ml(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},jl=function(e){return Le(e)?new Ni(e):e},qb={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new rf(ND,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,jl(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,jl(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,jl(t),n),this},once:function(e,t,n){return this.emitter().one(e,jl(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};ut.eventAliasesOn(qb);var id={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};id.jpeg=id.jpg;var Pu={layout:function(e){var t=this;if(e==null){Mt("Layout options must be specified to make a layout");return}if(e.name==null){Mt("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){Mt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Le(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var s=new i(We({},e,{cy:t,eles:a}));return s}};Pu.createLayout=Pu.makeLayout=Pu.layout;var zD={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(!!n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],s=e[a],l=t.getElementById(a);l.data(s)}})}},WD=fr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ad={renderTo:function(e,t,n,i){var a=this._private.renderer;return a.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){Mt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&ct("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=WD(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};ad.invalidateDimensions=ad.resize;var Cu={collection:function(e,t){return Le(e)?this.$(e):jr(e)?e.collection():gt(e)?(t||(t={}),new lr(this,e,t.unique,t.removed)):new lr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Cu.elements=Cu.filter=Cu.$;var wr={},Po="t",qD="f";wr.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),a=0;a<r.length;a++){var s=r[a],l=e.getContextMeta(s);if(!l.empty){var u=e.getContextStyle(l),c=e.applyContextStyle(l,u,s);s._private.appliedInitStyle?e.updateTransitions(s,c.diffProps):s._private.appliedInitStyle=!0;var f=e.updateStyleHints(s);f&&i.push(s)}}return i};wr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,a=n[i];if(a)return a;for(var s=[],l={},u=0;u<t.length;u++){var c=t[u],f=r[u]===Po,h=e[u]===Po,d=f!==h,p=c.mappedProperties.length>0;if(d||h&&p){var g=void 0;d&&p||d?g=c.properties:p&&(g=c.mappedProperties);for(var y=0;y<g.length;y++){for(var m=g[y],v=m.name,O=!1,b=u+1;b<t.length;b++){var w=t[b],x=e[b]===Po;if(!!x&&(O=w.properties[m.name]!=null,O))break}!l[v]&&!O&&(l[v]=!0,s.push(v))}}}return n[i]=s,s};wr.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",a=0;a<e.length;a++){var s=e[a],l=s.selector&&s.selector.matches(r);l?t+=Po:t+=qD}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};wr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<t.length;a++){var s=t[a],l=e[a]===Po;if(!!l)for(var u=0;u<s.properties.length;u++){var c=s.properties[u];i[c.name]=c}}return n[e]=i,i};wr.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,a={},s=n.types,l=0;l<i.length;l++){var u=i[l],c=e[u],f=t.pstyle(u);if(!c)if(f)f.bypass?c={name:u,deleteBypassed:!0}:c={name:u,delete:!0};else continue;if(f!==c){if(c.mapped===s.fn&&f!=null&&f.mapping!=null&&f.mapping.value===c.value){var h=f.mapping,d=h.fnValue=c.value(t);if(d===h.prevFnValue)continue}var p=a[u]={prev:f};n.applyParsedProperty(t,c),p.next=t.pstyle(u),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:a}};wr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,a=function(K,de,Oe){return t.getPropertiesHash(K,de,Oe)},s=e.styleKey;if(r.removed())return!1;var l=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var c=0;c<i.length;c++){var f=i[c];e.styleKeys[f]=[ts,fo]}for(var h=function(K,de){return e.styleKeys[de][0]=Lo(K,e.styleKeys[de][0])},d=function(K,de){return e.styleKeys[de][1]=Bo(K,e.styleKeys[de][1])},p=function(K,de){h(K,de),d(K,de)},g=function(K,de){for(var Oe=0;Oe<K.length;Oe++){var pe=K.charCodeAt(Oe);h(pe,de),d(pe,de)}},y=2e9,m=function(K){return-128<K&&K<128&&Math.floor(K)!==K?y-(K*1024|0):K},v=0;v<n.length;v++){var O=n[v],b=u[O];if(b!=null){var w=this.properties[O],x=w.type,$=w.groupKey,S=void 0;w.hashOverride!=null?S=w.hashOverride(r,b):b.pfValue!=null&&(S=b.pfValue);var T=w.enums==null?b.value:null,k=S!=null,E=T!=null,P=k||E,C=b.units;if(x.number&&P&&!x.multiple){var M=k?S:T;p(m(M),$),!k&&C!=null&&g(C,$)}else g(b.strValue,$)}}for(var D=[ts,fo],I=0;I<i.length;I++){var A=i[I],Q=e.styleKeys[A];D[0]=Lo(Q[0],D[0]),D[1]=Bo(Q[1],D[1])}e.styleKey=rQ(D[0],D[1]);var B=e.styleKeys;e.labelDimsKey=vi(B.labelDimensions);var Y=a(r,["label"],B.labelDimensions);if(e.labelKey=vi(Y),e.labelStyleKey=vi(Il(B.commonLabel,Y)),!l){var X=a(r,["source-label"],B.labelDimensions);e.sourceLabelKey=vi(X),e.sourceLabelStyleKey=vi(Il(B.commonLabel,X));var W=a(r,["target-label"],B.labelDimensions);e.targetLabelKey=vi(W),e.targetLabelStyleKey=vi(Il(B.commonLabel,W))}if(l){var q=e.styleKeys,F=q.nodeBody,Z=q.nodeBorder,N=q.nodeOutline,V=q.backgroundImage,z=q.compound,j=q.pie,G=[F,Z,N,V,z,j].filter(function(U){return U!=null}).reduce(Il,[ts,fo]);e.nodeKey=vi(G),e.hasPie=j!=null&&j[0]!==ts&&j[1]!==fo}return s!==e.styleKey};wr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};wr.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,a,s=t.types,l=t.properties[n.name].type,u=n.bypass,c=i[n.name],f=c&&c.bypass,h=r._private,d="mapping",p=function(F){return F==null?null:F.pfValue!=null?F.pfValue:F.value},g=function(){var F=p(c),Z=p(n);t.checkTriggers(r,n.name,F,Z)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,g(),!0;if(n.deleteBypassed)return c?c.bypass?(c.bypassed=void 0,g(),!0):!1:(g(),!0);if(n.deleteBypass)return c?c.bypass?(i[n.name]=c.bypassed,g(),!0):!1:(g(),!0);var y=function(){ct("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var m=n.field.split("."),v=h.data,O=0;O<m.length&&v;O++){var b=m[O];v=v[b]}if(v==null)return y(),!1;var w;if(ve(v)){var x=n.fieldMax-n.fieldMin;x===0?w=0:w=(v-n.fieldMin)/x}else return ct("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+v+"` for `"+r.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),l.color){var $=n.valueMin[0],S=n.valueMax[0],T=n.valueMin[1],k=n.valueMax[1],E=n.valueMin[2],P=n.valueMax[2],C=n.valueMin[3]==null?1:n.valueMin[3],M=n.valueMax[3]==null?1:n.valueMax[3],D=[Math.round($+(S-$)*w),Math.round(T+(k-T)*w),Math.round(E+(P-E)*w),Math.round(C+(M-C)*w)];a={bypass:n.bypass,name:n.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else if(l.number){var I=n.valueMin+(n.valueMax-n.valueMin)*w;a=this.parse(n.name,I,n.bypass,d)}else return!1;if(!a)return y(),!1;a.mapping=n,n=a;break}case s.data:{for(var A=n.field.split("."),Q=h.data,B=0;B<A.length&&Q;B++){var Y=A[B];Q=Q[Y]}if(Q!=null&&(a=this.parse(n.name,Q,n.bypass,d)),!a)return y(),!1;a.mapping=n,n=a;break}case s.fn:{var X=n.value,W=n.fnValue!=null?n.fnValue:X(r);if(n.prevFnValue=W,W==null)return ct("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(a=this.parse(n.name,W,n.bypass,d),!a)return ct("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;a.mapping=Rn(n),n=a;break}case void 0:break;default:return!1}return u?(f?n.bypassed=c.bypassed:n.bypassed=c,i[n.name]=n):f?c.bypassed=n:i[n.name]=n,g(),!0};wr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),s=0;s<a.length;s++){var l=a[s],u=i[l];u!=null&&(u.bypass?u.bypassed=null:i[l]=null)}}};wr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};wr.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,a=r.pstyle("transition-duration").pfValue,s=r.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var l={},u=!1,c=0;c<i.length;c++){var f=i[c],h=r.pstyle(f),d=e[f];if(!!d){var p=d.prev,g=p,y=d.next!=null?d.next:h,m=!1,v=void 0,O=1e-6;!g||(ve(g.pfValue)&&ve(y.pfValue)?(m=y.pfValue-g.pfValue,v=g.pfValue+O*m):ve(g.value)&&ve(y.value)?(m=y.value-g.value,v=g.value+O*m):gt(g.value)&&gt(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2],v=g.strValue),m&&(l[f]=y.strValue,this.applyBypass(r,f,v),u=!0))}}if(!u)return;n.transitioning=!0,new Zs(function(b){s>0?r.delayAnimation(s).play().promise().then(b):b()}).then(function(){return r.animation({style:l,duration:a,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};wr.checkTrigger=function(r,e,t,n,i,a){var s=this.properties[e],l=i(s);l!=null&&l(t,n)&&a(s)};wr.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};wr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(t==="bezier"||n==="bezier")&&r.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()}),i.triggersBoundsOfConnectedEdges&&e==="display"&&(t==="none"||n==="none")&&r.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};wr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var bl={};bl.applyBypass=function(r,e,t,n){var i=this,a=[],s=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var l=0;l<i.properties.length;l++){var u=i.properties[l],c=u.name,f=this.parse(c,t,!0);f&&a.push(f)}}else if(Le(e)){var h=this.parse(e,t,!0);h&&a.push(h)}else if(it(e)){var d=e;n=t;for(var p=Object.keys(d),g=0;g<p.length;g++){var y=p[g],m=d[y];if(m===void 0&&(m=d[Hc(y)]),m!==void 0){var v=this.parse(y,m,!0);v&&a.push(v)}}}else return!1;if(a.length===0)return!1;for(var O=!1,b=0;b<r.length;b++){for(var w=r[b],x={},$=void 0,S=0;S<a.length;S++){var T=a[S];if(n){var k=w.pstyle(T.name);$=x[T.name]={prev:k}}O=this.applyParsedProperty(w,Rn(T))||O,n&&($.next=w.pstyle(T.name))}O&&this.updateStyleHints(w),n&&this.updateTransitions(w,x,s)}return O};bl.overrideBypass=function(r,e,t){e=Mp(e);for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style[e],s=this.properties[e].type,l=s.color,u=s.mutiple,c=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,t):(a.value=t,a.pfValue!=null&&(a.pfValue=t),l?a.strValue="rgb("+t.join(",")+")":u?a.strValue=t.join(" "):a.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,c,t)}};bl.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};bl.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var a=r[i],s={},l=0;l<e.length;l++){var u=e[l],c=this.properties[u],f=a.pstyle(c.name);if(!(!f||!f.bypass)){var h="",d=this.parse(u,h,!0),p=s[c.name]={prev:f};this.applyParsedProperty(a,d),p.next=a.pstyle(c.name)}}this.updateStyleHints(a),t&&this.updateTransitions(a,s,n)}};var Xp={};Xp.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};Xp.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Xn={};Xn.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Xn.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var a=t.properties[i],s=t.getStylePropertyValue(r,a.name,e);s!=null&&(n[a.name]=s,n[Hc(a.name)]=s)}return n}};Xn.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i!=null?i:r.cy().style().getDefaultProperty(e)[t][0]};Xn.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,s=r.pstyle(i.name);if(s){var l=s.value,u=s.units,c=s.strValue;if(t&&a.number&&l!=null&&ve(l)){var f=r.cy().zoom(),h=function(m){return m*f},d=function(m,v){return h(m)+v},p=gt(l),g=p?u.every(function(y){return y!=null}):u!=null;return g?p?l.map(function(y,m){return d(y,u[m])}).join(" "):d(l,u):p?l.map(function(y){return Le(y)?y:""+h(y)}).join(" "):""+h(l)}else if(c!=null)return c}return null}};Xn.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=i.name,s=r.pstyle(a);s!==void 0&&(it(s)?s=this.parse(a,s.strValue):s=this.parse(a,s)),s&&(t[a]=s)}return t};Xn.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var a=Object.keys(n),s=0;s<a.length;s++){var l=a[s],u=n[l],c=i[l]||i[Mp(l)],f=this.parse(c.name,u);f&&t.push(f)}return t};Xn.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,a,s,l,u,c;for(u=0;u<e.length;u++)if(i=e[u],a=r.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=Lo(l,n[0]),n[1]=Bo(l,n[1]);else for(s=a.strValue,c=0;c<s.length;c++)l=s.charCodeAt(c),n[0]=Lo(l,n[0]),n[1]=Bo(l,n[1]);return n};Xn.getPropertiesHash=Xn.getNonDefaultPropertiesHash;var sf={};sf.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,a=n.style||n.css,s=Object.keys(a);e.selector(i);for(var l=0;l<s.length;l++){var u=s[l],c=a[u];e.css(u,c)}}return e};sf.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};sf.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,a={},s=0;s<i.length;s++){var l=i[s];a[l.name]=l.strValue}r.push({selector:n?n.toString():"core",style:a})}return r};var Vp={};Vp.appendFromString=function(r){var e=this,t=this,n=""+r,i,a,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function l(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>s.length?a=a.substr(s.length):a=""}for(;;){var c=n.match(/^\s*$/);if(c)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){ct("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=f[0];var h=f[1];if(h!=="core"){var d=new Ni(h);if(d.invalid){ct("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),l();continue}}var p=f[2],g=!1;a=p;for(var y=[];;){var m=a.match(/^\s*$/);if(m)break;var v=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){ct("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),g=!0;break}s=v[0];var O=v[1],b=v[2],w=e.properties[O];if(!w){ct("Skipping property: Invalid property name in: "+s),u();continue}var x=t.parse(O,b);if(!x){ct("Skipping property: Invalid property definition in: "+s),u();continue}y.push({name:O,val:b}),u()}if(g){l();break}t.selector(h);for(var $=0;$<y.length;$++){var S=y[$];t.css(S.name,S.val)}l()}return t};Vp.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Jt={};(function(){var r=Ft,e=qT,t=XT,n=VT,i=FT,a=function(G){return"^"+G+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(G){var U=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+G+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},l=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Jt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:l,singleRegexMatchValue:!0},urls:{regexes:l,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(G,U){switch(G.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return Le(G[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(G){var U=G.length;return U===1||U===2||U===4}}};var u={zeroNonZero:function(G,U){return(G==null||U==null)&&G!==U||G==0&&U!=0?!0:G!=0&&U==0},any:function(G,U){return G!=U},emptyNonEmpty:function(G,U){var K=Bi(G),de=Bi(U);return K&&!de||!K&&de}},c=Jt.types,f=[{name:"label",type:c.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:c.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:c.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:c.bidirectionalSize,triggersBounds:u.any}],h=[{name:"source-label",type:c.text,triggersBounds:u.any},{name:"source-text-rotation",type:c.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:c.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:c.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:c.size,triggersBounds:u.any}],d=[{name:"target-label",type:c.text,triggersBounds:u.any},{name:"target-text-rotation",type:c.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:c.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:c.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:c.size,triggersBounds:u.any}],p=[{name:"font-family",type:c.fontFamily,triggersBounds:u.any},{name:"font-style",type:c.fontStyle,triggersBounds:u.any},{name:"font-weight",type:c.fontWeight,triggersBounds:u.any},{name:"font-size",type:c.size,triggersBounds:u.any},{name:"text-transform",type:c.textTransform,triggersBounds:u.any},{name:"text-wrap",type:c.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:c.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:c.size,triggersBounds:u.any},{name:"text-outline-width",type:c.size,triggersBounds:u.any},{name:"line-height",type:c.positiveNumber,triggersBounds:u.any}],g=[{name:"text-valign",type:c.valign,triggersBounds:u.any},{name:"text-halign",type:c.halign,triggersBounds:u.any},{name:"color",type:c.color},{name:"text-outline-color",type:c.color},{name:"text-outline-opacity",type:c.zeroOneNumber},{name:"text-background-color",type:c.color},{name:"text-background-opacity",type:c.zeroOneNumber},{name:"text-background-padding",type:c.size,triggersBounds:u.any},{name:"text-border-opacity",type:c.zeroOneNumber},{name:"text-border-color",type:c.color},{name:"text-border-width",type:c.size,triggersBounds:u.any},{name:"text-border-style",type:c.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:c.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:c.justification}],y=[{name:"events",type:c.bool,triggersZOrder:u.any},{name:"text-events",type:c.bool,triggersZOrder:u.any}],m=[{name:"display",type:c.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:c.visibility,triggersZOrder:u.any},{name:"opacity",type:c.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:c.zeroOneNumber},{name:"min-zoomed-font-size",type:c.size},{name:"z-compound-depth",type:c.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:c.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:c.number,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:c.size,triggersBounds:u.any},{name:"overlay-color",type:c.color},{name:"overlay-opacity",type:c.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:c.overlayShape,triggersBounds:u.any}],O=[{name:"underlay-padding",type:c.size,triggersBounds:u.any},{name:"underlay-color",type:c.color},{name:"underlay-opacity",type:c.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:c.overlayShape,triggersBounds:u.any}],b=[{name:"transition-property",type:c.propList},{name:"transition-duration",type:c.time},{name:"transition-delay",type:c.time},{name:"transition-timing-function",type:c.easing}],w=function(G,U){return U.value==="label"?-G.poolIndex():U.pfValue},x=[{name:"height",type:c.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:c.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:c.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:c.polygonPointList,triggersBounds:u.any},{name:"background-color",type:c.color},{name:"background-fill",type:c.fill},{name:"background-opacity",type:c.zeroOneNumber},{name:"background-blacken",type:c.nOneOneNumber},{name:"background-gradient-stop-colors",type:c.colors},{name:"background-gradient-stop-positions",type:c.percentages},{name:"background-gradient-direction",type:c.gradientDirection},{name:"padding",type:c.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:c.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:c.boundsExpansion,triggersBounds:u.any}],$=[{name:"border-color",type:c.color},{name:"border-opacity",type:c.zeroOneNumber},{name:"border-width",type:c.size,triggersBounds:u.any},{name:"border-style",type:c.borderStyle}],S=[{name:"outline-color",type:c.color},{name:"outline-opacity",type:c.zeroOneNumber},{name:"outline-width",type:c.size,triggersBounds:u.any},{name:"outline-style",type:c.borderStyle},{name:"outline-offset",type:c.size,triggersBounds:u.any}],T=[{name:"background-image",type:c.urls},{name:"background-image-crossorigin",type:c.bgCrossOrigin},{name:"background-image-opacity",type:c.zeroOneNumbers},{name:"background-image-containment",type:c.bgContainment},{name:"background-image-smoothing",type:c.bools},{name:"background-position-x",type:c.bgPos},{name:"background-position-y",type:c.bgPos},{name:"background-width-relative-to",type:c.bgRelativeTo},{name:"background-height-relative-to",type:c.bgRelativeTo},{name:"background-repeat",type:c.bgRepeat},{name:"background-fit",type:c.bgFit},{name:"background-clip",type:c.bgClip},{name:"background-width",type:c.bgWH},{name:"background-height",type:c.bgWH},{name:"background-offset-x",type:c.bgPos},{name:"background-offset-y",type:c.bgPos}],k=[{name:"position",type:c.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:c.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:c.size,triggersBounds:u.any},{name:"min-width-bias-left",type:c.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:c.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:c.size,triggersBounds:u.any},{name:"min-height-bias-top",type:c.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:c.sizeMaybePercent,triggersBounds:u.any}],E=[{name:"line-style",type:c.lineStyle},{name:"line-color",type:c.color},{name:"line-fill",type:c.fill},{name:"line-cap",type:c.lineCap},{name:"line-opacity",type:c.zeroOneNumber},{name:"line-dash-pattern",type:c.numbers},{name:"line-dash-offset",type:c.number},{name:"line-gradient-stop-colors",type:c.colors},{name:"line-gradient-stop-positions",type:c.percentages},{name:"curve-style",type:c.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:c.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:c.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:c.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:c.size,triggersBounds:u.any},{name:"control-point-distances",type:c.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:c.numbers,triggersBounds:u.any},{name:"segment-distances",type:c.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:c.numbers,triggersBounds:u.any},{name:"taxi-turn",type:c.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:c.size,triggersBounds:u.any},{name:"taxi-direction",type:c.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:c.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:c.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:c.angle,triggersBounds:u.any},{name:"loop-sweep",type:c.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:c.size,triggersBounds:u.any},{name:"target-distance-from-node",type:c.size,triggersBounds:u.any}],P=[{name:"ghost",type:c.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:c.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:c.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:c.zeroOneNumber}],C=[{name:"selection-box-color",type:c.color},{name:"selection-box-opacity",type:c.zeroOneNumber},{name:"selection-box-border-color",type:c.color},{name:"selection-box-border-width",type:c.size},{name:"active-bg-color",type:c.color},{name:"active-bg-opacity",type:c.zeroOneNumber},{name:"active-bg-size",type:c.size},{name:"outside-texture-bg-color",type:c.color},{name:"outside-texture-bg-opacity",type:c.zeroOneNumber}],M=[];Jt.pieBackgroundN=16,M.push({name:"pie-size",type:c.sizeMaybePercent});for(var D=1;D<=Jt.pieBackgroundN;D++)M.push({name:"pie-"+D+"-background-color",type:c.color}),M.push({name:"pie-"+D+"-background-size",type:c.percent}),M.push({name:"pie-"+D+"-background-opacity",type:c.zeroOneNumber});var I=[],A=Jt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:c.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:c.color},{name:"arrow-fill",type:c.arrowFill},{name:"arrow-width",type:c.arrowWidth}].forEach(function(j){A.forEach(function(G){var U=G+"-"+j.name,K=j.type,de=j.triggersBounds;I.push({name:U,type:K,triggersBounds:de})})},{});var Q=Jt.properties=[].concat(y,b,m,v,O,P,g,p,f,h,d,x,$,S,T,M,k,E,I,C),B=Jt.propertyGroups={behavior:y,transition:b,visibility:m,overlay:v,underlay:O,ghost:P,commonLabel:g,labelDimensions:p,mainLabel:f,sourceLabel:h,targetLabel:d,nodeBody:x,nodeBorder:$,nodeOutline:S,backgroundImage:T,pie:M,compound:k,edgeLine:E,edgeArrow:I,core:C},Y=Jt.propertyGroupNames={},X=Jt.propertyGroupKeys=Object.keys(B);X.forEach(function(j){Y[j]=B[j].map(function(G){return G.name}),B[j].forEach(function(G){return G.groupKey=j})});var W=Jt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Jt.propertyNames=Q.map(function(j){return j.name});for(var q=0;q<Q.length;q++){var F=Q[q];Q[F.name]=F}for(var Z=0;Z<W.length;Z++){var N=W[Z],V=Q[N.pointsTo],z={name:N.name,alias:!0,pointsTo:V};Q.push(z),Q[N.name]=z}})();Jt.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Jt.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=We({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,c){for(var f=1;f<=Jt.pieBackgroundN;f++){var h=c.name.replace("{{i}}",f),d=c.value;u[h]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,c){return Jt.arrowPrefixes.forEach(function(f){var h=f+"-"+c.name,d=c.value;u[h]=d}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=e[a],l=this.parse(a,s);t[a]=l}}return r.defaultProperties=t,r.defaultProperties};Jt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var of={};of.parse=function(r,e,t,n){var i=this;if(_t(e))return i.parseImplWarn(r,e,t,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=t?"t":"f",l=""+e,u=ab(r,l,s,a),c=i.propCache=i.propCache||[],f;return(f=c[u])||(f=c[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(f=Rn(f),f&&(f.value=Rn(f.value))),f};of.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&ct("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&ct("The style value of `label` is deprecated for `"+i.name+"`"),i};of.parseImpl=function(r,e,t,n){var i=this;r=Mp(r);var a=i.properties[r],s=e,l=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,r=a.name);var u=Le(e);u&&(e=e.trim());var c=a.type;if(!c)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(_t(e))return{name:r,value:e,strValue:"fn",mapped:l.fn,bypass:t};var f,h;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(l.data.regex).exec(e))){if(t)return!1;var d=l.data;return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(l.mapData.regex).exec(e))){if(t||c.multiple)return!1;var p=l.mapData;if(!(c.color||c.number))return!1;var g=this.parse(r,h[4]);if(!g||g.mapped)return!1;var y=this.parse(r,h[5]);if(!y||y.mapped)return!1;if(g.pfValue===y.pfValue||g.strValue===y.strValue)return ct("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+g.strValue+"`"),this.parse(r,g.strValue);if(c.color){var m=g.value,v=y.value,O=m[0]===v[0]&&m[1]===v[1]&&m[2]===v[2]&&(m[3]===v[3]||(m[3]==null||m[3]===1)&&(v[3]==null||v[3]===1));if(O)return!1}return{name:r,value:h,strValue:""+e,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:g.value,valueMax:y.value,bypass:t}}}if(c.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):gt(e)?b=e:b=[e],c.evenMultiple&&b.length%2!==0)return null;for(var w=[],x=[],$=[],S="",T=!1,k=0;k<b.length;k++){var E=i.parse(r,b[k],t,"multiple");T=T||Le(E.value),w.push(E.value),$.push(E.pfValue!=null?E.pfValue:E.value),x.push(E.units),S+=(k>0?" ":"")+E.strValue}return c.validate&&!c.validate(w,x)?null:c.singleEnum&&T?w.length===1&&Le(w[0])?{name:r,value:w[0],strValue:w[0],bypass:t}:null:{name:r,value:w,pfValue:$,strValue:S,bypass:t,units:x}}var P=function(){for(var G=0;G<c.enums.length;G++){var U=c.enums[G];if(U===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(c.number){var C,M="px";if(c.units&&(C=c.units),c.implicitUnits&&(M=c.implicitUnits),!c.unitless)if(u){var D="px|em"+(c.allowPercent?"|\\%":"");C&&(D=C);var I=e.match("^("+Ft+")("+D+")?$");I&&(e=I[1],C=I[2]||M)}else(!C||c.implicitUnits)&&(C=M);if(e=parseFloat(e),isNaN(e)&&c.enums===void 0)return null;if(isNaN(e)&&c.enums!==void 0)return e=s,P();if(c.integer&&!RT(e)||c.min!==void 0&&(e<c.min||c.strictMin&&e===c.min)||c.max!==void 0&&(e>c.max||c.strictMax&&e===c.max))return null;var A={name:r,value:e,strValue:""+e+(C||""),units:C,bypass:t};return c.unitless||C!=="px"&&C!=="em"?A.pfValue=e:A.pfValue=C==="px"||!C?e:this.getEmSizeInPixels()*e,(C==="ms"||C==="s")&&(A.pfValue=C==="ms"?e:1e3*e),(C==="deg"||C==="rad")&&(A.pfValue=C==="rad"?e:AQ(e)),C==="%"&&(A.pfValue=e/100),A}else if(c.propList){var Q=[],B=""+e;if(B!=="none"){for(var Y=B.split(/\s*,\s*|\s+/),X=0;X<Y.length;X++){var W=Y[X].trim();i.properties[W]?Q.push(W):ct("`"+W+"` is not a valid property name")}if(Q.length===0)return null}return{name:r,value:Q,strValue:Q.length===0?"none":Q.join(" "),bypass:t}}else if(c.color){var q=JT(e);return q?{name:r,value:q,pfValue:q,strValue:"rgb("+q[0]+","+q[1]+","+q[2]+")",bypass:t}:null}else if(c.regex||c.regexes){if(c.enums){var F=P();if(F)return F}for(var Z=c.regexes?c.regexes:[c.regex],N=0;N<Z.length;N++){var V=new RegExp(Z[N]),z=V.exec(e);if(z)return{name:r,value:c.singleRegexMatchValue?z[1]:z,strValue:""+e,bypass:t}}return null}else return c.string?{name:r,value:""+e,strValue:""+e,bypass:t}:c.enums?P():null};var yr=function r(e){if(!(this instanceof r))return new r(e);if(!_p(e)){Mt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},br=yr.prototype;br.instanceString=function(){return"style"};br.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};br.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};br.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};br.selector=function(r){var e=r==="core"?null:new Ni(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};br.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],a=t[i.name];a===void 0&&(a=t[Hc(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};br.style=br.css;br.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};br.append=function(r){return H0(r)?r.appendToStyle(this):gt(r)?this.appendFromJson(r):Le(r)&&this.appendFromString(r),this};yr.fromJson=function(r,e){var t=new yr(r);return t.fromJson(e),t};yr.fromString=function(r,e){return new yr(r).fromString(e)};[wr,bl,Xp,Xn,sf,Vp,Jt,of].forEach(function(r){We(br,r)});yr.types=br.types;yr.properties=br.properties;yr.propertyGroups=br.propertyGroups;yr.propertyGroupNames=br.propertyGroupNames;yr.propertyGroupKeys=br.propertyGroupKeys;var YD={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return H0(e)?t.style=e.generateStyle(this):gt(e)?t.style=yr.fromJson(this,e):Le(e)?t.style=yr.fromString(this,e):t.style=yr(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},XD="single",Sa={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=XD),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,a,s,l;switch(e.length){case 0:return t;case 1:if(Le(e[0]))return n=e[0],t[n];if(it(e[0])){if(!this._private.panningEnabled)return this;a=e[0],s=a.x,l=a.y,ve(s)&&(t.x=s),ve(l)&&(t.y=l),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&ve(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,a,s,l,u,c;if(!this._private.panningEnabled)return this;switch(n.length){case 1:it(e)&&(l=n[0],u=l.x,c=l.y,ve(u)&&(i.x+=u),ve(c)&&(i.y+=c),this.emit("pan viewport"));break;case 2:a=e,s=t,(a==="x"||a==="y")&&ve(s)&&(i[a]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(ve(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Le(e)){var i=e;e=this.$(i)}else if(IT(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else jr(e)||(e=this.mutableElements());if(!(jr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),l=this.height(),u;if(t=ve(t)?t:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*t)/n.w,(l-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var c={x:(s-u*(n.x1+n.x2))/2,y:(l-u*(n.y1+n.y2))/2};return{zoom:u,pan:c}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return ve(e)&&ve(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):ve(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:ve(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a,s,l=!1;if(t.zoomingEnabled||(l=!0),ve(e)?s=e:it(e)&&(s=e.level,e.position!=null?a=Jc(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(l=!0)),s=s>t.maxZoom?t.maxZoom:s,s=s<t.minZoom?t.minZoom:s,l||!ve(s)||s===i||a!=null&&(!ve(a.x)||!ve(a.y)))return null;if(a!=null){var u=n,c=i,f=s,h={x:-f/c*(a.x-u.x)+a.x,y:-f/c*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:f,pan:h}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],s=!1,l=!1;if(!e)return this;if(ve(e.zoom)||(n=!1),it(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?s=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!s||!e.cancelOnFailedZoom)&&t.panningEnabled){var c=e.pan;ve(c.x)&&(t.pan.x=c.x,l=!1),ve(c.y)&&(t.pan.y=c.y,l=!1),l||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(!!this._private.panningEnabled){if(Le(e)){var n=e;e=this.mutableElements().filter(n)}else jr(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),s=this.height();t=t===void 0?this._private.zoom:t;var l={x:(a-t*(i.x1+i.x2))/2,y:(s-t*(i.y1+i.y2))/2};return l}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var i=n.window().getComputedStyle(t),a=function(l){return parseFloat(i.getPropertyValue(l))};return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Sa.centre=Sa.center;Sa.autolockNodes=Sa.autolock;Sa.autoungrabifyNodes=Sa.autoungrabify;var Yo={data:ut.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ut.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ut.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ut.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Yo.attr=Yo.data;Yo.removeAttr=Yo.removeData;var Xo=function(e){var t=this;e=We({},e);var n=e.container;n&&!Wu(n)&&Wu(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var s=Xt!==void 0&&n!==void 0&&!e.headless,l=e;l.layout=We({name:s?"grid":"null"},l.layout),l.renderer=We({name:s?"canvas":"null"},l.renderer);var u=function(g,y,m){return y!==void 0?y:m!==void 0?m:g},c=this._private={container:n,ready:!1,options:l,elements:new lr(this),listeners:[],aniEles:new lr(this),data:l.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,l.zoomingEnabled),userZoomingEnabled:u(!0,l.userZoomingEnabled),panningEnabled:u(!0,l.panningEnabled),userPanningEnabled:u(!0,l.userPanningEnabled),boxSelectionEnabled:u(!0,l.boxSelectionEnabled),autolock:u(!1,l.autolock,l.autolockNodes),autoungrabify:u(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:u(!1,l.autounselectify),styleEnabled:l.styleEnabled===void 0?s:l.styleEnabled,zoom:ve(l.zoom)?l.zoom:1,pan:{x:it(l.pan)&&ve(l.pan.x)?l.pan.x:0,y:it(l.pan)&&ve(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,l.multiClickDebounceTime)};this.createEmitter(),this.selectionType(l.selectionType),this.zoomRange({min:l.minZoom,max:l.maxZoom});var f=function(g,y){var m=g.some(NT);if(m)return Zs.all(g).then(y);y(g)};c.styleEnabled&&t.setStyle([]);var h=We({},l,l.renderer);t.initRenderer(h);var d=function(g,y,m){t.notifications(!1);var v=t.mutableElements();v.length>0&&v.remove(),g!=null&&(it(g)||gt(g))&&t.add(g),t.one("layoutready",function(b){t.notifications(!0),t.emit(b),t.one("load",y),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",m),t.emit("done")});var O=We({},t._private.options.layout);O.eles=t.elements(),t.layout(O).run()};f([l.style,l.elements],function(p){var g=p[0],y=p[1];c.styleEnabled&&t.style().append(g),d(y,function(){t.startAnimationLoop(),c.ready=!0,_t(l.ready)&&t.on("ready",l.ready);for(var m=0;m<a.length;m++){var v=a[m];t.on("ready",v)}i&&(i.readies=[]),t.emit("ready")},l.done)})},Gu=Xo.prototype;We(Gu,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Xt;var t=this._private.container.ownerDocument;return t===void 0||t==null?Xt:t.defaultView||Xt},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!Wu(e)&&Wu(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(We({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Rn(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),a=function(w){return t.getElementById(w.id())};if(it(e)){if(t.startBatch(),e.elements){var s={},l=function(w,x){for(var $=[],S=[],T=0;T<w.length;T++){var k=w[T];if(!k.data.id){ct("cy.json() cannot handle elements without an ID attribute");continue}var E=""+k.data.id,P=t.getElementById(E);s[E]=!0,P.length!==0?S.push({ele:P,json:k}):(x&&(k.group=x),$.push(k))}t.add($);for(var C=0;C<S.length;C++){var M=S[C],D=M.ele,I=M.json;D.json(I)}};if(gt(e.elements))l(e.elements);else for(var u=["nodes","edges"],c=0;c<u.length;c++){var f=u[c],h=e.elements[f];gt(h)&&l(h,f)}var d=t.collection();i.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?d.merge(b):b.remove()}),d.forEach(function(b){return b.children().move({parent:null})}),d.forEach(function(b){return a(b).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],g=0;g<p.length;g++){var y=p[g];e[y]!=null&&t[y](e[y])}return t.endBatch(),this}else{var m=!!e,v={};m?v.elements=this.elements().map(function(b){return b.json()}):(v.elements={},i.forEach(function(b){var w=b.group();v.elements[w]||(v.elements[w]=[]),v.elements[w].push(b.json())})),this._private.styleEnabled&&(v.style=t.style().json()),v.data=Rn(t.data());var O=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Rn(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Rn(O.renderer),v.hideEdgesOnViewport=O.hideEdgesOnViewport,v.textureOnViewport=O.textureOnViewport,v.wheelSensitivity=O.wheelSensitivity,v.motionBlur=O.motionBlur,v.multiClickDebounceTime=O.multiClickDebounceTime,v}}});Gu.$id=Gu.getElementById;[MD,ID,qb,id,Pu,zD,ad,Cu,YD,Sa,Yo].forEach(function(r){We(Gu,r)});var VD={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},FD={maximal:!1,acyclic:!1},Ga=function(e){return e.scratch("breadthfirst")},am=function(e,t){return e.scratch("breadthfirst",t)};function Yb(r){this.options=We({},VD,FD,r)}Yb.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().filter(function(pe){return!pe.isParent()}),a=n,s=e.directed,l=e.acyclic||e.maximal||e.maximalAdjustments>0,u=Br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),c;if(jr(e.roots))c=e.roots;else if(gt(e.roots)){for(var f=[],h=0;h<e.roots.length;h++){var d=e.roots[h],p=t.getElementById(d);f.push(p)}c=t.collection(f)}else if(Le(e.roots))c=t.$(e.roots);else if(s)c=i.roots();else{var g=n.components();c=t.collection();for(var y=function(he){var me=g[he],Pe=me.maxDegree(!1),xe=me.filter(function(Qe){return Qe.degree(!1)===Pe});c=c.add(xe)},m=0;m<g.length;m++)y(m)}var v=[],O={},b=function(he,me){v[me]==null&&(v[me]=[]);var Pe=v[me].length;v[me].push(he),am(he,{index:Pe,depth:me})},w=function(he,me){var Pe=Ga(he),xe=Pe.depth,Qe=Pe.index;v[xe][Qe]=null,b(he,me)};a.bfs({roots:c,directed:e.directed,visit:function(he,me,Pe,xe,Qe){var qe=he[0],Ye=qe.id();b(qe,Qe),O[Ye]=!0}});for(var x=[],$=0;$<i.length;$++){var S=i[$];O[S.id()]||x.push(S)}var T=function(he){for(var me=v[he],Pe=0;Pe<me.length;Pe++){var xe=me[Pe];if(xe==null){me.splice(Pe,1),Pe--;continue}am(xe,{depth:he,index:Pe})}},k=function(){for(var he=0;he<v.length;he++)T(he)},E=function(he,me){for(var Pe=Ga(he),xe=he.incomers().filter(function(R){return R.isNode()&&n.has(R)}),Qe=-1,qe=he.id(),Ye=0;Ye<xe.length;Ye++){var Ie=xe[Ye],je=Ga(Ie);Qe=Math.max(Qe,je.depth)}if(Pe.depth<=Qe){if(!e.acyclic&&me[qe])return null;var ee=Qe+1;return w(he,ee),me[qe]=ee,!0}return!1};if(s&&l){var P=[],C={},M=function(he){return P.push(he)},D=function(){return P.shift()};for(i.forEach(function(pe){return P.push(pe)});P.length>0;){var I=D(),A=E(I,C);if(A)I.outgoers().filter(function(pe){return pe.isNode()&&n.has(pe)}).forEach(M);else if(A===null){ct("Detected double maximal shift for node `"+I.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var Q=0;if(e.avoidOverlap)for(var B=0;B<i.length;B++){var Y=i[B],X=Y.layoutDimensions(e),W=X.w,q=X.h;Q=Math.max(Q,W,q)}var F={},Z=function(he){if(F[he.id()])return F[he.id()];for(var me=Ga(he).depth,Pe=he.neighborhood(),xe=0,Qe=0,qe=0;qe<Pe.length;qe++){var Ye=Pe[qe];if(!(Ye.isEdge()||Ye.isParent()||!i.has(Ye))){var Ie=Ga(Ye);if(Ie!=null){var je=Ie.index,ee=Ie.depth;if(!(je==null||ee==null)){var R=v[ee].length;ee<me&&(xe+=je/R,Qe++)}}}}return Qe=Math.max(1,Qe),xe=xe/Qe,Qe===0&&(xe=0),F[he.id()]=xe,xe},N=function(he,me){var Pe=Z(he),xe=Z(me),Qe=Pe-xe;return Qe===0?J0(he.id(),me.id()):Qe};e.depthSort!==void 0&&(N=e.depthSort);for(var V=0;V<v.length;V++)v[V].sort(N),T(V);for(var z=[],j=0;j<x.length;j++)z.push(x[j]);v.unshift(z),k();for(var G=0,U=0;U<v.length;U++)G=Math.max(v[U].length,G);var K={x:u.x1+u.w/2,y:u.x1+u.h/2},de=v.reduce(function(pe,he){return Math.max(pe,he.length)},0),Oe=function(he){var me=Ga(he),Pe=me.depth,xe=me.index,Qe=v[Pe].length,qe=Math.max(u.w/((e.grid?de:Qe)+1),Q),Ye=Math.max(u.h/(v.length+1),Q),Ie=Math.min(u.w/2/v.length,u.h/2/v.length);if(Ie=Math.max(Ie,Q),e.circle){var ee=Ie*Pe+Ie-(v.length>0&&v[0].length<=3?Ie/2:0),R=2*Math.PI/v[Pe].length*xe;return Pe===0&&v[0].length===1&&(ee=1),{x:K.x+ee*Math.cos(R),y:K.y+ee*Math.sin(R)}}else{var je={x:K.x+(xe+1-(Qe+1)/2)*qe,y:(Pe+1)*Ye};return je}};return n.nodes().layoutPositions(this,e,Oe),this};var jD={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Xb(r){this.options=We({},jD,r)}Xb.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var s=Br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,c=u/Math.max(1,a.length-1),f,h=0,d=0;d<a.length;d++){var p=a[d],g=p.layoutDimensions(e),y=g.w,m=g.h;h=Math.max(h,y,m)}if(ve(e.radius)?f=e.radius:a.length<=1?f=0:f=Math.min(s.h,s.w)/2-h,a.length>1&&e.avoidOverlap){h*=1.75;var v=Math.cos(c)-Math.cos(0),O=Math.sin(c)-Math.sin(0),b=Math.sqrt(h*h/(v*v+O*O));f=Math.max(b,f)}var w=function($,S){var T=e.startAngle+S*c*(i?1:-1),k=f*Math.cos(T),E=f*Math.sin(T),P={x:l.x+k,y:l.y+E};return P};return n.nodes().layoutPositions(this,e,w),this};var GD={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Vb(r){this.options=We({},GD,r)}Vb.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,a=i.nodes().not(":parent"),s=Br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],c=0,f=0;f<a.length;f++){var h=a[f],d=void 0;d=e.concentric(h),u.push({value:d,node:h}),h._private.scratch.concentric=d}a.updateStyle();for(var p=0;p<a.length;p++){var g=a[p],y=g.layoutDimensions(e);c=Math.max(c,y.w,y.h)}u.sort(function(pe,he){return he.value-pe.value});for(var m=e.levelWidth(a),v=[[]],O=v[0],b=0;b<u.length;b++){var w=u[b];if(O.length>0){var x=Math.abs(O[0].value-w.value);x>=m&&(O=[],v.push(O))}O.push(w)}var $=c+e.minNodeSpacing;if(!e.avoidOverlap){var S=v.length>0&&v[0].length>1,T=Math.min(s.w,s.h)/2-$,k=T/(v.length+S?1:0);$=Math.min($,k)}for(var E=0,P=0;P<v.length;P++){var C=v[P],M=e.sweep===void 0?2*Math.PI-2*Math.PI/C.length:e.sweep,D=C.dTheta=M/Math.max(1,C.length-1);if(C.length>1&&e.avoidOverlap){var I=Math.cos(D)-Math.cos(0),A=Math.sin(D)-Math.sin(0),Q=Math.sqrt($*$/(I*I+A*A));E=Math.max(Q,E)}C.r=E,E+=$}if(e.equidistant){for(var B=0,Y=0,X=0;X<v.length;X++){var W=v[X],q=W.r-Y;B=Math.max(B,q)}Y=0;for(var F=0;F<v.length;F++){var Z=v[F];F===0&&(Y=Z.r),Z.r=Y,Y+=B}}for(var N={},V=0;V<v.length;V++)for(var z=v[V],j=z.dTheta,G=z.r,U=0;U<z.length;U++){var K=z[U],de=e.startAngle+(t?1:-1)*j*U,Oe={x:l.x+G*Math.cos(de),y:l.y+G*Math.sin(de)};N[K.node.id()]=Oe}return i.nodes().layoutPositions(this,e,function(pe){var he=pe.id();return N[he]}),this};var eh,UD={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function lf(r){this.options=We({},UD,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var a=i.source().data("id"),s=i.target().data("id"),l=e.some(function(c){return c.data("id")===a}),u=e.some(function(c){return c.data("id")===s});return!l||!u});this.options.eles=this.options.eles.not(n)}lf.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?eh=!0:eh=!1;var n=HD(e,t,r);eh&&e_(n),r.randomize&&t_(n);var i=ii(),a=function(){r_(n,e,r),r.fit===!0&&e.fit(r.padding)},s=function(d){return!(t.stopped||d>=r.numIter||(n_(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},l=function(){if(r.animate===!0||r.animate===!1)a(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var d=r.eles.nodes(),p=Fb(n,r,d);d.layoutPositions(t,r,p)}},u=0,c=!0;if(r.animate===!0){var f=function h(){for(var d=0;c&&d<r.refresh;)c=s(u),u++,d++;if(!c)om(n,r),l();else{var p=ii();p-i>=r.animationThreshold&&a(),qu(h)}};f()}else{for(;c;)c=s(u),u++;om(n,r),l()}return this};lf.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};lf.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var HD=function(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),s=Br(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),l={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),c={},f=0;f<u.length;f++)for(var h=u[f],d=0;d<h.length;d++){var p=h[d];c[p.id()]=f}for(var f=0;f<l.nodeSize;f++){var g=a[f],y=g.layoutDimensions(n),m={};m.isLocked=g.locked(),m.id=g.data("id"),m.parentId=g.data("parent"),m.cmptId=c[g.id()],m.children=[],m.positionX=g.position("x"),m.positionY=g.position("y"),m.offsetX=0,m.offsetY=0,m.height=y.w,m.width=y.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(g.style("padding")),m.padRight=parseFloat(g.style("padding")),m.padTop=parseFloat(g.style("padding")),m.padBottom=parseFloat(g.style("padding")),m.nodeRepulsion=_t(n.nodeRepulsion)?n.nodeRepulsion(g):n.nodeRepulsion,l.layoutNodes.push(m),l.idToIndex[m.id]=f}for(var v=[],O=0,b=-1,w=[],f=0;f<l.nodeSize;f++){var g=l.layoutNodes[f],x=g.parentId;x!=null?l.layoutNodes[l.idToIndex[x]].children.push(g.id):(v[++b]=g.id,w.push(g.id))}for(l.graphSet.push(w);O<=b;){var $=v[O++],S=l.idToIndex[$],p=l.layoutNodes[S],T=p.children;if(T.length>0){l.graphSet.push(T);for(var f=0;f<T.length;f++)v[++b]=T[f]}}for(var f=0;f<l.graphSet.length;f++)for(var k=l.graphSet[f],d=0;d<k.length;d++){var E=l.idToIndex[k[d]];l.indexToGraph[E]=f}for(var f=0;f<l.edgeSize;f++){var P=i[f],C={};C.id=P.data("id"),C.sourceId=P.data("source"),C.targetId=P.data("target");var M=_t(n.idealEdgeLength)?n.idealEdgeLength(P):n.idealEdgeLength,D=_t(n.edgeElasticity)?n.edgeElasticity(P):n.edgeElasticity,I=l.idToIndex[C.sourceId],A=l.idToIndex[C.targetId],Q=l.indexToGraph[I],B=l.indexToGraph[A];if(Q!=B){for(var Y=KD(C.sourceId,C.targetId,l),X=l.graphSet[Y],W=0,m=l.layoutNodes[I];X.indexOf(m.id)===-1;)m=l.layoutNodes[l.idToIndex[m.parentId]],W++;for(m=l.layoutNodes[A];X.indexOf(m.id)===-1;)m=l.layoutNodes[l.idToIndex[m.parentId]],W++;M*=W*n.nestingFactor}C.idealLength=M,C.elasticity=D,l.layoutEdges.push(C)}return l},KD=function(e,t,n){var i=JD(e,t,0,n);return 2>i.count?0:i.graph},JD=function r(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var s=0,l=0;l<a.length;l++){var u=a[l],c=i.idToIndex[u],f=i.layoutNodes[c].children;if(f.length!==0){var h=i.indexToGraph[i.idToIndex[f[0]]],d=r(e,t,h,i);if(d.count!==0)if(d.count===1){if(s++,s===2)break}else return d}}return{count:s,graph:n}},e_,t_=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var s=e.layoutNodes[a];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*i)}},Fb=function(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(s){var l=e.layoutNodes[e.idToIndex[s.data("id")]];a.x1=Math.min(a.x1,l.positionX),a.x2=Math.max(a.x2,l.positionX),a.y1=Math.min(a.y1,l.positionY),a.y2=Math.max(a.y2,l.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(s,l){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(t.boundingBox){var c=(u.positionX-a.x1)/a.w,f=(u.positionY-a.y1)/a.h;return{x:i.x1+c*i.w,y:i.y1+f*i.h}}else return{x:u.positionX,y:u.positionY}}},r_=function(e,t,n){var i=n.layout,a=n.eles.nodes(),s=Fb(e,n,a);a.positions(s),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},n_=function(e,t,n){i_(e,t),o_(e),l_(e,t),u_(e),c_(e)},i_=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,s=0;s<a;s++)for(var l=e.layoutNodes[e.idToIndex[i[s]]],u=s+1;u<a;u++){var c=e.layoutNodes[e.idToIndex[i[u]]];a_(l,c,e,t)}},sm=function(e){return-e+2*e*Math.random()},a_=function(e,t,n,i){var a=e.cmptId,s=t.cmptId;if(!(a!==s&&!n.isCompound)){var l=t.positionX-e.positionX,u=t.positionY-e.positionY,c=1;l===0&&u===0&&(l=sm(c),u=sm(c));var f=s_(e,t,l,u);if(f>0)var h=i.nodeOverlap*f,d=Math.sqrt(l*l+u*u),p=h*l/d,g=h*u/d;else var y=Uu(e,l,u),m=Uu(t,-1*l,-1*u),v=m.x-y.x,O=m.y-y.y,b=v*v+O*O,d=Math.sqrt(b),h=(e.nodeRepulsion+t.nodeRepulsion)/b,p=h*v/d,g=h*O/d;e.isLocked||(e.offsetX-=p,e.offsetY-=g),t.isLocked||(t.offsetX+=p,t.offsetY+=g)}},s_=function(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var s=e.maxY-t.minY;else var s=t.maxY-e.minY;return a>=0&&s>=0?Math.sqrt(a*a+s*s):0},Uu=function(e,t,n){var i=e.positionX,a=e.positionY,s=e.height||1,l=e.width||1,u=n/t,c=s/l,f={};return t===0&&0<n||t===0&&0>n?(f.x=i,f.y=a+s/2,f):0<t&&-1*c<=u&&u<=c?(f.x=i+l/2,f.y=a+l*n/2/t,f):0>t&&-1*c<=u&&u<=c?(f.x=i-l/2,f.y=a-l*n/2/t,f):0<n&&(u<=-1*c||u>=c)?(f.x=i+s*t/2/n,f.y=a+s/2,f):(0>n&&(u<=-1*c||u>=c)&&(f.x=i-s*t/2/n,f.y=a-s/2),f)},o_=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],s=e.layoutNodes[a],l=e.idToIndex[i.targetId],u=e.layoutNodes[l],c=u.positionX-s.positionX,f=u.positionY-s.positionY;if(!(c===0&&f===0)){var h=Uu(s,c,f),d=Uu(u,-1*c,-1*f),p=d.x-h.x,g=d.y-h.y,y=Math.sqrt(p*p+g*g),m=Math.pow(i.idealLength-y,2)/i.elasticity;if(y!==0)var v=m*p/y,O=m*g/y;else var v=0,O=0;s.isLocked||(s.offsetX+=v,s.offsetY+=O),u.isLocked||(u.offsetX-=v,u.offsetY-=O)}}},l_=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],s=a.length;if(i===0)var l=e.clientHeight/2,u=e.clientWidth/2;else var c=e.layoutNodes[e.idToIndex[a[0]]],f=e.layoutNodes[e.idToIndex[c.parentId]],l=f.positionX,u=f.positionY;for(var h=0;h<s;h++){var d=e.layoutNodes[e.idToIndex[a[h]]];if(!d.isLocked){var p=l-d.positionX,g=u-d.positionY,y=Math.sqrt(p*p+g*g);if(y>n){var m=t.gravity*p/y,v=t.gravity*g/y;d.offsetX+=m,d.offsetY+=v}}}}},u_=function(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var s=n[i++],l=e.idToIndex[s],u=e.layoutNodes[l],c=u.children;if(0<c.length&&!u.isLocked){for(var f=u.offsetX,h=u.offsetY,d=0;d<c.length;d++){var p=e.layoutNodes[e.idToIndex[c[d]]];p.offsetX+=f,p.offsetY+=h,n[++a]=c[d]}u.offsetX=0,u.offsetY=0}}},c_=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=f_(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,h_(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},f_=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return a},h_=function r(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return r(i,t)}},om=function(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var s=n[a],l=s.cmptId,u=i[l]=i[l]||[];u.push(s)}for(var c=0,a=0;a<i.length;a++){var f=i[a];if(!!f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var h=0;h<f.length;h++){var d=f[h];f.x1=Math.min(f.x1,d.positionX-d.width/2),f.x2=Math.max(f.x2,d.positionX+d.width/2),f.y1=Math.min(f.y1,d.positionY-d.height/2),f.y2=Math.max(f.y2,d.positionY+d.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,c+=f.w*f.h}}i.sort(function(O,b){return b.w*b.h-O.w*O.h});for(var p=0,g=0,y=0,m=0,v=Math.sqrt(c)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var f=i[a];if(!!f){for(var h=0;h<f.length;h++){var d=f[h];d.isLocked||(d.positionX+=p-f.x1,d.positionY+=g-f.y1)}p+=f.w+t.componentSpacing,y+=f.w+t.componentSpacing,m=Math.max(m,f.h),y>v&&(g+=m+t.componentSpacing,p=0,y=0,m=0)}}},d_={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function jb(r){this.options=We({},d_,r)}jb.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(F){return{x:a.x1,y:a.y1}});else{var s=i.size(),l=Math.sqrt(s*a.h/a.w),u=Math.round(l),c=Math.round(a.w/a.h*l),f=function(Z){if(Z==null)return Math.min(u,c);var N=Math.min(u,c);N==u?u=Z:c=Z},h=function(Z){if(Z==null)return Math.max(u,c);var N=Math.max(u,c);N==u?u=Z:c=Z},d=e.rows,p=e.cols!=null?e.cols:e.columns;if(d!=null&&p!=null)u=d,c=p;else if(d!=null&&p==null)u=d,c=Math.ceil(s/u);else if(d==null&&p!=null)c=p,u=Math.ceil(s/c);else if(c*u>s){var g=f(),y=h();(g-1)*y>=s?f(g-1):(y-1)*g>=s&&h(y-1)}else for(;c*u<s;){var m=f(),v=h();(v+1)*m>=s?h(v+1):f(m+1)}var O=a.w/c,b=a.h/u;if(e.condense&&(O=0,b=0),e.avoidOverlap)for(var w=0;w<i.length;w++){var x=i[w],$=x._private.position;($.x==null||$.y==null)&&($.x=0,$.y=0);var S=x.layoutDimensions(e),T=e.avoidOverlapPadding,k=S.w+T,E=S.h+T;O=Math.max(O,k),b=Math.max(b,E)}for(var P={},C=function(Z,N){return!!P["c-"+Z+"-"+N]},M=function(Z,N){P["c-"+Z+"-"+N]=!0},D=0,I=0,A=function(){I++,I>=c&&(I=0,D++)},Q={},B=0;B<i.length;B++){var Y=i[B],X=e.position(Y);if(X&&(X.row!==void 0||X.col!==void 0)){var W={row:X.row,col:X.col};if(W.col===void 0)for(W.col=0;C(W.row,W.col);)W.col++;else if(W.row===void 0)for(W.row=0;C(W.row,W.col);)W.row++;Q[Y.id()]=W,M(W.row,W.col)}}var q=function(Z,N){var V,z;if(Z.locked()||Z.isParent())return!1;var j=Q[Z.id()];if(j)V=j.col*O+O/2+a.x1,z=j.row*b+b/2+a.y1;else{for(;C(D,I);)A();V=I*O+O/2+a.x1,z=D*b+b/2+a.y1,M(D,I),A()}return{x:V,y:z}};i.layoutPositions(this,e,q)}return this};var p_={ready:function(){},stop:function(){}};function Fp(r){this.options=We({},p_,r)}Fp.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};Fp.prototype.stop=function(){return this};var g_={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Gb(r){this.options=We({},g_,r)}Gb.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=_t(r.positions);function i(a){if(r.positions==null)return PQ(a.position());if(n)return r.positions(a);var s=r.positions[a._private.data.id];return s==null?null:s}return t.layoutPositions(this,r,function(a,s){var l=i(a);return a.locked()||l==null?!1:l}),this};var v_={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Ub(r){this.options=We({},v_,r)}Ub.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Br(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(s,l){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var m_=[{name:"breadthfirst",impl:Yb},{name:"circle",impl:Xb},{name:"concentric",impl:Vb},{name:"cose",impl:lf},{name:"grid",impl:jb},{name:"null",impl:Fp},{name:"preset",impl:Gb},{name:"random",impl:Ub}];function Hb(r){this.options=r,this.notifications=0}var lm=function(){},um=function(){throw new Error("A headless instance can not render images")};Hb.prototype={recalculateRenderedStyle:lm,notify:function(){this.notifications++},init:lm,isHeadless:function(){return!0},png:um,jpg:um};var jp={};jp.arrowShapeWidth=.3;jp.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(c,f,h,d,p,g,y){var m=p.x-h/2-y,v=p.x+h/2+y,O=p.y-h/2-y,b=p.y+h/2+y,w=m<=c&&c<=v&&O<=f&&f<=b;return w},n=function(c,f,h,d,p){var g=c*Math.cos(d)-f*Math.sin(d),y=c*Math.sin(d)+f*Math.cos(d),m=g*h,v=y*h,O=m+p.x,b=v+p.y;return{x:O,y:b}},i=function(c,f,h,d){for(var p=[],g=0;g<c.length;g+=2){var y=c[g],m=c[g+1];p.push(n(y,m,f,h,d))}return p},a=function(c){for(var f=[],h=0;h<c.length;h++){var d=c[h];f.push(d.x,d.y)}return f},s=function(c){return c.pstyle("width").pfValue*c.pstyle("arrow-scale").pfValue*2},l=function(c,f){Le(f)&&(f=r[f]),r[c]=We({name:c,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,p,g,y,m,v){var O=a(i(this.points,g+2*v,y,m)),b=_r(d,p,O);return b},roughCollide:t,draw:function(d,p,g,y){var m=i(this.points,p,g,y);e.arrowShapeImpl("polygon")(d,m)},spacing:function(d){return 0},gap:s},f)};l("none",{collide:Yu,roughCollide:Yu,draw:Rp,spacing:kv,gap:kv}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(c,f,h,d,p){var g=i(this.points,f,h,d),y=this.controlPoint,m=n(y[0],y[1],f,h,d);e.arrowShapeImpl(this.name)(c,g,m)},gap:function(c){return s(c)*.8}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(c,f,h,d,p,g,y){var m=a(i(this.points,h+2*y,d,p)),v=a(i(this.pointsTee,h+2*y,d,p)),O=_r(c,f,m)||_r(c,f,v);return O},draw:function(c,f,h,d,p){var g=i(this.points,f,h,d),y=i(this.pointsTee,f,h,d);e.arrowShapeImpl(this.name)(c,g,y)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(c,f,h,d,p,g,y){var m=p,v=Math.pow(m.x-c,2)+Math.pow(m.y-f,2)<=Math.pow((h+2*y)*this.radius,2),O=a(i(this.points,h+2*y,d,p));return _r(c,f,O)||v},draw:function(c,f,h,d,p){var g=i(this.pointsTr,f,h,d);e.arrowShapeImpl(this.name)(c,g,d.x,d.y,this.radius*f)},spacing:function(c){return e.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(c,f){var h=this.baseCrossLinePts.slice(),d=f/c,p=3,g=5;return h[p]=h[p]-d,h[g]=h[g]-d,h},collide:function(c,f,h,d,p,g,y){var m=a(i(this.points,h+2*y,d,p)),v=a(i(this.crossLinePts(h,g),h+2*y,d,p)),O=_r(c,f,m)||_r(c,f,v);return O},draw:function(c,f,h,d,p){var g=i(this.points,f,h,d),y=i(this.crossLinePts(f,p),f,h,d);e.arrowShapeImpl(this.name)(c,g,y)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(c){return s(c)*.525}}),l("circle",{radius:.15,collide:function(c,f,h,d,p,g,y){var m=p,v=Math.pow(m.x-c,2)+Math.pow(m.y-f,2)<=Math.pow((h+2*y)*this.radius,2);return v},draw:function(c,f,h,d,p){e.arrowShapeImpl(this.name)(c,d.x,d.y,this.radius*f)},spacing:function(c){return e.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(c){return 1},gap:function(c){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(c){return c.pstyle("width").pfValue*c.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(c){return .95*c.pstyle("width").pfValue*c.pstyle("arrow-scale").value}})};var Ra={};Ra.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],s=n[4],l=t.pan(),u=t.zoom(),c=((r-i)/s-l.x)/u,f=((e-a)/s-l.y)/u;return[c,f]};Ra.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(v){return parseFloat(t.getPropertyValue(v))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=r.clientWidth,l=r.clientHeight,u=i.left+i.right,c=i.top+i.bottom,f=a.left+a.right,h=e.width/(s+f),d=s-u,p=l-c,g=e.left+i.left+a.left,y=e.top+i.top+a.top;return this.containerBB=[g,y,d,p,h]};Ra.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ra.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Ra.findNearestElements=function(r,e,t,n){var i=this,a=this,s=a.getCachedZSortedEles(),l=[],u=a.cy.zoom(),c=a.cy.hasCompoundNodes(),f=(n?24:8)/u,h=(n?8:2)/u,d=(n?8:2)/u,p=1/0,g,y;t&&(s=s.interactive);function m(S,T){if(S.isNode()){if(y)return;y=S,l.push(S)}if(S.isEdge()&&(T==null||T<p))if(g){if(g.pstyle("z-compound-depth").value===S.pstyle("z-compound-depth").value&&g.pstyle("z-compound-depth").value===S.pstyle("z-compound-depth").value){for(var k=0;k<l.length;k++)if(l[k].isEdge()){l[k]=S,g=S,p=T!=null?T:p;break}}}else l.push(S),g=S,p=T!=null?T:p}function v(S){var T=S.outerWidth()+2*h,k=S.outerHeight()+2*h,E=T/2,P=k/2,C=S.position();if(C.x-E<=r&&r<=C.x+E&&C.y-P<=e&&e<=C.y+P){var M=a.nodeShapes[i.getNodeShape(S)];if(M.checkPoint(r,e,0,T,k,C.x,C.y))return m(S,0),!0}}function O(S){var T=S._private,k=T.rscratch,E=S.pstyle("width").pfValue,P=S.pstyle("arrow-scale").value,C=E/2+f,M=C*C,D=C*2,B=T.source,Y=T.target,I;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var A=k.allpts,Q=0;Q+3<A.length;Q+=2)if(IQ(r,e,A[Q],A[Q+1],A[Q+2],A[Q+3],D)&&M>(I=YQ(r,e,A[Q],A[Q+1],A[Q+2],A[Q+3])))return m(S,I),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var A=k.allpts,Q=0;Q+5<k.allpts.length;Q+=4)if(NQ(r,e,A[Q],A[Q+1],A[Q+2],A[Q+3],A[Q+4],A[Q+5],D)&&M>(I=qQ(r,e,A[Q],A[Q+1],A[Q+2],A[Q+3],A[Q+4],A[Q+5])))return m(S,I),!0}for(var B=B||T.source,Y=Y||T.target,X=i.getArrowWidth(E,P),W=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],Q=0;Q<W.length;Q++){var q=W[Q],F=a.arrowShapes[S.pstyle(q.name+"-arrow-shape").value],Z=S.pstyle("width").pfValue;if(F.roughCollide(r,e,X,q.angle,{x:q.x,y:q.y},Z,f)&&F.collide(r,e,X,q.angle,{x:q.x,y:q.y},Z,f))return m(S),!0}c&&l.length>0&&(v(B),v(Y))}function b(S,T,k){return mn(S,T,k)}function w(S,T){var k=S._private,E=d,P;T?P=T+"-":P="",S.boundingBox();var C=k.labelBounds[T||"main"],M=S.pstyle(P+"label").value,D=S.pstyle("text-events").strValue==="yes";if(!(!D||!M)){var I=b(k.rscratch,"labelX",T),A=b(k.rscratch,"labelY",T),Q=b(k.rscratch,"labelAngle",T),B=S.pstyle(P+"text-margin-x").pfValue,Y=S.pstyle(P+"text-margin-y").pfValue,X=C.x1-E-B,W=C.x2+E-B,q=C.y1-E-Y,F=C.y2+E-Y;if(Q){var Z=Math.cos(Q),N=Math.sin(Q),V=function(Oe,pe){return Oe=Oe-I,pe=pe-A,{x:Oe*Z-pe*N+I,y:Oe*N+pe*Z+A}},z=V(X,q),j=V(X,F),G=V(W,q),U=V(W,F),K=[z.x+B,z.y+Y,G.x+B,G.y+Y,U.x+B,U.y+Y,j.x+B,j.y+Y];if(_r(r,e,K))return m(S),!0}else if(ms(C,r,e))return m(S),!0}}for(var x=s.length-1;x>=0;x--){var $=s[x];$.isNode()?v($)||w($):O($)||w($)||w($,"source")||w($,"target")}return l};Ra.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,a=[],s=Math.min(r,t),l=Math.max(r,t),u=Math.min(e,n),c=Math.max(e,n);r=s,t=l,e=u,n=c;for(var f=Br({x1:r,y1:e,x2:t,y2:n}),h=0;h<i.length;h++){var d=i[h];if(d.isNode()){var p=d,g=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ip(f,g)&&!db(g,f)&&a.push(p)}else{var y=d,m=y._private,v=m.rscratch;if(v.startX!=null&&v.startY!=null&&!ms(f,v.startX,v.startY)||v.endX!=null&&v.endY!=null&&!ms(f,v.endX,v.endY))continue;if(v.edgeType==="bezier"||v.edgeType==="multibezier"||v.edgeType==="self"||v.edgeType==="compound"||v.edgeType==="segments"||v.edgeType==="haystack"){for(var O=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,b=!0,w=0;w<O.length;w++)if(!BQ(f,O[w])){b=!1;break}b&&a.push(y)}else(v.edgeType==="haystack"||v.edgeType==="straight")&&a.push(y)}}return a};var Hu={};Hu.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",s=e.edgeType==="compound",l=e.edgeType==="self",u,c,f,h,d,p,v,O;if(t?(f=e.haystackPts[0],h=e.haystackPts[1],d=e.haystackPts[2],p=e.haystackPts[3]):(f=e.arrowStartX,h=e.arrowStartY,d=e.arrowEndX,p=e.arrowEndY),v=e.midX,O=e.midY,a)u=f-e.segpts[0],c=h-e.segpts[1];else if(i||s||l||n){var g=e.allpts,y=Ht(g[0],g[2],g[4],.1),m=Ht(g[1],g[3],g[5],.1);u=f-y,c=h-m}else u=f-v,c=h-O;e.srcArrowAngle=Nl(u,c);var v=e.midX,O=e.midY;if(t&&(v=(f+d)/2,O=(h+p)/2),u=d-f,c=p-h,a){var g=e.allpts;if(g.length/2%2===0){var b=g.length/2,w=b-2;u=g[b]-g[w],c=g[b+1]-g[w+1]}else{var b=g.length/2-1,w=b-2,x=b+2;u=g[b]-g[w],c=g[b+1]-g[w+1]}}else if(i||s||l){var g=e.allpts,$=e.ctrlpts,S,T,k,E;if($.length/2%2===0){var P=g.length/2-1,C=P+2,M=C+2;S=Ht(g[P],g[C],g[M],0),T=Ht(g[P+1],g[C+1],g[M+1],0),k=Ht(g[P],g[C],g[M],1e-4),E=Ht(g[P+1],g[C+1],g[M+1],1e-4)}else{var C=g.length/2-1,P=C-2,M=C+2;S=Ht(g[P],g[C],g[M],.4999),T=Ht(g[P+1],g[C+1],g[M+1],.4999),k=Ht(g[P],g[C],g[M],.5),E=Ht(g[P+1],g[C+1],g[M+1],.5)}u=k-S,c=E-T}if(e.midtgtArrowAngle=Nl(u,c),e.midDispX=u,e.midDispY=c,u*=-1,c*=-1,a){var g=e.allpts;if(g.length/2%2!==0){var b=g.length/2-1,x=b+2;u=-(g[x]-g[b]),c=-(g[x+1]-g[b+1])}}if(e.midsrcArrowAngle=Nl(u,c),a)u=d-e.segpts[e.segpts.length-2],c=p-e.segpts[e.segpts.length-1];else if(i||s||l||n){var g=e.allpts,D=g.length,y=Ht(g[D-6],g[D-4],g[D-2],.9),m=Ht(g[D-5],g[D-3],g[D-1],.9);u=d-y,c=p-m}else u=d-v,c=p-O;e.tgtArrowAngle=Nl(u,c)};Hu.getArrowWidth=Hu.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var xr={};xr.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,s=r.pstyle("source-endpoint"),l=r.pstyle("target-endpoint"),u=s.units!=null&&l.units!=null,c=function(x,$,S,T){var k=T-$,E=S-x,P=Math.sqrt(E*E+k*k);return{x:-k/P,y:E/P}},f=r.pstyle("edge-distances").value;switch(f){case"node-position":a=t;break;case"intersection":a=n;break;case"endpoints":{if(u){var h=this.manualEndptToPx(r.source()[0],s),d=gn(h,2),p=d[0],g=d[1],y=this.manualEndptToPx(r.target()[0],l),m=gn(y,2),v=m[0],O=m[1],b={x1:p,y1:g,x2:v,y2:O};i=c(p,g,v,O),a=b}else ct("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};xr.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var s=n.source,l=n.target,u=s.position(),c=l.position(),f=s.width(),h=l.width(),d=s.height(),p=l.height(),g=t.pstyle("haystack-radius").value,y=g/2;i.haystackPts=i.allpts=[i.source.x*f*y+u.x,i.source.y*d*y+u.y,i.target.x*h*y+c.x,i.target.y*p*y+c.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};xr.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),a=Math.min(n.pfValue.length,i.pfValue.length);t.edgeType="segments",t.segpts=[];for(var s=0;s<a;s++){var l=n.pfValue[s],u=i.pfValue[s],c=1-l,f=l,h=this.findMidptPtsEtc(r,e),d=h.midptPts,p=h.vectorNormInverse,g={x:d.x1*c+d.x2*f,y:d.y1*c+d.y2*f};t.segpts.push(g.x+p.x*u,g.y+p.y*u)}};xr.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,a=e.dirCounts,s=e.srcPos,l=r.pstyle("control-point-distances"),u=l?l.pfValue[0]:void 0,c=r.pstyle("loop-direction").pfValue,f=r.pstyle("loop-sweep").pfValue,h=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=t,p=h;n&&(d=0,p=u);var g=c-Math.PI/2,y=g-f/2,m=g+f/2,v=String(c+"_"+f);d=a[v]===void 0?a[v]=0:++a[v],i.ctrlpts=[s.x+Math.cos(y)*1.4*p*(d/3+1),s.y+Math.sin(y)*1.4*p*(d/3+1),s.x+Math.cos(m)*1.4*p*(d/3+1),s.y+Math.sin(m)*1.4*p*(d/3+1)]};xr.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var a=e.srcPos,s=e.tgtPos,l=e.srcW,u=e.srcH,c=e.tgtW,f=e.tgtH,h=r.pstyle("control-point-step-size").pfValue,d=r.pstyle("control-point-distances"),p=d?d.pfValue[0]:void 0,g=t,y=h;n&&(g=0,y=p);var m=50,v={x:a.x-l/2,y:a.y-u/2},O={x:s.x-c/2,y:s.y-f/2},b={x:Math.min(v.x,O.x),y:Math.min(v.y,O.y)},w=.5,x=Math.max(w,Math.log(l*.01)),$=Math.max(w,Math.log(c*.01));i.ctrlpts=[b.x,b.y-(1+Math.pow(m,1.12)/100)*y*(g/3+1)*x,b.x-(1+Math.pow(m,1.12)/100)*y*(g/3+1)*$,b.y]};xr.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};xr.findBezierPoints=function(r,e,t,n,i){var a=r._private.rscratch,s=r.pstyle("control-point-step-size").pfValue,l=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),c=l&&u?Math.min(l.value.length,u.value.length):1,f=l?l.pfValue[0]:void 0,h=u.value[0],d=n;a.edgeType=d?"multibezier":"bezier",a.ctrlpts=[];for(var p=0;p<c;p++){var g=(.5-e.eles.length/2+t)*s*(i?-1:1),y=void 0,m=fb(g);d&&(f=l?l.pfValue[p]:s,h=u.value[p]),n?y=f:y=f!==void 0?m*f:void 0;var v=y!==void 0?y:g,O=1-h,b=h,w=this.findMidptPtsEtc(r,e),x=w.midptPts,$=w.vectorNormInverse,S={x:x.x1*O+x.x2*b,y:x.y1*O+x.y2*b};a.ctrlpts.push(S.x+$.x*v,S.y+$.y*v)}};xr.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",a="leftward",s="rightward",l="downward",u="upward",c="auto",f=e.posPts,h=e.srcW,d=e.srcH,p=e.tgtW,g=e.tgtH,y=r.pstyle("edge-distances").value,m=y!=="node-position",v=r.pstyle("taxi-direction").value,O=v,b=r.pstyle("taxi-turn"),w=b.units==="%",x=b.pfValue,$=x<0,S=r.pstyle("taxi-turn-min-distance").pfValue,T=m?(h+p)/2:0,k=m?(d+g)/2:0,E=f.x2-f.x1,P=f.y2-f.y1,C=function(ae,Ae){return ae>0?Math.max(ae-Ae,0):Math.min(ae+Ae,0)},M=C(E,T),D=C(P,k),I=!1;O===c?v=Math.abs(M)>Math.abs(D)?i:n:O===u||O===l?(v=n,I=!0):(O===a||O===s)&&(v=i,I=!0);var A=v===n,Q=A?D:M,B=A?P:E,Y=fb(B),X=!1;!(I&&(w||$))&&(O===l&&B<0||O===u&&B>0||O===a&&B>0||O===s&&B<0)&&(Y*=-1,Q=Y*Math.abs(Q),X=!0);var W;if(w){var q=x<0?1+x:x;W=q*Q}else{var F=x<0?Q:0;W=F+x*Y}var Z=function(ae){return Math.abs(ae)<S||Math.abs(ae)>=Math.abs(Q)},N=Z(W),V=Z(Math.abs(Q)-Math.abs(W)),z=N||V;if(z&&!X)if(A){var j=Math.abs(B)<=d/2,G=Math.abs(E)<=p/2;if(j){var U=(f.x1+f.x2)/2,K=f.y1,de=f.y2;t.segpts=[U,K,U,de]}else if(G){var Oe=(f.y1+f.y2)/2,pe=f.x1,he=f.x2;t.segpts=[pe,Oe,he,Oe]}else t.segpts=[f.x1,f.y2]}else{var me=Math.abs(B)<=h/2,Pe=Math.abs(P)<=g/2;if(me){var xe=(f.y1+f.y2)/2,Qe=f.x1,qe=f.x2;t.segpts=[Qe,xe,qe,xe]}else if(Pe){var Ye=(f.x1+f.x2)/2,Ie=f.y1,je=f.y2;t.segpts=[Ye,Ie,Ye,je]}else t.segpts=[f.x2,f.y1]}else if(A){var ee=f.y1+W+(m?d/2*Y:0),R=f.x1,H=f.x2;t.segpts=[R,ee,H,ee]}else{var oe=f.x1+W+(m?h/2*Y:0),re=f.y1,ie=f.y2;t.segpts=[oe,re,oe,ie]}};xr.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,s=e.srcH,l=e.tgtW,u=e.tgtH,c=e.srcShape,f=e.tgtShape,h=!ve(t.startX)||!ve(t.startY),d=!ve(t.arrowStartX)||!ve(t.arrowStartY),p=!ve(t.endX)||!ve(t.endY),g=!ve(t.arrowEndX)||!ve(t.arrowEndY),y=3,m=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,v=y*m,O=wa({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),b=O<v,w=wa({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),x=w<v,$=!1;if(h||d||b){$=!0;var S={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},T=Math.sqrt(S.x*S.x+S.y*S.y),k={x:S.x/T,y:S.y/T},E=Math.max(a,s),P={x:t.ctrlpts[0]+k.x*2*E,y:t.ctrlpts[1]+k.y*2*E},C=c.intersectLine(n.x,n.y,a,s,P.x,P.y,0);b?(t.ctrlpts[0]=t.ctrlpts[0]+k.x*(v-O),t.ctrlpts[1]=t.ctrlpts[1]+k.y*(v-O)):(t.ctrlpts[0]=C[0]+k.x*v,t.ctrlpts[1]=C[1]+k.y*v)}if(p||g||x){$=!0;var M={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},D=Math.sqrt(M.x*M.x+M.y*M.y),I={x:M.x/D,y:M.y/D},A=Math.max(a,s),Q={x:t.ctrlpts[0]+I.x*2*A,y:t.ctrlpts[1]+I.y*2*A},B=f.intersectLine(i.x,i.y,l,u,Q.x,Q.y,0);x?(t.ctrlpts[0]=t.ctrlpts[0]+I.x*(v-w),t.ctrlpts[1]=t.ctrlpts[1]+I.y*(v-w)):(t.ctrlpts[0]=B[0]+I.x*v,t.ctrlpts[1]=B[1]+I.y*v)}$&&this.findEndpoints(r)}};xr.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=Ht(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=Ht(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var a=e.segpts.length/2,s=a-2;e.midX=(e.segpts[s]+e.segpts[a])/2,e.midY=(e.segpts[s+1]+e.segpts[a+1])/2}else{var l=e.segpts.length/2-1;e.midX=e.segpts[l],e.midY=e.segpts[l+1]}};xr.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||ve(e.startX)&&ve(e.startY)&&ve(e.endX)&&ve(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,ct("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};xr.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),a={map:new Ln,get:function(S){var T=this.map.get(S[0]);return T!=null?T.get(S[1]):null},set:function(S,T){var k=this.map.get(S[0]);k==null&&(k=new Ln,this.map.set(S[0],k)),k.set(S[1],T)}},s=[],l=[],u=0;u<r.length;u++){var c=r[u],f=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){l.push(c);continue}var d=h==="unbundled-bezier"||h==="segments"||h==="straight"||h==="straight-triangle"||h==="taxi",p=h==="unbundled-bezier"||h==="bezier",g=f.source,y=f.target,m=g.poolIndex(),v=y.poolIndex(),O=[m,v].sort(),b=a.get(O);b==null&&(b={eles:[]},a.set(O,b),s.push(O)),b.eles.push(c),d&&(b.hasUnbundled=!0),p&&(b.hasBezier=!0)}}for(var w=function(S){var T=s[S],k=a.get(T),E=void 0;if(!k.hasUnbundled){var P=k.eles[0].parallelEdges().filter(function(je){return je.isBundledBezier()});Lp(k.eles),P.forEach(function(je){return k.eles.push(je)}),k.eles.sort(function(je,ee){return je.poolIndex()-ee.poolIndex()})}var C=k.eles[0],M=C.source(),D=C.target();if(M.poolIndex()>D.poolIndex()){var I=M;M=D,D=I}var A=k.srcPos=M.position(),Q=k.tgtPos=D.position(),B=k.srcW=M.outerWidth(),Y=k.srcH=M.outerHeight(),X=k.tgtW=D.outerWidth(),W=k.tgtH=D.outerHeight(),q=k.srcShape=t.nodeShapes[e.getNodeShape(M)],F=k.tgtShape=t.nodeShapes[e.getNodeShape(D)];k.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Z=0;Z<k.eles.length;Z++){var N=k.eles[Z],V=N[0]._private.rscratch,z=N.pstyle("curve-style").value,j=z==="unbundled-bezier"||z==="segments"||z==="taxi",G=!M.same(N.source());if(!k.calculatedIntersection&&M!==D&&(k.hasBezier||k.hasUnbundled)){k.calculatedIntersection=!0;var U=q.intersectLine(A.x,A.y,B,Y,Q.x,Q.y,0),K=k.srcIntn=U,de=F.intersectLine(Q.x,Q.y,X,W,A.x,A.y,0),Oe=k.tgtIntn=de,pe=k.intersectionPts={x1:U[0],x2:de[0],y1:U[1],y2:de[1]},he=k.posPts={x1:A.x,x2:Q.x,y1:A.y,y2:Q.y},me=de[1]-U[1],Pe=de[0]-U[0],xe=Math.sqrt(Pe*Pe+me*me),Qe=k.vector={x:Pe,y:me},qe=k.vectorNorm={x:Qe.x/xe,y:Qe.y/xe},Ye={x:-qe.y,y:qe.x};k.nodesOverlap=!ve(xe)||F.checkPoint(U[0],U[1],0,X,W,Q.x,Q.y)||q.checkPoint(de[0],de[1],0,B,Y,A.x,A.y),k.vectorNormInverse=Ye,E={nodesOverlap:k.nodesOverlap,dirCounts:k.dirCounts,calculatedIntersection:!0,hasBezier:k.hasBezier,hasUnbundled:k.hasUnbundled,eles:k.eles,srcPos:Q,tgtPos:A,srcW:X,srcH:W,tgtW:B,tgtH:Y,srcIntn:Oe,tgtIntn:K,srcShape:F,tgtShape:q,posPts:{x1:he.x2,y1:he.y2,x2:he.x1,y2:he.y1},intersectionPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},vector:{x:-Qe.x,y:-Qe.y},vectorNorm:{x:-qe.x,y:-qe.y},vectorNormInverse:{x:-Ye.x,y:-Ye.y}}}var Ie=G?E:k;V.nodesOverlap=Ie.nodesOverlap,V.srcIntn=Ie.srcIntn,V.tgtIntn=Ie.tgtIntn,i&&(M.isParent()||M.isChild()||D.isParent()||D.isChild())&&(M.parents().anySame(D)||D.parents().anySame(M)||M.same(D)&&M.isParent())?e.findCompoundLoopPoints(N,Ie,Z,j):M===D?e.findLoopPoints(N,Ie,Z,j):z==="segments"?e.findSegmentsPoints(N,Ie):z==="taxi"?e.findTaxiPoints(N,Ie):z==="straight"||!j&&k.eles.length%2===1&&Z===Math.floor(k.eles.length/2)?e.findStraightEdgePoints(N):e.findBezierPoints(N,Ie,Z,j,G),e.findEndpoints(N),e.tryToCorrectInvalidPoints(N,Ie),e.checkForInvalidEdgeWarning(N),e.storeAllpts(N),e.storeEdgeProjections(N),e.calculateArrowAngles(N),e.recalculateEdgeLabelProjections(N),e.calculateLabelAngles(N)}},x=0;x<s.length;x++)w(x);this.findHaystackPoints(l)}};function Kb(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}xr.getSegmentPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="segments")return this.recalculateRenderedStyle(r),Kb(e.segpts)};xr.getControlPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return this.recalculateRenderedStyle(r),Kb(e.ctrlpts)};xr.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var wl={};wl.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),a=r.outerHeight();if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(i,a),c=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,a,c[0],c[1],0)}};wl.findEndpoints=function(r){var e=this,t,n=r.source()[0],i=r.target()[0],a=n.position(),s=i.position(),l=r.pstyle("target-arrow-shape").value,u=r.pstyle("source-arrow-shape").value,c=r.pstyle("target-distance-from-node").pfValue,f=r.pstyle("source-distance-from-node").pfValue,h=r.pstyle("curve-style").value,d=r._private.rscratch,p=d.edgeType,g=h==="taxi",y=p==="self"||p==="compound",m=p==="bezier"||p==="multibezier"||y,v=p!=="bezier",O=p==="straight"||p==="segments",b=p==="segments",w=m||v||O,x=y||g,$=r.pstyle("source-endpoint"),S=x?"outside-to-node":$.value,T=r.pstyle("target-endpoint"),k=x?"outside-to-node":T.value;d.srcManEndpt=$,d.tgtManEndpt=T;var E,P,C,M;if(m){var D=[d.ctrlpts[0],d.ctrlpts[1]],I=v?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:D;E=I,P=D}else if(O){var A=b?d.segpts.slice(0,2):[s.x,s.y],Q=b?d.segpts.slice(d.segpts.length-2):[a.x,a.y];E=Q,P=A}if(k==="inside-to-node")t=[s.x,s.y];else if(T.units)t=this.manualEndptToPx(i,T);else if(k==="outside-to-line")t=d.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?C=E:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(C=[a.x,a.y]),t=e.nodeShapes[this.getNodeShape(i)].intersectLine(s.x,s.y,i.outerWidth(),i.outerHeight(),C[0],C[1],0),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var B=i._private.rscratch,Y=B.labelWidth,X=B.labelHeight,W=B.labelX,q=B.labelY,F=Y/2,Z=X/2,N=i.pstyle("text-valign").value;N==="top"?q-=Z:N==="bottom"&&(q+=Z);var V=i.pstyle("text-halign").value;V==="left"?W-=F:V==="right"&&(W+=F);var z=zo(C[0],C[1],[W-F,q-Z,W+F,q-Z,W+F,q+Z,W-F,q+Z],s.x,s.y);if(z.length>0){var j=a,G=oa(j,rs(t)),U=oa(j,rs(z)),K=G;if(U<G&&(t=z,K=U),z.length>2){var de=oa(j,{x:z[2],y:z[3]});de<K&&(t=[z[2],z[3]])}}}var Oe=zl(t,E,e.arrowShapes[l].spacing(r)+c),pe=zl(t,E,e.arrowShapes[l].gap(r)+c);if(d.endX=pe[0],d.endY=pe[1],d.arrowEndX=Oe[0],d.arrowEndY=Oe[1],S==="inside-to-node")t=[a.x,a.y];else if($.units)t=this.manualEndptToPx(n,$);else if(S==="outside-to-line")t=d.srcIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?M=P:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(M=[s.x,s.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(a.x,a.y,n.outerWidth(),n.outerHeight(),M[0],M[1],0),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var he=n._private.rscratch,me=he.labelWidth,Pe=he.labelHeight,xe=he.labelX,Qe=he.labelY,qe=me/2,Ye=Pe/2,Ie=n.pstyle("text-valign").value;Ie==="top"?Qe-=Ye:Ie==="bottom"&&(Qe+=Ye);var je=n.pstyle("text-halign").value;je==="left"?xe-=qe:je==="right"&&(xe+=qe);var ee=zo(M[0],M[1],[xe-qe,Qe-Ye,xe+qe,Qe-Ye,xe+qe,Qe+Ye,xe-qe,Qe+Ye],a.x,a.y);if(ee.length>0){var R=s,H=oa(R,rs(t)),oe=oa(R,rs(ee)),re=H;if(oe<H&&(t=[ee[0],ee[1]],re=oe),ee.length>2){var ie=oa(R,{x:ee[2],y:ee[3]});ie<re&&(t=[ee[2],ee[3]])}}}var Ze=zl(t,P,e.arrowShapes[u].spacing(r)+f),ae=zl(t,P,e.arrowShapes[u].gap(r)+f);d.startX=ae[0],d.startY=ae[1],d.arrowStartX=Ze[0],d.arrowStartY=Ze[1],w&&(!ve(d.startX)||!ve(d.startY)||!ve(d.endX)||!ve(d.endY)?d.badLine=!0:d.badLine=!1)};wl.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};wl.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Gp={};function y_(r,e,t){for(var n=function(c,f,h,d){return Ht(c,f,h,d)},i=e._private,a=i.rstyle.bezierPts,s=0;s<r.bezierProjPcts.length;s++){var l=r.bezierProjPcts[s];a.push({x:n(t[0],t[2],t[4],l),y:n(t[1],t[3],t[5],l)})}}Gp.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)y_(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)a.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var s=t.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};Gp.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var jn={};jn.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Bi(e)){var t,n,i=r._private,a=r.width(),s=r.height(),l=r.padding(),u=r.position(),c=r.pstyle("text-halign").strValue,f=r.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(c){case"left":t=u.x-a/2-l;break;case"right":t=u.x+a/2+l;break;default:t=u.x}switch(f){case"top":n=u.y-s/2-l;break;case"bottom":n=u.y+s/2+l;break;default:n=u.y}h.labelX=t,h.labelY=n,d.labelX=t,d.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Jb=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},e1=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Jb(n,i)},O_=function(e,t,n,i){var a=No(0,i-.001,1),s=No(0,i+.001,1),l=os(e,t,n,a),u=os(e,t,n,s);return e1(l,u)};jn.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,a={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(!!(a.mid||a.source||a.target)){e={x:n.midX,y:n.midY};var s=function(h,d,p){wi(t.rscratch,h,d,p),wi(t.rstyle,h,d,p)};s("labelX",null,e.x),s("labelY",null,e.y);var l=Jb(n.midDispX,n.midDispY);s("labelAutoAngle",null,l);var u=function f(){if(f.cache)return f.cache;for(var h=[],d=0;d+5<n.allpts.length;d+=4){var p={x:n.allpts[d],y:n.allpts[d+1]},g={x:n.allpts[d+2],y:n.allpts[d+3]},y={x:n.allpts[d+4],y:n.allpts[d+5]};h.push({p0:p,p1:g,p2:y,startDist:0,length:0,segments:[]})}var m=t.rstyle.bezierPts,v=i.bezierProjPcts.length;function O(S,T,k,E,P){var C=wa(T,k),M=S.segments[S.segments.length-1],D={p0:T,p1:k,t0:E,t1:P,startDist:M?M.startDist+M.length:0,length:C};S.segments.push(D),S.length+=C}for(var b=0;b<h.length;b++){var w=h[b],x=h[b-1];x&&(w.startDist=x.startDist+x.length),O(w,w.p0,m[b*v],0,i.bezierProjPcts[0]);for(var $=0;$<v-1;$++)O(w,m[b*v+$],m[b*v+$+1],i.bezierProjPcts[$],i.bezierProjPcts[$+1]);O(w,m[b*v+v-1],w.p2,i.bezierProjPcts[v-1],1)}return f.cache=h},c=function(h){var d,p=h==="source";if(!!a[h]){var g=r.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var y=u(),m,v=0,O=0,b=0;b<y.length;b++){for(var w=y[p?b:y.length-1-b],x=0;x<w.segments.length;x++){var $=w.segments[p?x:w.segments.length-1-x],S=b===y.length-1&&x===w.segments.length-1;if(v=O,O+=$.length,O>=g||S){m={cp:w,segment:$};break}}if(m)break}var T=m.cp,k=m.segment,E=(g-v)/k.length,P=k.t1-k.t0,C=p?k.t0+P*E:k.t1-P*E;C=No(0,C,1),e=os(T.p0,T.p1,T.p2,C),d=O_(T.p0,T.p1,T.p2,C);break}case"straight":case"segments":case"haystack":{for(var M=0,D,I,A,Q,B=n.allpts.length,Y=0;Y+3<B&&(p?(A={x:n.allpts[Y],y:n.allpts[Y+1]},Q={x:n.allpts[Y+2],y:n.allpts[Y+3]}):(A={x:n.allpts[B-2-Y],y:n.allpts[B-1-Y]},Q={x:n.allpts[B-4-Y],y:n.allpts[B-3-Y]}),D=wa(A,Q),I=M,M+=D,!(M>=g));Y+=2);var X=g-I,W=X/D;W=No(0,W,1),e=_Q(A,Q,W),d=e1(A,Q);break}}s("labelX",h,e.x),s("labelY",h,e.y),s("labelAutoAngle",h,d)}};c("source"),c("target"),this.applyLabelDimensions(r)}};jn.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};jn.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,l=mn(t.rscratch,"labelWrapCachedLines",e)||[],u=s!=="wrap"?1:Math.max(l.length,1),c=i.height/u,f=c*a,h=i.width,d=i.height+(u-1)*(a-1)*c;wi(t.rstyle,"labelWidth",e,h),wi(t.rscratch,"labelWidth",e,h),wi(t.rstyle,"labelHeight",e,d),wi(t.rscratch,"labelHeight",e,d),wi(t.rscratch,"labelLineHeight",e,f)};jn.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,a=r.pstyle("text-transform").value,s=function(X,W){return W?(wi(t.rscratch,X,e,W),W):mn(t.rscratch,X,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var l=r.pstyle("text-wrap").value;if(l==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var c="\u200B",f=i.split(`
`),h=r.pstyle("text-max-width").pfValue,d=r.pstyle("text-overflow-wrap").value,p=d==="anywhere",g=[],y=/[\s\u200b]+/,m=p?"":" ",v=0;v<f.length;v++){var O=f[v],b=this.calculateLabelDimensions(r,O),w=b.width;if(p){var x=O.split("").join(c);O=x}if(w>h){for(var $=O.split(y),S="",T=0;T<$.length;T++){var k=$[T],E=S.length===0?k:S+m+k,P=this.calculateLabelDimensions(r,E),C=P.width;C<=h?S+=k+m:(S&&g.push(S),S=k+m)}S.match(/^[\s\u200b]+$/)||g.push(S)}else g.push(O)}s("labelWrapCachedLines",g),i=s("labelWrapCachedText",g.join(`
`)),s("labelWrapKey",u)}else if(l==="ellipsis"){var M=r.pstyle("text-max-width").pfValue,D="",I="\u2026",A=!1;if(this.calculateLabelDimensions(r,i).width<M)return i;for(var Q=0;Q<i.length;Q++){var B=this.calculateLabelDimensions(r,D+i[Q]+I).width;if(B>M)break;D+=i[Q],Q===i.length-1&&(A=!0)}return A||(D+=I),D}return i};jn.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};jn.calculateLabelDimensions=function(r,e){var t=this,n=ba(e,r._private.labelDimsKey),i=t.labelDimCache||(t.labelDimCache=[]),a=i[n];if(a!=null)return a;var s=0,l=r.pstyle("font-style").strValue,u=r.pstyle("font-size").pfValue,c=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,h=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=h.getContext("2d");var p=h.style;p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.pointerEvents="none"}d.font="".concat(l," ").concat(f," ").concat(u,"px ").concat(c);for(var g=0,y=0,m=e.split(`
`),v=0;v<m.length;v++){var O=m[v],b=d.measureText(O),w=Math.ceil(b.width),x=u;g=Math.max(w,g),y+=x}return g+=s,y+=s,i[n]={width:g,height:y}};jn.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),a=e?e+"-":"",s=r.pstyle(a+"text-rotation"),l=s.strValue;return l==="none"?0:i&&l==="autorotate"?n.labelAutoAngle:l==="autorotate"?0:s.pfValue};jn.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var t1={},cm=28,fm=!1;t1.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<cm||r.height()<cm))return fm||(ct("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),fm=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var uf={};uf.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),l)for(var u=0;u<s.length;u++){var c=s[u],f=c._private,h=f.rstyle;h.clean=!1,h.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(s){var l=s.target;n(l)}).on("style.* background.*",function(s){var l=s.target;n(l,!1)});var i=function(s){if(s){var l=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var c=e[u],f=c._private.rstyle;c.isNode()&&!f.cleanConnected&&(n(c.connectedEdges()),f.cleanConnected=!0)}if(l)for(var h=0;h<l.length;h++){var d=l[h];d(s,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};uf.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};uf.recalculateRenderedStyle=function(r,e){var t=function(w){return w._private.rstyle.cleanConnected},n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<r.length;a++){var s=r[a],l=s._private,u=l.rstyle;s.isEdge()&&(!t(s.source())||!t(s.target()))&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(l.group==="nodes"?i.push(s):n.push(s),u.clean=!0)}for(var c=0;c<i.length;c++){var f=i[c],h=f._private,d=h.rstyle,p=f.position();this.recalculateNodeLabelProjection(f),d.nodeX=p.x,d.nodeY=p.y,d.nodeW=f.pstyle("width").pfValue,d.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var g=0;g<n.length;g++){var y=n[g],m=y._private,v=m.rstyle,O=m.rscratch;v.srcX=O.arrowStartX,v.srcY=O.arrowStartY,v.tgtX=O.arrowEndX,v.tgtY=O.arrowEndY,v.midX=O.midX,v.midY=O.midY,v.labelAngle=O.labelAngle,v.sourceLabelAngle=O.sourceLabelAngle,v.targetLabelAngle=O.targetLabelAngle}}};var cf={};cf.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(!!r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};cf.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};cf.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(zb),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var r1={};[Ra,Hu,xr,wl,Gp,jn,t1,uf,cf].forEach(function(r){We(r1,r)});var n1={};n1.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},a=i[r];if(a)return a.image.complete||a.image.addEventListener("load",t),a.image;a=i[r]=i[r]||{};var s=a.image=new Image;s.addEventListener("load",t),s.addEventListener("error",function(){s.error=!0});var l="data:",u=r.substring(0,l.length).toLowerCase()===l;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=r,s};var Bs={};Bs.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(r);return a.on.apply(a,i)};Bs.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||BT(r);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var s=function(u,c,f){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:f!=null?f:!1,passive:!1,once:!1}),e.bindings.push({target:r,args:h}),(r.addEventListener||r.on).apply(r,h),this};return{on:s,addEventListener:s,addListener:s,bind:s}};Bs.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Bs.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Bs.load=function(){var r=this,e=r.cy.window(),t=function(R){return R.selected()},n=function(R,H,oe,re){R==null&&(R=r.cy);for(var ie=0;ie<H.length;ie++){var Ze=H[ie];R.emit({originalEvent:oe,type:Ze,position:re})}},i=function(R){return R.shiftKey||R.metaKey||R.ctrlKey},a=function(R,H){var oe=!0;if(r.cy.hasCompoundNodes()&&R&&R.pannable())for(var re=0;H&&re<H.length;re++){var R=H[re];if(R.isNode()&&R.isParent()&&!R.pannable()){oe=!1;break}}else oe=!0;return oe},s=function(R){R[0]._private.grabbed=!0},l=function(R){R[0]._private.grabbed=!1},u=function(R){R[0]._private.rscratch.inDragLayer=!0},c=function(R){R[0]._private.rscratch.inDragLayer=!1},f=function(R){R[0]._private.rscratch.isGrabTarget=!0},h=function(R){R[0]._private.rscratch.isGrabTarget=!1},d=function(R,H){var oe=H.addToList,re=oe.has(R);!re&&R.grabbable()&&!R.locked()&&(oe.merge(R),s(R))},p=function(R,H){if(!!R.cy().hasCompoundNodes()&&!(H.inDragLayer==null&&H.addToList==null)){var oe=R.descendants();H.inDragLayer&&(oe.forEach(u),oe.connectedEdges().forEach(u)),H.addToList&&d(oe,H)}},g=function(R,H){H=H||{};var oe=R.cy().hasCompoundNodes();H.inDragLayer&&(R.forEach(u),R.neighborhood().stdFilter(function(re){return!oe||re.isEdge()}).forEach(u)),H.addToList&&R.forEach(function(re){d(re,H)}),p(R,H),v(R,{inDragLayer:H.inDragLayer}),r.updateCachedGrabbedEles()},y=g,m=function(R){!R||(r.getCachedZSortedEles().forEach(function(H){l(H),c(H),h(H)}),r.updateCachedGrabbedEles())},v=function(R,H){if(!(H.inDragLayer==null&&H.addToList==null)&&!!R.cy().hasCompoundNodes()){var oe=R.ancestors().orphans();if(!oe.same(R)){var re=oe.descendants().spawnSelf().merge(oe).unmerge(R).unmerge(R.descendants()),ie=re.connectedEdges();H.inDragLayer&&(ie.forEach(u),re.forEach(u)),H.addToList&&re.forEach(function(Ze){d(Ze,H)})}}},O=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},b=typeof MutationObserver!="undefined",w=typeof ResizeObserver!="undefined";b?(r.removeObserver=new MutationObserver(function(ee){for(var R=0;R<ee.length;R++){var H=ee[R],oe=H.removedNodes;if(oe)for(var re=0;re<oe.length;re++){var ie=oe[re];if(ie===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(ee){r.destroy()});var x=Uc.default(function(){r.cy.resize()},100);b&&(r.styleObserver=new MutationObserver(x),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",x),w&&(r.resizeObserver=new ResizeObserver(x),r.resizeObserver.observe(r.container));var $=function(R,H){for(;R!=null;)H(R),R=R.parentNode},S=function(){r.invalidateContainerClientCoordsCache()};$(r.container,function(ee){r.registerBinding(ee,"transitionend",S),r.registerBinding(ee,"animationend",S),r.registerBinding(ee,"scroll",S)}),r.registerBinding(r.container,"contextmenu",function(ee){ee.preventDefault()});var T=function(){return r.selection[4]!==0},k=function(R){for(var H=r.findContainerClientCoords(),oe=H[0],re=H[1],ie=H[2],Ze=H[3],ae=R.touches?R.touches:[R],Ae=!1,ne=0;ne<ae.length;ne++){var we=ae[ne];if(oe<=we.clientX&&we.clientX<=oe+ie&&re<=we.clientY&&we.clientY<=re+Ze){Ae=!0;break}}if(!Ae)return!1;for(var Se=r.container,Re=R.target,De=Re.parentNode,Ne=!1;De;){if(De===Se){Ne=!0;break}De=De.parentNode}return!!Ne};r.registerBinding(r.container,"mousedown",function(R){if(!!k(R)){R.preventDefault(),O(),r.hoverData.capture=!0,r.hoverData.which=R.which;var H=r.cy,oe=[R.clientX,R.clientY],re=r.projectIntoViewport(oe[0],oe[1]),ie=r.selection,Ze=r.findNearestElements(re[0],re[1],!0,!1),ae=Ze[0],Ae=r.dragData.possibleDragElements;r.hoverData.mdownPos=re,r.hoverData.mdownGPos=oe;var ne=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var vt=r.hoverData.down;vt?vt.emit({originalEvent:R,type:"taphold",position:{x:re[0],y:re[1]}}):H.emit({originalEvent:R,type:"taphold",position:{x:re[0],y:re[1]}})}},r.tapholdDuration)};if(R.which==3){r.hoverData.cxtStarted=!0;var we={originalEvent:R,type:"cxttapstart",position:{x:re[0],y:re[1]}};ae?(ae.activate(),ae.emit(we),r.hoverData.down=ae):H.emit(we),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(R.which==1){ae&&ae.activate();{if(ae!=null&&r.nodeIsGrabbable(ae)){var Se=function(vt){return{originalEvent:R,type:vt,position:{x:re[0],y:re[1]}}},Re=function(vt){vt.emit(Se("grab"))};if(f(ae),!ae.selected())Ae=r.dragData.possibleDragElements=H.collection(),y(ae,{addToList:Ae}),ae.emit(Se("grabon")).emit(Se("grab"));else{Ae=r.dragData.possibleDragElements=H.collection();var De=H.$(function(Ne){return Ne.isNode()&&Ne.selected()&&r.nodeIsGrabbable(Ne)});g(De,{addToList:Ae}),ae.emit(Se("grabon")),De.forEach(Re)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=ae,r.hoverData.downs=Ze,r.hoverData.downTime=new Date().getTime()}n(ae,["mousedown","tapstart","vmousedown"],R,{x:re[0],y:re[1]}),ae==null?(ie[4]=1,r.data.bgActivePosistion={x:re[0],y:re[1]},r.redrawHint("select",!0),r.redraw()):ae.pannable()&&(ie[4]=1),ne()}ie[0]=ie[2]=re[0],ie[1]=ie[3]=re[1]}},!1),r.registerBinding(e,"mousemove",function(R){var H=r.hoverData.capture;if(!(!H&&!k(R))){var oe=!1,re=r.cy,ie=re.zoom(),Ze=[R.clientX,R.clientY],ae=r.projectIntoViewport(Ze[0],Ze[1]),Ae=r.hoverData.mdownPos,ne=r.hoverData.mdownGPos,we=r.selection,Se=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Se=r.findNearestElement(ae[0],ae[1],!0,!1));var Re=r.hoverData.last,De=r.hoverData.down,Ne=[ae[0]-we[2],ae[1]-we[3]],vt=r.dragData.possibleDragElements,Lt;if(ne){var cn=Ze[0]-ne[0],fn=cn*cn,Kt=Ze[1]-ne[1],Kr=Kt*Kt,kr=fn+Kr;r.hoverData.isOverThresholdDrag=Lt=kr>=r.desktopTapThreshold2}var Hn=i(R);Lt&&(r.hoverData.tapholdCancelled=!0);var gi=function(){var Cn=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Cn.length===0?(Cn.push(Ne[0]),Cn.push(Ne[1])):(Cn[0]+=Ne[0],Cn[1]+=Ne[1])};oe=!0,n(Se,["mousemove","vmousemove","tapdrag"],R,{x:ae[0],y:ae[1]});var qa=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||re.emit({originalEvent:R,type:"boxstart",position:{x:ae[0],y:ae[1]}}),we[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Lt){var na={originalEvent:R,type:"cxtdrag",position:{x:ae[0],y:ae[1]}};De?De.emit(na):re.emit(na),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Se!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:R,type:"cxtdragout",position:{x:ae[0],y:ae[1]}}),r.hoverData.cxtOver=Se,Se&&Se.emit({originalEvent:R,type:"cxtdragover",position:{x:ae[0],y:ae[1]}}))}}else if(r.hoverData.dragging){if(oe=!0,re.panningEnabled()&&re.userPanningEnabled()){var Ya;if(r.hoverData.justStartedPan){var Rl=r.hoverData.mdownPos;Ya={x:(ae[0]-Rl[0])*ie,y:(ae[1]-Rl[1])*ie},r.hoverData.justStartedPan=!1}else Ya={x:Ne[0]*ie,y:Ne[1]*ie};re.panBy(Ya),re.emit("dragpan"),r.hoverData.dragged=!0}ae=r.projectIntoViewport(R.clientX,R.clientY)}else if(we[4]==1&&(De==null||De.pannable())){if(Lt){if(!r.hoverData.dragging&&re.boxSelectionEnabled()&&(Hn||!re.panningEnabled()||!re.userPanningEnabled()))qa();else if(!r.hoverData.selecting&&re.panningEnabled()&&re.userPanningEnabled()){var ia=a(De,r.hoverData.downs);ia&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,we[4]=0,r.data.bgActivePosistion=rs(Ae),r.redrawHint("select",!0),r.redraw())}De&&De.pannable()&&De.active()&&De.unactivate()}}else{if(De&&De.pannable()&&De.active()&&De.unactivate(),(!De||!De.grabbed())&&Se!=Re&&(Re&&n(Re,["mouseout","tapdragout"],R,{x:ae[0],y:ae[1]}),Se&&n(Se,["mouseover","tapdragover"],R,{x:ae[0],y:ae[1]}),r.hoverData.last=Se),De)if(Lt){if(re.boxSelectionEnabled()&&Hn)De&&De.grabbed()&&(m(vt),De.emit("freeon"),vt.emit("free"),r.dragData.didDrag&&(De.emit("dragfreeon"),vt.emit("dragfree"))),qa();else if(De&&De.grabbed()&&r.nodeIsDraggable(De)){var Qr=!r.dragData.didDrag;Qr&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||g(vt,{inDragLayer:!0});var dr={x:0,y:0};if(ve(Ne[0])&&ve(Ne[1])&&(dr.x+=Ne[0],dr.y+=Ne[1],Qr)){var Ar=r.hoverData.dragDelta;Ar&&ve(Ar[0])&&ve(Ar[1])&&(dr.x+=Ar[0],dr.y+=Ar[1])}r.hoverData.draggingEles=!0,vt.silentShift(dr).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else gi();oe=!0}if(we[2]=ae[0],we[3]=ae[1],oe)return R.stopPropagation&&R.stopPropagation(),R.preventDefault&&R.preventDefault(),!1}},!1);var E,P,C;r.registerBinding(e,"mouseup",function(R){var H=r.hoverData.capture;if(!!H){r.hoverData.capture=!1;var oe=r.cy,re=r.projectIntoViewport(R.clientX,R.clientY),ie=r.selection,Ze=r.findNearestElement(re[0],re[1],!0,!1),ae=r.dragData.possibleDragElements,Ae=r.hoverData.down,ne=i(R);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Ae&&Ae.unactivate(),r.hoverData.which===3){var we={originalEvent:R,type:"cxttapend",position:{x:re[0],y:re[1]}};if(Ae?Ae.emit(we):oe.emit(we),!r.hoverData.cxtDragged){var Se={originalEvent:R,type:"cxttap",position:{x:re[0],y:re[1]}};Ae?Ae.emit(Se):oe.emit(Se)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(n(Ze,["mouseup","tapend","vmouseup"],R,{x:re[0],y:re[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(n(Ae,["click","tap","vclick"],R,{x:re[0],y:re[1]}),P=!1,R.timeStamp-C<=oe.multiClickDebounceTime()?(E&&clearTimeout(E),P=!0,C=null,n(Ae,["dblclick","dbltap","vdblclick"],R,{x:re[0],y:re[1]})):(E=setTimeout(function(){P||n(Ae,["oneclick","onetap","voneclick"],R,{x:re[0],y:re[1]})},oe.multiClickDebounceTime()),C=R.timeStamp)),Ae==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!i(R)&&(oe.$(t).unselect(["tapunselect"]),ae.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=ae=oe.collection()),Ze==Ae&&!r.dragData.didDrag&&!r.hoverData.selecting&&Ze!=null&&Ze._private.selectable&&(r.hoverData.dragging||(oe.selectionType()==="additive"||ne?Ze.selected()?Ze.unselect(["tapunselect"]):Ze.select(["tapselect"]):ne||(oe.$(t).unmerge(Ze).unselect(["tapunselect"]),Ze.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Re=oe.collection(r.getAllInBox(ie[0],ie[1],ie[2],ie[3]));r.redrawHint("select",!0),Re.length>0&&r.redrawHint("eles",!0),oe.emit({type:"boxend",originalEvent:R,position:{x:re[0],y:re[1]}});var De=function(Lt){return Lt.selectable()&&!Lt.selected()};oe.selectionType()==="additive"||ne||oe.$(t).unmerge(Re).unselect(),Re.emit("box").stdFilter(De).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ie[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var Ne=Ae&&Ae.grabbed();m(ae),Ne&&(Ae.emit("freeon"),ae.emit("free"),r.dragData.didDrag&&(Ae.emit("dragfreeon"),ae.emit("dragfree")))}}ie[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var M=function(R){if(!r.scrollingPage){var H=r.cy,oe=H.zoom(),re=H.pan(),ie=r.projectIntoViewport(R.clientX,R.clientY),Ze=[ie[0]*oe+re.x,ie[1]*oe+re.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||T()){R.preventDefault();return}if(H.panningEnabled()&&H.userPanningEnabled()&&H.zoomingEnabled()&&H.userZoomingEnabled()){R.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var ae;R.deltaY!=null?ae=R.deltaY/-250:R.wheelDeltaY!=null?ae=R.wheelDeltaY/1e3:ae=R.wheelDelta/1e3,ae=ae*r.wheelSensitivity;var Ae=R.deltaMode===1;Ae&&(ae*=33);var ne=H.zoom()*Math.pow(10,ae);R.type==="gesturechange"&&(ne=r.gestureStartZoom*R.scale),H.zoom({level:ne,renderedPosition:{x:Ze[0],y:Ze[1]}}),H.emit(R.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",M,!0),r.registerBinding(e,"scroll",function(R){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(R){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||R.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(ee){r.hasTouchStarted||M(ee)},!0),r.registerBinding(r.container,"mouseout",function(R){var H=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseout",position:{x:H[0],y:H[1]}})},!1),r.registerBinding(r.container,"mouseover",function(R){var H=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseover",position:{x:H[0],y:H[1]}})},!1);var D,I,A,Q,B,Y,X,W,q,F,Z,N,V,z=function(R,H,oe,re){return Math.sqrt((oe-R)*(oe-R)+(re-H)*(re-H))},j=function(R,H,oe,re){return(oe-R)*(oe-R)+(re-H)*(re-H)},G;r.registerBinding(r.container,"touchstart",G=function(R){if(r.hasTouchStarted=!0,!!k(R)){O(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var H=r.cy,oe=r.touchData.now,re=r.touchData.earlier;if(R.touches[0]){var ie=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);oe[0]=ie[0],oe[1]=ie[1]}if(R.touches[1]){var ie=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);oe[2]=ie[0],oe[3]=ie[1]}if(R.touches[2]){var ie=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);oe[4]=ie[0],oe[5]=ie[1]}if(R.touches[1]){r.touchData.singleTouchMoved=!0,m(r.dragData.touchDragEles);var Ze=r.findContainerClientCoords();q=Ze[0],F=Ze[1],Z=Ze[2],N=Ze[3],D=R.touches[0].clientX-q,I=R.touches[0].clientY-F,A=R.touches[1].clientX-q,Q=R.touches[1].clientY-F,V=0<=D&&D<=Z&&0<=A&&A<=Z&&0<=I&&I<=N&&0<=Q&&Q<=N;var ae=H.pan(),Ae=H.zoom();B=z(D,I,A,Q),Y=j(D,I,A,Q),X=[(D+A)/2,(I+Q)/2],W=[(X[0]-ae.x)/Ae,(X[1]-ae.y)/Ae];var ne=200,we=ne*ne;if(Y<we&&!R.touches[2]){var Se=r.findNearestElement(oe[0],oe[1],!0,!0),Re=r.findNearestElement(oe[2],oe[3],!0,!0);Se&&Se.isNode()?(Se.activate().emit({originalEvent:R,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start=Se):Re&&Re.isNode()?(Re.activate().emit({originalEvent:R,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start=Re):H.emit({originalEvent:R,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(R.touches[2])H.boxSelectionEnabled()&&R.preventDefault();else if(!R.touches[1]){if(R.touches[0]){var De=r.findNearestElements(oe[0],oe[1],!0,!0),Ne=De[0];if(Ne!=null&&(Ne.activate(),r.touchData.start=Ne,r.touchData.starts=De,r.nodeIsGrabbable(Ne))){var vt=r.dragData.touchDragEles=H.collection(),Lt=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),Ne.selected()?(Lt=H.$(function(kr){return kr.selected()&&r.nodeIsGrabbable(kr)}),g(Lt,{addToList:vt})):y(Ne,{addToList:vt}),f(Ne);var cn=function(Hn){return{originalEvent:R,type:Hn,position:{x:oe[0],y:oe[1]}}};Ne.emit(cn("grabon")),Lt?Lt.forEach(function(kr){kr.emit(cn("grab"))}):Ne.emit(cn("grab"))}n(Ne,["touchstart","tapstart","vmousedown"],R,{x:oe[0],y:oe[1]}),Ne==null&&(r.data.bgActivePosistion={x:ie[0],y:ie[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&n(r.touchData.start,["taphold"],R,{x:oe[0],y:oe[1]})},r.tapholdDuration)}}if(R.touches.length>=1){for(var fn=r.touchData.startPosition=[null,null,null,null,null,null],Kt=0;Kt<oe.length;Kt++)fn[Kt]=re[Kt]=oe[Kt];var Kr=R.touches[0];r.touchData.startGPosition=[Kr.clientX,Kr.clientY]}}},!1);var U;r.registerBinding(window,"touchmove",U=function(R){var H=r.touchData.capture;if(!(!H&&!k(R))){var oe=r.selection,re=r.cy,ie=r.touchData.now,Ze=r.touchData.earlier,ae=re.zoom();if(R.touches[0]){var Ae=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ie[0]=Ae[0],ie[1]=Ae[1]}if(R.touches[1]){var Ae=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ie[2]=Ae[0],ie[3]=Ae[1]}if(R.touches[2]){var Ae=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ie[4]=Ae[0],ie[5]=Ae[1]}var ne=r.touchData.startGPosition,we;if(H&&R.touches[0]&&ne){for(var Se=[],Re=0;Re<ie.length;Re++)Se[Re]=ie[Re]-Ze[Re];var De=R.touches[0].clientX-ne[0],Ne=De*De,vt=R.touches[0].clientY-ne[1],Lt=vt*vt,cn=Ne+Lt;we=cn>=r.touchTapThreshold2}if(H&&r.touchData.cxt){R.preventDefault();var fn=R.touches[0].clientX-q,Kt=R.touches[0].clientY-F,Kr=R.touches[1].clientX-q,kr=R.touches[1].clientY-F,Hn=j(fn,Kt,Kr,kr),gi=Hn/Y,qa=150,na=qa*qa,Ya=1.5,Rl=Ya*Ya;if(gi>=Rl||Hn>=na){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var ia={originalEvent:R,type:"cxttapend",position:{x:ie[0],y:ie[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(ia),r.touchData.start=null):re.emit(ia)}}if(H&&r.touchData.cxt){var ia={originalEvent:R,type:"cxtdrag",position:{x:ie[0],y:ie[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(ia):re.emit(ia),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Qr=r.findNearestElement(ie[0],ie[1],!0,!0);(!r.touchData.cxtOver||Qr!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:R,type:"cxtdragout",position:{x:ie[0],y:ie[1]}}),r.touchData.cxtOver=Qr,Qr&&Qr.emit({originalEvent:R,type:"cxtdragover",position:{x:ie[0],y:ie[1]}}))}else if(H&&R.touches[2]&&re.boxSelectionEnabled())R.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||re.emit({originalEvent:R,type:"boxstart",position:{x:ie[0],y:ie[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,oe[4]=1,!oe||oe.length===0||oe[0]===void 0?(oe[0]=(ie[0]+ie[2]+ie[4])/3,oe[1]=(ie[1]+ie[3]+ie[5])/3,oe[2]=(ie[0]+ie[2]+ie[4])/3+1,oe[3]=(ie[1]+ie[3]+ie[5])/3+1):(oe[2]=(ie[0]+ie[2]+ie[4])/3,oe[3]=(ie[1]+ie[3]+ie[5])/3),r.redrawHint("select",!0),r.redraw();else if(H&&R.touches[1]&&!r.touchData.didSelect&&re.zoomingEnabled()&&re.panningEnabled()&&re.userZoomingEnabled()&&re.userPanningEnabled()){R.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var dr=r.dragData.touchDragEles;if(dr){r.redrawHint("drag",!0);for(var Ar=0;Ar<dr.length;Ar++){var Ll=dr[Ar]._private;Ll.grabbed=!1,Ll.rscratch.inDragLayer=!1}}var Cn=r.touchData.start,fn=R.touches[0].clientX-q,Kt=R.touches[0].clientY-F,Kr=R.touches[1].clientX-q,kr=R.touches[1].clientY-F,Jg=z(fn,Kt,Kr,kr),P$=Jg/B;if(V){var C$=fn-D,E$=Kt-I,T$=Kr-A,Q$=kr-Q,A$=(C$+T$)/2,D$=(E$+Q$)/2,Gs=re.zoom(),Wf=Gs*P$,Bl=re.pan(),ev=W[0]*Gs+Bl.x,tv=W[1]*Gs+Bl.y,_$={x:-Wf/Gs*(ev-Bl.x-A$)+ev,y:-Wf/Gs*(tv-Bl.y-D$)+tv};if(Cn&&Cn.active()){var dr=r.dragData.touchDragEles;m(dr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Cn.unactivate().emit("freeon"),dr.emit("free"),r.dragData.didDrag&&(Cn.emit("dragfreeon"),dr.emit("dragfree"))}re.viewport({zoom:Wf,pan:_$,cancelOnFailedZoom:!0}),re.emit("pinchzoom"),B=Jg,D=fn,I=Kt,A=Kr,Q=kr,r.pinching=!0}if(R.touches[0]){var Ae=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ie[0]=Ae[0],ie[1]=Ae[1]}if(R.touches[1]){var Ae=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ie[2]=Ae[0],ie[3]=Ae[1]}if(R.touches[2]){var Ae=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ie[4]=Ae[0],ie[5]=Ae[1]}}else if(R.touches[0]&&!r.touchData.didSelect){var hn=r.touchData.start,qf=r.touchData.last,Qr;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Qr=r.findNearestElement(ie[0],ie[1],!0,!0)),H&&hn!=null&&R.preventDefault(),H&&hn!=null&&r.nodeIsDraggable(hn))if(we){var dr=r.dragData.touchDragEles,rv=!r.dragData.didDrag;rv&&g(dr,{inDragLayer:!0}),r.dragData.didDrag=!0;var Us={x:0,y:0};if(ve(Se[0])&&ve(Se[1])&&(Us.x+=Se[0],Us.y+=Se[1],rv)){r.redrawHint("eles",!0);var dn=r.touchData.dragDelta;dn&&ve(dn[0])&&ve(dn[1])&&(Us.x+=dn[0],Us.y+=dn[1])}r.hoverData.draggingEles=!0,dr.silentShift(Us).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Ze[0]&&r.touchData.startPosition[1]==Ze[1]&&r.redrawHint("eles",!0),r.redraw()}else{var dn=r.touchData.dragDelta=r.touchData.dragDelta||[];dn.length===0?(dn.push(Se[0]),dn.push(Se[1])):(dn[0]+=Se[0],dn[1]+=Se[1])}if(n(hn||Qr,["touchmove","tapdrag","vmousemove"],R,{x:ie[0],y:ie[1]}),(!hn||!hn.grabbed())&&Qr!=qf&&(qf&&qf.emit({originalEvent:R,type:"tapdragout",position:{x:ie[0],y:ie[1]}}),Qr&&Qr.emit({originalEvent:R,type:"tapdragover",position:{x:ie[0],y:ie[1]}})),r.touchData.last=Qr,H)for(var Ar=0;Ar<ie.length;Ar++)ie[Ar]&&r.touchData.startPosition[Ar]&&we&&(r.touchData.singleTouchMoved=!0);if(H&&(hn==null||hn.pannable())&&re.panningEnabled()&&re.userPanningEnabled()){var M$=a(hn,r.touchData.starts);M$&&(R.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=rs(r.touchData.startPosition)),r.swipePanning?(re.panBy({x:Se[0]*ae,y:Se[1]*ae}),re.emit("dragpan")):we&&(r.swipePanning=!0,re.panBy({x:De*ae,y:vt*ae}),re.emit("dragpan"),hn&&(hn.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Ae=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ie[0]=Ae[0],ie[1]=Ae[1]}}for(var Re=0;Re<ie.length;Re++)Ze[Re]=ie[Re];H&&R.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var K;r.registerBinding(e,"touchcancel",K=function(R){var H=r.touchData.start;r.touchData.capture=!1,H&&H.unactivate()});var de,Oe,pe,he;if(r.registerBinding(e,"touchend",de=function(R){var H=r.touchData.start,oe=r.touchData.capture;if(oe)R.touches.length===0&&(r.touchData.capture=!1),R.preventDefault();else return;var re=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ie=r.cy,Ze=ie.zoom(),ae=r.touchData.now,Ae=r.touchData.earlier;if(R.touches[0]){var ne=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ae[0]=ne[0],ae[1]=ne[1]}if(R.touches[1]){var ne=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ae[2]=ne[0],ae[3]=ne[1]}if(R.touches[2]){var ne=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ae[4]=ne[0],ae[5]=ne[1]}H&&H.unactivate();var we;if(r.touchData.cxt){if(we={originalEvent:R,type:"cxttapend",position:{x:ae[0],y:ae[1]}},H?H.emit(we):ie.emit(we),!r.touchData.cxtDragged){var Se={originalEvent:R,type:"cxttap",position:{x:ae[0],y:ae[1]}};H?H.emit(Se):ie.emit(Se)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!R.touches[2]&&ie.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Re=ie.collection(r.getAllInBox(re[0],re[1],re[2],re[3]));re[0]=void 0,re[1]=void 0,re[2]=void 0,re[3]=void 0,re[4]=0,r.redrawHint("select",!0),ie.emit({type:"boxend",originalEvent:R,position:{x:ae[0],y:ae[1]}});var De=function(na){return na.selectable()&&!na.selected()};Re.emit("box").stdFilter(De).select().emit("boxselect"),Re.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(H!=null&&H.unactivate(),R.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!R.touches[1]){if(!R.touches[0]){if(!R.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Ne=r.dragData.touchDragEles;if(H!=null){var vt=H._private.grabbed;m(Ne),r.redrawHint("drag",!0),r.redrawHint("eles",!0),vt&&(H.emit("freeon"),Ne.emit("free"),r.dragData.didDrag&&(H.emit("dragfreeon"),Ne.emit("dragfree"))),n(H,["touchend","tapend","vmouseup","tapdragout"],R,{x:ae[0],y:ae[1]}),H.unactivate(),r.touchData.start=null}else{var Lt=r.findNearestElement(ae[0],ae[1],!0,!0);n(Lt,["touchend","tapend","vmouseup","tapdragout"],R,{x:ae[0],y:ae[1]})}var cn=r.touchData.startPosition[0]-ae[0],fn=cn*cn,Kt=r.touchData.startPosition[1]-ae[1],Kr=Kt*Kt,kr=fn+Kr,Hn=kr*Ze*Ze;r.touchData.singleTouchMoved||(H||ie.$(":selected").unselect(["tapunselect"]),n(H,["tap","vclick"],R,{x:ae[0],y:ae[1]}),Oe=!1,R.timeStamp-he<=ie.multiClickDebounceTime()?(pe&&clearTimeout(pe),Oe=!0,he=null,n(H,["dbltap","vdblclick"],R,{x:ae[0],y:ae[1]})):(pe=setTimeout(function(){Oe||n(H,["onetap","voneclick"],R,{x:ae[0],y:ae[1]})},ie.multiClickDebounceTime()),he=R.timeStamp)),H!=null&&!r.dragData.didDrag&&H._private.selectable&&Hn<r.touchTapThreshold2&&!r.pinching&&(ie.selectionType()==="single"?(ie.$(t).unmerge(H).unselect(["tapunselect"]),H.select(["tapselect"])):H.selected()?H.unselect(["tapunselect"]):H.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var gi=0;gi<ae.length;gi++)Ae[gi]=ae[gi];r.dragData.didDrag=!1,R.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),R.touches.length<2&&(R.touches.length===1&&(r.touchData.startGPosition=[R.touches[0].clientX,R.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent=="undefined"){var me=[],Pe=function(R){return{clientX:R.clientX,clientY:R.clientY,force:1,identifier:R.pointerId,pageX:R.pageX,pageY:R.pageY,radiusX:R.width/2,radiusY:R.height/2,screenX:R.screenX,screenY:R.screenY,target:R.target}},xe=function(R){return{event:R,touch:Pe(R)}},Qe=function(R){me.push(xe(R))},qe=function(R){for(var H=0;H<me.length;H++){var oe=me[H];if(oe.event.pointerId===R.pointerId){me.splice(H,1);return}}},Ye=function(R){var H=me.filter(function(oe){return oe.event.pointerId===R.pointerId})[0];H.event=R,H.touch=Pe(R)},Ie=function(R){R.touches=me.map(function(H){return H.touch})},je=function(R){return R.pointerType==="mouse"||R.pointerType===4};r.registerBinding(r.container,"pointerdown",function(ee){je(ee)||(ee.preventDefault(),Qe(ee),Ie(ee),G(ee))}),r.registerBinding(r.container,"pointerup",function(ee){je(ee)||(qe(ee),Ie(ee),de(ee))}),r.registerBinding(r.container,"pointercancel",function(ee){je(ee)||(qe(ee),Ie(ee),K(ee))}),r.registerBinding(r.container,"pointermove",function(ee){je(ee)||(ee.preventDefault(),Ye(ee),Ie(ee),U(ee))})}};var fi={};fi.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,a,s,l){this.renderer.nodeShapeImpl("polygon",n,i,a,s,l,this.points)},intersectLine:function(n,i,a,s,l,u,c){return zo(l,u,this.points,n,i,a/2,s/2,c)},checkPoint:function(n,i,a,s,l,u,c){return ai(n,i,this.points,u,c,s,l,[0,-1],a)}}};fi.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,s,l){return VQ(a,s,e,t,n/2+l,i/2+l)},checkPoint:function(e,t,n,i,a,s,l){return ha(e,t,i,a,s,l,n)}}};fi.generateRoundPolygon=function(r,e){for(var t=new Array(e.length*2),n=0;n<e.length/2;n++){var i=n*2,a=void 0;n<e.length/2-1?a=(n+1)*2:a=0,t[n*4]=e[i],t[n*4+1]=e[i+1];var s=e[a]-e[i],l=e[a+1]-e[i+1],u=Math.sqrt(s*s+l*l);t[n*4+2]=s/u,t[n*4+3]=l/u}return this.nodeShapes[r]={renderer:this,name:r,points:t,draw:function(f,h,d,p,g){this.renderer.nodeShapeImpl("round-polygon",f,h,d,p,g,this.points)},intersectLine:function(f,h,d,p,g,y,m){return FQ(g,y,this.points,f,h,d,p)},checkPoint:function(f,h,d,p,g,y,m){return XQ(f,h,this.points,y,m,p,g)}}};fi.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:$r(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,s,l){return pb(a,s,e,t,n,i,l)},checkPoint:function(e,t,n,i,a,s,l){var u=yl(i,a),c=u*2;return!!(ai(e,t,this.points,s,l,i,a-c,[0,-1],n)||ai(e,t,this.points,s,l,i-c,a,[0,-1],n)||ha(e,t,c,c,s-i/2+u,l-a/2+u,n)||ha(e,t,c,c,s+i/2-u,l-a/2+u,n)||ha(e,t,c,c,s+i/2-u,l+a/2-u,n)||ha(e,t,c,c,s-i/2+u,l+a/2-u,n))}}};fi.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:vb(),points:$r(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},generateCutTrianglePts:function(e,t,n,i){var a=this.cornerLength,s=t/2,l=e/2,u=n-l,c=n+l,f=i-s,h=i+s;return{topLeft:[u,f+a,u+a,f,u+a,f+a],topRight:[c-a,f,c,f+a,c-a,f+a],bottomRight:[c,h-a,c-a,h,c-a,h-a],bottomLeft:[u+a,h,u,h-a,u+a,h-a]}},intersectLine:function(e,t,n,i,a,s,l){var u=this.generateCutTrianglePts(n+2*l,i+2*l,e,t),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return zo(a,s,c,e,t)},checkPoint:function(e,t,n,i,a,s,l){if(ai(e,t,this.points,s,l,i,a-2*this.cornerLength,[0,-1],n)||ai(e,t,this.points,s,l,i-2*this.cornerLength,a,[0,-1],n))return!0;var u=this.generateCutTrianglePts(i,a,s,l);return _r(e,t,u.topLeft)||_r(e,t,u.topRight)||_r(e,t,u.bottomRight)||_r(e,t,u.bottomLeft)}}};fi.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:$r(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,s,l){var u=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*l,i+2*l,e,t),d=function(y){var m=os({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},u),v=os({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},c),O=os({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},f);return[y[0],y[1],m.x,m.y,v.x,v.y,O.x,O.y,y[4],y[5]]},p=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return zo(a,s,p,e,t)},generateBarrelBezierPts:function(e,t,n,i){var a=t/2,s=e/2,l=n-s,u=n+s,c=i-a,f=i+a,h=Jh(e,t),d=h.heightOffset,p=h.widthOffset,g=h.ctrlPtOffsetPct*e,y={topLeft:[l,c+d,l+g,c,l+p,c],topRight:[u-p,c,u-g,c,u,c+d],bottomRight:[u,f-d,u-g,f,u-p,f],bottomLeft:[l+p,f,l+g,f,l,f-d]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function(e,t,n,i,a,s,l){var u=Jh(i,a),c=u.heightOffset,f=u.widthOffset;if(ai(e,t,this.points,s,l,i,a-2*c,[0,-1],n)||ai(e,t,this.points,s,l,i-2*f,a,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,a,s,l),d=function(S,T,k){var E=k[4],P=k[2],C=k[0],M=k[5],D=k[1],I=Math.min(E,C),A=Math.max(E,C),Q=Math.min(M,D),B=Math.max(M,D);if(I<=S&&S<=A&&Q<=T&&T<=B){var Y=jQ(E,P,C),X=zQ(Y[0],Y[1],Y[2],S),W=X.filter(function(q){return 0<=q&&q<=1});if(W.length>0)return W[0]}return null},p=Object.keys(h),g=0;g<p.length;g++){var y=p[g],m=h[y],v=d(e,t,m);if(v!=null){var O=m[5],b=m[3],w=m[1],x=Ht(O,b,w,v);if(m.isTop&&x<=t||m.isBottom&&t<=x)return!0}}return!1}}};fi.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:$r(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,s,l){var u=e-(n/2+l),c=t-(i/2+l),f=c,h=e+(n/2+l),d=ki(a,s,e,t,u,c,h,f,!1);return d.length>0?d:pb(a,s,e,t,n,i,l)},checkPoint:function(e,t,n,i,a,s,l){var u=yl(i,a),c=2*u;if(ai(e,t,this.points,s,l,i,a-c,[0,-1],n)||ai(e,t,this.points,s,l,i-c,a,[0,-1],n))return!0;var f=i/2+2*n,h=a/2+2*n,d=[s-f,l-h,s-f,l,s+f,l,s+f,l-h];return!!(_r(e,t,d)||ha(e,t,c,c,s+i/2-u,l+a/2-u,n)||ha(e,t,c,c,s-i/2+u,l+a/2-u,n))}}};fi.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",$r(3,0)),this.generateRoundPolygon("round-triangle",$r(3,0)),this.generatePolygon("rectangle",$r(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",$r(5,0)),this.generateRoundPolygon("round-pentagon",$r(5,0)),this.generatePolygon("hexagon",$r(6,0)),this.generateRoundPolygon("round-hexagon",$r(6,0)),this.generatePolygon("heptagon",$r(7,0)),this.generateRoundPolygon("round-heptagon",$r(7,0)),this.generatePolygon("octagon",$r(8,0)),this.generateRoundPolygon("round-octagon",$r(8,0));var n=new Array(20);{var i=Kh(5,0),a=Kh(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var l=0;l<a.length/2;l++)a[l*2]*=s,a[l*2+1]*=s;for(var l=0;l<20/4;l++)n[l*4]=i[l*2],n[l*4+1]=i[l*2+1],n[l*4+2]=a[l*2],n[l*4+3]=a[l*2+1]}n=gb(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(c){var f=c.join("$"),h="polygon-"+f,d;return(d=this[h])?d:e.generatePolygon(h,c)}};var xl={};xl.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};xl.redraw=function(r){r=r||ub();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};xl.beforeRender=function(r,e){if(!this.destroyed){e==null&&Mt("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var hm=function(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};xl.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){hm(r,!0,i);var a=ii();r.render(r.renderOptions);var s=r.lastDrawTime=ii();r.averageRedrawTime===void 0&&(r.averageRedrawTime=s-a),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var l=s-a;r.redrawTotalTime+=l,r.lastRedrawTime=l,r.averageRedrawTime=r.averageRedrawTime/2+l/2,r.requestedFrame=!1}else hm(r,!1,i);r.skipFrame=!1,qu(n)}};qu(t)}};var b_=function(e){this.init(e)},i1=b_,Is=i1.prototype;Is.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Is.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,s="__________cytoscape_stylesheet",l="__________cytoscape_container",u=i.getElementById(s)!=null;if(t.className.indexOf(l)<0&&(t.className=(t.className||"")+" "+l),!u){var c=i.createElement("style");c.id=s,c.textContent="."+l+" { position: relative; }",a.insertBefore(c,a.children[0])}var f=n.getComputedStyle(t),h=f.getPropertyValue("position");h==="static"&&ct("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=ve(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Is.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Is.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};Is.isHeadless=function(){return!1};[jp,r1,n1,Bs,fi,xl].forEach(function(r){We(Is,r)});var th=1e3/60,a1={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Uc.default(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),s=function(c,f){var h=ii(),d=i.averageRedrawTime,p=i.lastRedrawTime,g=[],y=i.cy.extent(),m=i.getPixelRatio();for(c||i.flushRenderedStyleQueue();;){var v=ii(),O=v-h,b=v-f;if(p<th){var w=th-(c?d:0);if(b>=e.deqFastCost*w)break}else if(c){if(O>=e.deqCost*p||O>=e.deqAvgCost*d)break}else if(b>=e.deqNoDrawCost*th)break;var x=e.deq(n,m,y);if(x.length>0)for(var $=0;$<x.length;$++)g.push(x[$]);else break}g.length>0&&(e.onDeqd(n,g),!c&&e.shouldRedraw(n,g,m,y)&&a())},l=e.priority||Rp;i.beforeRender(s,l(n))}}}},w_=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yu;Ap(this,r),this.idsByKey=new Ln,this.keyForId=new Ln,this.cachesByLvl=new Ln,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Dp(r,[{key:"getIdsFor",value:function(t){t==null&&Mt("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new Ms,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);return i!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,a=n.get(t);return a||(a=new Ln,n.set(t,a),i.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var a=this.getKey(t);this.setCache(a,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}]),r}(),dm=25,Gl=50,Eu=-4,sd=3,x_=7.99,S_=8,k_=1024,$_=1024,P_=1024,C_=.2,E_=.8,T_=10,Q_=.15,A_=.1,D_=.9,__=.9,M_=100,Z_=1,ns={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},R_=fr({getKey:null,doesEleInvalidateKey:Yu,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:sb,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),go=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=R_(t);We(n,i),n.lookup=new w_(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Ut=go.prototype;Ut.reasons=ns;Ut.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Ut.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Ut.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new gl.default(function(t,n){return n.reqs-t.reqs});return e};Ut.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Ut.getElement=function(r,e,t,n,i){var a=this,s=this.renderer,l=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!a.allowEdgeTxrCaching&&r.isEdge()||!a.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Bp(l*t))),n<Eu)n=Eu;else if(l>=x_||n>sd)return null;var c=Math.pow(2,n),f=e.h*c,h=e.w*c,d=s.eleTextBiggerThanMin(r,c);if(!this.isVisible(r,d))return null;var p=u.get(r,n);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var g;if(f<=dm?g=dm:f<=Gl?g=Gl:g=Math.ceil(f/Gl)*Gl,f>P_||h>$_)return null;var y=a.getTextureQueue(g),m=y[y.length-2],v=function(){return a.recycleTexture(g,h)||a.addTexture(g,h)};m||(m=y[y.length-1]),m||(m=v()),m.width-m.usedWidth<h&&(m=v());for(var O=function(A){return A&&A.scaledLabelShown===d},b=i&&i===ns.dequeue,w=i&&i===ns.highQuality,x=i&&i===ns.downscale,$,S=n+1;S<=sd;S++){var T=u.get(r,S);if(T){$=T;break}}var k=$&&$.level===n+1?$:null,E=function(){m.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,m.usedWidth,0,h,f)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,h,g),O(k))E();else if(O($))if(w){for(var P=$.level;P>n;P--)k=a.getElement(r,e,t,P,ns.downscale);E()}else return a.queueElement(r,$.level-1),$;else{var C;if(!b&&!w&&!x)for(var M=n-1;M>=Eu;M--){var D=u.get(r,M);if(D){C=D;break}}if(O(C))return a.queueElement(r,n),C;m.context.translate(m.usedWidth,0),m.context.scale(c,c),this.drawElement(m.context,r,e,d,!1),m.context.scale(1/c,1/c),m.context.translate(-m.usedWidth,0)}return p={x:m.usedWidth,texture:m,level:n,scale:c,width:h,height:f,scaledLabelShown:d},m.usedWidth+=Math.ceil(h+S_),m.eleCaches.push(p),u.set(r,n,p),a.checkTextureFullness(m),p};Ut.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Ut.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(!!i){for(var a=Eu;a<=sd;a++){var s=t.getForCachedKey(r,a);s&&n.push(s)}var l=t.invalidate(r);if(l)for(var u=0;u<n.length;u++){var c=n[u],f=c.texture;f.invalidatedWidth+=c.width,c.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(r)}};Ut.checkTextureUtility=function(r){r.invalidatedWidth>=C_*r.width&&this.retireTexture(r)};Ut.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>E_&&r.fullnessChecks>=T_?Ii(t,r):r.fullnessChecks++};Ut.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;Ii(n,r),r.retired=!0;for(var a=r.eleCaches,s=0;s<a.length;s++){var l=a[s];i.deleteCache(l.key,l.level)}Lp(a);var u=e.getRetiredTextureQueue(t);u.push(r)};Ut.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(k_,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Ut.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),a=0;a<i.length;a++){var s=i[a];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Lp(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Ii(i,s),n.push(s),s}};Ut.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=this.getKey(r),s=i[a];if(s)s.level=Math.max(s.level,e),s.eles.merge(r),s.reqs++,n.updateItem(s);else{var l={eles:r.spawn().merge(r),level:e,reqs:1,key:a};n.push(l),i[a]=l}};Ut.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,s=0;s<Z_&&t.size()>0;s++){var l=t.pop(),u=l.key,c=l.eles[0],f=a.hasCache(c,l.level);if(n[u]=null,f)continue;i.push(l);var h=e.getBoundingBox(c);e.getElement(c,h,r,l.level,ns.dequeue)}return i};Ut.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=Zp,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(r))};Ut.onDequeue=function(r){this.onDequeues.push(r)};Ut.offDequeue=function(r){Ii(this.onDequeues,r)};Ut.setupDequeueing=a1.setupDequeueing({deqRedrawThreshold:M_,deqCost:Q_,deqAvgCost:A_,deqNoDrawCost:D_,deqFastCost:__,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var a=0;a<t.length;a++)for(var s=t[a].eles,l=0;l<s.length;l++){var u=s[l].boundingBox();if(Ip(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var L_=1,Co=-4,Ku=2,B_=3.99,I_=50,N_=50,z_=.15,W_=.1,q_=.9,Y_=.9,X_=1,pm=250,V_=4e3*4e3,F_=!0,s1=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=ii()-2*pm,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=Uc.default(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},N_),n.beforeRender(function(s,l){l-t.lastInvalidationTime<=pm?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(l,u){return u.reqs-l.reqs};t.layersQueue=new gl.default(a),t.setupDequeueing()},hr=s1.prototype,gm=0,j_=Math.pow(2,53)-1;hr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),a=this.renderer.makeOffscreenCanvas(n,i),s={id:gm=++gm%j_,bb:r,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=s.context,u=-s.bb.x1,c=-s.bb.y1;return l.scale(t,t),l.translate(u,c),s};hr.getLayers=function(r,e,t){var n=this,i=n.renderer,a=i.cy,s=a.zoom(),l=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Bp(s*e)),t<Co)t=Co;else if(s>=B_||t>Ku)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,c=Math.pow(2,t),f=u[t]=u[t]||[],h,d=n.levelIsComplete(t,r),p,g=function(){var E=function(I){if(n.validateLayersElesOrdering(I,r),n.levelIsComplete(I,r))return p=u[I],!0},P=function(I){if(!p)for(var A=t+I;Co<=A&&A<=Ku&&!E(A);A+=I);};P(1),P(-1);for(var C=f.length-1;C>=0;C--){var M=f[C];M.invalid&&Ii(f,M)}};if(!d)g();else return f;var y=function(){if(!h){h=Br();for(var E=0;E<r.length;E++)hb(h,r[E].boundingBox())}return h},m=function(E){E=E||{};var P=E.after;y();var C=h.w*c*(h.h*c);if(C>V_)return null;var M=n.makeLayer(h,t);if(P!=null){var D=f.indexOf(P)+1;f.splice(D,0,M)}else(E.insert===void 0||E.insert)&&f.unshift(M);return M};if(n.skipping&&!l)return null;for(var v=null,O=r.length/L_,b=!l,w=0;w<r.length;w++){var x=r[w],$=x._private.rscratch,S=$.imgLayerCaches=$.imgLayerCaches||{},T=S[t];if(T){v=T;continue}if((!v||v.eles.length>=O||!db(v.bb,x.boundingBox()))&&(v=m({insert:!0,after:v}),!v))return null;p||b?n.queueLayer(v,x):n.drawEleInLayer(v,x,t,e),v.eles.push(x),S[t]=v}return p||(b?null:f)};hr.getEleLevelForLayerLevel=function(r,e){return r};hr.drawEleInLayer=function(r,e,t,n){var i=this,a=this.renderer,s=r.context,l=e.boundingBox();l.w===0||l.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),a.setImgSmoothing(s,!1),a.drawCachedElement(s,e,null,null,t,F_),a.setImgSmoothing(s,!0))};hr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var s=n[a];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===e.length};hr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(!!t)for(var n=0;n<t.length;n++){for(var i=t[n],a=-1,s=0;s<e.length;s++)if(i.eles[0]===e[s]){a=s;break}if(a<0){this.invalidateLayer(i);continue}for(var l=a,s=0;s<i.eles.length;s++)if(i.eles[s]!==e[l+s]){this.invalidateLayer(i);break}}};hr.updateElementsInLayers=function(r,e){for(var t=this,n=ml(r[0]),i=0;i<r.length;i++)for(var a=n?null:r[i],s=n?r[i]:r[i].ele,l=s._private.rscratch,u=l.imgLayerCaches=l.imgLayerCaches||{},c=Co;c<=Ku;c++){var f=u[c];!f||a&&t.getEleLevelForLayerLevel(f.level)!==a.level||e(f,s,a)}};hr.haveLayers=function(){for(var r=this,e=!1,t=Co;t<=Ku;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};hr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=ii(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,a){e.invalidateLayer(n)}))};hr.invalidateLayer=function(r){if(this.lastInvalidationTime=ii(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Ii(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var a=t[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};hr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,a){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var l=0;l<s.eles.length;l++)e.queueLayer(s,s.eles[l])})};hr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};hr.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,a=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};hr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<X_&&t.size()!==0;){var a=t.peek();if(a.replacement){t.pop();continue}if(a.replaces&&a!==a.replaces.replacement){t.pop();continue}if(a.invalid){t.pop();continue}var s=a.elesQueue.shift();s&&(e.drawEleInLayer(a,s,a.level,r),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(t.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};hr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var a=0;a<r.eles.length;a++){var s=r.eles[a]._private,l=s.imgLayerCaches=s.imgLayerCaches||{};l&&(l[r.level]=r)}e.requestRedraw()}};hr.requestRedraw=Uc.default(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);hr.setupDequeueing=a1.setupDequeueing({deqRedrawThreshold:I_,deqCost:z_,deqAvgCost:W_,deqNoDrawCost:q_,deqFastCost:Y_,deq:function(e,t){return e.dequeue(t)},onDeqd:Rp,shouldRedraw:sb,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var o1={},vm;function G_(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function U_(r,e,t){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),r.lineTo(a.x,a.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function mm(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];r.lineTo(a.x,a.y)}var s=t,l=t[0];r.moveTo(l.x,l.y);for(var i=1;i<s.length;i++){var a=s[i];r.lineTo(a.x,a.y)}r.closePath&&r.closePath()}function H_(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var a=e,s=a[0];r.moveTo(s.x,s.y);for(var l=0;l<a.length;l++){var u=a[l];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function K_(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}o1.arrowShapeImpl=function(r){return(vm||(vm={polygon:G_,"triangle-backcurve":U_,"triangle-tee":mm,"circle-triangle":H_,"triangle-cross":mm,circle:K_}))[r]};var Gn={};Gn.drawElement=function(r,e,t,n,i,a){var s=this;e.isNode()?s.drawNode(r,e,t,n,i,a):s.drawEdge(r,e,t,n,i,a)};Gn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Gn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Gn.drawCachedElementPortion=function(r,e,t,n,i,a,s,l){var u=this,c=t.getBoundingBox(e);if(!(c.w===0||c.h===0)){var f=t.getElement(e,c,n,i,a);if(f!=null){var h=l(u,e);if(h===0)return;var d=s(u,e),p=c.x1,g=c.y1,y=c.w,m=c.h,v,O,b,w,x;if(d!==0){var $=t.getRotationPoint(e);b=$.x,w=$.y,r.translate(b,w),r.rotate(d),x=u.getImgSmoothing(r),x||u.setImgSmoothing(r,!0);var S=t.getRotationOffset(e);v=S.x,O=S.y}else v=p,O=g;var T;h!==1&&(T=r.globalAlpha,r.globalAlpha=T*h),r.drawImage(f.texture.canvas,f.x,0,f.width,f.height,v,O,y,m),h!==1&&(r.globalAlpha=T),d!==0&&(r.rotate(-d),r.translate(-b,-w),x||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var J_=function(){return 0},eM=function(e,t){return e.getTextAngle(t,null)},tM=function(e,t){return e.getTextAngle(t,"source")},rM=function(e,t){return e.getTextAngle(t,"target")},nM=function(e,t){return t.effectiveOpacity()},rh=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Gn.drawCachedElement=function(r,e,t,n,i,a){var s=this,l=s.data,u=l.eleTxrCache,c=l.lblTxrCache,f=l.slbTxrCache,h=l.tlbTxrCache,d=e.boundingBox(),p=a===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Ip(d,n))){var g=e.isEdge(),y=e.element()._private.rscratch.badLine;s.drawElementUnderlay(r,e),s.drawCachedElementPortion(r,e,u,t,i,p,J_,nM),(!g||!y)&&s.drawCachedElementPortion(r,e,c,t,i,p,eM,rh),g&&!y&&(s.drawCachedElementPortion(r,e,f,t,i,p,tM,rh),s.drawCachedElementPortion(r,e,h,t,i,p,rM,rh)),s.drawElementOverlay(r,e)}};Gn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};Gn.drawCachedElements=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var s=e[a];i.drawCachedElement(r,s,t,n)}};Gn.drawCachedNodes=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var s=e[a];!s.isNode()||i.drawCachedElement(r,s,t,n)}};Gn.drawLayeredElements=function(r,e,t,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,t);if(a)for(var s=0;s<a.length;s++){var l=a[s],u=l.bb;u.w===0||u.h===0||r.drawImage(l.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var hi={};hi.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,l=e._private.rscratch;if(!(a&&!e.visible())&&!(l.badLine||l.allpts==null||isNaN(l.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var c=a?e.pstyle("opacity").value:1,f=a?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,p=e.pstyle("width").pfValue,g=e.pstyle("line-cap").value,y=c*f,m=c*f,v=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;h==="straight-triangle"?(s.eleStrokeStyle(r,e,C),s.drawEdgeTrianglePath(e,r,l.allpts)):(r.lineWidth=p,r.lineCap=g,s.eleStrokeStyle(r,e,C),s.drawEdgePath(e,r,l.allpts,d),r.lineCap="butt")},O=function(){!i||s.drawEdgeOverlay(r,e)},b=function(){!i||s.drawEdgeUnderlay(r,e)},w=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(r,e,C)},x=function(){s.drawElementText(r,e,null,n)};r.lineJoin="round";var $=e.pstyle("ghost").value==="yes";if($){var S=e.pstyle("ghost-offset-x").pfValue,T=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,E=y*k;r.translate(S,T),v(E),w(E),r.translate(-S,-T)}b(),v(),w(),O(),x(),t&&r.translate(u.x1,u.y1)}};var l1=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(!!n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,s=a.usePaths(),l=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,c=2*u,f=n.pstyle("".concat(e,"-color")).value;t.lineWidth=c,l.edgeType==="self"&&!s?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,f[0],f[1],f[2],i),a.drawEdgePath(n,t,l.allpts,"solid")}}}};hi.drawEdgeOverlay=l1("overlay");hi.drawEdgeUnderlay=l1("underlay");hi.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,a=e,s,l=!1,u=this.usePaths(),c=r.pstyle("line-dash-pattern").pfValue,f=r.pstyle("line-dash-offset").pfValue;if(u){var h=t.join("$"),d=i.pathCacheKey&&i.pathCacheKey===h;d?(s=e=i.pathCache,l=!0):(s=e=new Path2D,i.pathCacheKey=h,i.pathCache=s)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(c),a.lineDashOffset=f;break;case"solid":a.setLineDash([]);break}if(!l&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<t.length;p+=4)e.quadraticCurveTo(t[p],t[p+1],t[p+2],t[p+3]);break;case"straight":case"segments":case"haystack":for(var g=2;g+1<t.length;g+=2)e.lineTo(t[g],t[g+1]);break}e=a,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};hi.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var a=[t[i+2]-t[i],t[i+3]-t[i+1]],s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=[a[1]/s,-a[0]/s],u=[l[0]*n/2,l[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};hi.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};hi.drawArrowhead=function(r,e,t,n,i,a,s){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var l=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var c=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(t+"-arrow-fill").value,h=e.pstyle("width").pfValue,d=e.pstyle(t+"-arrow-width"),p=d.value==="match-line"?h:d.pfValue;d.units==="%"&&(p*=h);var g=e.pstyle("opacity").value;s===void 0&&(s=g);var y=r.globalCompositeOperation;(s!==1||f==="hollow")&&(r.globalCompositeOperation="destination-out",l.colorFillStyle(r,255,255,255,1),l.colorStrokeStyle(r,255,255,255,1),l.drawArrowShape(e,r,c,h,u,p,n,i,a),r.globalCompositeOperation=y);var m=e.pstyle(t+"-arrow-color").value;l.colorFillStyle(r,m[0],m[1],m[2],s),l.colorStrokeStyle(r,m[0],m[1],m[2],s),l.drawArrowShape(e,r,f,h,u,p,n,i,a)}}};hi.drawArrowShape=function(r,e,t,n,i,a,s,l,u){var c=this,f=this.usePaths()&&i!=="triangle-cross",h=!1,d,p=e,g={x:s,y:l},y=r.pstyle("arrow-scale").value,m=this.getArrowWidth(n,y),v=c.arrowShapes[i];if(f){var O=c.arrowPathCache=c.arrowPathCache||[],b=ba(i),w=O[b];w!=null?(d=e=w,h=!0):(d=e=new Path2D,O[b]=d)}h||(e.beginPath&&e.beginPath(),f?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,m,u,g,n),e.closePath&&e.closePath()),e=p,f&&(e.translate(s,l),e.rotate(u),e.scale(m,m)),(t==="filled"||t==="both")&&(f?e.fill(d):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=a/(f?m:1),e.lineJoin="miter",f?e.stroke(d):e.stroke()),f&&(e.scale(1/m,1/m),e.rotate(-u),e.translate(-s,-l))};var Up={};Up.safeDrawImage=function(r,e,t,n,i,a,s,l,u,c){if(!(i<=0||a<=0||u<=0||c<=0))try{r.drawImage(e,t,n,i,a,s,l,u,c)}catch(f){ct(f)}};Up.drawInscribedImage=function(r,e,t,n,i){var a=this,s=t.position(),l=s.x,u=s.y,c=t.cy().style(),f=c.getIndexedStyle.bind(c),h=f(t,"background-fit","value",n),d=f(t,"background-repeat","value",n),p=t.width(),g=t.height(),y=t.padding()*2,m=p+(f(t,"background-width-relative-to","value",n)==="inner"?0:y),v=g+(f(t,"background-height-relative-to","value",n)==="inner"?0:y),O=t._private.rscratch,b=f(t,"background-clip","value",n),w=b==="node",x=f(t,"background-image-opacity","value",n)*i,$=f(t,"background-image-smoothing","value",n),S=e.width||e.cachedW,T=e.height||e.cachedH;(S==null||T==null)&&(document.body.appendChild(e),S=e.cachedW=e.width||e.offsetWidth,T=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=S,E=T;if(f(t,"background-width","value",n)!=="auto"&&(f(t,"background-width","units",n)==="%"?k=f(t,"background-width","pfValue",n)*m:k=f(t,"background-width","pfValue",n)),f(t,"background-height","value",n)!=="auto"&&(f(t,"background-height","units",n)==="%"?E=f(t,"background-height","pfValue",n)*v:E=f(t,"background-height","pfValue",n)),!(k===0||E===0)){if(h==="contain"){var P=Math.min(m/k,v/E);k*=P,E*=P}else if(h==="cover"){var P=Math.max(m/k,v/E);k*=P,E*=P}var C=l-m/2,M=f(t,"background-position-x","units",n),D=f(t,"background-position-x","pfValue",n);M==="%"?C+=(m-k)*D:C+=D;var I=f(t,"background-offset-x","units",n),A=f(t,"background-offset-x","pfValue",n);I==="%"?C+=(m-k)*A:C+=A;var Q=u-v/2,B=f(t,"background-position-y","units",n),Y=f(t,"background-position-y","pfValue",n);B==="%"?Q+=(v-E)*Y:Q+=Y;var X=f(t,"background-offset-y","units",n),W=f(t,"background-offset-y","pfValue",n);X==="%"?Q+=(v-E)*W:Q+=W,O.pathCache&&(C-=l,Q-=u,l=0,u=0);var q=r.globalAlpha;r.globalAlpha=x;var F=a.getImgSmoothing(r),Z=!1;if($==="no"&&F?(a.setImgSmoothing(r,!1),Z=!0):$==="yes"&&!F&&(a.setImgSmoothing(r,!0),Z=!0),d==="no-repeat")w&&(r.save(),O.pathCache?r.clip(O.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(r,l,u,m,v),r.clip())),a.safeDrawImage(r,e,0,0,S,T,C,Q,k,E),w&&r.restore();else{var N=r.createPattern(e,d);r.fillStyle=N,a.nodeShapes[a.getNodeShape(t)].draw(r,l,u,m,v),r.translate(C,Q),r.fill(),r.translate(-C,-Q)}r.globalAlpha=q,Z&&a.setImgSmoothing(r,F)}};var La={};La.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(Bp(t*n));e=Math.pow(2,i)}var a=r.pstyle("font-size").pfValue*e,s=r.pstyle("min-zoomed-font-size").pfValue;return!(a<s)};La.drawElementText=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(a&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var u=s.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var c=e.element()._private.rscratch.badLine,f=e.pstyle("label"),h=e.pstyle("source-label"),d=e.pstyle("target-label");if(c||(!f||!f.value)&&(!h||!h.value)&&(!d||!d.value))return;r.textAlign="center",r.textBaseline="bottom"}var p=!t,g;t&&(g=t,r.translate(-g.x1,-g.y1)),i==null?(s.drawText(r,e,null,p,a),e.isEdge()&&(s.drawText(r,e,"source",p,a),s.drawText(r,e,"target",p,a))):s.drawText(r,e,i,p,a),t&&r.translate(g.x1,g.y1)};La.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};La.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,l=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*l,c=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;r.font=n+" "+s+" "+i+" "+a,r.lineJoin="round",this.colorFillStyle(r,c[0],c[1],c[2],l),this.colorStrokeStyle(r,f[0],f[1],f[2],u)};function nh(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.quadraticCurveTo(e+n,t,e+n,t+a),r.lineTo(e+n,t+i-a),r.quadraticCurveTo(e+n,t+i,e+n-a,t+i),r.lineTo(e+a,t+i),r.quadraticCurveTo(e,t+i,e,t+i-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath(),s?r.stroke():r.fill()}La.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,a=e?e+"-":"",s=r.pstyle(a+"text-rotation"),l=mn(i,"labelAngle",e);return s.strValue==="autorotate"?t=r.isEdge()?l:0:s.strValue==="none"?t=0:t=s.pfValue,t};La.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,s=a.rscratch,l=i?e.effectiveOpacity():1;if(!(i&&(l===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=mn(s,"labelX",t),c=mn(s,"labelY",t),f,h,d=this.getLabelText(e,t);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(c)){this.setupTextStyle(r,e,i);var p=t?t+"-":"",g=mn(s,"labelWidth",t),y=mn(s,"labelHeight",t),m=e.pstyle(p+"text-margin-x").pfValue,v=e.pstyle(p+"text-margin-y").pfValue,O=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;O&&(b="center",w="center"),u+=m,c+=v;var x;switch(n?x=this.getTextAngle(e,t):x=0,x!==0&&(f=u,h=c,r.translate(f,h),r.rotate(x),u=0,c=0),w){case"top":break;case"center":c+=y/2;break;case"bottom":c+=y;break}var $=e.pstyle("text-background-opacity").value,S=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,E=e.pstyle("text-background-shape").strValue,P=E.indexOf("round")===0,C=2;if($>0||T>0&&S>0){var M=u-k;switch(b){case"left":M-=g;break;case"center":M-=g/2;break}var D=c-y-k,I=g+2*k,A=y+2*k;if($>0){var Q=r.fillStyle,B=e.pstyle("text-background-color").value;r.fillStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+$*l+")",P?nh(r,M,D,I,A,C):r.fillRect(M,D,I,A),r.fillStyle=Q}if(T>0&&S>0){var Y=r.strokeStyle,X=r.lineWidth,W=e.pstyle("text-border-color").value,q=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+W[0]+","+W[1]+","+W[2]+","+S*l+")",r.lineWidth=T,r.setLineDash)switch(q){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=T/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(P?nh(r,M,D,I,A,C,"stroke"):r.strokeRect(M,D,I,A),q==="double"){var F=T/2;P?nh(r,M+F,D+F,I-F*2,A-F*2,C,"stroke"):r.strokeRect(M+F,D+F,I-F*2,A-F*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=X,r.strokeStyle=Y}}var Z=2*e.pstyle("text-outline-width").pfValue;if(Z>0&&(r.lineWidth=Z),e.pstyle("text-wrap").value==="wrap"){var N=mn(s,"labelWrapCachedLines",t),V=mn(s,"labelLineHeight",t),z=g/2,j=this.getLabelJustification(e);switch(j==="auto"||(b==="left"?j==="left"?u+=-g:j==="center"&&(u+=-z):b==="center"?j==="left"?u+=-z:j==="right"&&(u+=z):b==="right"&&(j==="center"?u+=z:j==="right"&&(u+=g))),w){case"top":c-=(N.length-1)*V;break;case"center":case"bottom":c-=(N.length-1)*V;break}for(var G=0;G<N.length;G++)Z>0&&r.strokeText(N[G],u,c),r.fillText(N[G],u,c),c+=V}else Z>0&&r.strokeText(d,u,c),r.fillText(d,u,c);x!==0&&(r.rotate(-x),r.translate(-f,-h))}}};var Ns={};Ns.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,l,u,c=e._private,f=c.rscratch,h=e.position();if(!(!ve(h.x)||!ve(h.y))&&!(a&&!e.visible())){var d=a?e.effectiveOpacity():1,p=s.usePaths(),g,y=!1,m=e.padding();l=e.width()+2*m,u=e.height()+2*m;var v;t&&(v=t,r.translate(-v.x1,-v.y1));for(var O=e.pstyle("background-image"),b=O.value,w=new Array(b.length),x=new Array(b.length),$=0,S=0;S<b.length;S++){var T=b[S],k=w[S]=T!=null&&T!=="none";if(k){var E=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",S);$++,x[S]=s.getCachedImage(T,E,function(){c.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var P=e.pstyle("background-blacken").value,C=e.pstyle("border-width").pfValue,M=e.pstyle("background-opacity").value*d,D=e.pstyle("border-color").value,I=e.pstyle("border-style").value,A=e.pstyle("border-opacity").value*d,Q=e.pstyle("outline-width").pfValue,B=e.pstyle("outline-color").value,Y=e.pstyle("outline-style").value,X=e.pstyle("outline-opacity").value*d,W=e.pstyle("outline-offset").value;r.lineJoin="miter";var q=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;s.eleFillStyle(r,e,ee)},F=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;s.colorStrokeStyle(r,D[0],D[1],D[2],ee)},Z=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X;s.colorStrokeStyle(r,B[0],B[1],B[2],ee)},N=function(ee,R,H,oe){var re=s.nodePathCache=s.nodePathCache||[],ie=ab(H==="polygon"?H+","+oe.join(","):H,""+R,""+ee),Ze=re[ie],ae,Ae=!1;return Ze!=null?(ae=Ze,Ae=!0,f.pathCache=ae):(ae=new Path2D,re[ie]=f.pathCache=ae),{path:ae,cacheHit:Ae}},V=e.pstyle("shape").strValue,z=e.pstyle("shape-polygon-points").pfValue;if(p){r.translate(h.x,h.y);var j=N(l,u,V,z);g=j.path,y=j.cacheHit}var G=function(){if(!y){var ee=h;p&&(ee={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(g||r,ee.x,ee.y,l,u)}p?r.fill(g):r.fill()},U=function(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=c.backgrounding,oe=0,re=0;re<x.length;re++){var ie=e.cy().style().getIndexedStyle(e,"background-image-containment","value",re);if(R&&ie==="over"||!R&&ie==="inside"){oe++;continue}w[re]&&x[re].complete&&!x[re].error&&(oe++,s.drawInscribedImage(r,x[re],e,re,ee))}c.backgrounding=oe!==$,H!==c.backgrounding&&e.updateStyle(!1)},K=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasPie(e)&&(s.drawPie(r,e,R),ee&&(p||s.nodeShapes[s.getNodeShape(e)].draw(r,h.x,h.y,l,u)))},de=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,R=(P>0?P:-P)*ee,H=P>0?0:255;P!==0&&(s.colorFillStyle(r,H,H,H,R),p?r.fill(g):r.fill())},Oe=function(){if(C>0){if(r.lineWidth=C,r.lineCap="butt",r.setLineDash)switch(I){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}if(p?r.stroke(g):r.stroke(),I==="double"){r.lineWidth=C/3;var ee=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",p?r.stroke(g):r.stroke(),r.globalCompositeOperation=ee}r.setLineDash&&r.setLineDash([])}},pe=function(){if(Q>0){if(r.lineWidth=Q,r.lineCap="butt",r.setLineDash)switch(Y){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ee=h;p&&(ee={x:0,y:0});var R=s.getNodeShape(e),H=(l+C+(Q+W))/l,oe=(u+C+(Q+W))/u,re=l*H,ie=u*oe,Ze=s.nodeShapes[R].points,ae;if(p){var Ae=N(re,ie,R,Ze);ae=Ae.path}if(R==="ellipse")s.drawEllipsePath(ae||r,ee.x,ee.y,re,ie);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(R)){var ne=0,we=0,Se=0;R==="round-diamond"?ne=(C+W+Q)*1.4:R==="round-heptagon"?(ne=(C+W+Q)*1.075,Se=-(C/2+W+Q)/35):R==="round-hexagon"?ne=(C+W+Q)*1.12:R==="round-pentagon"?(ne=(C+W+Q)*1.13,Se=-(C/2+W+Q)/15):R==="round-tag"?(ne=(C+W+Q)*1.12,we=(C/2+Q+W)*.07):R==="round-triangle"&&(ne=(C+W+Q)*(Math.PI/2),Se=-(C+W/2+Q)/Math.PI),ne!==0&&(H=(l+ne)/l,oe=(u+ne)/u),s.drawRoundPolygonPath(ae||r,ee.x+we,ee.y+Se,l*H,u*oe,Ze)}else if(["roundrectangle","round-rectangle"].includes(R))s.drawRoundRectanglePath(ae||r,ee.x,ee.y,re,ie);else if(["cutrectangle","cut-rectangle"].includes(R))s.drawCutRectanglePath(ae||r,ee.x,ee.y,re,ie);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(R))s.drawBottomRoundRectanglePath(ae||r,ee.x,ee.y,re,ie);else if(R==="barrel")s.drawBarrelPath(ae||r,ee.x,ee.y,re,ie);else if(R.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(R)){var Re=(C+Q+W)/l;Ze=Xu(Vu(Ze,Re)),s.drawPolygonPath(ae||r,ee.x,ee.y,l,u,Ze)}else{var De=(C+Q+W)/l;Ze=Xu(Vu(Ze,-De)),s.drawPolygonPath(ae||r,ee.x,ee.y,l,u,Ze)}if(p?r.stroke(ae):r.stroke(),Y==="double"){r.lineWidth=C/3;var Ne=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",p?r.stroke(ae):r.stroke(),r.globalCompositeOperation=Ne}r.setLineDash&&r.setLineDash([])}},he=function(){i&&s.drawNodeOverlay(r,e,h,l,u)},me=function(){i&&s.drawNodeUnderlay(r,e,h,l,u)},Pe=function(){s.drawElementText(r,e,null,n)},xe=e.pstyle("ghost").value==="yes";if(xe){var Qe=e.pstyle("ghost-offset-x").pfValue,qe=e.pstyle("ghost-offset-y").pfValue,Ye=e.pstyle("ghost-opacity").value,Ie=Ye*d;r.translate(Qe,qe),Z(),pe(),q(Ye*M),G(),U(Ie,!0),F(Ye*A),Oe(),K(P!==0||C!==0),U(Ie,!1),de(Ie),r.translate(-Qe,-qe)}p&&r.translate(-h.x,-h.y),me(),p&&r.translate(h.x,h.y),Z(),pe(),q(),G(),U(d,!0),F(),Oe(),K(P!==0||C!==0),U(d,!1),de(),p&&r.translate(-h.x,-h.y),Pe(),he(),t&&r.translate(v.x1,v.y1)}};var u1=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,s){var l=this;if(!!n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,c=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value;if(c>0){if(i=i||n.position(),a==null||s==null){var d=n.padding();a=n.width()+2*d,s=n.height()+2*d}l.colorFillStyle(t,f[0],f[1],f[2],c),l.nodeShapes[h].draw(t,i.x,i.y,a+u*2,s+u*2),t.fill()}}}};Ns.drawNodeOverlay=u1("overlay");Ns.drawNodeUnderlay=u1("underlay");Ns.hasPie=function(r){return r=r[0],r._private.hasPie};Ns.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),s=n.x,l=n.y,u=e.width(),c=e.height(),f=Math.min(u,c)/2,h=0,d=this.usePaths();d&&(s=0,l=0),a.units==="%"?f=f*a.pfValue:a.pfValue!==void 0&&(f=a.pfValue/2);for(var p=1;p<=i.pieBackgroundN;p++){var g=e.pstyle("pie-"+p+"-background-size").value,y=e.pstyle("pie-"+p+"-background-color").value,m=e.pstyle("pie-"+p+"-background-opacity").value*t,v=g/100;v+h>1&&(v=1-h);var O=1.5*Math.PI+2*Math.PI*h,b=2*Math.PI*v,w=O+b;g===0||h>=1||h+v>1||(r.beginPath(),r.moveTo(s,l),r.arc(s,l,f,O,w),r.closePath(),this.colorFillStyle(r,y[0],y[1],y[2],m),r.fill(),h+=v)}};var Hr={},iM=100;Hr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Hr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Hr.createGradientStyleFor=function(r,e,t,n,i){var a,s=this.usePaths(),l=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var c=t.sourceEndpoint(),f=t.targetEndpoint(),h=t.midpoint(),d=wa(c,h),p=wa(f,h);a=r.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,p))}else{var g=s?{x:0,y:0}:t.position(),y=t.paddedWidth(),m=t.paddedHeight();a=r.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(y,m))}else if(t.isEdge()){var v=t.sourceEndpoint(),O=t.targetEndpoint();a=r.createLinearGradient(v.x,v.y,O.x,O.y)}else{var b=s?{x:0,y:0}:t.position(),w=t.paddedWidth(),x=t.paddedHeight(),$=w/2,S=x/2,T=t.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":a=r.createLinearGradient(b.x,b.y-S,b.x,b.y+S);break;case"to-top":a=r.createLinearGradient(b.x,b.y+S,b.x,b.y-S);break;case"to-left":a=r.createLinearGradient(b.x+$,b.y,b.x-$,b.y);break;case"to-right":a=r.createLinearGradient(b.x-$,b.y,b.x+$,b.y);break;case"to-bottom-right":case"to-right-bottom":a=r.createLinearGradient(b.x-$,b.y-S,b.x+$,b.y+S);break;case"to-top-right":case"to-right-top":a=r.createLinearGradient(b.x-$,b.y+S,b.x+$,b.y-S);break;case"to-bottom-left":case"to-left-bottom":a=r.createLinearGradient(b.x+$,b.y-S,b.x-$,b.y+S);break;case"to-top-left":case"to-left-top":a=r.createLinearGradient(b.x+$,b.y+S,b.x-$,b.y-S);break}}if(!a)return null;for(var k=u.length===l.length,E=l.length,P=0;P<E;P++)a.addColorStop(k?u[P]:P/(E-1),"rgba("+l[P][0]+","+l[P][1]+","+l[P][2]+","+i+")");return a};Hr.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};Hr.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};Hr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};Hr.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};Hr.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};Hr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};Hr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],s=e.getPixelRatio(),l=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=l);var u=i*s,c=a*s,f;if(!(u===e.canvasWidth&&c===e.canvasHeight)){e.fontCaches=null;var h=t.canvasContainer;h.style.width=i+"px",h.style.height=a+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)f=t.canvases[d],f.width=u,f.height=c,f.style.width=i+"px",f.style.height=a+"px";for(var d=0;d<e.BUFFER_COUNT;d++)f=t.bufferCanvases[d],f.width=u,f.height=c,f.style.width=i+"px",f.style.height=a+"px";e.textureMult=1,s<=1&&(f=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=u*e.textureMult,f.height=c*e.textureMult),e.canvasWidth=u,e.canvasHeight=c}};Hr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Hr.render=function(r){r=r||ub();var e=r.forcedContext,t=r.drawAllLayers,n=r.drawOnlyNodeLayer,i=r.forcedZoom,a=r.forcedPan,s=this,l=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,u=s.cy,c=s.data,f=c.canvasNeedsRedraw,h=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),d=r.motionBlur!==void 0?r.motionBlur:s.motionBlur,p=s.motionBlurPxRatio,g=u.hasCompoundNodes(),y=s.hoverData.draggingEles,m=!!(s.hoverData.selecting||s.touchData.selecting);d=d&&!e&&s.motionBlurEnabled&&!m;var v=d;e||(s.prevPxRatio!==l&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=l),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),d&&(s.mbFrames==null&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(v=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!h&&(f[s.NODE]=!0,f[s.SELECT_BOX]=!0);var O=u.style(),b=u.zoom(),w=i!==void 0?i:b,x=u.pan(),$={x:x.x,y:x.y},S={zoom:b,pan:{x:x.x,y:x.y}},T=s.prevViewport,k=T===void 0||S.zoom!==T.zoom||S.pan.x!==T.pan.x||S.pan.y!==T.pan.y;!k&&!(y&&!g)&&(s.motionBlurPxRatio=1),a&&($=a),w*=l,$.x*=l,$.y*=l;var E=s.getCachedZSortedEles();function P(pe,he,me,Pe,xe){var Qe=pe.globalCompositeOperation;pe.globalCompositeOperation="destination-out",s.colorFillStyle(pe,255,255,255,s.motionBlurTransparency),pe.fillRect(he,me,Pe,xe),pe.globalCompositeOperation=Qe}function C(pe,he){var me,Pe,xe,Qe;!s.clearingMotionBlur&&(pe===c.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]||pe===c.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG])?(me={x:x.x*p,y:x.y*p},Pe=b*p,xe=s.canvasWidth*p,Qe=s.canvasHeight*p):(me=$,Pe=w,xe=s.canvasWidth,Qe=s.canvasHeight),pe.setTransform(1,0,0,1,0,0),he==="motionBlur"?P(pe,0,0,xe,Qe):!e&&(he===void 0||he)&&pe.clearRect(0,0,xe,Qe),t||(pe.translate(me.x,me.y),pe.scale(Pe,Pe)),a&&pe.translate(a.x,a.y),i&&pe.scale(i,i)}if(h||(s.textureDrawLastFrame=!1),h){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=u.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var M=s.data.bufferContexts[s.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:l*s.textureMult});var S=s.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:s.canvasWidth,height:s.canvasHeight};S.mpan={x:(0-S.pan.x)/S.zoom,y:(0-S.pan.y)/S.zoom}}f[s.DRAG]=!1,f[s.NODE]=!1;var D=c.contexts[s.NODE],I=s.textureCache.texture,S=s.textureCache.viewport;D.setTransform(1,0,0,1,0,0),d?P(D,0,0,S.width,S.height):D.clearRect(0,0,S.width,S.height);var A=O.core("outside-texture-bg-color").value,Q=O.core("outside-texture-bg-opacity").value;s.colorFillStyle(D,A[0],A[1],A[2],Q),D.fillRect(0,0,S.width,S.height);var b=u.zoom();C(D,!1),D.clearRect(S.mpan.x,S.mpan.y,S.width/S.zoom/l,S.height/S.zoom/l),D.drawImage(I,S.mpan.x,S.mpan.y,S.width/S.zoom/l,S.height/S.zoom/l)}else s.textureOnViewport&&!e&&(s.textureCache=null);var B=u.extent(),Y=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),X=s.hideEdgesOnViewport&&Y,W=[];if(W[s.NODE]=!f[s.NODE]&&d&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,W[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),W[s.DRAG]=!f[s.DRAG]&&d&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,W[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),f[s.NODE]||t||n||W[s.NODE]){var q=d&&!W[s.NODE]&&p!==1,D=e||(q?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:c.contexts[s.NODE]),F=d&&!q?"motionBlur":void 0;C(D,F),X?s.drawCachedNodes(D,E.nondrag,l,B):s.drawLayeredElements(D,E.nondrag,l,B),s.debug&&s.drawDebugPoints(D,E.nondrag),!t&&!d&&(f[s.NODE]=!1)}if(!n&&(f[s.DRAG]||t||W[s.DRAG])){var q=d&&!W[s.DRAG]&&p!==1,D=e||(q?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:c.contexts[s.DRAG]);C(D,d&&!q?"motionBlur":void 0),X?s.drawCachedNodes(D,E.drag,l,B):s.drawCachedElements(D,E.drag,l,B),s.debug&&s.drawDebugPoints(D,E.drag),!t&&!d&&(f[s.DRAG]=!1)}if(s.showFps||!n&&f[s.SELECT_BOX]&&!t){var D=e||c.contexts[s.SELECT_BOX];if(C(D),s.selection[4]==1&&(s.hoverData.selecting||s.touchData.selecting)){var b=s.cy.zoom(),Z=O.core("selection-box-border-width").value/b;D.lineWidth=Z,D.fillStyle="rgba("+O.core("selection-box-color").value[0]+","+O.core("selection-box-color").value[1]+","+O.core("selection-box-color").value[2]+","+O.core("selection-box-opacity").value+")",D.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),Z>0&&(D.strokeStyle="rgba("+O.core("selection-box-border-color").value[0]+","+O.core("selection-box-border-color").value[1]+","+O.core("selection-box-border-color").value[2]+","+O.core("selection-box-opacity").value+")",D.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(c.bgActivePosistion&&!s.hoverData.selecting){var b=s.cy.zoom(),N=c.bgActivePosistion;D.fillStyle="rgba("+O.core("active-bg-color").value[0]+","+O.core("active-bg-color").value[1]+","+O.core("active-bg-color").value[2]+","+O.core("active-bg-opacity").value+")",D.beginPath(),D.arc(N.x,N.y,O.core("active-bg-size").pfValue/b,0,2*Math.PI),D.fill()}var V=s.lastRedrawTime;if(s.showFps&&V){V=Math.round(V);var z=Math.round(1e3/V);D.setTransform(1,0,0,1,0,0),D.fillStyle="rgba(255, 0, 0, 0.75)",D.strokeStyle="rgba(255, 0, 0, 0.75)",D.lineWidth=1,D.fillText("1 frame = "+V+" ms = "+z+" fps",0,20);var j=60;D.strokeRect(0,30,250,20),D.fillRect(0,30,250*Math.min(z/j,1),20)}t||(f[s.SELECT_BOX]=!1)}if(d&&p!==1){var G=c.contexts[s.NODE],U=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],K=c.contexts[s.DRAG],de=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],Oe=function(he,me,Pe){he.setTransform(1,0,0,1,0,0),Pe||!v?he.clearRect(0,0,s.canvasWidth,s.canvasHeight):P(he,0,0,s.canvasWidth,s.canvasHeight);var xe=p;he.drawImage(me,0,0,s.canvasWidth*xe,s.canvasHeight*xe,0,0,s.canvasWidth,s.canvasHeight)};(f[s.NODE]||W[s.NODE])&&(Oe(G,U,W[s.NODE]),f[s.NODE]=!1),(f[s.DRAG]||W[s.DRAG])&&(Oe(K,de,W[s.DRAG]),f[s.DRAG]=!1)}s.prevViewport=S,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),d&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!h,s.mbFrames=0,f[s.NODE]=!0,f[s.DRAG]=!0,s.redraw()},iM)),e||u.emit("render")};var Ki={};Ki.drawPolygonPath=function(r,e,t,n,i,a){var s=n/2,l=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+s*a[0],t+l*a[1]);for(var u=1;u<a.length/2;u++)r.lineTo(e+s*a[u*2],t+l*a[u*2+1]);r.closePath()};Ki.drawRoundPolygonPath=function(r,e,t,n,i,a){var s=n/2,l=i/2,u=Np(n,i);r.beginPath&&r.beginPath();for(var c=0;c<a.length/4;c++){var f=void 0,h=void 0;c===0?f=a.length-2:f=c*4-2,h=c*4+2;var d=e+s*a[c*4],p=t+l*a[c*4+1],g=-a[f]*a[h]-a[f+1]*a[h+1],y=u/Math.tan(Math.acos(g)/2),m=d-y*a[f],v=p-y*a[f+1],O=d+y*a[h],b=p+y*a[h+1];c===0?r.moveTo(m,v):r.lineTo(m,v),r.arcTo(d,p,O,b,u)}r.closePath()};Ki.drawRoundRectanglePath=function(r,e,t,n,i){var a=n/2,s=i/2,l=yl(n,i);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+a,t-s,e+a,t,l),r.arcTo(e+a,t+s,e,t+s,l),r.arcTo(e-a,t+s,e-a,t,l),r.arcTo(e-a,t-s,e,t-s,l),r.lineTo(e,t-s),r.closePath()};Ki.drawBottomRoundRectanglePath=function(r,e,t,n,i){var a=n/2,s=i/2,l=yl(n,i);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+a,t-s),r.lineTo(e+a,t),r.arcTo(e+a,t+s,e,t+s,l),r.arcTo(e-a,t+s,e-a,t,l),r.lineTo(e-a,t-s),r.lineTo(e,t-s),r.closePath()};Ki.drawCutRectanglePath=function(r,e,t,n,i){var a=n/2,s=i/2,l=vb();r.beginPath&&r.beginPath(),r.moveTo(e-a+l,t-s),r.lineTo(e+a-l,t-s),r.lineTo(e+a,t-s+l),r.lineTo(e+a,t+s-l),r.lineTo(e+a-l,t+s),r.lineTo(e-a+l,t+s),r.lineTo(e-a,t+s-l),r.lineTo(e-a,t-s+l),r.closePath()};Ki.drawBarrelPath=function(r,e,t,n,i){var a=n/2,s=i/2,l=e-a,u=e+a,c=t-s,f=t+s,h=Jh(n,i),d=h.widthOffset,p=h.heightOffset,g=h.ctrlPtOffsetPct*d;r.beginPath&&r.beginPath(),r.moveTo(l,c+p),r.lineTo(l,f-p),r.quadraticCurveTo(l+g,f,l+d,f),r.lineTo(u-d,f),r.quadraticCurveTo(u-g,f,u,f-p),r.lineTo(u,c+p),r.quadraticCurveTo(u-g,c,u-d,c),r.lineTo(l+d,c),r.quadraticCurveTo(l+g,c,l,c+p),r.closePath()};var ym=Math.sin(0),Om=Math.cos(0),od={},ld={},c1=Math.PI/40;for(var Ua=0*Math.PI;Ua<2*Math.PI;Ua+=c1)od[Ua]=Math.sin(Ua),ld[Ua]=Math.cos(Ua);Ki.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var a,s,l=n/2,u=i/2,c=0*Math.PI;c<2*Math.PI;c+=c1)a=e-l*od[c]*ym+l*ld[c]*Om,s=t+u*ld[c]*ym+u*od[c]*Om,c===0?r.moveTo(a,s):r.lineTo(a,s);r.closePath()};var Sl={};Sl.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Sl.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),a=r.full?Math.ceil(n.w):i[2],s=r.full?Math.ceil(n.h):i[3],l=ve(r.maxWidth)||ve(r.maxHeight),u=this.getPixelRatio(),c=1;if(r.scale!==void 0)a*=r.scale,s*=r.scale,c=r.scale;else if(l){var f=1/0,h=1/0;ve(r.maxWidth)&&(f=c*r.maxWidth/a),ve(r.maxHeight)&&(h=c*r.maxHeight/s),c=Math.min(f,h),a*=c,s*=c}l||(a*=u,s*=u,c*=u);var d=document.createElement("canvas");d.width=a,d.height=s,d.style.width=a+"px",d.style.height=s+"px";var p=d.getContext("2d");if(a>0&&s>0){p.clearRect(0,0,a,s),p.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(r.full)p.translate(-n.x1*c,-n.y1*c),p.scale(c,c),this.drawElements(p,g),p.scale(1/c,1/c),p.translate(n.x1*c,n.y1*c);else{var y=e.pan(),m={x:y.x*c,y:y.y*c};c*=e.zoom(),p.translate(m.x,m.y),p.scale(c,c),this.drawElements(p,g),p.scale(1/c,1/c),p.translate(-m.x,-m.y)}r.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=r.bg,p.rect(0,0,a,s),p.fill())}return d};function aM(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:e})}function bm(r){var e=r.indexOf(",");return r.substr(e+1)}function f1(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Zs(function(i,a){try{e.toBlob(function(s){s!=null?i(s):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(s){a(s)}});case"blob":return aM(bm(n()),t);case"base64":return bm(n());case"base64uri":default:return n()}}Sl.png=function(r){return f1(r,this.bufferCanvasImage(r),"image/png")};Sl.jpg=function(r){return f1(r,this.bufferCanvasImage(r),"image/jpeg")};var h1={};h1.nodeShapeImpl=function(r,e,t,n,i,a,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,a);case"polygon":return this.drawPolygonPath(e,t,n,i,a,s);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,a);case"barrel":return this.drawBarrelPath(e,t,n,i,a)}};var sM=d1,at=d1.prototype;at.CANVAS_LAYERS=3;at.SELECT_BOX=0;at.DRAG=1;at.NODE=2;at.BUFFER_COUNT=3;at.TEXTURE_BUFFER=0;at.MOTIONBLUR_BUFFER_NODE=1;at.MOTIONBLUR_BUFFER_DRAG=2;function d1(r){var e=this;e.data={canvases:new Array(at.CANVAS_LAYERS),contexts:new Array(at.CANVAS_LAYERS),canvasNeedsRedraw:new Array(at.CANVAS_LAYERS),bufferCanvases:new Array(at.BUFFER_COUNT),bufferContexts:new Array(at.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[t]=n,i.position="relative",i.zIndex="0",i.overflow="hidden";var a=r.cy.container();a.appendChild(e.data.canvasContainer),a.style[t]=n;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};zT()&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var l=0;l<at.CANVAS_LAYERS;l++){var u=e.data.canvases[l]=document.createElement("canvas");e.data.contexts[l]=u.getContext("2d"),Object.keys(s).forEach(function(V){u.style[V]=s[V]}),u.style.position="absolute",u.setAttribute("data-id","layer"+l),u.style.zIndex=String(at.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[at.NODE].setAttribute("data-id","layer"+at.NODE+"-node"),e.data.canvases[at.SELECT_BOX].setAttribute("data-id","layer"+at.SELECT_BOX+"-selectbox"),e.data.canvases[at.DRAG].setAttribute("data-id","layer"+at.DRAG+"-drag");for(var l=0;l<at.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=document.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var c=Br(),f=function(z){return{x:(z.x1+z.x2)/2,y:(z.y1+z.y2)/2}},h=function(z){return{x:-z.w/2,y:-z.h/2}},d=function(z){var j=z[0]._private,G=j.oldBackgroundTimestamp===j.backgroundTimestamp;return!G},p=function(z){return z[0]._private.nodeKey},g=function(z){return z[0]._private.labelStyleKey},y=function(z){return z[0]._private.sourceLabelStyleKey},m=function(z){return z[0]._private.targetLabelStyleKey},v=function(z,j,G,U,K){return e.drawElement(z,j,G,!1,!1,K)},O=function(z,j,G,U,K){return e.drawElementText(z,j,G,U,"main",K)},b=function(z,j,G,U,K){return e.drawElementText(z,j,G,U,"source",K)},w=function(z,j,G,U,K){return e.drawElementText(z,j,G,U,"target",K)},x=function(z){return z.boundingBox(),z[0]._private.bodyBounds},$=function(z){return z.boundingBox(),z[0]._private.labelBounds.main||c},S=function(z){return z.boundingBox(),z[0]._private.labelBounds.source||c},T=function(z){return z.boundingBox(),z[0]._private.labelBounds.target||c},k=function(z,j){return j},E=function(z){return f(x(z))},P=function(z,j,G){var U=z?z+"-":"";return{x:j.x+G.pstyle(U+"text-margin-x").pfValue,y:j.y+G.pstyle(U+"text-margin-y").pfValue}},C=function(z,j,G){var U=z[0]._private.rscratch;return{x:U[j],y:U[G]}},M=function(z){return P("",C(z,"labelX","labelY"),z)},D=function(z){return P("source",C(z,"sourceLabelX","sourceLabelY"),z)},I=function(z){return P("target",C(z,"targetLabelX","targetLabelY"),z)},A=function(z){return h(x(z))},Q=function(z){return h(S(z))},B=function(z){return h(T(z))},Y=function(z){var j=$(z),G=h($(z));if(z.isNode()){switch(z.pstyle("text-halign").value){case"left":G.x=-j.w;break;case"right":G.x=0;break}switch(z.pstyle("text-valign").value){case"top":G.y=-j.h;break;case"bottom":G.y=0;break}}return G},X=e.data.eleTxrCache=new go(e,{getKey:p,doesEleInvalidateKey:d,drawElement:v,getBoundingBox:x,getRotationPoint:E,getRotationOffset:A,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),W=e.data.lblTxrCache=new go(e,{getKey:g,drawElement:O,getBoundingBox:$,getRotationPoint:M,getRotationOffset:Y,isVisible:k}),q=e.data.slbTxrCache=new go(e,{getKey:y,drawElement:b,getBoundingBox:S,getRotationPoint:D,getRotationOffset:Q,isVisible:k}),F=e.data.tlbTxrCache=new go(e,{getKey:m,drawElement:w,getBoundingBox:T,getRotationPoint:I,getRotationOffset:B,isVisible:k}),Z=e.data.lyrTxrCache=new s1(e);e.onUpdateEleCalcs(function(z,j){X.invalidateElements(j),W.invalidateElements(j),q.invalidateElements(j),F.invalidateElements(j),Z.invalidateElements(j);for(var G=0;G<j.length;G++){var U=j[G]._private;U.oldBackgroundTimestamp=U.backgroundTimestamp}});var N=function(z){for(var j=0;j<z.length;j++)Z.enqueueElementRefinement(z[j].ele)};X.onDequeue(N),W.onDequeue(N),q.onDequeue(N),F.onDequeue(N)}at.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[at.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[at.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[at.SELECT_BOX]=e;break}};var oM=typeof Path2D!="undefined";at.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};at.usePaths=function(){return oM&&this.pathsEnabled};at.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};at.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};at.makeOffscreenCanvas=function(r,e){var t;return(typeof OffscreenCanvas=="undefined"?"undefined":Gt(OffscreenCanvas))!=="undefined"?t=new OffscreenCanvas(r,e):(t=document.createElement("canvas"),t.width=r,t.height=e),t};[o1,Gn,hi,Up,La,Ns,Hr,Ki,Sl,h1].forEach(function(r){We(at,r)});var lM=[{name:"null",impl:Hb},{name:"base",impl:i1},{name:"canvas",impl:sM}],uM=[{type:"layout",extensions:m_},{type:"renderer",extensions:lM}],p1={},g1={};function v1(r,e,t){var n=t,i=function(T){ct("Can not register `"+e+"` for `"+r+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Xo.prototype[e])return i(e);Xo.prototype[e]=t}else if(r==="collection"){if(lr.prototype[e])return i(e);lr.prototype[e]=t}else if(r==="layout"){for(var a=function(T){this.options=T,t.call(this,T),it(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},s=a.prototype=Object.create(t.prototype),l=[],u=0;u<l.length;u++){var c=l[u];s[c]=s[c]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=t.prototype.stop;s.stop=function(){var S=this.options;if(S&&S.animate){var T=this.animations;if(T)for(var k=0;k<T.length;k++)T[k].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var h=function(T){return T._private.cy},d={addEventFields:function(T,k){k.layout=T,k.cy=h(T),k.target=T},bubble:function(){return!0},parent:function(T){return h(T)}};We(s,{createEmitter:function(){return this._private.emitter=new rf(d,this),this},emitter:function(){return this._private.emitter},on:function(T,k){return this.emitter().on(T,k),this},one:function(T,k){return this.emitter().one(T,k),this},once:function(T,k){return this.emitter().one(T,k),this},removeListener:function(T,k){return this.emitter().removeListener(T,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,k){return this.emitter().emit(T,k),this}}),ut.eventAliasesOn(s),n=a}else if(r==="renderer"&&e!=="null"&&e!=="base"){var p=m1("renderer","base"),g=p.prototype,y=t,m=t.prototype,v=function(){p.apply(this,arguments),y.apply(this,arguments)},O=v.prototype;for(var b in g){var w=g[b],x=m[b]!=null;if(x)return i(b);O[b]=w}for(var $ in m)O[$]=m[$];g.clientFunctions.forEach(function(S){O[S]=O[S]||function(){Mt("Renderer does not implement `renderer."+S+"()` on its prototype")}}),n=v}else if(r==="__proto__"||r==="constructor"||r==="prototype")return Mt(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return eb({map:p1,keys:[r,e],value:n})}function m1(r,e){return tb({map:p1,keys:[r,e]})}function cM(r,e,t,n,i){return eb({map:g1,keys:[r,e,t,n],value:i})}function fM(r,e,t,n){return tb({map:g1,keys:[r,e,t,n]})}var ud=function(){if(arguments.length===2)return m1.apply(null,arguments);if(arguments.length===3)return v1.apply(null,arguments);if(arguments.length===4)return fM.apply(null,arguments);if(arguments.length===5)return cM.apply(null,arguments);Mt("Invalid extension access syntax")};Xo.prototype.extension=ud;uM.forEach(function(r){r.extensions.forEach(function(e){v1(r.type,e.name,e.impl)})});var y1=function r(){if(!(this instanceof r))return new r;this.length=0},ka=y1.prototype;ka.instanceString=function(){return"stylesheet"};ka.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ka.css=function(r,e){var t=this.length-1;if(Le(r))this[t].properties.push({name:r,value:e});else if(it(r))for(var n=r,i=Object.keys(n),a=0;a<i.length;a++){var s=i[a],l=n[s];if(l!=null){var u=yr.properties[s]||yr.properties[Hc(s)];if(u!=null){var c=u.name,f=l;this[t].properties.push({name:c,value:f})}}}return this};ka.style=ka.css;ka.generateStyle=function(r){var e=new yr(r);return this.appendToStyle(e)};ka.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var a=0;a<i.length;a++){var s=i[a];r.css(s.name,s.value)}}return r};var hM="3.28.1",$a=function(e){if(e===void 0&&(e={}),it(e))return new Xo(e);if(Le(e))return ud.apply(ud,arguments)};$a.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift($a),r.apply(null,e),this};$a.warnings=function(r){return ob(r)};$a.version=hM;$a.stylesheet=$a.Stylesheet=y1;var aa=$a,O1={exports:{}};(function(r,e){(function(n,i){r.exports=i()})(mr,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=n,i.i=function(a){return a},i.d=function(a,s,l){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:l})},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=3)}([function(t,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},s=i(2),l=a(""),u=a({}),c=a(function(){}),f=function(Z){return(typeof Z=="undefined"?"undefined":a(Z))===u},h=function(Z){return(typeof Z=="undefined"?"undefined":a(Z))===l},d=function(Z){return(typeof Z=="undefined"?"undefined":a(Z))===c},p=function(Z){return f(Z)&&d(Z.collection)},g=i(1),y=function(Z){return Z!=null&&!Z.removed()},m=function(Z,N){return Z.has!=null?m=function(z,j){return z.has(j)}:m=function(z,j){return z.intersection(j).length>0},m(Z,N)},v=function(Z){if(h(Z))return function(N){return N.is(Z)};if(d(Z))return Z;if(p(Z))return function(N){return m(Z,N)};throw new Error("Can not create match function for spec",Z)},O=function(Z,N,V,z){var j={cy:Z,events:N,selector:V||"node",fn:z};return Z.on(j.events,j.selector,j.fn),j},b=function(Z,N,V,z,j){var G=O(N,V,z,j),U=Z.bindings=Z.bindings||[];U.push(G)},w=function(Z){var N=function(z){z.cy.off(z.events,z.selector,z.fn)};Z.bindings.forEach(N),Z.bindings=[]},x=function(Z,N){var V=Z.reposition;if(V==="mean")return S(v(Z.meanIgnores));if(V==="viewport")return M(N);if(V==="drag")return $(Z);if(f(V)){if(V.type==null||V.type=="inside")return E(V);if(V.type=="outside")return C(V)}else return V},$=function(Z){return function(N){var V=N.position(),z=Z.delta;if(Z.delta!=null&&!N.same(Z.grabbedNode)&&!N.grabbed())return{x:V.x+z.x,y:V.y+z.y}}},S=function(Z){return function(N){for(var V=N.neighborhood(),z={x:0,y:0},j=0,G=0;G<V.length;G++){var U=V[G];if(U.isNode()&&!Z(U)){var K=U.position();z.x+=K.x,z.y+=K.y,j++}}if(!(j<2))return z.x/=j,z.y/=j,z}},T=function(Z,N,V){return Z<N?N:Z>V?V:Z},k=function(Z,N){var V=Z.position();return{x:T(V.x,N.x1,N.x2),y:T(V.y,N.y1,N.y2)}},E=function(Z){return function(N){return k(N,Z)}},P=function(Z,N){var V=Z.position(),z=V.x,j=V.y,G=N.x1,U=N.y1,K=N.x2,de=N.y2,Oe=G<=z&&z<=K,pe=U<=j&&j<=de,he=Math.abs;if(Oe&&pe){var me=he(G-z),Pe=he(K-z),xe=he(U-j),Qe=he(de-j),qe=Math.min(me,Pe,xe,Qe);return qe===me?{x:G,y:j}:qe===Pe?{x:K,y:j}:qe===xe?{x:z,y:U}:{x:z,y:de}}else return{x:z,y:j}},C=function(Z){return function(N){return P(N,Z)}},M=function(Z){return function(N){var V=Z.extent(),z=N.outerWidth(),j=N.outerHeight(),G={x1:V.x1+z/2,x2:V.x2-z/2,y1:V.y1+j/2,y2:V.y2-j/2};return k(N,G)}},D=function(Z){return function(N,V){var z=function(G){return Z.matches(G)&&G.neighborhood().length>2&&!G.grabbed()};b(Z,V,"position","node",function(){var j=this;(j.neighborhood().some(z)||Z.meanOnSelfPosition(j)&&z(j))&&N(V,[Z])}),b(Z,V,"add remove","edge",function(){var j=this,G=V.getElementById(j.data("source")),U=V.getElementById(j.data("target"));[G,U].some(z)&&N(V,[Z])})}},I=function(Z){return function(N,V){b(Z,V,"grab","node",function(){var z=this;if(Z.dragWithMatches(z)){var j=z.position();Z.grabbedNode=z,Z.p1={x:j.x,y:j.y},Z.delta={x:0,y:0}}}),b(Z,V,"drag","node",function(){var z=this;if(z.same(Z.grabbedNode)){var j=Z.delta,G=Z.p1,U=z.position(),K={x:U.x,y:U.y};j.x=K.x-G.x,j.y=K.y-G.y,Z.p1=K,N(V,[Z])}}),b(Z,V,"free","node",function(){Z.grabbedNode=null,Z.delta=null,Z.p1=null})}},A=function(Z){return function(N,V){b(Z,V,"position","node",function(){var z=this;Z.matches(z)&&N(V,[Z])})}},Q=function(Z,N){return N.reposition==="mean"?D(N):N.reposition==="drag"?I(N):f(N.reposition)||N.when==="matching"||N.reposition==="viewport"?A(N):N.when},B=function(Z,N,V){var z=g({},s,V);z.getNewPos=x(z,Z),z.listener=Q(Z,z);var j=p(z.nodesMatching);if(j)z.nodes=z.nodesMatching.slice(),z.matches=function(U){return y(U)&&m(z.nodes,U)};else{var G=v(z.nodesMatching);z.matches=function(U){return y(U)&&G(U)}}return z.dragWith!=null&&(z.dragWithMatches=v(z.dragWith)),z.listener(function(){W(Z,[z])},Z),z.enabled=!0,N.rules.push(z),z},Y=function(Z,N){N.onAddNode=function(V){var z=V.target;N.nodes.merge(z)},N.onRmNode=function(V){var z=V.target;N.nodes.unmerge(z)},Z.on("add","node",N.onAddNode),Z.on("remove","node",N.onRmNode)},X=function(Z,N){Z.removeListener("add","node",N.onAddNode),Z.removeListener("remove","node",N.onRmNode)},W=function(Z,N){var V=Z.scratch().automove;N=N!=null?N:V.rules,Z.batch(function(){for(var z=0;z<N.length;z++){var j=N[z];if(j.destroyed||!j.enabled)break;for(var G=j.nodes||V.nodes,U=G.length-1;U>=0;U--){var K=G[U];if(K.removed()){G.unmerge(K);continue}if(!!j.matches(K)){var de=K.position(),Oe=j.getNewPos(K),pe=Oe!=null&&(de.x!==Oe.x||de.y!==Oe.y);pe&&(K.position(Oe),K.trigger("automove",[j]))}}}})},q=function(Z){var N=this,V=N.scratch().automove=N.scratch().automove||{rules:[]};if(V.rules.length===0&&(V.nodes=N.nodes().slice(),Y(N,V)),Z==="destroy"){V.rules.forEach(function(j){w(j),j.destroyed=!0}),V.rules.splice(0,V.rules.length),X(N,V);return}var z=B(N,V,Z);return W(N,[z]),{apply:function(){W(N,[z])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return z.enabled},toggle:function(G){z.enabled=G!==void 0?G:!z.enabled,z.enabled&&W(N,[z])},destroy:function(){var G=V.rules;return w(z),z.destroyed=!0,G.splice(G.indexOf(z),1),G.length===0&&X(N,V),this}}};t.exports=q},function(t,n,i){t.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var s=arguments.length,l=Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return l.forEach(function(c){Object.keys(c).forEach(function(f){return a[f]=c[f]})}),a}},function(t,n,i){var a={nodesMatching:function(l){return!1},reposition:"mean",when:void 0,meanIgnores:function(l){return!1},meanOnSelfPosition:function(l){return!0},dragWith:function(l){return!1}};t.exports=a},function(t,n,i){var a=i(0),s=function(u){!u||u("core","automove",a)};typeof cytoscape!="undefined"&&s(cytoscape),t.exports=s}])})})(O1);var dM=wp(O1.exports),b1={exports:{}};(function(r){(function(){var e=function(t){if(!t)return;var n={enabled:!0,selector:"node",speed:1};function i(c,f){var h={};for(var d in c)h[d]=c[d];for(var d in f)h[d]=f[d];return h}function a(c,f){c.scratch("_autopanOnDrag")===void 0&&c.scratch("_autopanOnDrag",{});var h=c.scratch("_autopanOnDrag");return f===void 0?h:h[f]}function s(c,f,h){var d=a(c);d[f]=h,c.scratch("_autopanOnDrag",d)}function l(c,p){var h=a(c,"enabled");if(!h){var d=a(c,"eventFcns"),p=a(c,"options");c.on("tapstart",p.selector,d.tapstartFcn=function(){var g=this,y=g.renderedPosition(),m=g.renderedWidth(),v=g.renderedHeight(),O=c.width(),b=c.height(),w={x:y.x-m/2,y:y.y-v/2},x={x:y.x+m/2,y:y.y+v/2},$=!1;(x.x>=O||w.x<=0||x.y>=b||w.y<=0)&&($=!0),$||s(c,"currentNode",g)}),c.on("tapdrag",d.tapdragFcn=function(){var g=a(c,"currentNode");if(g!==void 0){var y=g.renderedPosition(),m=g.renderedWidth(),v=g.renderedHeight(),O=c.width(),b=c.height(),w={x:y.x-m/2,y:y.y-v/2},x={x:y.x+m/2,y:y.y+v/2},$,S;x.x>=O&&($=-x.x+O),w.x<=0&&($=-w.x),x.y>=b&&(S=-x.y+b),w.y<=0&&(S=-w.y),$&&c.panBy({x:$*p.speed}),S&&c.panBy({y:S*p.speed})}}),c.on("tapend",d.tapendFcn=function(){s(c,"currentNode",void 0)}),s(c,"eventFcns",d),s(c,"enabled",!0)}}function u(c){var f=a(c,"enabled");if(!!f){var h=a(c,"eventFcns"),d=a(c,"options");c.off("tapstart",d.selector,h.tapstartFcn),c.off("tapdrag",h.tapdragFcn),c.off("tapend",h.tapendFcn),s(c,"enabled",void 0)}}t("core","autopanOnDrag",function(c){var f=this,h=a(f,"eventFcns")||{};if(s(f,"eventFcns",h),c!=="get"){var d=i(n,c);s(f,"options",d),d.enabled&&(l(f),s(f,"enabled",!0))}return{enable:function(){l(f)},disable:function(){u(f)}}})};r.exports&&(r.exports=e),typeof cytoscape!="undefined"&&e(cytoscape)})()})(b1);var pM=b1.exports;class gM{constructor(e,t={}){this._cy=e,this._params=t,this._node_dom={};let n=e.container();if(t.dom_container)this._nodes_dom_container=t.dom_container;else{let i=document.createElement("div");i.style.position="absolute",i.style.zIndex=0,n.querySelector("canvas").parentNode.appendChild(i),this._nodes_dom_container=i}this._resize_observer=new ResizeObserver(i=>{function a(s){let l=s.target,u=l.__cy_id,c=e.getElementById(u);c.visible()&&c.style({width:l.offsetWidth,height:l.offsetHeight})}ge.forEach(i,a)}),e.on("add","node",i=>{this._add_node(i.target)}),e.on("remove","node",i=>{this._remove_node(i.target)});for(let i of e.nodes())this._add_node(i);e.on("pan zoom",i=>{let a=e.pan(),s=e.zoom(),l="translate("+a.x+"px,"+a.y+"px) scale("+s+")";this._nodes_dom_container.style.msTransform=l,this._nodes_dom_container.style.transform=l}),e.on("position bounds","node",i=>{let a=i.target,s=a.id();if(!this._node_dom[s])return;let l=this._node_dom[s],u=`translate(-50%, -50%) translate(${a.position("x").toFixed(2)}px, ${a.position("y").toFixed(2)}px)`;l.style.webkitTransform=u,l.style.msTransform=u,l.style.transform=u,l.style.display="inline",l.style.position="absolute",l.style["z-index"]=10})}_add_node(e){let t=e.data();!t.dom||(t.skip_node_append!==!0&&this._nodes_dom_container.appendChild(t.dom),t.dom.__cy_id=e.id(),this._node_dom[e.id()]=t.dom,this._resize_observer.observe(t.dom))}_remove_node(e){let t=e.data();!t.dom||(this._resize_observer.unobserve(t.dom),t.dom._vnode.destroy(),delete this._node_dom[e.id()])}node_dom(e){return this._node_dom[e]}}function vM(r){!r||r("core","domNode",function(e,t){return new gM(this,e,t)})}var w1={exports:{}},mM=qc;function yM(){this.__data__=new mM,this.size=0}var OM=yM;function bM(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var wM=bM;function xM(r){return this.__data__.get(r)}var SM=xM;function kM(r){return this.__data__.has(r)}var $M=kM,PM=qc,CM=Pp,EM=Cp,TM=200;function QM(r,e){var t=this.__data__;if(t instanceof PM){var n=t.__data__;if(!CM||n.length<TM-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new EM(n)}return t.set(r,e),this.size=t.size,this}var AM=QM,DM=qc,_M=OM,MM=wM,ZM=SM,RM=$M,LM=AM;function zs(r){var e=this.__data__=new DM(r);this.size=e.size}zs.prototype.clear=_M;zs.prototype.delete=MM;zs.prototype.get=ZM;zs.prototype.has=RM;zs.prototype.set=LM;var ff=zs;function BM(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var Hp=BM,IM=jc,NM=Fc;function zM(r,e,t,n){var i=!t;t||(t={});for(var a=-1,s=e.length;++a<s;){var l=e[a],u=n?n(t[l],r[l],l,t,r):void 0;u===void 0&&(u=r[l]),i?NM(t,l,u):IM(t,l,u)}return t}var kl=zM;function WM(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var qM=WM,YM=_a,XM=Fn,VM="[object Arguments]";function FM(r){return XM(r)&&YM(r)==VM}var jM=FM,wm=jM,GM=Fn,x1=Object.prototype,UM=x1.hasOwnProperty,HM=x1.propertyIsEnumerable,KM=wm(function(){return arguments}())?wm:function(r){return GM(r)&&UM.call(r,"callee")&&!HM.call(r,"callee")},$l=KM,qi={exports:{}};function JM(){return!1}var eZ=JM;(function(r,e){var t=Sn,n=eZ,i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,s=a&&a.exports===i,l=s?t.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||n;r.exports=c})(qi,qi.exports);var tZ=9007199254740991;function rZ(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=tZ}var Kp=rZ,nZ=_a,iZ=Kp,aZ=Fn,sZ="[object Arguments]",oZ="[object Array]",lZ="[object Boolean]",uZ="[object Date]",cZ="[object Error]",fZ="[object Function]",hZ="[object Map]",dZ="[object Number]",pZ="[object Object]",gZ="[object RegExp]",vZ="[object Set]",mZ="[object String]",yZ="[object WeakMap]",OZ="[object ArrayBuffer]",bZ="[object DataView]",wZ="[object Float32Array]",xZ="[object Float64Array]",SZ="[object Int8Array]",kZ="[object Int16Array]",$Z="[object Int32Array]",PZ="[object Uint8Array]",CZ="[object Uint8ClampedArray]",EZ="[object Uint16Array]",TZ="[object Uint32Array]",St={};St[wZ]=St[xZ]=St[SZ]=St[kZ]=St[$Z]=St[PZ]=St[CZ]=St[EZ]=St[TZ]=!0;St[sZ]=St[oZ]=St[OZ]=St[lZ]=St[bZ]=St[uZ]=St[cZ]=St[fZ]=St[hZ]=St[dZ]=St[pZ]=St[gZ]=St[vZ]=St[mZ]=St[yZ]=!1;function QZ(r){return aZ(r)&&iZ(r.length)&&!!St[nZ(r)]}var AZ=QZ;function DZ(r){return function(e){return r(e)}}var hf=DZ,Vo={exports:{}};(function(r,e){var t=R0,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a&&t.process,l=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();r.exports=l})(Vo,Vo.exports);var _Z=AZ,MZ=hf,xm=Vo.exports,Sm=xm&&xm.isTypedArray,ZZ=Sm?MZ(Sm):_Z,Pl=ZZ,RZ=qM,LZ=$l,BZ=zt,IZ=qi.exports,NZ=Gc,zZ=Pl,WZ=Object.prototype,qZ=WZ.hasOwnProperty;function YZ(r,e){var t=BZ(r),n=!t&&LZ(r),i=!t&&!n&&IZ(r),a=!t&&!n&&!i&&zZ(r),s=t||n||i||a,l=s?RZ(r.length,String):[],u=l.length;for(var c in r)(e||qZ.call(r,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||NZ(c,u)))&&l.push(c);return l}var S1=YZ,XZ=Object.prototype;function VZ(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||XZ;return r===t}var df=VZ;function FZ(r,e){return function(t){return r(e(t))}}var k1=FZ,jZ=k1,GZ=jZ(Object.keys,Object),UZ=GZ,HZ=df,KZ=UZ,JZ=Object.prototype,eR=JZ.hasOwnProperty;function tR(r){if(!HZ(r))return KZ(r);var e=[];for(var t in Object(r))eR.call(r,t)&&t!="constructor"&&e.push(t);return e}var Jp=tR,rR=hl,nR=Kp;function iR(r){return r!=null&&nR(r.length)&&!rR(r)}var di=iR,aR=S1,sR=Jp,oR=di;function lR(r){return oR(r)?aR(r):sR(r)}var Ji=lR,uR=kl,cR=Ji;function fR(r,e){return r&&uR(e,cR(e),r)}var hR=fR;function dR(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var pR=dR,gR=Ur,vR=df,mR=pR,yR=Object.prototype,OR=yR.hasOwnProperty;function bR(r){if(!gR(r))return mR(r);var e=vR(r),t=[];for(var n in r)n=="constructor"&&(e||!OR.call(r,n))||t.push(n);return t}var wR=bR,xR=S1,SR=wR,kR=di;function $R(r){return kR(r)?xR(r,!0):SR(r)}var Ba=$R,PR=kl,CR=Ba;function ER(r,e){return r&&PR(e,CR(e),r)}var TR=ER,Ju={exports:{}};(function(r,e){var t=Sn,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a?t.Buffer:void 0,l=s?s.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,d=l?l(h):new c.constructor(h);return c.copy(d),d}r.exports=u})(Ju,Ju.exports);function QR(r,e){for(var t=-1,n=r==null?0:r.length,i=0,a=[];++t<n;){var s=r[t];e(s,t,r)&&(a[i++]=s)}return a}var $1=QR;function AR(){return[]}var P1=AR,DR=$1,_R=P1,MR=Object.prototype,ZR=MR.propertyIsEnumerable,km=Object.getOwnPropertySymbols,RR=km?function(r){return r==null?[]:(r=Object(r),DR(km(r),function(e){return ZR.call(r,e)}))}:_R,eg=RR,LR=kl,BR=eg;function IR(r,e){return LR(r,BR(r),e)}var NR=IR;function zR(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var tg=zR,WR=k1,qR=WR(Object.getPrototypeOf,Object),pf=qR,YR=tg,XR=pf,VR=eg,FR=P1,jR=Object.getOwnPropertySymbols,GR=jR?function(r){for(var e=[];r;)YR(e,VR(r)),r=XR(r);return e}:FR,C1=GR,UR=kl,HR=C1;function KR(r,e){return UR(r,HR(r),e)}var JR=KR,eL=tg,tL=zt;function rL(r,e,t){var n=e(r);return tL(r)?n:eL(n,t(r))}var E1=rL,nL=E1,iL=eg,aL=Ji;function sL(r){return nL(r,aL,iL)}var T1=sL,oL=E1,lL=C1,uL=Ba;function cL(r){return oL(r,uL,lL)}var fL=cL,hL=Za,dL=Sn,pL=hL(dL,"DataView"),gL=pL,vL=Za,mL=Sn,yL=vL(mL,"Promise"),OL=yL,bL=Za,wL=Sn,xL=bL(wL,"Set"),Q1=xL,SL=Za,kL=Sn,$L=SL(kL,"WeakMap"),PL=$L,cd=gL,fd=Pp,hd=OL,dd=Q1,pd=PL,A1=_a,Ws=z0,$m="[object Map]",CL="[object Object]",Pm="[object Promise]",Cm="[object Set]",Em="[object WeakMap]",Tm="[object DataView]",EL=Ws(cd),TL=Ws(fd),QL=Ws(hd),AL=Ws(dd),DL=Ws(pd),ua=A1;(cd&&ua(new cd(new ArrayBuffer(1)))!=Tm||fd&&ua(new fd)!=$m||hd&&ua(hd.resolve())!=Pm||dd&&ua(new dd)!=Cm||pd&&ua(new pd)!=Em)&&(ua=function(r){var e=A1(r),t=e==CL?r.constructor:void 0,n=t?Ws(t):"";if(n)switch(n){case EL:return Tm;case TL:return $m;case QL:return Pm;case AL:return Cm;case DL:return Em}return e});var qs=ua,_L=Object.prototype,ML=_L.hasOwnProperty;function ZL(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&ML.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var RL=ZL,LL=Sn,BL=LL.Uint8Array,D1=BL,Qm=D1;function IL(r){var e=new r.constructor(r.byteLength);return new Qm(e).set(new Qm(r)),e}var rg=IL,NL=rg;function zL(r,e){var t=e?NL(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var WL=zL,qL=/\w*$/;function YL(r){var e=new r.constructor(r.source,qL.exec(r));return e.lastIndex=r.lastIndex,e}var XL=YL,Am=Es,Dm=Am?Am.prototype:void 0,_m=Dm?Dm.valueOf:void 0;function VL(r){return _m?Object(_m.call(r)):{}}var FL=VL,jL=rg;function GL(r,e){var t=e?jL(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var _1=GL,UL=rg,HL=WL,KL=XL,JL=FL,e5=_1,t5="[object Boolean]",r5="[object Date]",n5="[object Map]",i5="[object Number]",a5="[object RegExp]",s5="[object Set]",o5="[object String]",l5="[object Symbol]",u5="[object ArrayBuffer]",c5="[object DataView]",f5="[object Float32Array]",h5="[object Float64Array]",d5="[object Int8Array]",p5="[object Int16Array]",g5="[object Int32Array]",v5="[object Uint8Array]",m5="[object Uint8ClampedArray]",y5="[object Uint16Array]",O5="[object Uint32Array]";function b5(r,e,t){var n=r.constructor;switch(e){case u5:return UL(r);case t5:case r5:return new n(+r);case c5:return HL(r,t);case f5:case h5:case d5:case p5:case g5:case v5:case m5:case y5:case O5:return e5(r,t);case n5:return new n;case i5:case o5:return new n(r);case a5:return KL(r);case s5:return new n;case l5:return JL(r)}}var w5=b5,x5=Ur,Mm=Object.create,S5=function(){function r(){}return function(e){if(!x5(e))return{};if(Mm)return Mm(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),M1=S5,k5=M1,$5=pf,P5=df;function C5(r){return typeof r.constructor=="function"&&!P5(r)?k5($5(r)):{}}var Z1=C5,E5=qs,T5=Fn,Q5="[object Map]";function A5(r){return T5(r)&&E5(r)==Q5}var D5=A5,_5=D5,M5=hf,Zm=Vo.exports,Rm=Zm&&Zm.isMap,Z5=Rm?M5(Rm):_5,R5=Z5,L5=qs,B5=Fn,I5="[object Set]";function N5(r){return B5(r)&&L5(r)==I5}var z5=N5,W5=z5,q5=hf,Lm=Vo.exports,Bm=Lm&&Lm.isSet,Y5=Bm?q5(Bm):W5,X5=Y5,V5=ff,F5=Hp,j5=jc,G5=hR,U5=TR,H5=Ju.exports,K5=Qp,J5=NR,eB=JR,tB=T1,rB=fL,nB=qs,iB=RL,aB=w5,sB=Z1,oB=zt,lB=qi.exports,uB=R5,cB=Ur,fB=X5,hB=Ji,dB=Ba,pB=1,gB=2,vB=4,R1="[object Arguments]",mB="[object Array]",yB="[object Boolean]",OB="[object Date]",bB="[object Error]",L1="[object Function]",wB="[object GeneratorFunction]",xB="[object Map]",SB="[object Number]",B1="[object Object]",kB="[object RegExp]",$B="[object Set]",PB="[object String]",CB="[object Symbol]",EB="[object WeakMap]",TB="[object ArrayBuffer]",QB="[object DataView]",AB="[object Float32Array]",DB="[object Float64Array]",_B="[object Int8Array]",MB="[object Int16Array]",ZB="[object Int32Array]",RB="[object Uint8Array]",LB="[object Uint8ClampedArray]",BB="[object Uint16Array]",IB="[object Uint32Array]",yt={};yt[R1]=yt[mB]=yt[TB]=yt[QB]=yt[yB]=yt[OB]=yt[AB]=yt[DB]=yt[_B]=yt[MB]=yt[ZB]=yt[xB]=yt[SB]=yt[B1]=yt[kB]=yt[$B]=yt[PB]=yt[CB]=yt[RB]=yt[LB]=yt[BB]=yt[IB]=!0;yt[bB]=yt[L1]=yt[EB]=!1;function Tu(r,e,t,n,i,a){var s,l=e&pB,u=e&gB,c=e&vB;if(t&&(s=i?t(r,n,i,a):t(r)),s!==void 0)return s;if(!cB(r))return r;var f=oB(r);if(f){if(s=iB(r),!l)return K5(r,s)}else{var h=nB(r),d=h==L1||h==wB;if(lB(r))return H5(r,l);if(h==B1||h==R1||d&&!i){if(s=u||d?{}:sB(r),!l)return u?eB(r,U5(s,r)):J5(r,G5(s,r))}else{if(!yt[h])return i?r:{};s=aB(r,h,l)}}a||(a=new V5);var p=a.get(r);if(p)return p;a.set(r,s),fB(r)?r.forEach(function(m){s.add(Tu(m,e,t,m,r,a))}):uB(r)&&r.forEach(function(m,v){s.set(v,Tu(m,e,t,v,r,a))});var g=c?u?rB:tB:u?dB:hB,y=f?void 0:g(r);return F5(y||r,function(m,v){y&&(v=m,m=r[v]),j5(s,v,Tu(m,e,t,v,r,a))}),s}var I1=Tu,NB=I1,zB=4;function WB(r){return NB(r,zB)}var qB=WB;function YB(r){return function(){return r}}var ng=YB;function XB(r){return function(e,t,n){for(var i=-1,a=Object(e),s=n(e),l=s.length;l--;){var u=s[r?l:++i];if(t(a[u],u,a)===!1)break}return e}}var VB=XB,FB=VB,jB=FB(),ig=jB,GB=ig,UB=Ji;function HB(r,e){return r&&GB(r,e,UB)}var ag=HB,KB=di;function JB(r,e){return function(t,n){if(t==null)return t;if(!KB(t))return r(t,n);for(var i=t.length,a=e?i:-1,s=Object(t);(e?a--:++a<i)&&n(s[a],a,s)!==!1;);return t}}var eI=JB,tI=ag,rI=eI,nI=rI(tI),gf=nI;function iI(r){return r}var Ia=iI,aI=Ia;function sI(r){return typeof r=="function"?r:aI}var N1=sI,oI=Hp,lI=gf,uI=N1,cI=zt;function fI(r,e){var t=cI(r)?oI:lI;return t(r,uI(e))}var z1=fI,W1=z1,hI=gf;function dI(r,e){var t=[];return hI(r,function(n,i,a){e(n,i,a)&&t.push(n)}),t}var pI=dI,gI="__lodash_hash_undefined__";function vI(r){return this.__data__.set(r,gI),this}var mI=vI;function yI(r){return this.__data__.has(r)}var OI=yI,bI=Cp,wI=mI,xI=OI;function ec(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new bI;++e<t;)this.add(r[e])}ec.prototype.add=ec.prototype.push=wI;ec.prototype.has=xI;var q1=ec;function SI(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}var kI=SI;function $I(r,e){return r.has(e)}var Y1=$I,PI=q1,CI=kI,EI=Y1,TI=1,QI=2;function AI(r,e,t,n,i,a){var s=t&TI,l=r.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(r),f=a.get(e);if(c&&f)return c==e&&f==r;var h=-1,d=!0,p=t&QI?new PI:void 0;for(a.set(r,e),a.set(e,r);++h<l;){var g=r[h],y=e[h];if(n)var m=s?n(y,g,h,e,r,a):n(g,y,h,r,e,a);if(m!==void 0){if(m)continue;d=!1;break}if(p){if(!CI(e,function(v,O){if(!EI(p,O)&&(g===v||i(g,v,t,n,a)))return p.push(O)})){d=!1;break}}else if(!(g===y||i(g,y,t,n,a))){d=!1;break}}return a.delete(r),a.delete(e),d}var X1=AI;function DI(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}var _I=DI;function MI(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var sg=MI,Im=Es,Nm=D1,ZI=Qs,RI=X1,LI=_I,BI=sg,II=1,NI=2,zI="[object Boolean]",WI="[object Date]",qI="[object Error]",YI="[object Map]",XI="[object Number]",VI="[object RegExp]",FI="[object Set]",jI="[object String]",GI="[object Symbol]",UI="[object ArrayBuffer]",HI="[object DataView]",zm=Im?Im.prototype:void 0,ih=zm?zm.valueOf:void 0;function KI(r,e,t,n,i,a,s){switch(t){case HI:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case UI:return!(r.byteLength!=e.byteLength||!a(new Nm(r),new Nm(e)));case zI:case WI:case XI:return ZI(+r,+e);case qI:return r.name==e.name&&r.message==e.message;case VI:case jI:return r==e+"";case YI:var l=LI;case FI:var u=n&II;if(l||(l=BI),r.size!=e.size&&!u)return!1;var c=s.get(r);if(c)return c==e;n|=NI,s.set(r,e);var f=RI(l(r),l(e),n,i,a,s);return s.delete(r),f;case GI:if(ih)return ih.call(r)==ih.call(e)}return!1}var JI=KI,Wm=T1,eN=1,tN=Object.prototype,rN=tN.hasOwnProperty;function nN(r,e,t,n,i,a){var s=t&eN,l=Wm(r),u=l.length,c=Wm(e),f=c.length;if(u!=f&&!s)return!1;for(var h=u;h--;){var d=l[h];if(!(s?d in e:rN.call(e,d)))return!1}var p=a.get(r),g=a.get(e);if(p&&g)return p==e&&g==r;var y=!0;a.set(r,e),a.set(e,r);for(var m=s;++h<u;){d=l[h];var v=r[d],O=e[d];if(n)var b=s?n(O,v,d,e,r,a):n(v,O,d,r,e,a);if(!(b===void 0?v===O||i(v,O,t,n,a):b)){y=!1;break}m||(m=d=="constructor")}if(y&&!m){var w=r.constructor,x=e.constructor;w!=x&&"constructor"in r&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(y=!1)}return a.delete(r),a.delete(e),y}var iN=nN,ah=ff,aN=X1,sN=JI,oN=iN,qm=qs,Ym=zt,Xm=qi.exports,lN=Pl,uN=1,Vm="[object Arguments]",Fm="[object Array]",Ul="[object Object]",cN=Object.prototype,jm=cN.hasOwnProperty;function fN(r,e,t,n,i,a){var s=Ym(r),l=Ym(e),u=s?Fm:qm(r),c=l?Fm:qm(e);u=u==Vm?Ul:u,c=c==Vm?Ul:c;var f=u==Ul,h=c==Ul,d=u==c;if(d&&Xm(r)){if(!Xm(e))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new ah),s||lN(r)?aN(r,e,t,n,i,a):sN(r,e,u,t,n,i,a);if(!(t&uN)){var p=f&&jm.call(r,"__wrapped__"),g=h&&jm.call(e,"__wrapped__");if(p||g){var y=p?r.value():r,m=g?e.value():e;return a||(a=new ah),i(y,m,t,n,a)}}return d?(a||(a=new ah),oN(r,e,t,n,i,a)):!1}var hN=fN,dN=hN,Gm=Fn;function V1(r,e,t,n,i){return r===e?!0:r==null||e==null||!Gm(r)&&!Gm(e)?r!==r&&e!==e:dN(r,e,t,n,V1,i)}var F1=V1,pN=ff,gN=F1,vN=1,mN=2;function yN(r,e,t,n){var i=t.length,a=i,s=!n;if(r==null)return!a;for(r=Object(r);i--;){var l=t[i];if(s&&l[2]?l[1]!==r[l[0]]:!(l[0]in r))return!1}for(;++i<a;){l=t[i];var u=l[0],c=r[u],f=l[1];if(s&&l[2]){if(c===void 0&&!(u in r))return!1}else{var h=new pN;if(n)var d=n(c,f,u,r,e,h);if(!(d===void 0?gN(f,c,vN|mN,n,h):d))return!1}}return!0}var ON=yN,bN=Ur;function wN(r){return r===r&&!bN(r)}var j1=wN,xN=j1,SN=Ji;function kN(r){for(var e=SN(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,xN(i)]}return e}var $N=kN;function PN(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}var G1=PN,CN=ON,EN=$N,TN=G1;function QN(r){var e=EN(r);return e.length==1&&e[0][2]?TN(e[0][0],e[0][1]):function(t){return t===r||CN(t,r,e)}}var AN=QN;function DN(r,e){return r!=null&&e in Object(r)}var _N=DN,MN=Xc,ZN=$l,RN=zt,LN=Gc,BN=Kp,IN=_s;function NN(r,e,t){e=MN(e,r);for(var n=-1,i=e.length,a=!1;++n<i;){var s=IN(e[n]);if(!(a=r!=null&&t(r,s)))break;r=r[s]}return a||++n!=i?a:(i=r==null?0:r.length,!!i&&BN(i)&&LN(s,i)&&(RN(r)||ZN(r)))}var U1=NN,zN=_N,WN=U1;function qN(r,e){return r!=null&&WN(r,e,zN)}var H1=qN,YN=F1,XN=X0,VN=H1,FN=$p,jN=j1,GN=G1,UN=_s,HN=1,KN=2;function JN(r,e){return FN(r)&&jN(e)?GN(UN(r),e):function(t){var n=XN(t,r);return n===void 0&&n===e?VN(t,r):YN(e,n,HN|KN)}}var ez=JN;function tz(r){return function(e){return e==null?void 0:e[r]}}var K1=tz,rz=Vc;function nz(r){return function(e){return rz(e,r)}}var iz=nz,az=K1,sz=iz,oz=$p,lz=_s;function uz(r){return oz(r)?az(lz(r)):sz(r)}var cz=uz,fz=AN,hz=ez,dz=Ia,pz=zt,gz=cz;function vz(r){return typeof r=="function"?r:r==null?dz:typeof r=="object"?pz(r)?hz(r[0],r[1]):fz(r):gz(r)}var pi=vz,mz=$1,yz=pI,Oz=pi,bz=zt;function wz(r,e){var t=bz(r)?mz:yz;return t(r,Oz(e))}var J1=wz,xz=Object.prototype,Sz=xz.hasOwnProperty;function kz(r,e){return r!=null&&Sz.call(r,e)}var $z=kz,Pz=$z,Cz=U1;function Ez(r,e){return r!=null&&Cz(r,e,Pz)}var ew=Ez,Tz=Jp,Qz=qs,Az=$l,Dz=zt,_z=di,Mz=qi.exports,Zz=df,Rz=Pl,Lz="[object Map]",Bz="[object Set]",Iz=Object.prototype,Nz=Iz.hasOwnProperty;function zz(r){if(r==null)return!0;if(_z(r)&&(Dz(r)||typeof r=="string"||typeof r.splice=="function"||Mz(r)||Rz(r)||Az(r)))return!r.length;var e=Qz(r);if(e==Lz||e==Bz)return!r.size;if(Zz(r))return!Tz(r).length;for(var t in r)if(Nz.call(r,t))return!1;return!0}var Wz=zz;function qz(r){return r===void 0}var tw=qz,Yz=gf,Xz=di;function Vz(r,e){var t=-1,n=Xz(r)?Array(r.length):[];return Yz(r,function(i,a,s){n[++t]=e(i,a,s)}),n}var rw=Vz,Fz=dl,jz=pi,Gz=rw,Uz=zt;function Hz(r,e){var t=Uz(r)?Fz:Gz;return t(r,jz(e))}var nw=Hz;function Kz(r,e,t,n){var i=-1,a=r==null?0:r.length;for(n&&a&&(t=r[++i]);++i<a;)t=e(t,r[i],i,r);return t}var Jz=Kz;function eW(r,e,t,n,i){return i(r,function(a,s,l){t=n?(n=!1,a):e(t,a,s,l)}),t}var tW=eW,rW=Jz,nW=gf,iW=pi,aW=tW,sW=zt;function oW(r,e,t){var n=sW(r)?rW:aW,i=arguments.length<3;return n(r,iW(e),t,i,nW)}var iw=oW,lW=_a,uW=zt,cW=Fn,fW="[object String]";function hW(r){return typeof r=="string"||!uW(r)&&cW(r)&&lW(r)==fW}var dW=hW,pW=K1,gW=pW("length"),vW=gW,mW="\\ud800-\\udfff",yW="\\u0300-\\u036f",OW="\\ufe20-\\ufe2f",bW="\\u20d0-\\u20ff",wW=yW+OW+bW,xW="\\ufe0e\\ufe0f",SW="\\u200d",kW=RegExp("["+SW+mW+wW+xW+"]");function $W(r){return kW.test(r)}var PW=$W,aw="\\ud800-\\udfff",CW="\\u0300-\\u036f",EW="\\ufe20-\\ufe2f",TW="\\u20d0-\\u20ff",QW=CW+EW+TW,AW="\\ufe0e\\ufe0f",DW="["+aw+"]",gd="["+QW+"]",vd="\\ud83c[\\udffb-\\udfff]",_W="(?:"+gd+"|"+vd+")",sw="[^"+aw+"]",ow="(?:\\ud83c[\\udde6-\\uddff]){2}",lw="[\\ud800-\\udbff][\\udc00-\\udfff]",MW="\\u200d",uw=_W+"?",cw="["+AW+"]?",ZW="(?:"+MW+"(?:"+[sw,ow,lw].join("|")+")"+cw+uw+")*",RW=cw+uw+ZW,LW="(?:"+[sw+gd+"?",gd,ow,lw,DW].join("|")+")",Um=RegExp(vd+"(?="+vd+")|"+LW+RW,"g");function BW(r){for(var e=Um.lastIndex=0;Um.test(r);)++e;return e}var IW=BW,NW=vW,zW=PW,WW=IW;function qW(r){return zW(r)?WW(r):NW(r)}var YW=qW,XW=Jp,VW=qs,FW=di,jW=dW,GW=YW,UW="[object Map]",HW="[object Set]";function KW(r){if(r==null)return 0;if(FW(r))return jW(r)?GW(r):r.length;var e=VW(r);return e==UW||e==HW?r.size:XW(r).length}var JW=KW,e3=Hp,t3=M1,r3=ag,n3=pi,i3=pf,a3=zt,s3=qi.exports,o3=hl,l3=Ur,u3=Pl;function c3(r,e,t){var n=a3(r),i=n||s3(r)||u3(r);if(e=n3(e),t==null){var a=r&&r.constructor;i?t=n?new a:[]:l3(r)?t=o3(a)?t3(i3(r)):{}:t={}}return(i?e3:r3)(r,function(s,l,u){return e(t,s,l,u)}),t}var f3=c3,Hm=Es,h3=$l,d3=zt,Km=Hm?Hm.isConcatSpreadable:void 0;function p3(r){return d3(r)||h3(r)||!!(Km&&r&&r[Km])}var g3=p3,v3=tg,m3=g3;function fw(r,e,t,n,i){var a=-1,s=r.length;for(t||(t=m3),i||(i=[]);++a<s;){var l=r[a];e>0&&t(l)?e>1?fw(l,e-1,t,n,i):v3(i,l):n||(i[i.length]=l)}return i}var og=fw;function y3(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var O3=y3,b3=O3,Jm=Math.max;function w3(r,e,t){return e=Jm(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,a=Jm(n.length-e,0),s=Array(a);++i<a;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=t(s),b3(r,this,l)}}var hw=w3,x3=ng,ey=V0,S3=Ia,k3=ey?function(r,e){return ey(r,"toString",{configurable:!0,enumerable:!1,value:x3(e),writable:!0})}:S3,$3=k3,P3=800,C3=16,E3=Date.now;function T3(r){var e=0,t=0;return function(){var n=E3(),i=C3-(n-t);if(t=n,i>0){if(++e>=P3)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var Q3=T3,A3=$3,D3=Q3,_3=D3(A3),dw=_3,M3=Ia,Z3=hw,R3=dw;function L3(r,e){return R3(Z3(r,e,M3),r+"")}var vf=L3;function B3(r,e,t,n){for(var i=r.length,a=t+(n?1:-1);n?a--:++a<i;)if(e(r[a],a,r))return a;return-1}var pw=B3;function I3(r){return r!==r}var N3=I3;function z3(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}var W3=z3,q3=pw,Y3=N3,X3=W3;function V3(r,e,t){return e===e?X3(r,e,t):q3(r,Y3,t)}var F3=V3,j3=F3;function G3(r,e){var t=r==null?0:r.length;return!!t&&j3(r,e,0)>-1}var U3=G3;function H3(r,e,t){for(var n=-1,i=r==null?0:r.length;++n<i;)if(t(e,r[n]))return!0;return!1}var K3=H3;function J3(){}var eq=J3,sh=Q1,tq=eq,rq=sg,nq=1/0,iq=sh&&1/rq(new sh([,-0]))[1]==nq?function(r){return new sh(r)}:tq,aq=iq,sq=q1,oq=U3,lq=K3,uq=Y1,cq=aq,fq=sg,hq=200;function dq(r,e,t){var n=-1,i=oq,a=r.length,s=!0,l=[],u=l;if(t)s=!1,i=lq;else if(a>=hq){var c=e?null:cq(r);if(c)return fq(c);s=!1,i=uq,u=new sq}else u=e?[]:l;e:for(;++n<a;){var f=r[n],h=e?e(f):f;if(f=t||f!==0?f:0,s&&h===h){for(var d=u.length;d--;)if(u[d]===h)continue e;e&&u.push(h),l.push(f)}else i(u,h,t)||(u!==l&&u.push(h),l.push(f))}return l}var pq=dq,gq=di,vq=Fn;function mq(r){return vq(r)&&gq(r)}var gw=mq,yq=og,Oq=vf,bq=pq,wq=gw,xq=Oq(function(r){return bq(yq(r,1,wq,!0))}),Sq=xq,kq=dl;function $q(r,e){return kq(e,function(t){return r[t]})}var Pq=$q,Cq=Pq,Eq=Ji;function Tq(r){return r==null?[]:Cq(r,Eq(r))}var vw=Tq,tc;if(typeof xp=="function")try{tc={clone:qB,constant:ng,each:W1,filter:J1,has:ew,isArray:zt,isEmpty:Wz,isFunction:hl,isUndefined:tw,keys:Ji,map:nw,reduce:iw,size:JW,transform:f3,union:Sq,values:vw}}catch{}tc||(tc=window._);var sn=tc,Fe=sn,lg=He,Qq="\0",Pa="\0",ty="";function He(r){this._isDirected=Fe.has(r,"directed")?r.directed:!0,this._isMultigraph=Fe.has(r,"multigraph")?r.multigraph:!1,this._isCompound=Fe.has(r,"compound")?r.compound:!1,this._label=void 0,this._defaultNodeLabelFn=Fe.constant(void 0),this._defaultEdgeLabelFn=Fe.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Pa]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}He.prototype._nodeCount=0;He.prototype._edgeCount=0;He.prototype.isDirected=function(){return this._isDirected};He.prototype.isMultigraph=function(){return this._isMultigraph};He.prototype.isCompound=function(){return this._isCompound};He.prototype.setGraph=function(r){return this._label=r,this};He.prototype.graph=function(){return this._label};He.prototype.setDefaultNodeLabel=function(r){return Fe.isFunction(r)||(r=Fe.constant(r)),this._defaultNodeLabelFn=r,this};He.prototype.nodeCount=function(){return this._nodeCount};He.prototype.nodes=function(){return Fe.keys(this._nodes)};He.prototype.sources=function(){var r=this;return Fe.filter(this.nodes(),function(e){return Fe.isEmpty(r._in[e])})};He.prototype.sinks=function(){var r=this;return Fe.filter(this.nodes(),function(e){return Fe.isEmpty(r._out[e])})};He.prototype.setNodes=function(r,e){var t=arguments,n=this;return Fe.each(r,function(i){t.length>1?n.setNode(i,e):n.setNode(i)}),this};He.prototype.setNode=function(r,e){return Fe.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=e),this):(this._nodes[r]=arguments.length>1?e:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=Pa,this._children[r]={},this._children[Pa][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)};He.prototype.node=function(r){return this._nodes[r]};He.prototype.hasNode=function(r){return Fe.has(this._nodes,r)};He.prototype.removeNode=function(r){var e=this;if(Fe.has(this._nodes,r)){var t=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],Fe.each(this.children(r),function(n){e.setParent(n)}),delete this._children[r]),Fe.each(Fe.keys(this._in[r]),t),delete this._in[r],delete this._preds[r],Fe.each(Fe.keys(this._out[r]),t),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this};He.prototype.setParent=function(r,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Fe.isUndefined(e))e=Pa;else{e+="";for(var t=e;!Fe.isUndefined(t);t=this.parent(t))if(t===r)throw new Error("Setting "+e+" as parent of "+r+" would create a cycle");this.setNode(e)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=e,this._children[e][r]=!0,this};He.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]};He.prototype.parent=function(r){if(this._isCompound){var e=this._parent[r];if(e!==Pa)return e}};He.prototype.children=function(r){if(Fe.isUndefined(r)&&(r=Pa),this._isCompound){var e=this._children[r];if(e)return Fe.keys(e)}else{if(r===Pa)return this.nodes();if(this.hasNode(r))return[]}};He.prototype.predecessors=function(r){var e=this._preds[r];if(e)return Fe.keys(e)};He.prototype.successors=function(r){var e=this._sucs[r];if(e)return Fe.keys(e)};He.prototype.neighbors=function(r){var e=this.predecessors(r);if(e)return Fe.union(e,this.successors(r))};He.prototype.isLeaf=function(r){var e;return this.isDirected()?e=this.successors(r):e=this.neighbors(r),e.length===0};He.prototype.filterNodes=function(r){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var t=this;Fe.each(this._nodes,function(a,s){r(s)&&e.setNode(s,a)}),Fe.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,t.edge(a))});var n={};function i(a){var s=t.parent(a);return s===void 0||e.hasNode(s)?(n[a]=s,s):s in n?n[s]:i(s)}return this._isCompound&&Fe.each(e.nodes(),function(a){e.setParent(a,i(a))}),e};He.prototype.setDefaultEdgeLabel=function(r){return Fe.isFunction(r)||(r=Fe.constant(r)),this._defaultEdgeLabelFn=r,this};He.prototype.edgeCount=function(){return this._edgeCount};He.prototype.edges=function(){return Fe.values(this._edgeObjs)};He.prototype.setPath=function(r,e){var t=this,n=arguments;return Fe.reduce(r,function(i,a){return n.length>1?t.setEdge(i,a,e):t.setEdge(i,a),a}),this};He.prototype.setEdge=function(){var r,e,t,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(r=a.v,e=a.w,t=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=a,e=arguments[1],t=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,e=""+e,Fe.isUndefined(t)||(t=""+t);var s=Cl(this._isDirected,r,e,t);if(Fe.has(this._edgeLabels,s))return i&&(this._edgeLabels[s]=n),this;if(!Fe.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(e),this._edgeLabels[s]=i?n:this._defaultEdgeLabelFn(r,e,t);var l=Aq(this._isDirected,r,e,t);return r=l.v,e=l.w,Object.freeze(l),this._edgeObjs[s]=l,ry(this._preds[e],r),ry(this._sucs[r],e),this._in[e][s]=l,this._out[r][s]=l,this._edgeCount++,this};He.prototype.edge=function(r,e,t){var n=arguments.length===1?ug(this._isDirected,arguments[0]):Cl(this._isDirected,r,e,t);return this._edgeLabels[n]};He.prototype.hasEdge=function(r,e,t){var n=arguments.length===1?ug(this._isDirected,arguments[0]):Cl(this._isDirected,r,e,t);return Fe.has(this._edgeLabels,n)};He.prototype.removeEdge=function(r,e,t){var n=arguments.length===1?ug(this._isDirected,arguments[0]):Cl(this._isDirected,r,e,t),i=this._edgeObjs[n];return i&&(r=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],ny(this._preds[e],r),ny(this._sucs[r],e),delete this._in[e][n],delete this._out[r][n],this._edgeCount--),this};He.prototype.inEdges=function(r,e){var t=this._in[r];if(t){var n=Fe.values(t);return e?Fe.filter(n,function(i){return i.v===e}):n}};He.prototype.outEdges=function(r,e){var t=this._out[r];if(t){var n=Fe.values(t);return e?Fe.filter(n,function(i){return i.w===e}):n}};He.prototype.nodeEdges=function(r,e){var t=this.inEdges(r,e);if(t)return t.concat(this.outEdges(r,e))};function ry(r,e){r[e]?r[e]++:r[e]=1}function ny(r,e){--r[e]||delete r[e]}function Cl(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var s=i;i=a,a=s}return i+ty+a+ty+(Fe.isUndefined(n)?Qq:n)}function Aq(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var s=i;i=a,a=s}var l={v:i,w:a};return n&&(l.name=n),l}function ug(r,e){return Cl(r,e.v,e.w,e.name)}var Dq="2.1.8",_q={Graph:lg,version:Dq},qn=sn,Mq=lg,Zq={write:Rq,read:Iq};function Rq(r){var e={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:Lq(r),edges:Bq(r)};return qn.isUndefined(r.graph())||(e.value=qn.clone(r.graph())),e}function Lq(r){return qn.map(r.nodes(),function(e){var t=r.node(e),n=r.parent(e),i={v:e};return qn.isUndefined(t)||(i.value=t),qn.isUndefined(n)||(i.parent=n),i})}function Bq(r){return qn.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return qn.isUndefined(e.name)||(n.name=e.name),qn.isUndefined(t)||(n.value=t),n})}function Iq(r){var e=new Mq(r.options).setGraph(r.value);return qn.each(r.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),qn.each(r.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var Hl=sn,Nq=zq;function zq(r){var e={},t=[],n;function i(a){Hl.has(e,a)||(e[a]=!0,n.push(a),Hl.each(r.successors(a),i),Hl.each(r.predecessors(a),i))}return Hl.each(r.nodes(),function(a){n=[],i(a),n.length&&t.push(n)}),t}var mw=sn,yw=on;function on(){this._arr=[],this._keyIndices={}}on.prototype.size=function(){return this._arr.length};on.prototype.keys=function(){return this._arr.map(function(r){return r.key})};on.prototype.has=function(r){return mw.has(this._keyIndices,r)};on.prototype.priority=function(r){var e=this._keyIndices[r];if(e!==void 0)return this._arr[e].priority};on.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};on.prototype.add=function(r,e){var t=this._keyIndices;if(r=String(r),!mw.has(t,r)){var n=this._arr,i=n.length;return t[r]=i,n.push({key:r,priority:e}),this._decrease(i),!0}return!1};on.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key};on.prototype.decrease=function(r,e){var t=this._keyIndices[r];if(e>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[t].priority+" New: "+e);this._arr[t].priority=e,this._decrease(t)};on.prototype._heapify=function(r){var e=this._arr,t=2*r,n=t+1,i=r;t<e.length&&(i=e[t].priority<e[i].priority?t:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))};on.prototype._decrease=function(r){for(var e=this._arr,t=e[r].priority,n;r!==0&&(n=r>>1,!(e[n].priority<t));)this._swap(r,n),r=n};on.prototype._swap=function(r,e){var t=this._arr,n=this._keyIndices,i=t[r],a=t[e];t[r]=a,t[e]=i,n[a.key]=r,n[i.key]=e};var Wq=sn,qq=yw,Ow=Xq,Yq=Wq.constant(1);function Xq(r,e,t,n){return Vq(r,String(e),t||Yq,n||function(i){return r.outEdges(i)})}function Vq(r,e,t,n){var i={},a=new qq,s,l,u=function(c){var f=c.v!==s?c.v:c.w,h=i[f],d=t(c),p=l.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+c+" Weight: "+d);p<h.distance&&(h.distance=p,h.predecessor=s,a.decrease(f,p))};for(r.nodes().forEach(function(c){var f=c===e?0:Number.POSITIVE_INFINITY;i[c]={distance:f},a.add(c,f)});a.size()>0&&(s=a.removeMin(),l=i[s],l.distance!==Number.POSITIVE_INFINITY);)n(s).forEach(u);return i}var Fq=Ow,jq=sn,Gq=Uq;function Uq(r,e,t){return jq.transform(r.nodes(),function(n,i){n[i]=Fq(r,i,e,t)},{})}var iy=sn,bw=Hq;function Hq(r){var e=0,t=[],n={},i=[];function a(s){var l=n[s]={onStack:!0,lowlink:e,index:e++};if(t.push(s),r.successors(s).forEach(function(f){iy.has(n,f)?n[f].onStack&&(l.lowlink=Math.min(l.lowlink,n[f].index)):(a(f),l.lowlink=Math.min(l.lowlink,n[f].lowlink))}),l.lowlink===l.index){var u=[],c;do c=t.pop(),n[c].onStack=!1,u.push(c);while(s!==c);i.push(u)}}return r.nodes().forEach(function(s){iy.has(n,s)||a(s)}),i}var Kq=sn,Jq=bw,eY=tY;function tY(r){return Kq.filter(Jq(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})}var rY=sn,nY=aY,iY=rY.constant(1);function aY(r,e,t){return sY(r,e||iY,t||function(n){return r.outEdges(n)})}function sY(r,e,t){var n={},i=r.nodes();return i.forEach(function(a){n[a]={},n[a][a]={distance:0},i.forEach(function(s){a!==s&&(n[a][s]={distance:Number.POSITIVE_INFINITY})}),t(a).forEach(function(s){var l=s.v===a?s.w:s.v,u=e(s);n[a][l]={distance:u,predecessor:a}})}),i.forEach(function(a){var s=n[a];i.forEach(function(l){var u=n[l];i.forEach(function(c){var f=u[a],h=s[c],d=u[c],p=f.distance+h.distance;p<d.distance&&(d.distance=p,d.predecessor=h.predecessor)})})}),n}var ro=sn,ww=xw;xw.CycleException=rc;function xw(r){var e={},t={},n=[];function i(a){if(ro.has(t,a))throw new rc;ro.has(e,a)||(t[a]=!0,e[a]=!0,ro.each(r.predecessors(a),i),delete t[a],n.push(a))}if(ro.each(r.sinks(),i),ro.size(e)!==r.nodeCount())throw new rc;return n}function rc(){}rc.prototype=new Error;var ay=ww,oY=lY;function lY(r){try{ay(r)}catch(e){if(e instanceof ay.CycleException)return!1;throw e}return!0}var nc=sn,Sw=uY;function uY(r,e,t){nc.isArray(e)||(e=[e]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],a={};return nc.each(e,function(s){if(!r.hasNode(s))throw new Error("Graph does not have node: "+s);kw(r,s,t==="post",a,n,i)}),i}function kw(r,e,t,n,i,a){nc.has(n,e)||(n[e]=!0,t||a.push(e),nc.each(i(e),function(s){kw(r,s,t,n,i,a)}),t&&a.push(e))}var cY=Sw,fY=hY;function hY(r,e){return cY(r,e,"post")}var dY=Sw,pY=gY;function gY(r,e){return dY(r,e,"pre")}var sy=sn,vY=lg,mY=yw,yY=OY;function OY(r,e){var t=new vY,n={},i=new mY,a;function s(u){var c=u.v===a?u.w:u.v,f=i.priority(c);if(f!==void 0){var h=e(u);h<f&&(n[c]=a,i.decrease(c,h))}}if(r.nodeCount()===0)return t;sy.each(r.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),t.setNode(u)}),i.decrease(r.nodes()[0],0);for(var l=!1;i.size()>0;){if(a=i.removeMin(),sy.has(n,a))t.setEdge(a,n[a]);else{if(l)throw new Error("Input graph is not connected: "+r);l=!0}r.nodeEdges(a).forEach(s)}return t}var bY={components:Nq,dijkstra:Ow,dijkstraAll:Gq,findCycles:eY,floydWarshall:nY,isAcyclic:oY,postorder:fY,preorder:pY,prim:yY,tarjan:bw,topsort:ww},oy=_q,wY={Graph:oy.Graph,json:Zq,alg:bY,version:oy.version},ic;if(typeof xp=="function")try{ic=wY}catch{}ic||(ic=window.graphlib);var kn=ic,xY=I1,SY=1,kY=4;function $Y(r){return xY(r,SY|kY)}var PY=$Y,CY=Qs,EY=di,TY=Gc,QY=Ur;function AY(r,e,t){if(!QY(t))return!1;var n=typeof e;return(n=="number"?EY(t)&&TY(e,t.length):n=="string"&&e in t)?CY(t[e],r):!1}var mf=AY,DY=vf,_Y=Qs,MY=mf,ZY=Ba,$w=Object.prototype,RY=$w.hasOwnProperty,LY=DY(function(r,e){r=Object(r);var t=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&MY(e[0],e[1],i)&&(n=1);++t<n;)for(var a=e[t],s=ZY(a),l=-1,u=s.length;++l<u;){var c=s[l],f=r[c];(f===void 0||_Y(f,$w[c])&&!RY.call(r,c))&&(r[c]=a[c])}return r}),BY=LY,IY=pi,NY=di,zY=Ji;function WY(r){return function(e,t,n){var i=Object(e);if(!NY(e)){var a=IY(t);e=zY(e),t=function(l){return a(i[l],l,i)}}var s=r(e,t,n);return s>-1?i[a?e[s]:s]:void 0}}var qY=WY,YY=I0,ly=1/0,XY=17976931348623157e292;function VY(r){if(!r)return r===0?r:0;if(r=YY(r),r===ly||r===-ly){var e=r<0?-1:1;return e*XY}return r===r?r:0}var Pw=VY,FY=Pw;function jY(r){var e=FY(r),t=e%1;return e===e?t?e-t:e:0}var GY=jY,UY=pw,HY=pi,KY=GY,JY=Math.max;function eX(r,e,t){var n=r==null?0:r.length;if(!n)return-1;var i=t==null?0:KY(t);return i<0&&(i=JY(n+i,0)),UY(r,HY(e),i)}var tX=eX,rX=qY,nX=tX,iX=rX(nX),aX=iX,sX=og;function oX(r){var e=r==null?0:r.length;return e?sX(r,1):[]}var Cw=oX,lX=ig,uX=N1,cX=Ba;function fX(r,e){return r==null?r:lX(r,uX(e),cX)}var hX=fX;function dX(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}var pX=dX,gX=Fc,vX=ag,mX=pi;function yX(r,e){var t={};return e=mX(e),vX(r,function(n,i,a){gX(t,i,e(n,i,a))}),t}var OX=yX,bX=Ma;function wX(r,e,t){for(var n=-1,i=r.length;++n<i;){var a=r[n],s=e(a);if(s!=null&&(l===void 0?s===s&&!bX(s):t(s,l)))var l=s,u=a}return u}var cg=wX;function xX(r,e){return r>e}var SX=xX,kX=cg,$X=SX,PX=Ia;function CX(r){return r&&r.length?kX(r,PX,$X):void 0}var EX=CX,TX=Fc,QX=Qs;function AX(r,e,t){(t!==void 0&&!QX(r[e],t)||t===void 0&&!(e in r))&&TX(r,e,t)}var Ew=AX,DX=_a,_X=pf,MX=Fn,ZX="[object Object]",RX=Function.prototype,LX=Object.prototype,Tw=RX.toString,BX=LX.hasOwnProperty,IX=Tw.call(Object);function NX(r){if(!MX(r)||DX(r)!=ZX)return!1;var e=_X(r);if(e===null)return!0;var t=BX.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Tw.call(t)==IX}var zX=NX;function WX(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var Qw=WX,qX=kl,YX=Ba;function XX(r){return qX(r,YX(r))}var VX=XX,uy=Ew,FX=Ju.exports,jX=_1,GX=Qp,UX=Z1,cy=$l,fy=zt,HX=gw,KX=qi.exports,JX=hl,eV=Ur,tV=zX,rV=Pl,hy=Qw,nV=VX;function iV(r,e,t,n,i,a,s){var l=hy(r,t),u=hy(e,t),c=s.get(u);if(c){uy(r,t,c);return}var f=a?a(l,u,t+"",r,e,s):void 0,h=f===void 0;if(h){var d=fy(u),p=!d&&KX(u),g=!d&&!p&&rV(u);f=u,d||p||g?fy(l)?f=l:HX(l)?f=GX(l):p?(h=!1,f=FX(u,!0)):g?(h=!1,f=jX(u,!0)):f=[]:tV(u)||cy(u)?(f=l,cy(l)?f=nV(l):(!eV(l)||JX(l))&&(f=UX(u))):h=!1}h&&(s.set(u,f),i(f,u,n,a,s),s.delete(u)),uy(r,t,f)}var aV=iV,sV=ff,oV=Ew,lV=ig,uV=aV,cV=Ur,fV=Ba,hV=Qw;function Aw(r,e,t,n,i){r!==e&&lV(e,function(a,s){if(i||(i=new sV),cV(a))uV(r,e,s,t,Aw,n,i);else{var l=n?n(hV(r,s),a,s+"",r,e,i):void 0;l===void 0&&(l=a),oV(r,s,l)}},fV)}var dV=Aw,pV=vf,gV=mf;function vV(r){return pV(function(e,t){var n=-1,i=t.length,a=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,s&&gV(t[0],t[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var l=t[n];l&&r(e,l,n,a)}return e})}var mV=vV,yV=dV,OV=mV,bV=OV(function(r,e,t){yV(r,e,t)}),wV=bV;function xV(r,e){return r<e}var Dw=xV,SV=cg,kV=Dw,$V=Ia;function PV(r){return r&&r.length?SV(r,$V,kV):void 0}var CV=PV,EV=cg,TV=pi,QV=Dw;function AV(r,e){return r&&r.length?EV(r,TV(e),QV):void 0}var DV=AV,_V=Vc,MV=F0,ZV=Xc;function RV(r,e,t){for(var n=-1,i=e.length,a={};++n<i;){var s=e[n],l=_V(r,s);t(l,s)&&MV(a,ZV(s,r),l)}return a}var LV=RV,BV=LV,IV=H1;function NV(r,e){return BV(r,e,function(t,n){return IV(r,n)})}var zV=NV,WV=Cw,qV=hw,YV=dw;function XV(r){return YV(qV(r,void 0,WV),r+"")}var VV=XV,FV=zV,jV=VV,GV=jV(function(r,e){return r==null?{}:FV(r,e)}),UV=GV,HV=Math.ceil,KV=Math.max;function JV(r,e,t,n){for(var i=-1,a=KV(HV((e-r)/(t||1)),0),s=Array(a);a--;)s[n?a:++i]=r,r+=t;return s}var eF=JV,tF=eF,rF=mf,oh=Pw;function nF(r){return function(e,t,n){return n&&typeof n!="number"&&rF(e,t,n)&&(t=n=void 0),e=oh(e),t===void 0?(t=e,e=0):t=oh(t),n=n===void 0?e<t?1:-1:oh(n),tF(e,t,n,r)}}var iF=nF,aF=iF,sF=aF(),oF=sF;function lF(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r}var uF=lF,dy=Ma;function cF(r,e){if(r!==e){var t=r!==void 0,n=r===null,i=r===r,a=dy(r),s=e!==void 0,l=e===null,u=e===e,c=dy(e);if(!l&&!c&&!a&&r>e||a&&s&&u&&!l&&!c||n&&s&&u||!t&&u||!i)return 1;if(!n&&!a&&!c&&r<e||c&&t&&i&&!n&&!a||l&&t&&i||!s&&i||!u)return-1}return 0}var fF=cF,hF=fF;function dF(r,e,t){for(var n=-1,i=r.criteria,a=e.criteria,s=i.length,l=t.length;++n<s;){var u=hF(i[n],a[n]);if(u){if(n>=l)return u;var c=t[n];return u*(c=="desc"?-1:1)}}return r.index-e.index}var pF=dF,lh=dl,gF=Vc,vF=pi,mF=rw,yF=uF,OF=hf,bF=pF,wF=Ia,xF=zt;function SF(r,e,t){e.length?e=lh(e,function(a){return xF(a)?function(s){return gF(s,a.length===1?a[0]:a)}:a}):e=[wF];var n=-1;e=lh(e,OF(vF));var i=mF(r,function(a,s,l){var u=lh(e,function(c){return c(a)});return{criteria:u,index:++n,value:a}});return yF(i,function(a,s){return bF(a,s,t)})}var kF=SF,$F=og,PF=kF,CF=vf,py=mf,EF=CF(function(r,e){if(r==null)return[];var t=e.length;return t>1&&py(r,e[0],e[1])?e=[]:t>2&&py(e[0],e[1],e[2])&&(e=[e[0]]),PF(r,$F(e,1),[])}),TF=EF,QF=Tp,AF=0;function DF(r){var e=++AF;return QF(r)+e}var _F=DF;function MF(r,e,t){for(var n=-1,i=r.length,a=e.length,s={};++n<i;){var l=n<a?e[n]:void 0;t(s,r[n],l)}return s}var ZF=MF,RF=jc,LF=ZF;function BF(r,e){return LF(r||[],e||[],RF)}var IF=BF,ac;if(typeof xp=="function")try{ac={cloneDeep:PY,constant:ng,defaults:BY,each:W1,filter:J1,find:aX,flatten:Cw,forEach:z1,forIn:hX,has:ew,isUndefined:tw,last:pX,map:nw,mapValues:OX,max:EX,merge:wV,min:CV,minBy:DV,now:L0,pick:UV,range:oF,reduce:iw,sortBy:TF,uniqueId:_F,values:vw,zipObject:IF}}catch{}ac||(ac=window._);var At=ac,NF=yf;function yf(){var r={};r._next=r._prev=r,this._sentinel=r}yf.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return _w(e),e};yf.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&_w(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e};yf.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,zF)),t=t._prev;return"["+r.join(", ")+"]"};function _w(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function zF(r,e){if(r!=="_next"&&r!=="_prev")return e}var ei=At,WF=kn.Graph,qF=NF,YF=VF,XF=ei.constant(1);function VF(r,e){if(r.nodeCount()<=1)return[];var t=jF(r,e||XF),n=FF(t.graph,t.buckets,t.zeroIdx);return ei.flatten(ei.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)}function FF(r,e,t){for(var n=[],i=e[e.length-1],a=e[0],s;r.nodeCount();){for(;s=a.dequeue();)uh(r,e,t,s);for(;s=i.dequeue();)uh(r,e,t,s);if(r.nodeCount()){for(var l=e.length-2;l>0;--l)if(s=e[l].dequeue(),s){n=n.concat(uh(r,e,t,s,!0));break}}}return n}function uh(r,e,t,n,i){var a=i?[]:void 0;return ei.forEach(r.inEdges(n.v),function(s){var l=r.edge(s),u=r.node(s.v);i&&a.push({v:s.v,w:s.w}),u.out-=l,md(e,t,u)}),ei.forEach(r.outEdges(n.v),function(s){var l=r.edge(s),u=s.w,c=r.node(u);c.in-=l,md(e,t,c)}),r.removeNode(n.v),a}function jF(r,e){var t=new WF,n=0,i=0;ei.forEach(r.nodes(),function(l){t.setNode(l,{v:l,in:0,out:0})}),ei.forEach(r.edges(),function(l){var u=t.edge(l.v,l.w)||0,c=e(l),f=u+c;t.setEdge(l.v,l.w,f),i=Math.max(i,t.node(l.v).out+=c),n=Math.max(n,t.node(l.w).in+=c)});var a=ei.range(i+n+3).map(function(){return new qF}),s=n+1;return ei.forEach(t.nodes(),function(l){md(a,s,t.node(l))}),{graph:t,buckets:a,zeroIdx:s}}function md(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var da=At,GF=YF,UF={run:HF,undo:JF};function HF(r){var e=r.graph().acyclicer==="greedy"?GF(r,t(r)):KF(r);da.forEach(e,function(n){var i=r.edge(n);r.removeEdge(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,da.uniqueId("rev"))});function t(n){return function(i){return n.edge(i).weight}}}function KF(r){var e=[],t={},n={};function i(a){da.has(n,a)||(n[a]=!0,t[a]=!0,da.forEach(r.outEdges(a),function(s){da.has(t,s.w)?e.push(s):i(s.w)}),delete t[a])}return da.forEach(r.nodes(),i),e}function JF(r){da.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}var lt=At,Mw=kn.Graph,Ir={addDummyNode:Zw,simplify:e7,asNonCompoundGraph:t7,successorWeights:r7,predecessorWeights:n7,intersectRect:i7,buildLayerMatrix:a7,normalizeRanks:s7,removeEmptyRanks:o7,addBorderNode:l7,maxRank:Rw,partition:u7,time:c7,notime:f7};function Zw(r,e,t,n){var i;do i=lt.uniqueId(n);while(r.hasNode(i));return t.dummy=e,r.setNode(i,t),i}function e7(r){var e=new Mw().setGraph(r.graph());return lt.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),lt.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},i=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e}function t7(r){var e=new Mw({multigraph:r.isMultigraph()}).setGraph(r.graph());return lt.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),lt.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e}function r7(r){var e=lt.map(r.nodes(),function(t){var n={};return lt.forEach(r.outEdges(t),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return lt.zipObject(r.nodes(),e)}function n7(r){var e=lt.map(r.nodes(),function(t){var n={};return lt.forEach(r.inEdges(t),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return lt.zipObject(r.nodes(),e)}function i7(r,e){var t=r.x,n=r.y,i=e.x-t,a=e.y-n,s=r.width/2,l=r.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var u,c;return Math.abs(a)*s>Math.abs(i)*l?(a<0&&(l=-l),u=l*i/a,c=l):(i<0&&(s=-s),u=s,c=s*a/i),{x:t+u,y:n+c}}function a7(r){var e=lt.map(lt.range(Rw(r)+1),function(){return[]});return lt.forEach(r.nodes(),function(t){var n=r.node(t),i=n.rank;lt.isUndefined(i)||(e[i][n.order]=t)}),e}function s7(r){var e=lt.min(lt.map(r.nodes(),function(t){return r.node(t).rank}));lt.forEach(r.nodes(),function(t){var n=r.node(t);lt.has(n,"rank")&&(n.rank-=e)})}function o7(r){var e=lt.min(lt.map(r.nodes(),function(a){return r.node(a).rank})),t=[];lt.forEach(r.nodes(),function(a){var s=r.node(a).rank-e;t[s]||(t[s]=[]),t[s].push(a)});var n=0,i=r.graph().nodeRankFactor;lt.forEach(t,function(a,s){lt.isUndefined(a)&&s%i!==0?--n:n&&lt.forEach(a,function(l){r.node(l).rank+=n})})}function l7(r,e,t,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),Zw(r,"border",i,e)}function Rw(r){return lt.max(lt.map(r.nodes(),function(e){var t=r.node(e).rank;if(!lt.isUndefined(t))return t}))}function u7(r,e){var t={lhs:[],rhs:[]};return lt.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t}function c7(r,e){var t=lt.now();try{return e()}finally{console.log(r+" time: "+(lt.now()-t)+"ms")}}function f7(r,e){return e()}var Lw=At,h7=Ir,d7={run:p7,undo:v7};function p7(r){r.graph().dummyChains=[],Lw.forEach(r.edges(),function(e){g7(r,e)})}function g7(r,e){var t=e.v,n=r.node(t).rank,i=e.w,a=r.node(i).rank,s=e.name,l=r.edge(e),u=l.labelRank;if(a!==n+1){r.removeEdge(e);var c,f,h;for(h=0,++n;n<a;++h,++n)l.points=[],f={width:0,height:0,edgeLabel:l,edgeObj:e,rank:n},c=h7.addDummyNode(r,"edge",f,"_d"),n===u&&(f.width=l.width,f.height=l.height,f.dummy="edge-label",f.labelpos=l.labelpos),r.setEdge(t,c,{weight:l.weight},s),h===0&&r.graph().dummyChains.push(c),t=c;r.setEdge(t,i,{weight:l.weight},s)}}function v7(r){Lw.forEach(r.graph().dummyChains,function(e){var t=r.node(e),n=t.edgeLabel,i;for(r.setEdge(t.edgeObj,n);t.dummy;)i=r.successors(e)[0],r.removeNode(e),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),e=i,t=r.node(e)})}var Kl=At,Of={longestPath:m7,slack:y7};function m7(r){var e={};function t(n){var i=r.node(n);if(Kl.has(e,n))return i.rank;e[n]=!0;var a=Kl.min(Kl.map(r.outEdges(n),function(s){return t(s.w)-r.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}Kl.forEach(r.sources(),t)}function y7(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen}var sc=At,O7=kn.Graph,oc=Of.slack,Bw=b7;function b7(r){var e=new O7({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var i,a;w7(e,r)<n;)i=x7(e,r),a=e.hasNode(i.v)?oc(r,i):-oc(r,i),S7(e,r,a);return e}function w7(r,e){function t(n){sc.forEach(e.nodeEdges(n),function(i){var a=i.v,s=n===a?i.w:a;!r.hasNode(s)&&!oc(e,i)&&(r.setNode(s,{}),r.setEdge(n,s,{}),t(s))})}return sc.forEach(r.nodes(),t),r.nodeCount()}function x7(r,e){return sc.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return oc(e,t)})}function S7(r,e,t){sc.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var oi=At,k7=Bw,$7=Of.slack,P7=Of.longestPath,C7=kn.alg.preorder,E7=kn.alg.postorder,T7=Ir.simplify,Q7=Na;Na.initLowLimValues=hg;Na.initCutValues=fg;Na.calcCutValue=Iw;Na.leaveEdge=zw;Na.enterEdge=Ww;Na.exchangeEdges=qw;function Na(r){r=T7(r),P7(r);var e=k7(r);hg(e),fg(e,r);for(var t,n;t=zw(e);)n=Ww(e,r,t),qw(e,r,t,n)}function fg(r,e){var t=E7(r,r.nodes());t=t.slice(0,t.length-1),oi.forEach(t,function(n){A7(r,e,n)})}function A7(r,e,t){var n=r.node(t),i=n.parent;r.edge(t,i).cutvalue=Iw(r,e,t)}function Iw(r,e,t){var n=r.node(t),i=n.parent,a=!0,s=e.edge(t,i),l=0;return s||(a=!1,s=e.edge(i,t)),l=s.weight,oi.forEach(e.nodeEdges(t),function(u){var c=u.v===t,f=c?u.w:u.v;if(f!==i){var h=c===a,d=e.edge(u).weight;if(l+=h?d:-d,_7(r,t,f)){var p=r.edge(t,f).cutvalue;l+=h?-p:p}}}),l}function hg(r,e){arguments.length<2&&(e=r.nodes()[0]),Nw(r,{},1,e)}function Nw(r,e,t,n,i){var a=t,s=r.node(n);return e[n]=!0,oi.forEach(r.neighbors(n),function(l){oi.has(e,l)||(t=Nw(r,e,t,l,n))}),s.low=a,s.lim=t++,i?s.parent=i:delete s.parent,t}function zw(r){return oi.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function Ww(r,e,t){var n=t.v,i=t.w;e.hasEdge(n,i)||(n=t.w,i=t.v);var a=r.node(n),s=r.node(i),l=a,u=!1;a.lim>s.lim&&(l=s,u=!0);var c=oi.filter(e.edges(),function(f){return u===gy(r,r.node(f.v),l)&&u!==gy(r,r.node(f.w),l)});return oi.minBy(c,function(f){return $7(e,f)})}function qw(r,e,t,n){var i=t.v,a=t.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),hg(r),fg(r,e),D7(r,e)}function D7(r,e){var t=oi.find(r.nodes(),function(i){return!e.node(i).parent}),n=C7(r,t);n=n.slice(1),oi.forEach(n,function(i){var a=r.node(i).parent,s=e.edge(i,a),l=!1;s||(s=e.edge(a,i),l=!0),e.node(i).rank=e.node(a).rank+(l?s.minlen:-s.minlen)})}function _7(r,e,t){return r.hasEdge(e,t)}function gy(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}var M7=Of,Yw=M7.longestPath,Z7=Bw,R7=Q7,L7=B7;function B7(r){switch(r.graph().ranker){case"network-simplex":vy(r);break;case"tight-tree":N7(r);break;case"longest-path":I7(r);break;default:vy(r)}}var I7=Yw;function N7(r){Yw(r),Z7(r)}function vy(r){R7(r)}var yd=At,z7=W7;function W7(r){var e=Y7(r);yd.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),i=n.edgeObj,a=q7(r,e,i.v,i.w),s=a.path,l=a.lca,u=0,c=s[u],f=!0;t!==i.w;){if(n=r.node(t),f){for(;(c=s[u])!==l&&r.node(c).maxRank<n.rank;)u++;c===l&&(f=!1)}if(!f){for(;u<s.length-1&&r.node(c=s[u+1]).minRank<=n.rank;)u++;c=s[u]}r.setParent(t,c),t=r.successors(t)[0]}})}function q7(r,e,t,n){var i=[],a=[],s=Math.min(e[t].low,e[n].low),l=Math.max(e[t].lim,e[n].lim),u,c;u=t;do u=r.parent(u),i.push(u);while(u&&(e[u].low>s||l>e[u].lim));for(c=u,u=n;(u=r.parent(u))!==c;)a.push(u);return{path:i.concat(a.reverse()),lca:c}}function Y7(r){var e={},t=0;function n(i){var a=t;yd.forEach(r.children(i),n),e[i]={low:a,lim:t++}}return yd.forEach(r.children(),n),e}var ti=At,Od=Ir,X7={run:V7,cleanup:G7};function V7(r){var e=Od.addDummyNode(r,"root",{},"_root"),t=F7(r),n=ti.max(ti.values(t))-1,i=2*n+1;r.graph().nestingRoot=e,ti.forEach(r.edges(),function(s){r.edge(s).minlen*=i});var a=j7(r)+1;ti.forEach(r.children(),function(s){Xw(r,e,i,a,n,t,s)}),r.graph().nodeRankFactor=i}function Xw(r,e,t,n,i,a,s){var l=r.children(s);if(!l.length){s!==e&&r.setEdge(e,s,{weight:0,minlen:t});return}var u=Od.addBorderNode(r,"_bt"),c=Od.addBorderNode(r,"_bb"),f=r.node(s);r.setParent(u,s),f.borderTop=u,r.setParent(c,s),f.borderBottom=c,ti.forEach(l,function(h){Xw(r,e,t,n,i,a,h);var d=r.node(h),p=d.borderTop?d.borderTop:h,g=d.borderBottom?d.borderBottom:h,y=d.borderTop?n:2*n,m=p!==g?1:i-a[s]+1;r.setEdge(u,p,{weight:y,minlen:m,nestingEdge:!0}),r.setEdge(g,c,{weight:y,minlen:m,nestingEdge:!0})}),r.parent(s)||r.setEdge(e,u,{weight:0,minlen:i+a[s]})}function F7(r){var e={};function t(n,i){var a=r.children(n);a&&a.length&&ti.forEach(a,function(s){t(s,i+1)}),e[n]=i}return ti.forEach(r.children(),function(n){t(n,1)}),e}function j7(r){return ti.reduce(r.edges(),function(e,t){return e+r.edge(t).weight},0)}function G7(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,ti.forEach(r.edges(),function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdge(t)})}var ch=At,U7=Ir,H7=K7;function K7(r){function e(t){var n=r.children(t),i=r.node(t);if(n.length&&ch.forEach(n,e),ch.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)my(r,"borderLeft","_bl",t,i,a),my(r,"borderRight","_br",t,i,a)}}ch.forEach(r.children(),e)}function my(r,e,t,n,i,a){var s={width:0,height:0,rank:a,borderType:e},l=i[e][a-1],u=U7.addDummyNode(r,"border",s,t);i[e][a]=u,r.setParent(u,n),l&&r.setEdge(l,u,{weight:1})}var Bn=At,J7={adjust:e4,undo:t4};function e4(r){var e=r.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&Vw(r)}function t4(r){var e=r.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&r4(r),(e==="lr"||e==="rl")&&(n4(r),Vw(r))}function Vw(r){Bn.forEach(r.nodes(),function(e){yy(r.node(e))}),Bn.forEach(r.edges(),function(e){yy(r.edge(e))})}function yy(r){var e=r.width;r.width=r.height,r.height=e}function r4(r){Bn.forEach(r.nodes(),function(e){fh(r.node(e))}),Bn.forEach(r.edges(),function(e){var t=r.edge(e);Bn.forEach(t.points,fh),Bn.has(t,"y")&&fh(t)})}function fh(r){r.y=-r.y}function n4(r){Bn.forEach(r.nodes(),function(e){hh(r.node(e))}),Bn.forEach(r.edges(),function(e){var t=r.edge(e);Bn.forEach(t.points,hh),Bn.has(t,"x")&&hh(t)})}function hh(r){var e=r.x;r.x=r.y,r.y=e}var Kn=At,i4=a4;function a4(r){var e={},t=Kn.filter(r.nodes(),function(l){return!r.children(l).length}),n=Kn.max(Kn.map(t,function(l){return r.node(l).rank})),i=Kn.map(Kn.range(n+1),function(){return[]});function a(l){if(!Kn.has(e,l)){e[l]=!0;var u=r.node(l);i[u.rank].push(l),Kn.forEach(r.successors(l),a)}}var s=Kn.sortBy(t,function(l){return r.node(l).rank});return Kn.forEach(s,a),i}var yi=At,s4=o4;function o4(r,e){for(var t=0,n=1;n<e.length;++n)t+=l4(r,e[n-1],e[n]);return t}function l4(r,e,t){for(var n=yi.zipObject(t,yi.map(t,function(c,f){return f})),i=yi.flatten(yi.map(e,function(c){return yi.sortBy(yi.map(r.outEdges(c),function(f){return{pos:n[f.w],weight:r.edge(f).weight}}),"pos")}),!0),a=1;a<t.length;)a<<=1;var s=2*a-1;a-=1;var l=yi.map(new Array(s),function(){return 0}),u=0;return yi.forEach(i.forEach(function(c){var f=c.pos+a;l[f]+=c.weight;for(var h=0;f>0;)f%2&&(h+=l[f+1]),f=f-1>>1,l[f]+=c.weight;u+=c.weight*h})),u}var Oy=At,u4=c4;function c4(r,e){return Oy.map(e,function(t){var n=r.inEdges(t);if(n.length){var i=Oy.reduce(n,function(a,s){var l=r.edge(s),u=r.node(s.v);return{sum:a.sum+l.weight*u.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}var qr=At,f4=h4;function h4(r,e){var t={};qr.forEach(r,function(i,a){var s=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};qr.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),qr.forEach(e.edges(),function(i){var a=t[i.v],s=t[i.w];!qr.isUndefined(a)&&!qr.isUndefined(s)&&(s.indegree++,a.out.push(t[i.w]))});var n=qr.filter(t,function(i){return!i.indegree});return d4(n)}function d4(r){var e=[];function t(a){return function(s){s.merged||(qr.isUndefined(s.barycenter)||qr.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&p4(a,s)}}function n(a){return function(s){s.in.push(a),--s.indegree===0&&r.push(s)}}for(;r.length;){var i=r.pop();e.push(i),qr.forEach(i.in.reverse(),t(i)),qr.forEach(i.out,n(i))}return qr.map(qr.filter(e,function(a){return!a.merged}),function(a){return qr.pick(a,["vs","i","barycenter","weight"])})}function p4(r,e){var t=0,n=0;r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.vs=e.vs.concat(r.vs),r.barycenter=t/n,r.weight=n,r.i=Math.min(e.i,r.i),e.merged=!0}var vo=At,g4=Ir,v4=m4;function m4(r,e){var t=g4.partition(r,function(f){return vo.has(f,"barycenter")}),n=t.lhs,i=vo.sortBy(t.rhs,function(f){return-f.i}),a=[],s=0,l=0,u=0;n.sort(y4(!!e)),u=by(a,i,u),vo.forEach(n,function(f){u+=f.vs.length,a.push(f.vs),s+=f.barycenter*f.weight,l+=f.weight,u=by(a,i,u)});var c={vs:vo.flatten(a,!0)};return l&&(c.barycenter=s/l,c.weight=l),c}function by(r,e,t){for(var n;e.length&&(n=vo.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}function y4(r){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i}}var xi=At,O4=u4,b4=f4,w4=v4,x4=Fw;function Fw(r,e,t,n){var i=r.children(e),a=r.node(e),s=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,u={};s&&(i=xi.filter(i,function(g){return g!==s&&g!==l}));var c=O4(r,i);xi.forEach(c,function(g){if(r.children(g.v).length){var y=Fw(r,g.v,t,n);u[g.v]=y,xi.has(y,"barycenter")&&k4(g,y)}});var f=b4(c,t);S4(f,u);var h=w4(f,n);if(s&&(h.vs=xi.flatten([s,h.vs,l],!0),r.predecessors(s).length)){var d=r.node(r.predecessors(s)[0]),p=r.node(r.predecessors(l)[0]);xi.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+p.order)/(h.weight+2),h.weight+=2}return h}function S4(r,e){xi.forEach(r,function(t){t.vs=xi.flatten(t.vs.map(function(n){return e[n]?e[n].vs:n}),!0)})}function k4(r,e){xi.isUndefined(r.barycenter)?(r.barycenter=e.barycenter,r.weight=e.weight):(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight)}var mo=At,$4=kn.Graph,P4=C4;function C4(r,e,t){var n=E4(r),i=new $4({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return mo.forEach(r.nodes(),function(a){var s=r.node(a),l=r.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,l||n),mo.forEach(r[t](a),function(u){var c=u.v===a?u.w:u.v,f=i.edge(c,a),h=mo.isUndefined(f)?0:f.weight;i.setEdge(c,a,{weight:r.edge(u).weight+h})}),mo.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i}function E4(r){for(var e;r.hasNode(e=mo.uniqueId("_root")););return e}var T4=At,Q4=A4;function A4(r,e,t){var n={},i;T4.forEach(t,function(a){for(var s=r.parent(a),l,u;s;){if(l=r.parent(s),l?(u=n[l],n[l]=s):(u=i,i=s),u&&u!==s){e.setEdge(u,s);return}s=l}})}var Di=At,D4=i4,_4=s4,M4=x4,Z4=P4,R4=Q4,L4=kn.Graph,wy=Ir,B4=I4;function I4(r){var e=wy.maxRank(r),t=xy(r,Di.range(1,e+1),"inEdges"),n=xy(r,Di.range(e-1,-1,-1),"outEdges"),i=D4(r);Sy(r,i);for(var a=Number.POSITIVE_INFINITY,s,l=0,u=0;u<4;++l,++u){N4(l%2?t:n,l%4>=2),i=wy.buildLayerMatrix(r);var c=_4(r,i);c<a&&(u=0,s=Di.cloneDeep(i),a=c)}Sy(r,s)}function xy(r,e,t){return Di.map(e,function(n){return Z4(r,n,t)})}function N4(r,e){var t=new L4;Di.forEach(r,function(n){var i=n.graph().root,a=M4(n,i,t,e);Di.forEach(a.vs,function(s,l){n.node(s).order=l}),R4(n,t,a.vs)})}function Sy(r,e){Di.forEach(e,function(t){Di.forEach(t,function(n,i){r.node(n).order=i})})}var Ve=At,z4=kn.Graph,W4=Ir,q4={positionX:V4,findType1Conflicts:jw,findType2Conflicts:Gw,addConflict:dg,hasConflict:Uw,verticalAlignment:Hw,horizontalCompaction:Kw,alignCoordinates:ex,findSmallestWidthAlignment:Jw,balance:tx};function jw(r,e){var t={};function n(i,a){var s=0,l=0,u=i.length,c=Ve.last(a);return Ve.forEach(a,function(f,h){var d=Y4(r,f),p=d?r.node(d).order:u;(d||f===c)&&(Ve.forEach(a.slice(l,h+1),function(g){Ve.forEach(r.predecessors(g),function(y){var m=r.node(y),v=m.order;(v<s||p<v)&&!(m.dummy&&r.node(g).dummy)&&dg(t,y,g)})}),l=h+1,s=p)}),a}return Ve.reduce(e,n),t}function Gw(r,e){var t={};function n(a,s,l,u,c){var f;Ve.forEach(Ve.range(s,l),function(h){f=a[h],r.node(f).dummy&&Ve.forEach(r.predecessors(f),function(d){var p=r.node(d);p.dummy&&(p.order<u||p.order>c)&&dg(t,d,f)})})}function i(a,s){var l=-1,u,c=0;return Ve.forEach(s,function(f,h){if(r.node(f).dummy==="border"){var d=r.predecessors(f);d.length&&(u=r.node(d[0]).order,n(s,c,h,l,u),c=h,l=u)}n(s,c,s.length,u,a.length)}),s}return Ve.reduce(e,i),t}function Y4(r,e){if(r.node(e).dummy)return Ve.find(r.predecessors(e),function(t){return r.node(t).dummy})}function dg(r,e,t){if(e>t){var n=e;e=t,t=n}var i=r[e];i||(r[e]=i={}),i[t]=!0}function Uw(r,e,t){if(e>t){var n=e;e=t,t=n}return Ve.has(r[e],t)}function Hw(r,e,t,n){var i={},a={},s={};return Ve.forEach(e,function(l){Ve.forEach(l,function(u,c){i[u]=u,a[u]=u,s[u]=c})}),Ve.forEach(e,function(l){var u=-1;Ve.forEach(l,function(c){var f=n(c);if(f.length){f=Ve.sortBy(f,function(y){return s[y]});for(var h=(f.length-1)/2,d=Math.floor(h),p=Math.ceil(h);d<=p;++d){var g=f[d];a[c]===c&&u<s[g]&&!Uw(t,c,g)&&(a[g]=c,a[c]=i[c]=i[g],u=s[g])}}})}),{root:i,align:a}}function Kw(r,e,t,n,i){var a={},s=X4(r,e,t,i),l=i?"borderLeft":"borderRight";function u(h,d){for(var p=s.nodes(),g=p.pop(),y={};g;)y[g]?h(g):(y[g]=!0,p.push(g),p=p.concat(d(g))),g=p.pop()}function c(h){a[h]=s.inEdges(h).reduce(function(d,p){return Math.max(d,a[p.v]+s.edge(p))},0)}function f(h){var d=s.outEdges(h).reduce(function(g,y){return Math.min(g,a[y.w]-s.edge(y))},Number.POSITIVE_INFINITY),p=r.node(h);d!==Number.POSITIVE_INFINITY&&p.borderType!==l&&(a[h]=Math.max(a[h],d))}return u(c,s.predecessors.bind(s)),u(f,s.successors.bind(s)),Ve.forEach(n,function(h){a[h]=a[t[h]]}),a}function X4(r,e,t,n){var i=new z4,a=r.graph(),s=F4(a.nodesep,a.edgesep,n);return Ve.forEach(e,function(l){var u;Ve.forEach(l,function(c){var f=t[c];if(i.setNode(f),u){var h=t[u],d=i.edge(h,f);i.setEdge(h,f,Math.max(s(r,c,u),d||0))}u=c})}),i}function Jw(r,e){return Ve.minBy(Ve.values(e),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Ve.forIn(t,function(a,s){var l=j4(r,s)/2;n=Math.max(a+l,n),i=Math.min(a-l,i)}),n-i})}function ex(r,e){var t=Ve.values(e),n=Ve.min(t),i=Ve.max(t);Ve.forEach(["u","d"],function(a){Ve.forEach(["l","r"],function(s){var l=a+s,u=r[l],c;if(u!==e){var f=Ve.values(u);c=s==="l"?n-Ve.min(f):i-Ve.max(f),c&&(r[l]=Ve.mapValues(u,function(h){return h+c}))}})})}function tx(r,e){return Ve.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var i=Ve.sortBy(Ve.map(r,n));return(i[1]+i[2])/2})}function V4(r){var e=W4.buildLayerMatrix(r),t=Ve.merge(jw(r,e),Gw(r,e)),n={},i;Ve.forEach(["u","d"],function(s){i=s==="u"?e:Ve.values(e).reverse(),Ve.forEach(["l","r"],function(l){l==="r"&&(i=Ve.map(i,function(h){return Ve.values(h).reverse()}));var u=(s==="u"?r.predecessors:r.successors).bind(r),c=Hw(r,i,t,u),f=Kw(r,i,c.root,c.align,l==="r");l==="r"&&(f=Ve.mapValues(f,function(h){return-h})),n[s+l]=f})});var a=Jw(r,n);return ex(n,a),tx(n,r.graph().align)}function F4(r,e,t){return function(n,i,a){var s=n.node(i),l=n.node(a),u=0,c;if(u+=s.width/2,Ve.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":c=-s.width/2;break;case"r":c=s.width/2;break}if(c&&(u+=t?c:-c),c=0,u+=(s.dummy?e:r)/2,u+=(l.dummy?e:r)/2,u+=l.width/2,Ve.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=l.width/2;break;case"r":c=-l.width/2;break}return c&&(u+=t?c:-c),c=0,u}}function j4(r,e){return r.node(e).width}var yo=At,rx=Ir,G4=q4.positionX,U4=H4;function H4(r){r=rx.asNonCompoundGraph(r),K4(r),yo.forEach(G4(r),function(e,t){r.node(t).x=e})}function K4(r){var e=rx.buildLayerMatrix(r),t=r.graph().ranksep,n=0;yo.forEach(e,function(i){var a=yo.max(yo.map(i,function(s){return r.node(s).height}));yo.forEach(i,function(s){r.node(s).y=n+a/2}),n+=a+t})}var Ue=At,ky=UF,$y=d7,J4=L7,ej=Ir.normalizeRanks,tj=z7,rj=Ir.removeEmptyRanks,Py=X7,nj=H7,Cy=J7,ij=B4,aj=U4,Yi=Ir,sj=kn.Graph,oj=lj;function lj(r,e){var t=e&&e.debugTiming?Yi.time:Yi.notime;t("layout",function(){var n=t("  buildLayoutGraph",function(){return Oj(r)});t("  runLayout",function(){uj(n,t)}),t("  updateInputGraph",function(){cj(r,n)})})}function uj(r,e){e("    makeSpaceForEdgeLabels",function(){bj(r)}),e("    removeSelfEdges",function(){Tj(r)}),e("    acyclic",function(){ky.run(r)}),e("    nestingGraph.run",function(){Py.run(r)}),e("    rank",function(){J4(Yi.asNonCompoundGraph(r))}),e("    injectEdgeLabelProxies",function(){wj(r)}),e("    removeEmptyRanks",function(){rj(r)}),e("    nestingGraph.cleanup",function(){Py.cleanup(r)}),e("    normalizeRanks",function(){ej(r)}),e("    assignRankMinMax",function(){xj(r)}),e("    removeEdgeLabelProxies",function(){Sj(r)}),e("    normalize.run",function(){$y.run(r)}),e("    parentDummyChains",function(){tj(r)}),e("    addBorderSegments",function(){nj(r)}),e("    order",function(){ij(r)}),e("    insertSelfEdges",function(){Qj(r)}),e("    adjustCoordinateSystem",function(){Cy.adjust(r)}),e("    position",function(){aj(r)}),e("    positionSelfEdges",function(){Aj(r)}),e("    removeBorderNodes",function(){Ej(r)}),e("    normalize.undo",function(){$y.undo(r)}),e("    fixupEdgeLabelCoords",function(){Pj(r)}),e("    undoCoordinateSystem",function(){Cy.undo(r)}),e("    translateGraph",function(){kj(r)}),e("    assignNodeIntersects",function(){$j(r)}),e("    reversePoints",function(){Cj(r)}),e("    acyclic.undo",function(){ky.undo(r)})}function cj(r,e){Ue.forEach(r.nodes(),function(t){var n=r.node(t),i=e.node(t);n&&(n.x=i.x,n.y=i.y,e.children(t).length&&(n.width=i.width,n.height=i.height))}),Ue.forEach(r.edges(),function(t){var n=r.edge(t),i=e.edge(t);n.points=i.points,Ue.has(i,"x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height}var fj=["nodesep","edgesep","ranksep","marginx","marginy"],hj={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},dj=["acyclicer","ranker","rankdir","align"],pj=["width","height"],gj={width:0,height:0},vj=["minlen","weight","width","height","labeloffset"],mj={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},yj=["labelpos"];function Oj(r){var e=new sj({multigraph:!0,compound:!0}),t=ph(r.graph());return e.setGraph(Ue.merge({},hj,dh(t,fj),Ue.pick(t,dj))),Ue.forEach(r.nodes(),function(n){var i=ph(r.node(n));e.setNode(n,Ue.defaults(dh(i,pj),gj)),e.setParent(n,r.parent(n))}),Ue.forEach(r.edges(),function(n){var i=ph(r.edge(n));e.setEdge(n,Ue.merge({},mj,dh(i,vj),Ue.pick(i,yj)))}),e}function bj(r){var e=r.graph();e.ranksep/=2,Ue.forEach(r.edges(),function(t){var n=r.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function wj(r){Ue.forEach(r.edges(),function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),i=r.node(e.w),a={rank:(i.rank-n.rank)/2+n.rank,e};Yi.addDummyNode(r,"edge-proxy",a,"_ep")}})}function xj(r){var e=0;Ue.forEach(r.nodes(),function(t){var n=r.node(t);n.borderTop&&(n.minRank=r.node(n.borderTop).rank,n.maxRank=r.node(n.borderBottom).rank,e=Ue.max(e,n.maxRank))}),r.graph().maxRank=e}function Sj(r){Ue.forEach(r.nodes(),function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})}function kj(r){var e=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,i=0,a=r.graph(),s=a.marginx||0,l=a.marginy||0;function u(c){var f=c.x,h=c.y,d=c.width,p=c.height;e=Math.min(e,f-d/2),t=Math.max(t,f+d/2),n=Math.min(n,h-p/2),i=Math.max(i,h+p/2)}Ue.forEach(r.nodes(),function(c){u(r.node(c))}),Ue.forEach(r.edges(),function(c){var f=r.edge(c);Ue.has(f,"x")&&u(f)}),e-=s,n-=l,Ue.forEach(r.nodes(),function(c){var f=r.node(c);f.x-=e,f.y-=n}),Ue.forEach(r.edges(),function(c){var f=r.edge(c);Ue.forEach(f.points,function(h){h.x-=e,h.y-=n}),Ue.has(f,"x")&&(f.x-=e),Ue.has(f,"y")&&(f.y-=n)}),a.width=t-e+s,a.height=i-n+l}function $j(r){Ue.forEach(r.edges(),function(e){var t=r.edge(e),n=r.node(e.v),i=r.node(e.w),a,s;t.points?(a=t.points[0],s=t.points[t.points.length-1]):(t.points=[],a=i,s=n),t.points.unshift(Yi.intersectRect(n,a)),t.points.push(Yi.intersectRect(i,s))})}function Pj(r){Ue.forEach(r.edges(),function(e){var t=r.edge(e);if(Ue.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function Cj(r){Ue.forEach(r.edges(),function(e){var t=r.edge(e);t.reversed&&t.points.reverse()})}function Ej(r){Ue.forEach(r.nodes(),function(e){if(r.children(e).length){var t=r.node(e),n=r.node(t.borderTop),i=r.node(t.borderBottom),a=r.node(Ue.last(t.borderLeft)),s=r.node(Ue.last(t.borderRight));t.width=Math.abs(s.x-a.x),t.height=Math.abs(i.y-n.y),t.x=a.x+t.width/2,t.y=n.y+t.height/2}}),Ue.forEach(r.nodes(),function(e){r.node(e).dummy==="border"&&r.removeNode(e)})}function Tj(r){Ue.forEach(r.edges(),function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdge(e)}})}function Qj(r){var e=Yi.buildLayerMatrix(r);Ue.forEach(e,function(t){var n=0;Ue.forEach(t,function(i,a){var s=r.node(i);s.order=a+n,Ue.forEach(s.selfEdges,function(l){Yi.addDummyNode(r,"selfedge",{width:l.label.width,height:l.label.height,rank:s.rank,order:a+ ++n,e:l.e,label:l.label},"_se")}),delete s.selfEdges})})}function Aj(r){Ue.forEach(r.nodes(),function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),i=n.x+n.width/2,a=n.y,s=t.x-i,l=n.height/2;r.setEdge(t.e,t.label),r.removeNode(e),t.label.points=[{x:i+2*s/3,y:a-l},{x:i+5*s/6,y:a-l},{x:i+s,y:a},{x:i+5*s/6,y:a+l},{x:i+2*s/3,y:a+l}],t.label.x=t.x,t.label.y=t.y}})}function dh(r,e){return Ue.mapValues(Ue.pick(r,e),Number)}function ph(r){var e={};return Ue.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var Jl=At,Dj=Ir,_j=kn.Graph,Mj={debugOrdering:Zj};function Zj(r){var e=Dj.buildLayerMatrix(r),t=new _j({compound:!0,multigraph:!0}).setGraph({});return Jl.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),Jl.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),Jl.forEach(e,function(n,i){var a="layer"+i;t.setNode(a,{rank:"same"}),Jl.reduce(n,function(s,l){return t.setEdge(s,l,{style:"invis"}),l})}),t}var Rj="0.8.5",Lj={graphlib:kn,layout:oj,debug:Mj,util:{time:Ir.time,notime:Ir.notime},version:Rj};(function(r,e){(function(n,i){r.exports=i(Lj)})(mr,function(t){return function(n){var i={};function a(s){if(i[s])return i[s].exports;var l=i[s]={i:s,l:!1,exports:{}};return n[s].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=n,a.c=i,a.d=function(s,l,u){a.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:u})},a.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,l){if(l&1&&(s=a(s)),l&8||l&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),l&2&&typeof s!="string")for(var c in s)a.d(u,c,function(f){return s[f]}.bind(null,c));return u},a.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(l,"a",l),l},a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},a.p="",a(a.s=0)}([function(n,i,a){var s=a(1),l=function(c){!c||c("layout","dagre",s)};typeof cytoscape!="undefined"&&l(cytoscape),n.exports=l},function(n,i,a){function s(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(g){return typeof g}:s=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s(d)}var l=function(p){return typeof p=="function"},u=a(2),c=a(3),f=a(4);function h(d){this.options=c({},u,d)}h.prototype.run=function(){var d=this.options,p=this,g=d.cy,y=d.eles,m=function(W,q){return l(q)?q.apply(W,[W]):q},v=d.boundingBox||{x1:0,y1:0,w:g.width(),h:g.height()};v.x2===void 0&&(v.x2=v.x1+v.w),v.w===void 0&&(v.w=v.x2-v.x1),v.y2===void 0&&(v.y2=v.y1+v.h),v.h===void 0&&(v.h=v.y2-v.y1);var O=new f.graphlib.Graph({multigraph:!0,compound:!0}),b={},w=function(W,q){q!=null&&(b[W]=q)};w("nodesep",d.nodeSep),w("edgesep",d.edgeSep),w("ranksep",d.rankSep),w("rankdir",d.rankDir),w("align",d.align),w("ranker",d.ranker),w("acyclicer",d.acyclicer),O.setGraph(b),O.setDefaultEdgeLabel(function(){return{}}),O.setDefaultNodeLabel(function(){return{}});var x=y.nodes();l(d.sort)&&(x=x.sort(d.sort));for(var $=0;$<x.length;$++){var S=x[$],T=S.layoutDimensions(d);O.setNode(S.id(),{width:T.w,height:T.h,name:S.id()})}for(var k=0;k<x.length;k++){var E=x[k];E.isChild()&&O.setParent(E.id(),E.parent().id())}var P=y.edges().stdFilter(function(X){return!X.source().isParent()&&!X.target().isParent()});l(d.sort)&&(P=P.sort(d.sort));for(var C=0;C<P.length;C++){var M=P[C];O.setEdge(M.source().id(),M.target().id(),{minlen:m(M,d.minLen),weight:m(M,d.edgeWeight),name:M.id()},M.id())}f.layout(O);for(var D=O.nodes(),I=0;I<D.length;I++){var A=D[I],Q=O.node(A);g.getElementById(A).scratch().dagre=Q}var B;d.boundingBox?(B={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},x.forEach(function(X){var W=X.scratch().dagre;B.x1=Math.min(B.x1,W.x),B.x2=Math.max(B.x2,W.x),B.y1=Math.min(B.y1,W.y),B.y2=Math.max(B.y2,W.y)}),B.w=B.x2-B.x1,B.h=B.y2-B.y1):B=v;var Y=function(W){if(d.boundingBox){var q=B.w===0?0:(W.x-B.x1)/B.w,F=B.h===0?0:(W.y-B.y1)/B.h;return{x:v.x1+q*v.w,y:v.y1+F*v.h}}else return W};return x.layoutPositions(p,d,function(X){X=s(X)==="object"?X:this;var W=X.scratch().dagre;return Y({x:W.x,y:W.y})}),this},n.exports=h},function(n,i){var a={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(l){return 1},edgeWeight:function(l){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(l,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(l,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=a},function(n,i){n.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return l.forEach(function(c){Object.keys(c).forEach(function(f){return a[f]=c[f]})}),a}},function(n,i){n.exports=t}])})})(w1);var Bj=wp(w1.exports),nx={exports:{}},Ij="Expected a function",ix="__lodash_hash_undefined__",Nj="[object Function]",zj="[object GeneratorFunction]",Wj=/[\\^$.*+?()[\]{}|]/g,qj=/^\[object .+?Constructor\]$/,Yj=typeof mr=="object"&&mr&&mr.Object===Object&&mr,Xj=typeof self=="object"&&self&&self.Object===Object&&self,ax=Yj||Xj||Function("return this")();function Vj(r,e){return r==null?void 0:r[e]}function Fj(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}var jj=Array.prototype,Gj=Function.prototype,sx=Object.prototype,gh=ax["__core-js_shared__"],Ey=function(){var r=/[^.]+$/.exec(gh&&gh.keys&&gh.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ox=Gj.toString,pg=sx.hasOwnProperty,Uj=sx.toString,Hj=RegExp("^"+ox.call(pg).replace(Wj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kj=jj.splice,Jj=lx(ax,"Map"),Fo=lx(Object,"create");function Ca(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function eG(){this.__data__=Fo?Fo(null):{}}function tG(r){return this.has(r)&&delete this.__data__[r]}function rG(r){var e=this.__data__;if(Fo){var t=e[r];return t===ix?void 0:t}return pg.call(e,r)?e[r]:void 0}function nG(r){var e=this.__data__;return Fo?e[r]!==void 0:pg.call(e,r)}function iG(r,e){var t=this.__data__;return t[r]=Fo&&e===void 0?ix:e,this}Ca.prototype.clear=eG;Ca.prototype.delete=tG;Ca.prototype.get=rG;Ca.prototype.has=nG;Ca.prototype.set=iG;function Ys(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function aG(){this.__data__=[]}function sG(r){var e=this.__data__,t=bf(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():Kj.call(e,t,1),!0}function oG(r){var e=this.__data__,t=bf(e,r);return t<0?void 0:e[t][1]}function lG(r){return bf(this.__data__,r)>-1}function uG(r,e){var t=this.__data__,n=bf(t,r);return n<0?t.push([r,e]):t[n][1]=e,this}Ys.prototype.clear=aG;Ys.prototype.delete=sG;Ys.prototype.get=oG;Ys.prototype.has=lG;Ys.prototype.set=uG;function za(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function cG(){this.__data__={hash:new Ca,map:new(Jj||Ys),string:new Ca}}function fG(r){return wf(this,r).delete(r)}function hG(r){return wf(this,r).get(r)}function dG(r){return wf(this,r).has(r)}function pG(r,e){return wf(this,r).set(r,e),this}za.prototype.clear=cG;za.prototype.delete=fG;za.prototype.get=hG;za.prototype.has=dG;za.prototype.set=pG;function bf(r,e){for(var t=r.length;t--;)if(OG(r[t][0],e))return t;return-1}function gG(r){if(!ux(r)||mG(r))return!1;var e=bG(r)||Fj(r)?Hj:qj;return e.test(yG(r))}function wf(r,e){var t=r.__data__;return vG(e)?t[typeof e=="string"?"string":"hash"]:t.map}function lx(r,e){var t=Vj(r,e);return gG(t)?t:void 0}function vG(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function mG(r){return!!Ey&&Ey in r}function yG(r){if(r!=null){try{return ox.call(r)}catch{}try{return r+""}catch{}}return""}function gg(r,e){if(typeof r!="function"||e&&typeof e!="function")throw new TypeError(Ij);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var s=r.apply(this,n);return t.cache=a.set(i,s),s};return t.cache=new(gg.Cache||za),t}gg.Cache=za;function OG(r,e){return r===e||r!==r&&e!==e}function bG(r){var e=ux(r)?Uj.call(r):"";return e==Nj||e==zj}function ux(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}var wG=gg,cx="Expected a function",Ty=0/0,xG="[object Symbol]",SG=/^\s+|\s+$/g,kG=/^[-+]0x[0-9a-f]+$/i,$G=/^0b[01]+$/i,PG=/^0o[0-7]+$/i,CG=parseInt,EG=typeof mr=="object"&&mr&&mr.Object===Object&&mr,TG=typeof self=="object"&&self&&self.Object===Object&&self,QG=EG||TG||Function("return this")(),AG=Object.prototype,DG=AG.toString,_G=Math.max,MG=Math.min,vh=function(){return QG.Date.now()};function ZG(r,e,t){var n,i,a,s,l,u,c=0,f=!1,h=!1,d=!0;if(typeof r!="function")throw new TypeError(cx);e=Qy(e)||0,lc(t)&&(f=!!t.leading,h="maxWait"in t,a=h?_G(Qy(t.maxWait)||0,e):a,d="trailing"in t?!!t.trailing:d);function p($){var S=n,T=i;return n=i=void 0,c=$,s=r.apply(T,S),s}function g($){return c=$,l=setTimeout(v,e),f?p($):s}function y($){var S=$-u,T=$-c,k=e-S;return h?MG(k,a-T):k}function m($){var S=$-u,T=$-c;return u===void 0||S>=e||S<0||h&&T>=a}function v(){var $=vh();if(m($))return O($);l=setTimeout(v,y($))}function O($){return l=void 0,d&&n?p($):(n=i=void 0,s)}function b(){l!==void 0&&clearTimeout(l),c=0,n=u=i=l=void 0}function w(){return l===void 0?s:O(vh())}function x(){var $=vh(),S=m($);if(n=arguments,i=this,u=$,S){if(l===void 0)return g(u);if(h)return l=setTimeout(v,e),p(u)}return l===void 0&&(l=setTimeout(v,e)),s}return x.cancel=b,x.flush=w,x}function RG(r,e,t){var n=!0,i=!0;if(typeof r!="function")throw new TypeError(cx);return lc(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),ZG(r,e,{leading:n,maxWait:e,trailing:i})}function lc(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function LG(r){return!!r&&typeof r=="object"}function BG(r){return typeof r=="symbol"||LG(r)&&DG.call(r)==xG}function Qy(r){if(typeof r=="number")return r;if(BG(r))return Ty;if(lc(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=lc(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(SG,"");var t=$G.test(r);return t||PG.test(r)?CG(r.slice(2),t?2:8):kG.test(r)?Ty:+r}var IG=RG;(function(r,e){(function(n,i){r.exports=i(wG,IG)})(mr,function(t,n){return function(i){var a={};function s(l){if(a[l])return a[l].exports;var u=a[l]={i:l,l:!1,exports:{}};return i[l].call(u.exports,u,u.exports,s),u.l=!0,u.exports}return s.m=i,s.c=a,s.i=function(l){return l},s.d=function(l,u,c){s.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:c})},s.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(u,"a",u),u},s.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},s.p="",s(s.s=12)}([function(i,a,s){i.exports=Object.assign!=null?Object.assign.bind(Object):function(l){for(var u=arguments.length,c=Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];return c.filter(function(h){return h!=null}).forEach(function(h){Object.keys(h).forEach(function(d){return l[d]=h[d]})}),l}},function(i,a,s){var l=s(10),u=s(0);i.exports=function(c){var f=this;return new l(u({cy:f},c))}},function(i,a,s){function l(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var f=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,f),window.addEventListener("touchmove",this.preventDefault,f),window.addEventListener("wheel",this.preventDefault,f)}return this}function u(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var f=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,f),window.removeEventListener("touchmove",this.preventDefault,f),window.removeEventListener("wheel",this.preventDefault,f)}return this}function c(){var f=this.cy;return this.lastPanningEnabled=f.panningEnabled(),this.lastZoomingEnabled=f.zoomingEnabled(),this.lastBoxSelectionEnabled=f.boxSelectionEnabled(),this}i.exports={disableGestures:l,resetGestures:u,saveGestureState:c}},function(i,a,s){function l(){var u=this,c=this.cy,f=this.options;return this.addListener(c,"drag",function(){return u.grabbingNode=!0}),this.addListener(c,"free",function(){return u.grabbingNode=!1}),this.addListener(c,"tapstart","node",function(h){var d=h.target;u.drawMode&&u.start(d)}),this.addListener(c,"tapdrag",function(h){u.update(h.position)}),this.addListener(c,"tapdragover","node",function(h){f.snap||u.preview(h.target)}),this.addListener(c,"tapdragout","node",function(h){f.snap||u.unpreview(h.target)}),this.addListener(c,"tapend",function(){u.stop()}),this}i.exports={addCytoscapeListeners:l}},function(i,a,s){var l={canConnect:function(c,f){return!c.same(f)},edgeParams:function(c,f){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0};i.exports=l},function(i,a,s){function l(f){var h=this.cy;return this.drawMode=f!=null?f:!this.drawMode,this.drawMode?(this.prevUngrabifyState=h.autoungrabify(),h.autoungrabify(!0),this.emit("drawon")):(h.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this}function u(){return this.toggleDrawMode(!0)}function c(){return this.toggleDrawMode(!1)}i.exports={toggleDrawMode:l,enableDrawMode:u,disableDrawMode:c}},function(i,a,s){var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u=s(0),c=function(O){return(typeof O=="undefined"?"undefined":l(O))===l("")},f=function(O){return(typeof O=="undefined"?"undefined":l(O))===l([])&&O.length!=null};function h(v,O,b){var w={};return u(w,O,v),u(w.data,O.data,v.data),c(O.classes)?w.classes=O.classes+" "+b:f(O.classes)?w.classes=O.classes.join(" ")+" "+b:w.classes=b,w}function d(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,O=this.cy;this.options;var b=this.presumptiveTargets,w=this.previewEles,x=this.active,$=this.sourceNode,S=this.targetNode,T=v?"eh-preview":"",k=O.collection(),E=this.canConnect(S);if(!!x&&!!E){if(!S||S.size()===0){w.remove(),this.emit("cancel",this.mp(),$,b);return}if(!v){w.removeClass("eh-preview").style("events",""),this.emit("complete",this.mp(),$,S,w);return}var P=O.add(h({group:"edges",data:{source:$.id(),target:S.id()}},this.edgeParams(S),T));return k=k.merge(P),v?(this.previewEles=k,k.style("events","no")):(k.style("events",""),this.emit("complete",this.mp(),$,S,k)),this}}function p(){return this.makeEdges(!0),this}function g(){return this.previewEles.nonempty()&&this.previewEles.inside()}function y(){return this.previewShown()&&this.previewEles.remove(),this}function m(){var v=this,O=this.sourceNode,b=this.ghostNode,w=this.cy,x=this.mx,$=this.my,S=x,T=$,k=void 0,E=void 0;if(!!O)return(!b||b.length===0||b.removed())&&(E=this.ghostEles=w.collection(),w.batch(function(){b=v.ghostNode=w.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}}),b.style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var P={};k=w.add(u({},P,{group:"edges",data:u({},P.data,{source:O.id(),target:b.id()}),classes:"eh-ghost eh-ghost-edge"})),k.style({events:"no"})}),E.merge(b).merge(k)),b.position({x:S,y:T}),this}i.exports={makeEdges:d,makePreview:p,removePreview:y,previewShown:g,updateEdge:m}},function(i,a,s){function l(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this}function u(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}i.exports={disableEdgeEvents:l,enableEdgeEvents:u}},function(i,a,s){function l(){return this.enabled=!0,this.emit("enable"),this}function u(){return this.enabled=!1,this.emit("disable"),this}i.exports={enable:l,disable:u}},function(i,a,s){var l=s(13),u=Math.sqrt(2);function c(O){var b=this.previewEles,w=this.ghostEles,x=function(C){return b.anySame(C)},$=function(C){return w.anySame(C)},S=function(C){return x(C)||$(C)},T=this.enabled,k=this.active,E=this.grabbingNode;return T&&!k&&!E&&O!=null&&O.nonempty()&&!S(O)}function f(O){return this.canStartOn(O)&&this.drawMode}function h(O){return this.canStartOn(O)&&!this.drawMode}function d(O){var b=this;if(!!this.canStartOn(O)){this.active=!0,this.sourceNode=O,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var w=function($){return $.id()};this.canConnect=l(function(x){return b.options.canConnect(b.sourceNode,x)},w),this.edgeParams=l(function(x){return b.options.edgeParams(b.sourceNode,x)},w),this.emit("start",this.hp(),O)}}function p(O){if(!!this.active){var b=O;return this.mx=b.x,this.my=b.y,this.updateEdge(),this.throttledSnap(),this}}function g(){if(!this.active||!this.options.snap)return!1;var O=this.cy,b=this.targetNode,w=this.options.snapThreshold,x=this.mp(),$=this.previewEles,S=this.ghostNode,T=function(N){return u*Math.max(N.outerWidth(),N.outerHeight())/2},k=function(N,V,z,j){var G=z-N,U=j-V;return G*G+U*U},E=function(N,V){return k(N.x,N.y,V.x,V.y)},P=function(N){return E(N.position(),x)},C=function(N){var V=T(N),z=V+w;return z*z},M=function(N){return P(N)<=C(N)},D=function(N){var V=N.position(),z=N.outerWidth()/2,j=N.outerHeight()/2,G=V.x,U=V.y,K=x.x,de=x.y,Oe=G-z,pe=G+z,he=U-j,me=U+j,Pe=Oe<=K&&K<=pe,xe=he<=de&&de<=me;if(Pe&&xe)return 0;if(Pe){var Qe=de-he,qe=de-me;return Math.min(Qe*Qe,qe*qe)}else if(xe){var Ye=K-Oe,Ie=K-pe;return Math.min(Ye*Ye,Ie*Ie)}else return K<Oe&&de<he?k(K,de,Oe,he):K>pe&&de<he?k(K,de,pe,he):K<Oe&&de>me?k(K,de,Oe,me):k(K,de,pe,me)},I=function(N,V){return D(N)-D(V)},A=I,Q=!1,B=function(N){var V=x,z=N.outerWidth(),j=z/2,G=N.outerHeight(),U=G/2,K=N.position(),de=K.x-j,Oe=K.x+j,pe=K.y-U,he=K.y+U;return de<=V.x&&V.x<=Oe&&pe<=V.y&&V.y<=he},Y=function(N){return N.same($)||N.same(S)},X=O.nodes(function(Z){return!Y(Z)&&M(Z)}).sort(A),W=!1;b.nonempty()&&!M(b)&&this.unpreview(b);for(var q=0;q<X.length;q++){var F=X[q];if(!(F.isParent()&&B(F))&&!(F.isChild()&&!B(F.parent()))&&(F.same(b)||this.preview(F,Q))){W=!0;break}}return W}function y(O){var b=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,x=this.options,$=this.sourceNode,S=this.ghostNode,T=this.ghostEles,k=this.presumptiveTargets,E=this.previewEles,P=this.active,C=$,M=O.same(S),D=!this.canConnect(O),I=O.same(this.targetNode);if(!P||M||D||I)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var A=function(){b.targetNode=O,k.merge(O),O.addClass("eh-presumptive-target"),O.addClass("eh-target"),b.emit("hoverover",b.mp(),C,O),O.addClass("eh-preview"),T.addClass("eh-preview-active"),$.addClass("eh-preview-active"),O.addClass("eh-preview-active"),b.makePreview(),b.emit("previewon",b.mp(),C,O,E)};return w&&x.hoverDelay>0?this.previewTimeout=setTimeout(A,x.hoverDelay):A(),!0}function m(O){if(!!this.active){var b=this.previewTimeout,w=this.sourceNode,x=this.previewEles,$=this.ghostEles,S=this.cy;clearTimeout(b),this.previewTimeout=null;var T=w;return O.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),$.removeClass("eh-preview-active"),w.removeClass("eh-preview-active"),this.targetNode=S.collection(),this.removePreview(T,O),this.emit("hoverout",this.mp(),T,O),this.emit("previewoff",this.mp(),T,O,x),this}}function v(){if(!!this.active){var O=this.sourceNode,b=this.targetNode,w=this.ghostEles,x=this.presumptiveTargets;return clearTimeout(this.previewTimeout),O.removeClass("eh-source eh-preview-active"),b.removeClass("eh-target eh-preview eh-hover eh-preview-active"),x.removeClass("eh-presumptive-target"),this.makeEdges(),w.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),O),this}}i.exports={start:d,update:p,preview:y,unpreview:m,stop:v,snap:g,canStartOn:c,canStartDrawModeOn:f,canStartNonDrawModeOn:h}},function(i,a,s){var l=s(4),u=s(0),c=s(14),f=s(2),h=s(3),d=s(5),p=s(6),g=s(8),y=s(9),m=s(11),v=s(7);function O(x){var $=x.cy;this.cy=$,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=u({},l,x),this.saveGestureState(),this.addListeners(),this.throttledSnap=c(this.snap.bind(this),1e3/x.snapFrequency),this.preventDefault=function(k){return k.preventDefault()},this.canConnect=function(){return!1};var S=!1;try{var T=Object.defineProperty({},"passive",{get:function(){S=!0}});window.addEventListener("test",null,T)}catch{}S?this.windowListenerOptions={capture:!0,passive:!1}:this.windowListenerOptions=!0}var b=O.prototype={},w=function($){return u(b,$)};b.destroy=function(){this.removeListeners()},b.setOptions=function(x){u(this.options,x)},b.mp=function(){return{x:this.mx,y:this.my}},b.hp=function(){return{x:this.hx,y:this.hy}},b.clearCollections=function(){var x=this.cy;this.previewEles=x.collection(),this.ghostEles=x.collection(),this.ghostNode=x.collection(),this.sourceNode=x.collection(),this.targetNode=x.collection(),this.presumptiveTargets=x.collection()},[f,h,d,p,g,y,m,v].forEach(w),i.exports=O},function(i,a,s){var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y};function u(){var y=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return y.destroy()}),this}function c(){for(var y=this.listeners.length-1;y>=0;y--){var m=this.listeners[y];this.removeListener(m.target,m.event,m.selector,m.callback,m.options)}return this}function f(y,m,v,O,b){return(typeof v=="undefined"?"undefined":l(v))!==l("")&&(O=v,b=O,v=null),b==null&&(b=!1),{target:y,event:m,selector:v,callback:O,options:b}}function h(y){return y instanceof Element}function d(y,m,v,O,b){var w=f(y,m,v,O,b);return this.listeners.push(w),h(w.target)?w.target.addEventListener(w.event,w.callback,w.options):w.selector?w.target.addListener(w.event,w.selector,w.callback,w.options):w.target.addListener(w.event,w.callback,w.options),this}function p(y,m,v,O,b){for(var w=f(y,m,v,O,b),x=this.listeners.length-1;x>=0;x--){var $=this.listeners[x];if(w.target===$.target&&w.event===$.event&&(w.selector==null||w.selector===$.selector)&&(w.callback==null||w.callback===$.callback)){this.listeners.splice(x,1),h(w.target)?w.target.removeEventListener(w.event,w.callback,w.options):w.selector?w.target.removeListener(w.event,w.selector,w.callback,w.options):w.target.removeListener(w.event,w.callback,w.options);break}}return this}function g(y,m){for(var v=this.cy,O=arguments.length,b=Array(O>2?O-2:0),w=2;w<O;w++)b[w-2]=arguments[w];return v.emit({type:"eh"+y,position:m},b),this}i.exports={addListener:d,addListeners:u,removeListener:p,removeListeners:c,emit:g}},function(i,a,s){var l=s(1),u=function(f){!f||f("core","edgehandles",l)};typeof cytoscape!="undefined"&&u(cytoscape),i.exports=u},function(i,a){i.exports=t},function(i,a){i.exports=n}])})})(nx);var NG=wp(nx.exports),fx={exports:{}};Object.extend=function(r){r=r||{};for(var e=1;e<arguments.length;e++){var t=arguments[e];if(!!t)for(var n in t)t.hasOwnProperty(n)&&(Array.isArray(t[n])?r[n]=t[n].slice():typeof t[n]=="object"?r[n]=Object.extend(r[n],t[n]):r[n]=t[n])}return r};var zG=function(r,e,t){var n={};n.changeOptions=function(a){e=a.gridSpacing,t=a.snapToGridCenter?.5:0};var i=function(a){return a.scratch("_gridGuide")||a.scratch("_gridGuide",{}),a.scratch("_gridGuide")};return n.snapPos=function(a){var s=t?Math.floor(a.x/e):Math.round(a.x/e),l=t?Math.floor(a.y/e):Math.round(a.y/e),u={x:(s+t)*e,y:(l+t)*e};return u},n.snapNode=function(a){var s=a.position(),l=n.snapPos(s);a.position(l)},n.snapNodesTopDown=function(a){r.startBatch(),a.union(a.descendants()).filter(":childless").positions(function(s,l){typeof s=="number"&&(s=l);var u=s.position();return n.snapPos(u)}),r.endBatch()},n.onFreeNode=function(a){var s,l=a.target||a.cyTarget;l.selected()?s=a.cy.$(":selected"):s=l,n.snapNodesTopDown(s)},n.recoverSnapNode=function(a){var s=i(a).snap;s&&a.position(s.oldPos)},n},WG=function(r,e){var t={},n,i,a,s;t.onTapStartNode=function(f){if(!(f.originalEvent.altKey||f.originalEvent.ctrlKey||f.originalEvent.metaKey||f.originalEvent.shiftKey)){var h=f.target||f.cyTarget;h.selected()?i=f.cy.$(":selected"):i=h,a=f.position||f.cyPosition,h.grabbable()&&!h.locked()&&(n=h,n.lock(),r.on("tapdrag",c),r.on("tapend",l))}};var l=function(f){r.off("tapdrag",c),r.off("tapend",l),n.unlock(),f.preventDefault()},u=function(){return{x:s.x-a.x,y:s.y-a.y}},c=function(f){n.position(),s=f.position||f.cyPosition,s=e.snapPos(s);var h=u();if(h.x!=0||h.y!=0){n.unlock();var d=i.union(i.descendants());d.filter(":childless").positions(function(p,g){typeof p=="number"&&(p=g);var y=p.position();return e.snapPos({x:y.x+h.x,y:y.y+h.y})}),a=s,n.lock(),n.trigger("drag")}};return t},qG=function(r,e,t){var n=r,i=function(p){n=p},a=function(p){var g=p.getBoundingClientRect();return{top:g.top+document.documentElement.scrollTop,left:g.left+document.documentElement.scrollLeft}},s=document.createElement("canvas"),l=e.container(),u=s.getContext("2d");l.appendChild(s);var c=function(){s.height=0,s.width=0,s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.zIndex=n.gridStackOrder};c();var f=function(){var p=e.zoom(),g=e.width(),y=e.height(),m=n.gridSpacing*p,v=e.pan(),O=v.x%m,b=v.y%m;u.strokeStyle=n.gridColor,u.lineWidth=n.lineWidth;var w='	<svg width="'+g+'" height="'+y+`" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern id="horizontalLines" width="`+m+'" height="'+m+`" patternUnits="userSpaceOnUse">
                    <path d="M `+m+" 0 L 0 0 0 "+0+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
                </pattern>
                <pattern id="verticalLines" width="`+m+'" height="'+m+`" patternUnits="userSpaceOnUse">
                    <path d="M `+0+" 0 L 0 0 0 "+m+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(`+0+", "+b+`)" />
            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+O+", "+0+`)" />
        </svg>
`,x=new Image;w=encodeURIComponent(w),x.onload=function(){h(),u.drawImage(x,0,0)},x.src="data:image/svg+xml,"+w},h=function(){var p=e.width(),g=e.height();u.clearRect(0,0,p,g)},d=t(function(){s.height=e.height(),s.width=e.width(),s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.zIndex=n.gridStackOrder,setTimeout(function(){s.height=e.height(),s.width=e.width();var p=a(s),g=a(l);s.style.top=-(p.top-g.top),s.style.left=-(p.left-g.left),f()},0)},250);return{initCanvas:d,resizeCanvas:d,resetCanvas:c,clearCanvas:h,drawGrid:f,changeOptions:i,sizeCanvas:f}},YG=function(r){var e=function(a){r=Number(a.gridSpacing)},t=function(a){return a.scratch("_gridGuide")||a.scratch("_gridGuide",{}),a.scratch("_gridGuide")};function n(a){var s=a.width(),l=a.height(),u=Math.round((s-r)/(r*2))*(r*2),c=Math.round((l-r)/(r*2))*(r*2);u=u>0?u+r:r,c=c>0?c+r:r,(s!=u||l!=c)&&(a.style({width:u,height:c}),t(a).resize={oldWidth:s,oldHeight:l})}function i(a){var s=t(a).resize;s&&a.style({width:s.oldWidth,height:s.oldHeight})}return{resizeNode:n,recoverNodeDimensions:i,changeOptions:e}},XG=function(r,e,t,n,i,a,s,l){var u=function(Z){return function(N){Z(N)}},c={snapToGridDuringDrag:new u(g),resize:new u(v),snapToGridOnRelease:new u(x),drawGrid:new u(T),guidelines:new u(A),parentPadding:new u(Y)};function f(Z,N){return function(V){var z=V.target||V.cyTarget;(!z.is(":parent")||N)&&Z(z)}}function h(Z){return function(){r.nodes().not(":parent").each(function(N,V){typeof N=="number"&&(N=V),Z(N)})}}function d(Z){return function(){r.nodes().each(function(N,V){typeof N=="number"&&(N=V),Z(N)})}}function p(Z){return Z?"on":"off"}function g(Z){r[p(Z)]("tapstart","node",n.onTapStartNode)}var y=h(t.resizeNode);f(t.resizeNode);var m=h(t.recoverNodeDimensions);function v(Z){r[p(Z)]("ready",y),Z?y():m()}var O=d(e.snapNodesTopDown),b=d(e.recoverSnapNode),w=f(e.snapNode,!0);function x(Z){r[p(Z)]("add","node",w),r[p(Z)]("ready",O),r[p(Z)]("free","node",e.onFreeNode),Z?O():b()}var $=function(){W.zoomDash&&i.drawGrid()},S=function(){W.panGrid&&i.drawGrid()};function T(Z){r[p(Z)]("zoom",$),r[p(Z)]("pan",S),Z?(i.initCanvas(),r.on("resize",i.resizeCanvas)):(i.clearCanvas(),i.resetCanvas(),r.off("resize",i.resizeCanvas))}var k=null,E=function(Z){var N=Z.target||Z.cyTarget,V=N.selected()?Z.cy.$(":selected"):N;k=a.getTopMostNodes(V.nodes()),a.lines.init(k)},P=function(Z){this.id()==k.id()&&(a.lines.update(k),W.snapToAlignmentLocationDuringDrag&&a.lines.snapToAlignmentLocation(k))},C=function(Z){W.snapToAlignmentLocationOnRelease&&a.lines.snapToAlignmentLocation(k),a.lines.destroy(),k=null},M=function(Z){a.lines.resize()},D=function(Z){a.getMousePos(Z)},I=function(Z){k&&(a.setMousePos(r.pan()),a.lines.init(k))};function A(Z){Z?(a.resizeCanvas(),r.on("tapstart","node",D),r.on("grab",E),r.on("pan",I),r.on("drag","node",P),r.on("free",C),window.addEventListener("resize",M)):(r.off("tapstart","node",D),r.off("grab",E),r.off("pan",I),r.off("drag","node",P),r.off("free",C),a.resetCanvas(),window.removeEventListener("resize",M))}var Q=function(Z){s.setPaddingOfParent(r.nodes(":parent"),Z)},B=function(Z){s.setPaddingOfParent(Z,!0)};function Y(Z){Q(Z),r[p(Z)]("ready",Q),r[p(Z)]("add","node:parent",f(B,!0))}var X={},W,q={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function F(Z){W=Object.extend({},Z),Z.guidelines=Z.initPosAlignment||Z.distributionGuidelines||Z.geometricGuideline;for(var N in Z)if(X[N]!=Z[N])if(c.hasOwnProperty(N))c[N](Z[N]);else for(var V in q){var z=q[V];z.indexOf(N)>=0&&(V=="drawGrid"&&(i.changeOptions(Z),Z.drawGrid&&i.resizeCanvas()),V=="snapToGridOnRelease"&&(e.changeOptions(Z),Z.snapToGridOnRelease&&O()),V=="guidelines"&&a.changeOptions(Z),V=="resize"&&(t.changeOptions(Z),Z.resize&&y()),V=="parentPadding"&&s.changeOptions(Z))}X=Object.extend({},X,Z)}return{init:F,syncWithOptions:F}},VG=GG,Ot=0,nt=1;function Xr(r,e,t,n,i,a){this._color=r,this.key=e,this.value=t,this.left=n,this.right=i,this._count=a}function En(r){return new Xr(r._color,r.key,r.value,r.left,r.right,r._count)}function $i(r,e){return new Xr(r,e.key,e.value,e.left,e.right,e._count)}function Tt(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function Pi(r,e){this._compare=r,this.root=e}var Tr=Pi.prototype;Object.defineProperty(Tr,"keys",{get:function(){var r=[];return this.forEach(function(e,t){r.push(e)}),r}});Object.defineProperty(Tr,"values",{get:function(){var r=[];return this.forEach(function(e,t){r.push(t)}),r}});Object.defineProperty(Tr,"length",{get:function(){return this.root?this.root._count:0}});Tr.insert=function(r,e){for(var t=this._compare,n=this.root,i=[],a=[];n;){var s=t(r,n.key);i.push(n),a.push(s),s<=0?n=n.left:n=n.right}i.push(new Xr(Ot,r,e,null,null,1));for(var l=i.length-2;l>=0;--l){var n=i[l];a[l]<=0?i[l]=new Xr(n._color,n.key,n.value,i[l+1],n.right,n._count+1):i[l]=new Xr(n._color,n.key,n.value,n.left,i[l+1],n._count+1)}for(var l=i.length-1;l>1;--l){var u=i[l-1],n=i[l];if(u._color===nt||n._color===nt)break;var c=i[l-2];if(c.left===u)if(u.left===n){var f=c.right;if(f&&f._color===Ot)u._color=nt,c.right=$i(nt,f),c._color=Ot,l-=1;else{if(c._color=Ot,c.left=u.right,u._color=nt,u.right=c,i[l-2]=u,i[l-1]=n,Tt(c),Tt(u),l>=3){var h=i[l-3];h.left===c?h.left=u:h.right=u}break}}else{var f=c.right;if(f&&f._color===Ot)u._color=nt,c.right=$i(nt,f),c._color=Ot,l-=1;else{if(u.right=n.left,c._color=Ot,c.left=n.right,n._color=nt,n.left=u,n.right=c,i[l-2]=n,i[l-1]=u,Tt(c),Tt(u),Tt(n),l>=3){var h=i[l-3];h.left===c?h.left=n:h.right=n}break}}else if(u.right===n){var f=c.left;if(f&&f._color===Ot)u._color=nt,c.left=$i(nt,f),c._color=Ot,l-=1;else{if(c._color=Ot,c.right=u.left,u._color=nt,u.left=c,i[l-2]=u,i[l-1]=n,Tt(c),Tt(u),l>=3){var h=i[l-3];h.right===c?h.right=u:h.left=u}break}}else{var f=c.left;if(f&&f._color===Ot)u._color=nt,c.left=$i(nt,f),c._color=Ot,l-=1;else{if(u.left=n.right,c._color=Ot,c.right=n.left,n._color=nt,n.right=u,n.left=c,i[l-2]=n,i[l-1]=u,Tt(c),Tt(u),Tt(n),l>=3){var h=i[l-3];h.right===c?h.right=n:h.left=n}break}}}return i[0]._color=nt,new Pi(t,i[0])};function bd(r,e){if(e.left){var t=bd(r,e.left);if(t)return t}var t=r(e.key,e.value);if(t)return t;if(e.right)return bd(r,e.right)}function wd(r,e,t,n){var i=e(r,n.key);if(i<=0){if(n.left){var a=wd(r,e,t,n.left);if(a)return a}var a=t(n.key,n.value);if(a)return a}if(n.right)return wd(r,e,t,n.right)}function xd(r,e,t,n,i){var a=t(r,i.key),s=t(e,i.key),l;if(a<=0&&(i.left&&(l=xd(r,e,t,n,i.left),l)||s>0&&(l=n(i.key,i.value),l)))return l;if(s>0&&i.right)return xd(r,e,t,n,i.right)}Tr.forEach=function(e,t,n){if(!!this.root)switch(arguments.length){case 1:return bd(e,this.root);case 2:return wd(t,this._compare,e,this.root);case 3:return this._compare(t,n)>=0?void 0:xd(t,n,this._compare,e,this.root)}};Object.defineProperty(Tr,"begin",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.left;return new Gr(this,r)}});Object.defineProperty(Tr,"end",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.right;return new Gr(this,r)}});Tr.at=function(r){if(r<0)return new Gr(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(r<e.left._count){e=e.left;continue}r-=e.left._count}if(!r)return new Gr(this,t);if(r-=1,e.right){if(r>=e.right._count)break;e=e.right}else break}return new Gr(this,[])};Tr.ge=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var a=e(r,t.key);n.push(t),a<=0&&(i=n.length),a<=0?t=t.left:t=t.right}return n.length=i,new Gr(this,n)};Tr.gt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var a=e(r,t.key);n.push(t),a<0&&(i=n.length),a<0?t=t.left:t=t.right}return n.length=i,new Gr(this,n)};Tr.lt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var a=e(r,t.key);n.push(t),a>0&&(i=n.length),a<=0?t=t.left:t=t.right}return n.length=i,new Gr(this,n)};Tr.le=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var a=e(r,t.key);n.push(t),a>=0&&(i=n.length),a<0?t=t.left:t=t.right}return n.length=i,new Gr(this,n)};Tr.find=function(r){for(var e=this._compare,t=this.root,n=[];t;){var i=e(r,t.key);if(n.push(t),i===0)return new Gr(this,n);i<=0?t=t.left:t=t.right}return new Gr(this,[])};Tr.remove=function(r){var e=this.find(r);return e?e.remove():this};Tr.get=function(r){for(var e=this._compare,t=this.root;t;){var n=e(r,t.key);if(n===0)return t.value;n<=0?t=t.left:t=t.right}};function Gr(r,e){this.tree=r,this._stack=e}var ln=Gr.prototype;Object.defineProperty(ln,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(ln,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});ln.clone=function(){return new Gr(this.tree,this._stack.slice())};function Ay(r,e){r.key=e.key,r.value=e.value,r.left=e.left,r.right=e.right,r._color=e._color,r._count=e._count}function FG(r){for(var e,t,n,i,a=r.length-1;a>=0;--a){if(e=r[a],a===0){e._color=nt;return}if(t=r[a-1],t.left===e){if(n=t.right,n.right&&n.right._color===Ot){if(n=t.right=En(n),i=n.right=En(n.right),t.right=n.left,n.left=t,n.right=i,n._color=t._color,e._color=nt,t._color=nt,i._color=nt,Tt(t),Tt(n),a>1){var s=r[a-2];s.left===t?s.left=n:s.right=n}r[a-1]=n;return}else if(n.left&&n.left._color===Ot){if(n=t.right=En(n),i=n.left=En(n.left),t.right=i.left,n.left=i.right,i.left=t,i.right=n,i._color=t._color,t._color=nt,n._color=nt,e._color=nt,Tt(t),Tt(n),Tt(i),a>1){var s=r[a-2];s.left===t?s.left=i:s.right=i}r[a-1]=i;return}if(n._color===nt)if(t._color===Ot){t._color=nt,t.right=$i(Ot,n);return}else{t.right=$i(Ot,n);continue}else{if(n=En(n),t.right=n.left,n.left=t,n._color=t._color,t._color=Ot,Tt(t),Tt(n),a>1){var s=r[a-2];s.left===t?s.left=n:s.right=n}r[a-1]=n,r[a]=t,a+1<r.length?r[a+1]=e:r.push(e),a=a+2}}else{if(n=t.left,n.left&&n.left._color===Ot){if(n=t.left=En(n),i=n.left=En(n.left),t.left=n.right,n.right=t,n.left=i,n._color=t._color,e._color=nt,t._color=nt,i._color=nt,Tt(t),Tt(n),a>1){var s=r[a-2];s.right===t?s.right=n:s.left=n}r[a-1]=n;return}else if(n.right&&n.right._color===Ot){if(n=t.left=En(n),i=n.right=En(n.right),t.left=i.right,n.right=i.left,i.right=t,i.left=n,i._color=t._color,t._color=nt,n._color=nt,e._color=nt,Tt(t),Tt(n),Tt(i),a>1){var s=r[a-2];s.right===t?s.right=i:s.left=i}r[a-1]=i;return}if(n._color===nt)if(t._color===Ot){t._color=nt,t.left=$i(Ot,n);return}else{t.left=$i(Ot,n);continue}else{if(n=En(n),t.left=n.right,n.right=t,n._color=t._color,t._color=Ot,Tt(t),Tt(n),a>1){var s=r[a-2];s.right===t?s.right=n:s.left=n}r[a-1]=n,r[a]=t,a+1<r.length?r[a+1]=e:r.push(e),a=a+2}}}}ln.remove=function(){var r=this._stack;if(r.length===0)return this.tree;var e=new Array(r.length),t=r[r.length-1];e[e.length-1]=new Xr(t._color,t.key,t.value,t.left,t.right,t._count);for(var n=r.length-2;n>=0;--n){var t=r[n];t.left===r[n+1]?e[n]=new Xr(t._color,t.key,t.value,e[n+1],t.right,t._count):e[n]=new Xr(t._color,t.key,t.value,t.left,e[n+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var i=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var a=e[i-1];e.push(new Xr(t._color,a.key,a.value,t.left,t.right,t._count)),e[i-1].key=t.key,e[i-1].value=t.value;for(var n=e.length-2;n>=i;--n)t=e[n],e[n]=new Xr(t._color,t.key,t.value,t.left,e[n+1],t._count);e[i-1].left=e[i]}if(t=e[e.length-1],t._color===Ot){var s=e[e.length-2];s.left===t?s.left=null:s.right===t&&(s.right=null),e.pop();for(var n=0;n<e.length;++n)e[n]._count--;return new Pi(this.tree._compare,e[0])}else if(t.left||t.right){t.left?Ay(t,t.left):t.right&&Ay(t,t.right),t._color=nt;for(var n=0;n<e.length-1;++n)e[n]._count--;return new Pi(this.tree._compare,e[0])}else{if(e.length===1)return new Pi(this.tree._compare,null);for(var n=0;n<e.length;++n)e[n]._count--;var l=e[e.length-2];FG(e),l.left===t?l.left=null:l.right=null}return new Pi(this.tree._compare,e[0])};Object.defineProperty(ln,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(ln,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(ln,"index",{get:function(){var r=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(r=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++r,e[n].left&&(r+=e[n].left._count));return r},enumerable:!0});ln.next=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.right)for(e=e.right;e;)r.push(e),e=e.left;else for(r.pop();r.length>0&&r[r.length-1].right===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(ln,"hasNext",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].right)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].left===r[e])return!0;return!1}});ln.update=function(r){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new Xr(n._color,n.key,r,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)n=e[i],n.left===e[i+1]?t[i]=new Xr(n._color,n.key,n.value,t[i+1],n.right,n._count):t[i]=new Xr(n._color,n.key,n.value,n.left,t[i+1],n._count);return new Pi(this.tree._compare,t[0])};ln.prev=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.left)for(e=e.left;e;)r.push(e),e=e.right;else for(r.pop();r.length>0&&r[r.length-1].left===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(ln,"hasPrev",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].left)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].right===r[e])return!0;return!1}});function jG(r,e){return r<e?-1:r>e?1:0}function GG(r){return new Pi(r||jG,null)}var UG=function(r,e,t){var n=VG,i=r,a=function(A){i=A,i.guidelinesTolerance==0&&(i.guidelinesTolerance=.001)},s=function(A){var Q=A.getBoundingClientRect();return{top:Q.top+document.documentElement.scrollTop,left:Q.left+document.documentElement.scrollLeft}},l=t(function(){u(),c.height=e.height(),c.width=e.width(),c.style.position="absolute",c.style.top=0,c.style.left=0,c.style.zIndex=i.guidelinesStackOrder,setTimeout(function(){c.height=e.height(),c.width=e.width();var A=s(c),Q=s(f);c.style.top=-(A.top-Q.top),c.style.left=-(A.left-Q.left)},0)},250),u=function(){var A=e.width(),Q=e.height();h.clearRect(0,0,A,Q)},c=document.createElement("canvas"),f=e.container(),h=c.getContext("2d");f.appendChild(c);var d=function(){c.height=0,c.width=0,c.style.position="absolute",c.style.top=0,c.style.left=0,c.style.zIndex=i.guidelinesStackOrder};d();var p=null,g=null,y,m,v={},O={},b={h:null,v:null};v.getDims=function(A){var Q=A.renderedPosition(),B=A.renderedWidth(),Y=A.renderedHeight(),X={left:Number(A.renderedStyle("padding-left").replace("px","")),right:Number(A.renderedStyle("padding-right").replace("px","")),top:Number(A.renderedStyle("padding-top").replace("px","")),bottom:Number(A.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:Q.x,left:Math.round(Q.x-(X.left+B/2)),right:Math.round(Q.x+(X.right+B/2))},vertical:{center:Q.y,top:Math.round(Q.y-(X.top+Y/2)),bottom:Math.round(Q.y+(X.bottom+Y/2))}}},v.init=function(A){p=n(),g=n(),y||(O.x=e.pan("x"),O.y=e.pan("y"),y=A.renderedPosition());var Q=e.nodes(":visible");m=A.union(A.ancestors()),m=m.union(A.descendants()),Q.not(m).each(function(B,Y){typeof B=="number"&&(B=Y);var X=v.getDims(B);["left","center","right"].forEach(function(W){var q=X.horizontal[W];g.get(q)?g.get(q).push(B):g=g.insert(q,[B])}),["top","center","bottom"].forEach(function(W){var q=X.vertical[W];p.get(q)?p.get(q).push(B):p=p.insert(q,[B])})}),h.lineWidth=i.lineWidth,v.update(A)},v.destroy=function(){v.clear(),p=null,g=null,y=null,$={},b={h:null,v:null},I&&(I.unlock(),I=void 0)},v.clear=u,v.drawLine=function(A,Q,B,Y){h.setLineDash(Y),h.beginPath(),h.moveTo(A.x,A.y),h.lineTo(Q.x,Q.y),h.strokeStyle=B,h.stroke()},v.drawArrow=function(A,Q){Q=="right"?(h.setLineDash([]),h.beginPath(),h.moveTo(A.x-5,A.y-5),h.lineTo(A.x,A.y),h.lineTo(A.x-5,A.y+5),h.stroke()):Q=="left"?(h.setLineDash([]),h.beginPath(),h.moveTo(A.x+5,A.y-5),h.lineTo(A.x,A.y),h.lineTo(A.x+5,A.y+5),h.stroke()):Q=="top"?(h.setLineDash([]),h.beginPath(),h.moveTo(A.x-5,A.y+5),h.lineTo(A.x,A.y),h.lineTo(A.x+5,A.y+5),h.stroke()):Q=="bottom"&&(h.setLineDash([]),h.beginPath(),h.moveTo(A.x-5,A.y-5),h.lineTo(A.x,A.y),h.lineTo(A.x+5,A.y-5),h.stroke())},v.drawCross=function(A){h.setLineDash([]),h.beginPath(),h.moveTo(A.x-5,A.y+5),h.lineTo(A.x+5,A.y-5),h.moveTo(A.x-5,A.y-5),h.lineTo(A.x+5,A.y+5),h.stroke()};var w=function(A,Q){for(var B=A[0],Y=v.getDims(B)[Q].center,X=A[0],W=v.getDims(X)[Q].center,q=0;q<A.length;q++){var F=A[q];v.getDims(F)[Q].center<Y&&(Y=v.getDims(F)[Q].center,B=F),v.getDims(F)[Q].center>W&&(W=v.getDims(F)[Q].center,X=F)}if(Q=="horizontal")var Z=(Y+W)/2<v.getDims(A[1])[Q].center?W+(.5*X.width()+i.guidelinesStyle.distGuidelineOffset)*e.zoom():Y-(.5*B.width()+i.guidelinesStyle.distGuidelineOffset)*e.zoom();else var Z=(Y+W)/2<v.getDims(A[1])[Q].center?W+(.5*X.height()+i.guidelinesStyle.distGuidelineOffset)*e.zoom():Y-(.5*B.height()+i.guidelinesStyle.distGuidelineOffset)*e.zoom();return Z};v.horizontalDistribution=function(A){var Q=null,B=null,Y=v.getDims(A),X=Y.horizontal.center,W=Y.vertical.center;if(g.forEach(function(Z,N){for(var V=0;V<N.length;V++){var z=N[V],j=v.getDims(z);if(Math.abs(j.vertical.center-Y.vertical.center)<i.guidelinesStyle.range*e.zoom()&&j.horizontal.right==Z&&Y.horizontal.left-j.horizontal.right>i.guidelinesStyle.minDistRange){var G=Math.round(2*X)-Z;g.forEach(function(U,K){for(var de=0;de<K.length;de++){var Oe=K[de];Math.abs(v.getDims(Oe).vertical.center-W)<i.guidelinesStyle.range*e.zoom()&&Math.abs(G-v.getDims(Oe).horizontal.left)<2*i.guidelinesTolerance&&(Q=z,B=Oe)}},G-i.guidelinesTolerance,G+i.guidelinesTolerance)}}},X-i.guidelinesStyle.range*e.zoom(),X),Q){b.hd=X-(v.getDims(B).horizontal.left+v.getDims(Q).horizontal.right)/2,(!i.geometricGuideline||b.h==null||Math.abs(b.h)>Math.abs(b.hd))&&(b.h=b.hd);var q=w([Q,A,B],"vertical");v.drawLine({x:v.getDims(Q).horizontal.right,y:q},{x:Y.horizontal.left,y:q},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(B).horizontal.left,y:q},{x:Y.horizontal.right,y:q},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(Q).horizontal.right,y:q},{x:v.getDims(Q).horizontal.right,y:v.getDims(Q).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(B).horizontal.left,y:q},{x:v.getDims(B).horizontal.left,y:v.getDims(B).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:Y.horizontal.left,y:q},{x:Y.horizontal.left,y:W},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:Y.horizontal.right,y:q},{x:Y.horizontal.right,y:W},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(Q).horizontal.right,y:q},"left"),v.drawArrow({x:Y.horizontal.left,y:q},"right"),v.drawArrow({x:Y.horizontal.right,y:q},"left"),v.drawArrow({x:v.getDims(B).horizontal.left,y:q},"right")}else{var F=v.horizontalDistributionNext(A,"left");F||v.horizontalDistributionNext(A,"right")}},v.verticalDistribution=function(A){var Q=null,B=null,Y=v.getDims(A),X=Y.horizontal.center,W=Y.vertical.center;if(p.forEach(function(Z,N){for(var V=0;V<N.length;V++){var z=N[V],j=v.getDims(z);if(Math.abs(j.horizontal.center-Y.horizontal.center)<i.guidelinesStyle.range*e.zoom()&&j.vertical.bottom==Z&&Y.vertical.top-j.vertical.bottom>i.guidelinesStyle.minDistRange){var G=Math.round(2*W-Z);p.forEach(function(U,K){for(var de=0;de<K.length;de++){var Oe=K[de];Math.abs(v.getDims(Oe).horizontal.center-X)<i.guidelinesStyle.range*e.zoom()&&Math.abs(G-v.getDims(Oe).vertical.top)<2*i.guidelinesTolerance&&(Q=z,B=Oe)}},G-i.guidelinesTolerance,G+i.guidelinesTolerance)}}},W-i.guidelinesStyle.range*e.zoom(),W),Q){b.vd=W-(v.getDims(Q).vertical.bottom+v.getDims(B).vertical.top)/2,(!i.geometricGuideline||b.v==null||Math.abs(b.v)>Math.abs(b.vd))&&(b.v=b.vd);var q=w([Q,A,B],"horizontal");v.drawLine({y:v.getDims(Q).vertical.bottom,x:q},{y:Y.vertical.top,x:q},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(B).vertical.top,x:q},{y:Y.vertical.bottom,x:q},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(Q).vertical.bottom,x:q},{y:v.getDims(Q).vertical.bottom,x:v.getDims(Q).horizontal.center},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(B).vertical.top,x:q},{y:v.getDims(B).vertical.top,x:v.getDims(B).horizontal.center},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:Y.vertical.bottom,x:q},{y:Y.vertical.bottom,x:X},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:Y.vertical.top,x:q},{y:Y.vertical.top,x:X},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawArrow({x:q,y:v.getDims(Q).vertical.bottom},"top"),v.drawArrow({x:q,y:Y.vertical.top},"bottom"),v.drawArrow({x:q,y:v.getDims(B).vertical.top},"bottom"),v.drawArrow({x:q,y:Y.vertical.bottom},"top")}else{var F=v.verticalDistributionNext(A,"below");F||v.verticalDistributionNext(A,"above")}},v.searchForLine=function(A,Q){var B,Y,X,W,q,F,Z,N=v.getDims(Q)[A],V=Number.MAX_SAFE_INTEGER;A=="horizontal"?(F=g,W="y",q="x",b.h=null):(F=p,W="x",q="y",b.v=null),X=Q.renderedPosition(W);for(var z in N)if(B=N[z],F.forEach(function(j,G){for(var U=0;U<G.length;U++){var K=G[U];if(i.centerToEdgeAlignment||z!="center"&&K.renderedPosition(q)!=j||z=="center"&&K.renderedPosition(q)==j){var de=Math.abs(X-K.renderedPosition(W));de<V&&de<i.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(Y=K,V=de,Z=j)}}},B-Number(i.guidelinesTolerance),B+Number(i.guidelinesTolerance)),Y){V=v.getDims(Q)[A][z],A=="horizontal"?(b.h=V-Z,v.drawLine({x:V,y:Q.renderedPosition("y")},{x:V,y:Y.renderedPosition("y")},i.guidelinesStyle.strokeStyle,i.guidelinesStyle.lineDash)):(b.v=V-Z,v.drawLine({x:Q.renderedPosition("x"),y:V},{x:Y.renderedPosition("x"),y:V},i.guidelinesStyle.strokeStyle,i.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(A,Q){var B=null,Y=null,X=v.getDims(A),W=X.horizontal.center,q=X.vertical.center,F="right",Z="left",N=W;if(Q=="left"){F="left",Z="right";var N=W-i.guidelinesStyle.range*e.zoom()}var V={left:function(z,j){return j-z>i.guidelinesStyle.minDistRange},right:function(z,j){return z-j>i.guidelinesStyle.minDistRange}};return g.forEach(function(z,j){for(var G=0;G<j.length;G++){var U=j[G],K=v.getDims(U);if(Math.abs(K.vertical.center-X.vertical.center)<i.guidelinesStyle.range*e.zoom()&&K.horizontal[Z]==z&&V[Q](K.horizontal[Z],X.horizontal[F])){var de=K.horizontal[F]-(X.horizontal[F]-z);g.forEach(function(Oe,pe){for(var he=0;he<pe.length;he++){var me=pe[he];Math.abs(v.getDims(me).vertical.center-q)<i.guidelinesStyle.range*e.zoom()&&Math.abs(de-v.getDims(me).horizontal[Z])<2*i.guidelinesTolerance&&(B=U,Y=me)}},de-i.guidelinesTolerance,de+i.guidelinesTolerance)}}},N,N+i.guidelinesStyle.range*e.zoom()),B?(b.hd=v.getDims(A).horizontal[F]-v.getDims(B).horizontal[Z]-(v.getDims(B).horizontal[F]-v.getDims(Y).horizontal[Z]),(!i.geometricGuideline||b.h==null||Math.abs(b.h)>Math.abs(b.hd))&&(b.h=b.hd),v.drawDH(A,B,Y,Q),!0):(i.geometricGuideline||(b.h=null),!1)},v.drawDH=function(A,Q,B,Y){var X=v.getDims(A).vertical.center,W="right",q="left";Y=="left"&&(W="left",q="right");var F=w([Q,A,B],"vertical");v.drawLine({x:v.getDims(Q).horizontal[q],y:F},{x:v.getDims(A).horizontal[W],y:F},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(A).horizontal[W],y:F},{x:v.getDims(A).horizontal[W],y:X},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(B).horizontal[q],y:F},{x:v.getDims(Q).horizontal[W],y:F},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(B).horizontal[q],y:F},{x:v.getDims(B).horizontal[q],y:v.getDims(B).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(Q).horizontal[q],y:F},{x:v.getDims(Q).horizontal[q],y:v.getDims(Q).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(Q).horizontal[W],y:F},{x:v.getDims(Q).horizontal[W],y:v.getDims(Q).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(A).horizontal[W],y:F},q),v.drawArrow({x:v.getDims(Q).horizontal[q],y:F},W),v.drawArrow({x:v.getDims(Q).horizontal[W],y:F},q),v.drawArrow({x:v.getDims(B).horizontal[q],y:F},W)},v.verticalDistributionNext=function(A,Q){var B=null,Y=null,X=v.getDims(A),W=X.horizontal.center,q=X.vertical.center,F="top",Z="bottom",N=q-i.guidelinesStyle.range*e.zoom();Q=="above"&&(F="bottom",Z="top",N=q);var V={below:function(z,j){return j-z>i.guidelinesStyle.minDistRange},above:function(z,j){return z-j>i.guidelinesStyle.minDistRange}};return p.forEach(function(z,j){for(var G=0;G<j.length;G++){var U=j[G],K=v.getDims(U);if(Math.abs(K.horizontal.center-X.horizontal.center)<i.guidelinesStyle.range*e.zoom()&&K.vertical[Z]==z&&V[Q](K.vertical[Z],X.vertical[F])){var de=K.vertical[F]-(X.vertical[F]-z);p.forEach(function(Oe,pe){for(var he=0;he<pe.length;he++){var me=pe[he];Math.abs(v.getDims(me).horizontal.center-W)<i.guidelinesStyle.range*e.zoom()&&Math.abs(de-v.getDims(me).vertical[Z])<2*i.guidelinesTolerance&&(B=U,Y=me)}},de-i.guidelinesTolerance,de+i.guidelinesTolerance)}}},N,N+i.guidelinesStyle.range*e.zoom()),B?(b.vd=v.getDims(A).vertical[F]-v.getDims(B).vertical[Z]-(v.getDims(B).vertical[F]-v.getDims(Y).vertical[Z]),(!i.geometricGuideline||b.v==null||Math.abs(b.v)>Math.abs(b.vd))&&(b.v=b.vd),v.drawDV(A,B,Y,Q),!0):(i.geometricGuideline||(b.v=null),!1)},v.drawDV=function(A,Q,B,Y){var X=v.getDims(A),W=X.horizontal.center,q="top",F="bottom";Y=="above"&&(q="bottom",F="top");var Z=w([Q,A,B],"horizontal");v.drawLine({x:Z,y:X.vertical[q]},{x:Z,y:v.getDims(Q).vertical[F]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:Z,y:v.getDims(Q).vertical[q]},{x:Z,y:v.getDims(B).vertical[F]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:W,y:X.vertical[q]},{x:Z,y:X.vertical[q]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(Q).horizontal.center,y:v.getDims(Q).vertical[F]},{x:Z,y:v.getDims(Q).vertical[F]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(Q).horizontal.center,y:v.getDims(Q).vertical[q]},{x:Z,y:v.getDims(Q).vertical[q]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:Z,y:v.getDims(B).vertical[F]},{x:v.getDims(B).horizontal.center,y:v.getDims(B).vertical[F]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawArrow({x:Z,y:X.vertical[q]},F),v.drawArrow({x:Z,y:v.getDims(Q).vertical[F]},q),v.drawArrow({x:Z,y:v.getDims(Q).vertical[q]},F),v.drawArrow({x:Z,y:v.getDims(B).vertical[F]},q)},v.update=function(A){v.clear(),i.initPosAlignment&&E(A),A.each(function(Q,B){typeof Q=="number"&&(Q=B),i.geometricGuideline&&(v.searchForLine("horizontal",Q),v.searchForLine("vertical",Q)),i.distributionGuidelines&&(v.horizontalDistribution(Q),v.verticalDistribution(Q))})},v.resize=function(){l()};function x(A){for(var Q={},B=0;B<A.length;B++)Q[A[B].id()]=!0;var Y=A.filter(function(X,W){typeof X=="number"&&(X=W);for(var q=X.parent()[0];q!=null;){if(Q[q.id()])return!1;q=q.parent()[0]}return!0});return Y}var $={},S={},T=function(A){$=A.renderedPosition||A.cyRenderedPosition,S.x=$.x,S.y=$.y},k=function(A){S.x+=A.x-O.x,S.y+=A.y-O.y,O.x=A.x,O.y=A.y},E=function(A){var Q=A.renderedPosition();Math.abs(y.y-Q.y)<i.guidelinesTolerance?(v.drawLine({x:S.x,y:$.y},{x:Q.x,y:$.y},i.guidelinesStyle.initPosAlignmentColor,i.guidelinesStyle.initPosAlignmentLine),$.y==S.y?v.drawCross(S):v.drawCross($)):Math.abs(y.x-Q.x)<i.guidelinesTolerance&&(v.drawLine({x:$.x,y:S.y},{x:$.x,y:Q.y},i.guidelinesStyle.initPosAlignmentColor,i.guidelinesStyle.initPosAlignmentLine),$.x==S.x?v.drawCross(S):v.drawCross($))};function P(A,Q){var B=x(Q),Y=B.union(B.descendants());Y.filter(":childless").forEach(function(X,W){typeof X=="number"&&(X=W);var q={x:A.x+X.renderedPosition("x"),y:A.y+X.renderedPosition("y")};X.renderedPosition(q)})}var C;e.on("tapstart","node",function(){C=this});var M,D={x:0,y:0};e.on("mousemove",function(A){M=A.renderedPosition||A.cyRenderedPosition,I&&I.each(function(Q,B){if(typeof Q=="number"&&(Q=B),Q.locked()&&(Math.abs(M.x-D.x)>2*i.guidelinesTolerance||Math.abs(M.y-D.y)>2*i.guidelinesTolerance)){Q.unlock();var Y={};Y.x=M.x-C.renderedPosition("x"),Y.y=M.y-C.renderedPosition("y"),P(Y,Q)}})});var I;return v.snapToAlignmentLocation=function(A){I=A,A.each(function(Q,B){typeof Q=="number"&&(Q=B);var Y=Q.renderedPosition();b.h&&(D=M,Y.x-=b.h,Q.renderedPosition(Y)),b.v&&(D=M,Y.y-=b.v,Q.renderedPosition(Y)),(b.v||b.h)&&(b.h=null,b.v=null,I.lock())}),v.update(A)},{changeOptions:a,lines:v,getTopMostNodes:x,getMousePos:T,setMousePos:k,resizeCanvas:l,resetCanvas:d}},HG=function(r,e){var t=r,n="_gridParentPadding",i;function a(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",i).style("padding-right",i).style("padding-top",i).style("padding-bottom",i).update()}function s(u){t=u,i=t.parentSpacing<0?t.gridSpacing:t.parentSpacing,a()}function l(u,c){c?u.addClass(n):u.removeClass(n)}return{changeOptions:s,setPaddingOfParent:l}},KG=function(r,e,t){function n(s,l,u){var c=s.union(s.descendants());c.filter(":childless").positions(function(f,h){typeof f=="number"&&(f=h);var d=f.position();return{x:d.x+l,y:d.y+u}})}function i(s){for(var l={},u=0;u<s.length;u++)l[s[u].id()]=!0;var c=s.filter(function(f,h){typeof f=="number"&&(f=h);for(var d=f.parent()[0];d!=null;){if(l[d.id()])return!1;d=d.parent()[0]}return!0});return c}if(t||r("collection","align",function(s,l,u){var c=i(this.nodes(":visible")),f=u||c[0];c=c.not(f),s=s||"none",l=l||"none";var h=0,d=0;l=="left"?h=-1:l=="right"&&(h=1),s=="top"?d=-1:s=="bottom"&&(d=1);for(var p=0;p<c.length;p++){var g=c[p],y=Object.assign({},g.position()),m=Object.assign({},g.position());l!="none"&&(m.x=f.position("x")+h*(f.outerWidth()-g.outerWidth())/2),s!="none"&&(m.y=f.position("y")+d*(f.outerHeight()-g.outerHeight())/2),n(g,m.x-y.x,m.y-y.y)}return this}),e.undoRedo){let s=function(){for(var u={},c=e.nodes(),f=0;f<c.length;f++){var h=c[f];u[h.id()]={x:h.position("x"),y:h.position("y")}}return u},l=function(u){var c={};return e.nodes().not(":parent").positions(function(f,h){typeof f=="number"&&(f=h),c[f.id()]={x:f.position("x"),y:f.position("y")};var d=u[f.id()];return{x:d.x,y:d.y}}),c};var a=e.undoRedo(null,!0);a.action("align",function(u){var c;return u.firstTime?(c=s(),u.nodes.align(u.horizontal,u.vertical,u.alignTo)):c=l(u),c},function(u){return l(u)})}},JG=function(){var r="Expected a function",e=Math.max,t=Date.now,n=t||function(){return new Date().getTime()};function i(s,l,u){var c,f,h,d,p,g,y,m=0,v=!1,O=!0;if(typeof s!="function")throw new TypeError(r);if(l=l<0?0:+l||0,u===!0){var b=!0;O=!1}else a(u)&&(b=!!u.leading,v="maxWait"in u&&e(+u.maxWait||0,l),O="trailing"in u?!!u.trailing:O);function w(){g&&clearTimeout(g),f&&clearTimeout(f),m=0,f=g=y=void 0}function x(k,E){E&&clearTimeout(E),f=g=y=void 0,k&&(m=n(),h=s.apply(p,c),!g&&!f&&(c=p=void 0))}function $(){var k=l-(n()-d);k<=0||k>l?x(y,f):g=setTimeout($,k)}function S(){x(O,g)}function T(){if(c=arguments,d=n(),p=this,y=O&&(g||!b),v===!1)var k=b&&!g;else{!f&&!b&&(m=d);var E=v-(d-m),P=E<=0||E>v;P?(f&&(f=clearTimeout(f)),m=d,h=s.apply(p,c)):f||(f=setTimeout(S,E))}return P&&g?g=clearTimeout(g):!g&&l!==v&&(g=setTimeout($,l)),k&&(P=!0,h=s.apply(p,c)),P&&!g&&!f&&(c=p=void 0),h}return T.cancel=w,T}function a(s){var l=typeof s;return!!s&&(l=="object"||l=="function")}return i}(),e8=JG;(function(r){(function(){var e=function(t){if(!t)return;var n=!1,i={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},a=zG,s=WG,l=qG,u=YG,c=XG,f=UG,h=HG,d=KG,p=e8;function g(y){return y.scratch("_gridGuide")||y.scratch("_gridGuide",{}),y.scratch("_gridGuide")}t("core","gridGuide",function(y){var m=this,v=g(m),O=Object.extend({},v.options||i,y);if(v.options=O,v.initialized){var S=v.eventsController;S.syncWithOptions(O)}else{var b,w,x,$,S,T,k;b=a(m,O.gridSpacing,O.snapToGridCenter),w=u(O.gridSpacing),x=s(m,b),$=l(O,m,p),T=f(O,m,p),k=h(O,m),S=c(m,b,w,x,$,T,k),d(t,m,n),n=!0,S.init(O),v.initialized=!0,v.eventsController=S}return this})};r.exports&&(r.exports=e),typeof cytoscape!="undefined"&&e(cytoscape)})()})(fx);var t8=fx.exports;const Dy="q-slider__marker-labels",r8=r=>({value:r}),n8=({marker:r})=>Bt("div",{key:r.value,style:r.style,class:r.classes},r.label),hx=[34,37,40,33,39,38],i8={...N$,...z$,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:r=>r>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},a8=["pan","update:modelValue","change"];function s8({updateValue:r,updatePosition:e,getDragging:t,formAttrs:n}){const{props:i,emit:a,slots:s,proxy:{$q:l}}=Cs(),u=B$(i,l),c=Y$(n),f=ft(!1),h=ft(!1),d=ft(!1),p=ft(!1),g=ce(()=>i.vertical===!0?"--v":"--h"),y=ce(()=>"-"+(i.switchLabelSide===!0?"switched":"standard")),m=ce(()=>i.vertical===!0?i.reverse===!0:i.reverse!==(l.lang.rtl===!0)),v=ce(()=>isNaN(i.innerMin)===!0||i.innerMin<i.min?i.min:i.innerMin),O=ce(()=>isNaN(i.innerMax)===!0||i.innerMax>i.max?i.max:i.innerMax),b=ce(()=>i.disable!==!0&&i.readonly!==!0&&v.value<O.value),w=ce(()=>{if(i.step===0)return we=>we;const ne=(String(i.step).trim().split(".")[1]||"").length;return we=>parseFloat(we.toFixed(ne))}),x=ce(()=>i.step===0?1:i.step),$=ce(()=>b.value===!0?i.tabindex||0:-1),S=ce(()=>i.max-i.min),T=ce(()=>O.value-v.value),k=ce(()=>K(v.value)),E=ce(()=>K(O.value)),P=ce(()=>i.vertical===!0?m.value===!0?"bottom":"top":m.value===!0?"right":"left"),C=ce(()=>i.vertical===!0?"height":"width"),M=ce(()=>i.vertical===!0?"width":"height"),D=ce(()=>i.vertical===!0?"vertical":"horizontal"),I=ce(()=>{const ne={role:"slider","aria-valuemin":v.value,"aria-valuemax":O.value,"aria-orientation":D.value,"data-step":i.step};return i.disable===!0?ne["aria-disabled"]="true":i.readonly===!0&&(ne["aria-readonly"]="true"),ne}),A=ce(()=>`q-slider q-slider${g.value} q-slider--${f.value===!0?"":"in"}active inline no-wrap `+(i.vertical===!0?"row":"column")+(i.disable===!0?" disabled":" q-slider--enabled"+(b.value===!0?" q-slider--editable":""))+(d.value==="both"?" q-slider--focus":"")+(i.label||i.labelAlways===!0?" q-slider--label":"")+(i.labelAlways===!0?" q-slider--label-always":"")+(u.value===!0?" q-slider--dark":"")+(i.dense===!0?" q-slider--dense q-slider--dense"+g.value:""));function Q(ne){const we="q-slider__"+ne;return`${we} ${we}${g.value} ${we}${g.value}${y.value}`}function B(ne){const we="q-slider__"+ne;return`${we} ${we}${g.value}`}const Y=ce(()=>{const ne=i.selectionColor||i.color;return"q-slider__selection absolute"+(ne!==void 0?` text-${ne}`:"")}),X=ce(()=>B("markers")+" absolute overflow-hidden"),W=ce(()=>B("track-container")),q=ce(()=>Q("pin")),F=ce(()=>Q("label")),Z=ce(()=>Q("text-container")),N=ce(()=>Q("marker-labels-container")+(i.markerLabelsClass!==void 0?` ${i.markerLabelsClass}`:"")),V=ce(()=>"q-slider__track relative-position no-outline"+(i.trackColor!==void 0?` bg-${i.trackColor}`:"")),z=ce(()=>{const ne={[M.value]:i.trackSize};return i.trackImg!==void 0&&(ne.backgroundImage=`url(${i.trackImg}) !important`),ne}),j=ce(()=>"q-slider__inner absolute"+(i.innerTrackColor!==void 0?` bg-${i.innerTrackColor}`:"")),G=ce(()=>{const ne=E.value-k.value,we={[P.value]:`${100*k.value}%`,[C.value]:ne===0?"2px":`${100*ne}%`};return i.innerTrackImg!==void 0&&(we.backgroundImage=`url(${i.innerTrackImg}) !important`),we});function U(ne){const{min:we,max:Se,step:Re}=i;let De=we+ne*(Se-we);if(Re>0){const Ne=(De-v.value)%Re;De+=(Math.abs(Ne)>=Re/2?(Ne<0?-1:1)*Re:0)-Ne}return De=w.value(De),es(De,v.value,O.value)}function K(ne){return S.value===0?0:(ne-i.min)/S.value}function de(ne,we){const Se=W$(ne),Re=i.vertical===!0?es((Se.top-we.top)/we.height,0,1):es((Se.left-we.left)/we.width,0,1);return es(m.value===!0?1-Re:Re,k.value,E.value)}const Oe=ce(()=>I$(i.markers)===!0?i.markers:x.value),pe=ce(()=>{const ne=[],we=Oe.value,Se=i.max;let Re=i.min;do ne.push(Re),Re+=we;while(Re<Se);return ne.push(Se),ne}),he=ce(()=>{const ne=` ${Dy}${g.value}-`;return Dy+`${ne}${i.switchMarkerLabelsSide===!0?"switched":"standard"}${ne}${m.value===!0?"rtl":"ltr"}`}),me=ce(()=>i.markerLabels===!1?null:Qe(i.markerLabels).map((ne,we)=>({index:we,value:ne.value,label:ne.label||ne.value,classes:he.value+(ne.classes!==void 0?" "+ne.classes:""),style:{...qe(ne.value),...ne.style||{}}}))),Pe=ce(()=>({markerList:me.value,markerMap:Ye.value,classes:he.value,getStyle:qe})),xe=ce(()=>{const ne=T.value===0?"2px":100*Oe.value/T.value;return{...G.value,backgroundSize:i.vertical===!0?`2px ${ne}%`:`${ne}% 2px`}});function Qe(ne){if(ne===!1)return null;if(ne===!0)return pe.value.map(r8);if(typeof ne=="function")return pe.value.map(Se=>{const Re=ne(Se);return Yf(Re)===!0?{...Re,value:Se}:{value:Se,label:Re}});const we=({value:Se})=>Se>=i.min&&Se<=i.max;return Array.isArray(ne)===!0?ne.map(Se=>Yf(Se)===!0?Se:{value:Se}).filter(we):Object.keys(ne).map(Se=>{const Re=ne[Se],De=Number(Se);return Yf(Re)===!0?{...Re,value:De}:{value:De,label:Re}}).filter(we)}function qe(ne){return{[P.value]:`${100*(ne-i.min)/S.value}%`}}const Ye=ce(()=>{if(i.markerLabels===!1)return null;const ne={};return me.value.forEach(we=>{ne[we.value]=we}),ne});function Ie(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](Pe.value);const ne=s["marker-label"]||n8;return me.value.map(we=>ne({marker:we,...Pe.value}))}const je=ce(()=>[[oP,ee,void 0,{[D.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ee(ne){ne.isFinal===!0?(p.value!==void 0&&(e(ne.evt),ne.touch===!0&&r(!0),p.value=void 0,a("pan","end")),f.value=!1,d.value=!1):ne.isFirst===!0?(p.value=t(ne.evt),e(ne.evt),r(),f.value=!0,a("pan","start")):(e(ne.evt),r())}function R(){d.value=!1}function H(ne){e(ne,t(ne)),r(),h.value=!0,f.value=!0,document.addEventListener("mouseup",oe,!0)}function oe(){h.value=!1,f.value=!1,r(!0),R(),document.removeEventListener("mouseup",oe,!0)}function re(ne){e(ne,t(ne)),r(!0)}function ie(ne){hx.includes(ne.keyCode)&&r(!0)}function Ze(ne){if(i.vertical===!0)return null;const we=l.lang.rtl!==i.reverse?1-ne:ne;return{transform:`translateX(calc(${2*we-1} * ${i.thumbSize} / 2 + ${50-100*we}%))`}}function ae(ne){const we=ce(()=>h.value===!1&&(d.value===ne.focusValue||d.value==="both")?" q-slider--focus":""),Se=ce(()=>`q-slider__thumb q-slider__thumb${g.value} q-slider__thumb${g.value}-${m.value===!0?"rtl":"ltr"} absolute non-selectable`+we.value+(ne.thumbColor.value!==void 0?` text-${ne.thumbColor.value}`:"")),Re=ce(()=>({width:i.thumbSize,height:i.thumbSize,[P.value]:`${100*ne.ratio.value}%`,zIndex:d.value===ne.focusValue?2:void 0})),De=ce(()=>ne.labelColor.value!==void 0?` text-${ne.labelColor.value}`:""),Ne=ce(()=>Ze(ne.ratio.value)),vt=ce(()=>"q-slider__text"+(ne.labelTextColor.value!==void 0?` text-${ne.labelTextColor.value}`:""));return()=>{const Lt=[Bt("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[Bt("path",{d:i.thumbPath})]),Bt("div",{class:"q-slider__focus-ring fit"})];return(i.label===!0||i.labelAlways===!0)&&(Lt.push(Bt("div",{class:q.value+" absolute fit no-pointer-events"+De.value},[Bt("div",{class:F.value,style:{minWidth:i.thumbSize}},[Bt("div",{class:Z.value,style:Ne.value},[Bt("span",{class:vt.value},ne.label.value)])])])),i.name!==void 0&&i.disable!==!0&&c(Lt,"push")),Bt("div",{class:Se.value,style:Re.value,...ne.getNodeData()},Lt)}}function Ae(ne,we,Se,Re){const De=[];i.innerTrackColor!=="transparent"&&De.push(Bt("div",{key:"inner",class:j.value,style:G.value})),i.selectionColor!=="transparent"&&De.push(Bt("div",{key:"selection",class:Y.value,style:ne.value})),i.markers!==!1&&De.push(Bt("div",{key:"marker",class:X.value,style:xe.value})),Re(De);const Ne=[q$("div",{key:"trackC",class:W.value,tabindex:we.value,...Se.value},[Bt("div",{class:V.value,style:z.value},De)],"slide",b.value,()=>je.value)];if(i.markerLabels!==!1){const vt=i.switchMarkerLabelsSide===!0?"unshift":"push";Ne[vt](Bt("div",{key:"markerL",class:N.value},Ie()))}return Ne}return Q0(()=>{document.removeEventListener("mouseup",oe,!0)}),{state:{active:f,focus:d,preventFocus:h,dragging:p,editable:b,classes:A,tabindex:$,attributes:I,roundValueFn:w,keyStep:x,trackLen:S,innerMin:v,innerMinRatio:k,innerMax:O,innerMaxRatio:E,positionProp:P,sizeProp:C,isReversed:m},methods:{onActivate:H,onMobileClick:re,onBlur:R,onKeyup:ie,getContent:Ae,getThumbRenderFn:ae,convertRatioToModel:U,convertModelToRatio:K,getDraggingRatio:de}}}const o8=()=>({});var l8=bp({name:"QSlider",props:{...i8,modelValue:{required:!0,default:null,validator:r=>typeof r=="number"||r===null},labelValue:[String,Number]},emits:a8,setup(r,{emit:e}){const{proxy:{$q:t}}=Cs(),{state:n,methods:i}=s8({updateValue:g,updatePosition:m,getDragging:y,formAttrs:X$(r)}),a=ft(null),s=ft(0),l=ft(0);function u(){l.value=r.modelValue===null?n.innerMin.value:es(r.modelValue,n.innerMin.value,n.innerMax.value)}Da(()=>`${r.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,u),u();const c=ce(()=>i.convertModelToRatio(l.value)),f=ce(()=>n.active.value===!0?s.value:c.value),h=ce(()=>{const b={[n.positionProp.value]:`${100*n.innerMinRatio.value}%`,[n.sizeProp.value]:`${100*(f.value-n.innerMinRatio.value)}%`};return r.selectionImg!==void 0&&(b.backgroundImage=`url(${r.selectionImg}) !important`),b}),d=i.getThumbRenderFn({focusValue:!0,getNodeData:o8,ratio:f,label:ce(()=>r.labelValue!==void 0?r.labelValue:l.value),thumbColor:ce(()=>r.thumbColor||r.color),labelColor:ce(()=>r.labelColor),labelTextColor:ce(()=>r.labelTextColor)}),p=ce(()=>n.editable.value!==!0?{}:t.platform.is.mobile===!0?{onClick:i.onMobileClick}:{onMousedown:i.onActivate,onFocus:v,onBlur:i.onBlur,onKeydown:O,onKeyup:i.onKeyup});function g(b){l.value!==r.modelValue&&e("update:modelValue",l.value),b===!0&&e("change",l.value)}function y(){return a.value.getBoundingClientRect()}function m(b,w=n.dragging.value){const x=i.getDraggingRatio(b,w);l.value=i.convertRatioToModel(x),s.value=r.snap!==!0||r.step===0?x:i.convertModelToRatio(l.value)}function v(){n.focus.value=!0}function O(b){if(!hx.includes(b.keyCode))return;V$(b);const w=([34,33].includes(b.keyCode)?10:1)*n.keyStep.value,x=([34,37,40].includes(b.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(r.vertical===!0?-1:1)*w;l.value=es(n.roundValueFn.value(l.value+x),n.innerMin.value,n.innerMax.value),g()}return()=>{const b=i.getContent(h,n.tabindex,p,w=>{w.push(d())});return Bt("div",{ref:a,class:n.classes.value+(r.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":r.modelValue},b)}}});function Eo(r,e=new WeakMap){if(Object(r)!==r)return r;if(e.has(r))return e.get(r);const t=r instanceof Date?new Date(r):r instanceof RegExp?new RegExp(r.source,r.flags):r instanceof Set?new Set:r instanceof Map?new Map:typeof r.constructor!="function"?Object.create(null):r.prototype!==void 0&&typeof r.prototype.constructor=="function"?r:new r.constructor;if(typeof r.constructor=="function"&&typeof r.valueOf=="function"){const n=r.valueOf();if(Object(n)!==n){const i=new r.constructor(n);return e.set(r,i),i}}return e.set(r,t),r instanceof Set?r.forEach(n=>{t.add(Eo(n,e))}):r instanceof Map&&r.forEach((n,i)=>{t.set(i,Eo(n,e))}),Object.assign(t,...Object.keys(r).map(n=>({[n]:Eo(r[n],e)})))}var vg=bp({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(r,{slots:e,emit:t}){const{proxy:n}=Cs(),{$q:i}=n,a=ft(null),s=ft(""),l=ft("");let u=!1;const c=ce(()=>F$({initialValue:s.value,validate:r.validate,set:f,cancel:h,updatePosition:d},"value",()=>l.value,w=>{l.value=w}));function f(){r.validate(l.value)!==!1&&(p()===!0&&(t("save",l.value,s.value),t("update:modelValue",l.value)),g())}function h(){p()===!0&&t("cancel",l.value,s.value),g()}function d(){A0(()=>{a.value.updatePosition()})}function p(){return j$(l.value,s.value)===!1}function g(){u=!0,a.value.hide()}function y(){u=!1,s.value=Eo(r.modelValue),l.value=Eo(r.modelValue),t("beforeShow")}function m(){t("show")}function v(){u===!1&&p()===!0&&(r.autoSave===!0&&r.validate(l.value)===!0?(t("save",l.value,s.value),t("update:modelValue",l.value)):t("cancel",l.value,s.value)),t("beforeHide")}function O(){t("hide")}function b(){const w=e.default!==void 0?[].concat(e.default(c.value)):[];return r.title&&w.unshift(Bt("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},r.title)),r.buttons===!0&&w.push(Bt("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[Bt(Ke,{flat:!0,color:r.color,label:r.labelCancel||i.lang.label.cancel,onClick:h}),Bt(Ke,{flat:!0,color:r.color,label:r.labelSet||i.lang.label.set,onClick:f})])),w}return Object.assign(n,{set:f,cancel:h,show(w){a.value!==null&&a.value.show(w)},hide(w){a.value!==null&&a.value.hide(w)},updatePosition:d}),()=>{if(r.disable!==!0)return Bt(ir,{ref:a,class:"q-popup-edit",cover:r.cover,onBeforeShow:y,onShow:m,onBeforeHide:v,onHide:O,onEscapeKey:h},b)}}});const u8={class:"obiwan-diagram-toolbar-menu d-flex items-center q-pa-sm shadow-2"},c8={__name:"ToolbarMenu",props:Oa({dense:{type:Boolean,required:!1,default:null},maxZoom:{type:Number},minZoom:{type:Number}},{zoom:{type:Number,default:1},zoomModifiers:{}}),emits:Oa(["click"],["update:zoom"]),setup(r,{emit:e}){Ic();const t=Er();`${ge.randomId()}`;const n=e;cl();const i=r,a=Nc(r,"zoom"),s={add(){a.value=ge.round(a.value*1.1,1)},subtract(){a.value=ge.round(a.value*.9,1)}},l=ce(()=>ge.isNil(i.dense)?t.screen.gt.sm:i.dense);return(u,c)=>(le(),ri("div",u8,[It(u.$slots,"prepend",{},void 0,!0),L(Ke,{dense:"",flat:"",icon:"mdi-file-outline",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Import, Export or Delete ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:l.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:c[0]||(c[0]=f=>n("click","import"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-file-import-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Import File ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + O ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[1]||(c[1]=f=>n("click","export"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-file-export-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Export File ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + S ")]),_:1})]),_:1})),[[Me]]),L(gr),Te((le(),fe(be,{clickable:"",onClick:c[2]||(c[2]=f=>n("click","delete"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{color:"red",name:"mdi-trash-can-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Delete ")]),_:1})]),_:1})),[[Me]])]),_:1},8,["dense"])]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-cog-outline",size:"md",square:"",onClick:c[3]||(c[3]=f=>n("click","editSettings"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Diagram (Settings) ")]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-palette-outline",size:"md",square:"",onClick:c[4]||(c[4]=f=>n("click","editStylesheet"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Stylesheet ")]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-filter-outline",size:"md",square:"",onClick:c[5]||(c[5]=f=>n("click","filter"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Filter ")]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-scatter-plot-outline",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Layout ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:l.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:c[6]||(c[6]=f=>n("click","layout","breadthfirst"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Breadth First "),L(et,null,{default:_(()=>[se(" The breadthfirst layout puts nodes in a hierarchy, based on a breadthfirst traversal of the graph. It is best suited to trees and forests in its default top-down mode, and it is best suited to DAGs in its circle mode ")]),_:1})]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[7]||(c[7]=f=>n("click","layout","circle"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Circle ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[8]||(c[8]=f=>n("click","layout","concentric"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Concentric "),L(et,null,{default:_(()=>[se(" The concentric layout positions nodes in concentric circles, based on a metric that you specify to segregate the nodes into levels ")]),_:1})]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[9]||(c[9]=f=>n("click","layout","cose"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Cose "),L(et,null,{default:_(()=>[se(" The cose (Compound Spring Embedder) layout uses a physics simulation to lay out graphs. It works well with noncompound graphs and it has additional logic to support compound graphs well. The cose layout is very fast and produces good results. The cose-bilkent extension is an evolution of the algorithm that is more computationally expensive but produces near-perfect results. ")]),_:1})]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[10]||(c[10]=f=>n("click","layout","cose-bilkent"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Cose Bilkent ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[11]||(c[11]=f=>n("click","layout","grid"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Grid ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:c[12]||(c[12]=f=>n("click","layout","random"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Random ")]),_:1})]),_:1})),[[Me]])]),_:1},8,["dense"])]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-image-filter-center-focus",size:"md",square:"",onClick:c[13]||(c[13]=f=>n("click","center"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Center ")]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-fit-to-page-outline",size:"md",square:"",onClick:c[14]||(c[14]=f=>n("click","fitToPage"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Fit To Page ")]),_:1})]),_:1}),L(Ke,{dense:"",flat:"",icon:"mdi-magnify-plus-outline",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Zoom ")]),_:1}),L(vg,{"label-set":"OK",title:"Set Zoom Level",modelValue:a.value,"onUpdate:modelValue":c[16]||(c[16]=f=>a.value=f)},{default:_(()=>[L(be,{class:"d-flex items-center",style:{"min-width":"300px","min-height":"100px"}},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Ke,{color:"primary",flat:"",icon:"mdi-magnify-minus-outline",round:"",size:"lg",onClick:s.subtract},null,8,["onClick"])]),_:1}),L(J,null,{default:_(()=>[L(l8,{modelValue:a.value,"onUpdate:modelValue":c[15]||(c[15]=f=>a.value=f),autofocus:"",label:"","label-always":"",markers:"",min:r.minZoom,max:r.maxZoom,snap:"",step:.1},null,8,["modelValue","min","max"])]),_:1}),L(J,{side:""},{default:_(()=>[L(Ke,{color:"primary",flat:"",icon:"mdi-magnify-plus-outline",round:"",size:"lg",onClick:s.add},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),It(u.$slots,"append",{},void 0,!0)]))}};var f8=D0(c8,[["__scopeId","data-v-41d56243"]]);const h8={class:"obiwan-diagram-edge-context-menu-buttons d-flex items-center q-pa-sm"},d8={__name:"EdgeContextMenu",props:{dense:{type:Boolean,required:!1,default:null},useMenu:Function,value:Object},emits:["command","update:label"],setup(r,{emit:e}){var m,v,O,b,w,x,$,S,T,k;const t=Er(),n=e,i=r,a=ce(()=>ge.isNil(i.dense)?t.screen.gt.sm:i.dense),s=((m=i.useMenu)==null?void 0:m.call(i,i.value))||{},l=s.editLabel?Qt({title:"Edit Label",...s.editLabel,value:ce(s.editLabel.value)}):!1,u=Qt({...s.editModelElement,show:(v=s.editModelElement)!=null&&v.show?ce(s.editModelElement.show):!!i.value.modelElement}),c=ge.reduce((O=s.setCurveStyle)==null?void 0:O.options,(E,P)=>(E[P]=!0,E),{}),f=Qt({...s.setCurveStyle,options:ge.reduce({curverd:!0,curvedMultiple:!0,segments:!0,straight:!0},(E,P,C)=>(c[C]?E[C]=!0:E[C]=!1,E),{}),show:(b=s.setCurveStyle)!=null&&b.show?ce(s.setCurveStyle.show):!0}),h=Qt({...s.editStyle,show:(w=s.editStyle)!=null&&w.show?ce(s.editStyle.show):ge.includes((x=i.value.style)==null?void 0:x.curveStyle,["unbundled-bezier","segments"])}),d=Qt({...s.editStyle,show:($=s.editStyle)!=null&&$.show?ce(s.editStyle.show):!0}),p=Qt({delete:{show:(T=(S=s.more)==null?void 0:S.delete)!=null&&T.show?ce(s.more.delete.show):!!i.value.modelElement},...s.more,show:(k=s.more)!=null&&k.show?ce(s.more.show):!0});s.ext&&Qt(s.ext);const g=ft(!0);function y(E){return ge.isEmpty(l==null?void 0:l.errors)?(g.value=!0,!0):(g.value=!1,l.errors[0])}return(E,P)=>(le(),fe(ir,{class:"obiwan-diagram-edge-context-menu not-focusable",anchor:"top middle",self:"bottom middle","model-value":!0,persistent:""},{default:_(()=>[ni("div",h8,[dt(l)?(le(),fe(Ke,{key:0,dense:"",flat:"",icon:"mdi-format-text",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Label ")]),_:1}),L(vg,{buttons:"","label-set":"OK",title:dt(l).title,validate:y,modelValue:dt(l).value,"onUpdate:modelValue":P[0]||(P[0]=C=>dt(l).value=C)},{default:_(C=>[L(_0,{modelValue:C.value,"onUpdate:modelValue":M=>C.value=M,autofocus:"",counter:"",rules:dt(l).rules,onKeyup:pn(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeyup"])]),_:1},8,["title","modelValue"])]),_:1})):Ee("",!0),u.show?(le(),fe(Ke,{key:1,dense:"",flat:"",icon:"mdi-file-document-edit-outline",size:"md",square:"",onClick:P[1]||(P[1]=C=>n("command","editModelElement",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit ModelElement ")]),_:1})]),_:1})):Ee("",!0),f.show?(le(),fe(Ke,{key:2,dense:"",flat:"",icon:"mdi-sine-wave",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Set Curve Style ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:a.value},{default:_(()=>[f.options.straight?Te((le(),fe(be,{key:0,clickable:"",onClick:P[2]||(P[2]=C=>n("command","setCurveStyle",i.value,"straight"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Straight ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),f.options.segments?Te((le(),fe(be,{key:1,clickable:"",onClick:P[3]||(P[3]=C=>n("command","setCurveStyle",i.value,"segments"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Segments ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),f.options.curved?Te((le(),fe(be,{key:2,clickable:"",onClick:P[4]||(P[4]=C=>n("command","setCurveStyle",i.value,"curved"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Curved ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),f.options.curvedMultiple?Te((le(),fe(be,{key:3,clickable:"",onClick:P[5]||(P[5]=C=>n("command","setCurveStyle",i.value,"curvedMultiple"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Curved Multiple (With Control Points) ")]),_:1})]),_:1})),[[Me]]):Ee("",!0)]),_:1},8,["dense"])]),_:1})]),_:1})):Ee("",!0),h.show?(le(),fe(Ke,{key:3,dense:"",flat:"",icon:"mdi-vector-polyline-edit",size:"md",square:"",onClick:P[6]||(P[6]=C=>n("command","editControlPoints",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Edge Bend And Control Points ")]),_:1})]),_:1})):Ee("",!0),d.show?(le(),fe(Ke,{key:4,dense:"",flat:"",icon:"mdi-palette-outline",size:"md",square:"",onClick:P[7]||(P[7]=C=>n("command","editStyle",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Style ")]),_:1})]),_:1})):Ee("",!0),p.show?(le(),fe(Ke,{key:5,dense:"",flat:"",icon:"mdi-dots-vertical",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" More options... ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:a.value},{default:_(()=>{var C,M,D,I,A,Q,B,Y;return[((C=p.copy)==null?void 0:C.show)!==!1?Te((le(),fe(be,{key:0,clickable:"",onClick:P[8]||(P[8]=X=>n("command","copy",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-content-copy"})]),_:1}),L(J,null,{default:_(()=>[se(" Copy ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + C ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((M=p.cut)==null?void 0:M.show)!==!1?Te((le(),fe(be,{key:1,clickable:"",onClick:P[9]||(P[9]=X=>n("command","cut",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-content-cut"})]),_:1}),L(J,null,{default:_(()=>[se(" Cut ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + X ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((D=p.bringToFront)==null?void 0:D.show)!==!1?Te((le(),fe(be,{key:2,clickable:"",onClick:P[10]||(P[10]=X=>n("command","bringToFront",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-bring-to-front"})]),_:1}),L(J,null,{default:_(()=>[se(" Bring To Front ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + Shift + F ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((I=p.bringForward)==null?void 0:I.show)!==!1?Te((le(),fe(be,{key:3,clickable:"",onClick:P[11]||(P[11]=X=>n("command","bringForward",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-bring-forward"})]),_:1}),L(J,null,{default:_(()=>[se(" Bring Forward ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((A=p.sendToBack)==null?void 0:A.show)!==!1?Te((le(),fe(be,{key:4,clickable:"",onClick:P[12]||(P[12]=X=>n("command","sendToBack",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-send-to-back"})]),_:1}),L(J,null,{default:_(()=>[se(" Send To Back ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + Shift + B ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((Q=p.sendBackward)==null?void 0:Q.show)!==!1?Te((le(),fe(be,{key:5,clickable:"",onClick:P[13]||(P[13]=X=>n("command","sendBackward",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-send-backward"})]),_:1}),L(J,null,{default:_(()=>[se(" Send Backward ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((B=p.remove)==null?void 0:B.show)!==!1?Te((le(),fe(be,{key:6,clickable:"",onClick:P[14]||(P[14]=X=>n("command","remove",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-close"})]),_:1}),L(J,null,{default:_(()=>[se(" Remove from diagram ")]),_:1}),L(J,{side:""},{default:_(()=>[L(Be,{color:"primary",name:"mdi-information-variant-circle-outline",size:"xs"}),L(et,null,{default:_(()=>{var X;return[se(" Removes element from diagram. Does not delete it's underlying ("+Li((X=i.value.modelElement)==null?void 0:X.__typename)+") model element ",1)]}),_:1})]),_:1})]),_:1})),[[Me]]):Ee("",!0),((Y=p.delete)==null?void 0:Y.show)!==!1?Te((le(),fe(be,{key:7,clickable:"",onClick:P[15]||(P[15]=X=>n("command","delete",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{color:"red",name:"mdi-trash-can-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Delete from model ")]),_:1}),L(J,{side:""},{default:_(()=>[L(Be,{color:"primary",name:"mdi-information-variant-circle-outline",size:"xs"}),L(et,null,{default:_(()=>{var X;return[se(" Removes element from diagram and deletes underlying ("+Li((X=i.value.modelElement)==null?void 0:X.__typename)+") model element ",1)]}),_:1})]),_:1})]),_:1})),[[Me]]):Ee("",!0)]}),_:1},8,["dense"])]),_:1})]),_:1})):Ee("",!0),It(E.$slots,"default")])]),_:3}))}};const p8={class:"obiwan-diagram-group-context-menu-buttons d-flex items-center q-pa-sm"},g8={__name:"GroupContextMenu",props:{dense:{type:Boolean,required:!1,default:null},useMenu:Function,value:Array},emits:["command"],setup(r,{emit:e}){var y,m,v,O,b,w,x,$,S,T,k;const t=Er(),n=e;cl();const i=r,a=ce(()=>ge.isNil(i.dense)?t.screen.gt.sm:i.dense);debugger;const s=((y=i.useMenu)==null?void 0:y.call(i,i.value))||{},[l,u]=ge.partition(i.value,E=>E.$.isKindOf("diagram.Node")),c=Qt({...s.createRelationship,show:(m=s.createRelationship)!=null&&m.show?ce(s.createRelationship.show):l.length===1}),f=Qt({...s.align,show:(v=s.align)!=null&&v.show?ce(s.align.show):l.length>1}),h=Qt({...s.layout,show:(O=s.layout)!=null&&O.show?ce(s.layout.show):l.length>1}),d=Qt({...s.group,show:(b=s.group)!=null&&b.show?ce(s.group.show):l.length>1}),p=Qt({...s.editStyle,show:(w=s.editStyle)!=null&&w.show?ce(s.editStyle.show):!0}),g=Qt({delete:{show:($=(x=s.more)==null?void 0:x.delete)!=null&&$.show?ce(s.more.delete.show):!!ge.find(i.value,E=>E.modelElement)},...s.more,show:(S=s.more)!=null&&S.show?ce(s.more.show):!0,autoSize:((T=s.more)==null?void 0:T.autoSize)||{show:l.length},snapToGrid:((k=s.more)==null?void 0:k.snapToGrid)||{show:l.length}});return s.ext&&Qt(s.ext),(E,P)=>(le(),fe(ir,{class:"obiwan-diagram-group-context-menu not-focusable",anchor:"top middle",self:"bottom middle","model-value":!0,persistent:""},{default:_(()=>[ni("div",p8,[c.show?(le(),fe(Ke,{key:0,dense:"",flat:"",icon:"mdi-vector-line",size:"md",square:"",onClick:P[0]||(P[0]=C=>n("command","createRelationship"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Create Relationship ")]),_:1})]),_:1})):Ee("",!0),f.show?(le(),fe(Ke,{key:1,dense:"",flat:"",icon:"mdi-align-horizontal-center",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Align ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:a.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:P[1]||(P[1]=C=>n("command","align",i.value,"left"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-horizontal-left"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Left ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[2]||(P[2]=C=>n("command","align",i.value,"center"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-horizontal-center"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Horizontal Center ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[3]||(P[3]=C=>n("command","align",i.value,"right"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-horizontal-right"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Right ")]),_:1})]),_:1})),[[Me]]),L(gr),Te((le(),fe(be,{clickable:"",onClick:P[4]||(P[4]=C=>n("command","align",i.value,"top"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-vertical-top"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Top ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[5]||(P[5]=C=>n("command","align",i.value,"middle"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-vertical-center"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Vertical Center ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[6]||(P[6]=C=>n("command","align",i.value,"bottom"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-vertical-bottom"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Bottom ")]),_:1})]),_:1})),[[Me]]),L(gr),Te((le(),fe(be,{clickable:"",onClick:P[7]||(P[7]=C=>n("command","distribute",i.value,"horizontal"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-horizontal-distribute"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Horizontal Distribute ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[8]||(P[8]=C=>n("command","distribute",i.value,"vertical"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-align-vertical-distribute"})]),_:1}),L(J,null,{default:_(()=>[se(" Align Vertical Distribute ")]),_:1})]),_:1})),[[Me]])]),_:1},8,["dense"])]),_:1})]),_:1})):Ee("",!0),h.show?(le(),fe(Ke,{key:2,dense:"",flat:"",icon:"mdi-scatter-plot-outline",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Layout ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:a.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:P[9]||(P[9]=C=>n("click","layout","breadthfirst"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Breadth First "),L(et,null,{default:_(()=>[se(" The breadthfirst layout puts nodes in a hierarchy, based on a breadthfirst traversal of the graph. It is best suited to trees and forests in its default top-down mode, and it is best suited to DAGs in its circle mode ")]),_:1})]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[10]||(P[10]=C=>n("click","layout","circle"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Circle ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[11]||(P[11]=C=>n("click","layout","concentric"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Concentric "),L(et,null,{default:_(()=>[se(" The concentric layout positions nodes in concentric circles, based on a metric that you specify to segregate the nodes into levels ")]),_:1})]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[12]||(P[12]=C=>n("click","layout","cose"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Cose "),L(et,null,{default:_(()=>[se(" The cose (Compound Spring Embedder) layout uses a physics simulation to lay out graphs. It works well with noncompound graphs and it has additional logic to support compound graphs well. The cose layout is very fast and produces good results. The cose-bilkent extension is an evolution of the algorithm that is more computationally expensive but produces near-perfect results. ")]),_:1})]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[13]||(P[13]=C=>n("click","layout","cose-bilkent"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Cose Bilkent ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[14]||(P[14]=C=>n("click","layout","grid"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Grid ")]),_:1})]),_:1})),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:P[15]||(P[15]=C=>n("click","layout","random"))},{default:_(()=>[L(J,null,{default:_(()=>[se(" Random ")]),_:1})]),_:1})),[[Me]])]),_:1},8,["dense"])]),_:1})]),_:1})):Ee("",!0),d.show?(le(),fe(Ke,{key:3,dense:"",flat:"",icon:"mdi-group",size:"md",square:"",onClick:P[16]||(P[16]=C=>n("command","group",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Group ")]),_:1})]),_:1})):Ee("",!0),p.show?(le(),fe(Ke,{key:4,dense:"",flat:"",icon:"mdi-palette-outline",size:"md",square:"",onClick:P[17]||(P[17]=C=>n("command","editStyle",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Style ")]),_:1})]),_:1})):Ee("",!0),L(Ke,{dense:"",flat:"",icon:"mdi-dots-vertical",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" More options... ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:a.value},{default:_(()=>{var C,M,D,I,A,Q,B,Y,X,W;return[((C=g.copy)==null?void 0:C.show)!==!1?Te((le(),fe(be,{key:0,clickable:"",onClick:P[18]||(P[18]=q=>n("command","copy",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-content-copy"})]),_:1}),L(J,null,{default:_(()=>[se(" Copy ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + C ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((M=g.cut)==null?void 0:M.show)!==!1?Te((le(),fe(be,{key:1,clickable:"",onClick:P[19]||(P[19]=q=>n("command","cut",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-content-cut"})]),_:1}),L(J,null,{default:_(()=>[se(" Cut ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + X ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((D=g.autoSize)==null?void 0:D.show)!==!1?Te((le(),fe(be,{key:2,clickable:"",onClick:P[20]||(P[20]=q=>n("command","autoSize",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-fit-to-page-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Autosize ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((I=g.snapToGrid)==null?void 0:I.show)!==!1?Te((le(),fe(be,{key:3,clickable:"",onClick:P[21]||(P[21]=q=>n("command","snapToGrid",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-grid"})]),_:1}),L(J,null,{default:_(()=>[se(" Snap To Grid ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((A=g.bringToFront)==null?void 0:A.show)!==!1?Te((le(),fe(be,{key:4,clickable:"",onClick:P[22]||(P[22]=q=>n("command","bringToFront",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-bring-to-front"})]),_:1}),L(J,null,{default:_(()=>[se(" Bring To Front ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + Shift + F ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((Q=g.bringForward)==null?void 0:Q.show)!==!1?Te((le(),fe(be,{key:5,clickable:"",onClick:P[23]||(P[23]=q=>n("command","bringForward",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-bring-forward"})]),_:1}),L(J,null,{default:_(()=>[se(" Bring Forward ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((B=g.sendToBack)==null?void 0:B.show)!==!1?Te((le(),fe(be,{key:6,clickable:"",onClick:P[24]||(P[24]=q=>n("command","sendToBack",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-send-to-back"})]),_:1}),L(J,null,{default:_(()=>[se(" Send To Back ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + Shift + B ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((Y=g.sendBackward)==null?void 0:Y.show)!==!1?Te((le(),fe(be,{key:7,clickable:"",onClick:P[25]||(P[25]=q=>n("command","sendBackward",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-send-backward"})]),_:1}),L(J,null,{default:_(()=>[se(" Send Backward ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((X=g.remove)==null?void 0:X.show)!==!1?Te((le(),fe(be,{key:8,clickable:"",onClick:P[26]||(P[26]=q=>n("command","remove",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-close"})]),_:1}),L(J,null,{default:_(()=>[se(" Remove from diagram ")]),_:1}),L(J,{side:""},{default:_(()=>[L(Be,{color:"primary",name:"mdi-information-variant-circle-outline",size:"xs"}),L(et,null,{default:_(()=>[se(" Removes selected elements from diagram. Does not delete underlying model elements ")]),_:1})]),_:1})]),_:1})),[[Me]]):Ee("",!0),((W=g.delete)==null?void 0:W.show)!==!1?Te((le(),fe(be,{key:9,clickable:"",onClick:P[27]||(P[27]=q=>n("command","delete",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{color:"red",name:"mdi-trash-can-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Delete from model ")]),_:1}),L(J,{side:""},{default:_(()=>[L(Be,{color:"primary",name:"mdi-information-variant-circle-outline",size:"xs"}),L(et,null,{default:_(()=>[se(" Removes selected elements from diagram and deletes their underlying model elements ")]),_:1})]),_:1})]),_:1})),[[Me]]):Ee("",!0)]}),_:1},8,["dense"])]),_:1})]),_:1}),It(E.$slots,"default")])]),_:3}))}};const v8={class:"obiwan-diagram-node-context-menu-buttons d-flex items-center q-pa-sm"},m8={__name:"NodeContextMenu",props:{dense:{type:Boolean,required:!1,default:null},useMenu:Function,value:Object},emits:["command","update:label"],setup(r,{emit:e}){var g,y,m,v,O;const t=Er(),n=e,i=r,a=ce(()=>ge.isNil(i.dense)?t.screen.gt.sm:i.dense),s=((g=i.useMenu)==null?void 0:g.call(i,i.value))||{},l=s.editLabel?Qt({show:!ge.includes(i.value.classes,"readonly"),title:"Edit Label",...s.editLabel,value:ce(s.editLabel.value)}):!1,u=Qt({...s.editModelElement,show:(y=s.editModelElement)!=null&&y.show?ce(s.editModelElement.show):!!i.value.modelElement}),c=Qt({show:!ge.includes(i.value.classes,"readonly"),...s.createRelationship,show:(m=s.createRelationship)!=null&&m.show?ce(s.createRelationship.show):!1}),f=Qt({...s.editStyle,show:(v=s.editStyle)!=null&&v.show?ce(s.editStyle.show):!0}),h=Qt({copy:{show:ce(()=>{var b,w,x,$;return ge.includes(i.value.classes,"readonly")?!1:(w=(b=s.more)==null?void 0:b.copy)!=null&&w.show?($=(x=s.more)==null?void 0:x.copy)==null?void 0:$.show:!0})},cut:{show:ce(()=>{var b,w,x,$;return ge.includes(i.value.classes,"readonly")?!1:(w=(b=s.more)==null?void 0:b.cut)!=null&&w.show?($=(x=s.more)==null?void 0:x.cut)==null?void 0:$.show:!0})},delete:{show:ce(()=>{var b,w,x,$;return ge.includes(i.value.classes,"readonly")?!1:(w=(b=s.more)==null?void 0:b.delete)!=null&&w.show?($=(x=s.more)==null?void 0:x.delete)==null?void 0:$.show:!!i.value.modelElement})},editJSON:{show:ce(()=>{var b,w,x,$;return ge.includes(i.value.classes,"readonly")?!1:(w=(b=s.more)==null?void 0:b.delete)!=null&&w.editJSON?($=(x=s.more)==null?void 0:x.editJSON)==null?void 0:$.show:!0})},...s.more,show:(O=s.more)!=null&&O.show?ce(s.more.show):!0});s.ext&&Qt(s.ext);const d=ft(!0);function p(b){return ge.isEmpty(l==null?void 0:l.errors)?(d.value=!0,!0):(d.value=!1,l.errors[0])}return(b,w)=>(le(),fe(ir,{class:"obiwan-diagram-node-context-menu not-focusable",anchor:"top middle",self:"bottom middle","model-value":!0,persistent:""},{default:_(()=>[ni("div",v8,[dt(l).show&&dt(l)?(le(),fe(Ke,{key:0,dense:"",flat:"",icon:"mdi-format-text",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Label ")]),_:1}),L(vg,{buttons:"","label-set":"OK",title:dt(l).title,validate:p,modelValue:dt(l).value,"onUpdate:modelValue":w[0]||(w[0]=x=>dt(l).value=x)},{default:_(x=>[L(_0,{modelValue:x.value,"onUpdate:modelValue":$=>x.value=$,autofocus:"",counter:"",dense:"",rules:dt(l).rules,onKeyup:pn(x.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeyup"])]),_:1},8,["title","modelValue"])]),_:1})):Ee("",!0),u.show?(le(),fe(Ke,{key:1,dense:"",flat:"",icon:"mdi-file-document-edit-outline",size:"md",square:"",onClick:w[1]||(w[1]=x=>n("command","editModelElement",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit ModelElement ")]),_:1})]),_:1})):Ee("",!0),c.show?(le(),fe(Ke,{key:2,dense:"",flat:"",icon:"mdi-vector-line",size:"md",square:"",onClick:w[2]||(w[2]=x=>n("command","createRelationship"))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Create Relationship ")]),_:1})]),_:1})):Ee("",!0),f.show?(le(),fe(Ke,{key:3,dense:"",flat:"",icon:"mdi-palette-outline",size:"md",square:"",onClick:w[3]||(w[3]=x=>n("command","editStyle",i.value))},{default:_(()=>[L(et,null,{default:_(()=>[se(" Edit Style ")]),_:1})]),_:1})):Ee("",!0),h.show?(le(),fe(Ke,{key:4,dense:"",flat:"",icon:"mdi-dots-vertical",size:"md",square:""},{default:_(()=>[L(et,null,{default:_(()=>[se(" More options... ")]),_:1}),L(ir,null,{default:_(()=>[L(sr,{dense:a.value},{default:_(()=>{var x,$,S,T,k,E,P,C,M,D;return[((x=h.copy)==null?void 0:x.show)!==!1?Te((le(),fe(be,{key:0,clickable:"",onClick:w[4]||(w[4]=I=>n("command","copy",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-content-copy"})]),_:1}),L(J,null,{default:_(()=>[se(" Copy ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + C ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),(($=h.cut)==null?void 0:$.show)!==!1?Te((le(),fe(be,{key:1,clickable:"",onClick:w[5]||(w[5]=I=>n("command","cut",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-content-cut"})]),_:1}),L(J,null,{default:_(()=>[se(" Cut ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + X ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((S=h.autoSize)==null?void 0:S.show)!==!1?Te((le(),fe(be,{key:2,clickable:"",onClick:w[6]||(w[6]=I=>n("command","autoSize",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-fit-to-page-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Autosize ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((T=h.snapToGrid)==null?void 0:T.show)!==!1?Te((le(),fe(be,{key:3,clickable:"",onClick:w[7]||(w[7]=I=>n("command","snapToGrid",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-grid"})]),_:1}),L(J,null,{default:_(()=>[se(" Snap To Grid ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((k=h.bringToFront)==null?void 0:k.show)!==!1?Te((le(),fe(be,{key:4,clickable:"",onClick:w[8]||(w[8]=I=>n("command","bringToFront",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-bring-to-front"})]),_:1}),L(J,null,{default:_(()=>[se(" Bring To Front ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + Shift + F ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((E=h.bringForward)==null?void 0:E.show)!==!1?Te((le(),fe(be,{key:5,clickable:"",onClick:w[9]||(w[9]=I=>n("command","bringForward",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-bring-forward"})]),_:1}),L(J,null,{default:_(()=>[se(" Bring Forward ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((P=h.sendToBack)==null?void 0:P.show)!==!1?Te((le(),fe(be,{key:6,clickable:"",onClick:w[10]||(w[10]=I=>n("command","sendToBack",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-send-to-back"})]),_:1}),L(J,null,{default:_(()=>[se(" Send To Back ")]),_:1}),L(J,{side:""},{default:_(()=>[se(" Ctrl + Shift + B ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((C=h.sendBackward)==null?void 0:C.show)!==!1?Te((le(),fe(be,{key:7,clickable:"",onClick:w[11]||(w[11]=I=>n("command","sendBackward",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-arrange-send-backward"})]),_:1}),L(J,null,{default:_(()=>[se(" Send Backward ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),L(gr),((M=h.editJSON)==null?void 0:M.show)!==!1?Te((le(),fe(be,{key:8,clickable:"",onClick:w[12]||(w[12]=I=>n("command","editJSON",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-code-json"})]),_:1}),L(J,null,{default:_(()=>[se(" Edit JSON ")]),_:1})]),_:1})),[[Me]]):Ee("",!0),((D=h.delete)==null?void 0:D.show)!==!1?Te((le(),fe(be,{key:9,clickable:"",onClick:w[13]||(w[13]=I=>n("command","delete",i.value))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{color:"red",name:"mdi-trash-can-outline"})]),_:1}),L(J,null,{default:_(()=>[se(" Delete from model ")]),_:1}),L(J,{side:""},{default:_(()=>[L(Be,{color:"primary",name:"mdi-information-variant-circle-outline",size:"xs"}),L(et,null,{default:_(()=>{var I;return[se(" Removes element from diagram and deletes underlying ("+Li((I=i.value.modelElement)==null?void 0:I.__typename)+") model element ",1)]}),_:1})]),_:1})]),_:1})),[[Me]]):Ee("",!0)]}),_:1},8,["dense"])]),_:1})]),_:1})):Ee("",!0),It(b.$slots,"default")])]),_:3}))}},y8=()=>!0;function O8(r){const e={};return r.forEach(t=>{e[t]=y8}),e}function uc(){const{emit:r,proxy:e}=Cs(),t=ft(null);function n(){t.value.show()}function i(){t.value.hide()}function a(l){r("ok",l),i()}function s(){r("hide")}return Object.assign(e,{show:n,hide:i}),{dialogRef:t,onDialogHide:s,onDialogOK:a,onDialogCancel:i}}const dx=["ok","hide"];uc.emits=dx;uc.emitsObject=O8(dx);class ot{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=bs(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),Mn.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=bs(this,e,t);let n=[];return this.decompose(e,t,n,0),Mn.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new To(this),a=new To(e);for(let s=t,l=t;;){if(i.next(s),a.next(s),s=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(l+=i.value.length,i.done||l>=n)return!0}}iter(e=1){return new To(this,e)}iterRange(e,t=this.length){return new px(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new gx(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ot.empty:e.length<=32?new Nt(e):Mn.from(Nt.split(e,[]))}}class Nt extends ot{constructor(e,t=b8(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let a=0;;a++){let s=this.text[a],l=i+s.length;if((t?n:l)>=e)return new w8(i,l,n,s);i=l+1,n++}}decompose(e,t,n,i){let a=e<=0&&t>=this.length?this:new Nt(_y(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let s=n.pop(),l=Qu(a.text,s.text.slice(),0,a.length);if(l.length<=32)n.push(new Nt(l,s.length+a.length));else{let u=l.length>>1;n.push(new Nt(l.slice(0,u)),new Nt(l.slice(u)))}}else n.push(a)}replace(e,t,n){if(!(n instanceof Nt))return super.replace(e,t,n);[e,t]=bs(this,e,t);let i=Qu(this.text,Qu(n.text,_y(this.text,0,e)),t),a=this.length+n.length-(t-e);return i.length<=32?new Nt(i,a):Mn.from(Nt.split(i,[]),a)}sliceString(e,t=this.length,n=`
`){[e,t]=bs(this,e,t);let i="";for(let a=0,s=0;a<=t&&s<this.text.length;s++){let l=this.text[s],u=a+l.length;a>e&&s&&(i+=n),e<u&&t>a&&(i+=l.slice(Math.max(0,e-a),t-a)),a=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let a of e)n.push(a),i+=a.length+1,n.length==32&&(t.push(new Nt(n,i)),n=[],i=-1);return i>-1&&t.push(new Nt(n,i)),t}}class Mn extends ot{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let a=0;;a++){let s=this.children[a],l=i+s.length,u=n+s.lines-1;if((t?u:l)>=e)return s.lineInner(e,t,n,i);i=l+1,n=u+1}}decompose(e,t,n,i){for(let a=0,s=0;s<=t&&a<this.children.length;a++){let l=this.children[a],u=s+l.length;if(e<=u&&t>=s){let c=i&((s<=e?1:0)|(u>=t?2:0));s>=e&&u<=t&&!c?n.push(l):l.decompose(e-s,t-s,n,c)}s=u+1}}replace(e,t,n){if([e,t]=bs(this,e,t),n.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let s=this.children[i],l=a+s.length;if(e>=a&&t<=l){let u=s.replace(e-a,t-a,n),c=this.lines-s.lines+u.lines;if(u.lines<c>>5-1&&u.lines>c>>5+1){let f=this.children.slice();return f[i]=u,new Mn(f,this.length-(t-e)+n.length)}return super.replace(a,l,u)}a=l+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=bs(this,e,t);let i="";for(let a=0,s=0;a<this.children.length&&s<=t;a++){let l=this.children[a],u=s+l.length;s>e&&a&&(i+=n),e<u&&t>s&&(i+=l.sliceString(e-s,t-s,n)),s=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Mn))return 0;let n=0,[i,a,s,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,a+=t){if(i==s||a==l)return n;let u=this.children[i],c=e.children[a];if(u!=c)return n+u.scanIdentical(c,t);n+=u.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let p of e)n+=p.lines;if(n<32){let p=[];for(let g of e)g.flatten(p);return new Nt(p,t)}let i=Math.max(32,n>>5),a=i<<1,s=i>>1,l=[],u=0,c=-1,f=[];function h(p){let g;if(p.lines>a&&p instanceof Mn)for(let y of p.children)h(y);else p.lines>s&&(u>s||!u)?(d(),l.push(p)):p instanceof Nt&&u&&(g=f[f.length-1])instanceof Nt&&p.lines+g.lines<=32?(u+=p.lines,c+=p.length+1,f[f.length-1]=new Nt(g.text.concat(p.text),g.length+1+p.length)):(u+p.lines>i&&d(),u+=p.lines,c+=p.length+1,f.push(p))}function d(){u!=0&&(l.push(f.length==1?f[0]:Mn.from(f,c)),c=-1,u=f.length=0)}for(let p of e)h(p);return d(),l.length==1?l[0]:new Mn(l,t)}}ot.empty=new Nt([""],0);function b8(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Qu(r,e,t=0,n=1e9){for(let i=0,a=0,s=!0;a<r.length&&i<=n;a++){let l=r[a],u=i+l.length;u>=t&&(u>n&&(l=l.slice(0,n-i)),i<t&&(l=l.slice(t-i)),s?(e[e.length-1]+=l,s=!1):e.push(l)),i=u+1}return e}function _y(r,e,t){return Qu(r,[""],e,t)}class To{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Nt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],a=this.offsets[n],s=a>>1,l=i instanceof Nt?i.text.length:i.children.length;if(s==(t>0?l:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Nt){let u=i.text[s+(t<0?-1:0)];if(this.offsets[n]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[s+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof Nt?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class px{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new To(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class gx{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(ot.prototype[Symbol.iterator]=function(){return this.iter()},To.prototype[Symbol.iterator]=px.prototype[Symbol.iterator]=gx.prototype[Symbol.iterator]=function(){return this});class w8{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function bs(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}let fs="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<fs.length;r++)fs[r]+=fs[r-1];function x8(r){for(let e=1;e<fs.length;e+=2)if(fs[e]>r)return fs[e-1]<=r;return!1}function My(r){return r>=127462&&r<=127487}const Zy=8205;function ar(r,e,t=!0,n=!0){return(t?vx:S8)(r,e,n)}function vx(r,e,t){if(e==r.length)return e;e&&mx(r.charCodeAt(e))&&yx(r.charCodeAt(e-1))&&e--;let n=tr(r,e);for(e+=Yr(n);e<r.length;){let i=tr(r,e);if(n==Zy||i==Zy||t&&x8(i))e+=Yr(i),n=i;else if(My(i)){let a=0,s=e-2;for(;s>=0&&My(tr(r,s));)a++,s-=2;if(a%2==0)break;e+=2}else break}return e}function S8(r,e,t){for(;e>0;){let n=vx(r,e-2,t);if(n<e)return n;e--}return 0}function mx(r){return r>=56320&&r<57344}function yx(r){return r>=55296&&r<56320}function tr(r,e){let t=r.charCodeAt(e);if(!yx(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return mx(n)?(t-55296<<10)+(n-56320)+65536:t}function mg(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Yr(r){return r<65536?1:2}const Sd=/\r\n?|\n/;var nr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(nr||(nr={}));class Yn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let a=this.sections[t++],s=this.sections[t++];s<0?(e(n,i,a),i+=a):i+=s,n+=a}}iterChangedRanges(e,t=!1){kd(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new Yn(e)}composeDesc(e){return this.empty?e:e.empty?this:Ox(this,e)}mapDesc(e,t=!1){return e.empty?this:$d(this,e,t)}mapPos(e,t=-1,n=nr.Simple){let i=0,a=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],u=this.sections[s++],c=i+l;if(u<0){if(c>e)return a+(e-i);a+=l}else{if(n!=nr.Simple&&c>=e&&(n==nr.TrackDel&&i<e&&c>e||n==nr.TrackBefore&&i<e||n==nr.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==i||t<0?a:a+u;a+=u}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let a=this.sections[n++],s=this.sections[n++],l=i+a;if(s>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Yn(e)}static create(e){return new Yn(e)}}class Vt extends Yn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kd(this,(t,n,i,a,s)=>e=e.replace(i,i+(n-t),s),!1),e}mapDesc(e,t=!1){return $d(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,a=0;i<t.length;i+=2){let s=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=s;let u=i>>1;for(;n.length<u;)n.push(ot.empty);n.push(s?e.slice(a,a+s):ot.empty)}a+=s}return new Vt(t,n)}compose(e){return this.empty?e:e.empty?this:Ox(this,e,!0)}map(e,t=!1){return e.empty?this:$d(this,e,t,!0)}iterChanges(e,t=!1){kd(this,e,t)}get desc(){return Yn.create(this.sections)}filter(e){let t=[],n=[],i=[],a=new jo(this);e:for(let s=0,l=0;;){let u=s==e.length?1e9:e[s++];for(;l<u||l==u&&a.len==0;){if(a.done)break e;let f=Math.min(a.len,u-l);pr(i,f,-1);let h=a.ins==-1?-1:a.off==0?a.ins:0;pr(t,f,h),h>0&&Ci(n,t,a.text),a.forward(f),l+=f}let c=e[s++];for(;l<c;){if(a.done)break e;let f=Math.min(a.len,c-l);pr(t,f,-1),pr(i,f,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(f),l+=f}}return{changes:new Vt(t,n),filtered:Yn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],a=[],s=0,l=null;function u(f=!1){if(!f&&!i.length)return;s<t&&pr(i,t-s,-1);let h=new Vt(i,a);l=l?l.compose(h.map(l)):h,i=[],a=[],s=0}function c(f){if(Array.isArray(f))for(let h of f)c(h);else if(f instanceof Vt){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);u(),l=l?l.compose(f.map(l)):f}else{let{from:h,to:d=h,insert:p}=f;if(h>d||h<0||d>t)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${t})`);let g=p?typeof p=="string"?ot.of(p.split(n||Sd)):p:ot.empty,y=g.length;if(h==d&&y==0)return;h<s&&u(),h>s&&pr(i,h-s,-1),pr(i,d-h,y),Ci(a,i,g),s=d}}return c(e),u(!l),l}static empty(e){return new Vt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;n.length<i;)n.push(ot.empty);n[i]=ot.of(a.slice(1)),t.push(a[0],n[i].length)}}}return new Vt(t,n)}static createSet(e,t){return new Vt(e,t)}}function pr(r,e,t,n=!1){if(e==0&&t<=0)return;let i=r.length-2;i>=0&&t<=0&&t==r[i+1]?r[i]+=e:e==0&&r[i]==0?r[i+1]+=t:n?(r[i]+=e,r[i+1]+=t):r.push(e,t)}function Ci(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(ot.empty);r.push(t)}}function kd(r,e,t){let n=r.inserted;for(let i=0,a=0,s=0;s<r.sections.length;){let l=r.sections[s++],u=r.sections[s++];if(u<0)i+=l,a+=l;else{let c=i,f=a,h=ot.empty;for(;c+=l,f+=u,u&&n&&(h=h.append(n[s-2>>1])),!(t||s==r.sections.length||r.sections[s+1]<0);)l=r.sections[s++],u=r.sections[s++];e(i,c,a,f,h),i=c,a=f}}}function $d(r,e,t,n=!1){let i=[],a=n?[]:null,s=new jo(r),l=new jo(e);for(let u=-1;;)if(s.ins==-1&&l.ins==-1){let c=Math.min(s.len,l.len);pr(i,c,-1),s.forward(c),l.forward(c)}else if(l.ins>=0&&(s.ins<0||u==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!t))){let c=l.len;for(pr(i,l.ins,-1);c;){let f=Math.min(s.len,c);s.ins>=0&&u<s.i&&s.len<=f&&(pr(i,0,s.ins),a&&Ci(a,i,s.text),u=s.i),s.forward(f),c-=f}l.next()}else if(s.ins>=0){let c=0,f=s.len;for(;f;)if(l.ins==-1){let h=Math.min(f,l.len);c+=h,f-=h,l.forward(h)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;pr(i,c,u<s.i?s.ins:0),a&&u<s.i&&Ci(a,i,s.text),u=s.i,s.forward(s.len-f)}else{if(s.done&&l.done)return a?Vt.createSet(i,a):Yn.create(i);throw new Error("Mismatched change set lengths")}}function Ox(r,e,t=!1){let n=[],i=t?[]:null,a=new jo(r),s=new jo(e);for(let l=!1;;){if(a.done&&s.done)return i?Vt.createSet(n,i):Yn.create(n);if(a.ins==0)pr(n,a.len,0,l),a.next();else if(s.len==0&&!s.done)pr(n,0,s.ins,l),i&&Ci(i,n,s.text),s.next();else{if(a.done||s.done)throw new Error("Mismatched change set lengths");{let u=Math.min(a.len2,s.len),c=n.length;if(a.ins==-1){let f=s.ins==-1?-1:s.off?0:s.ins;pr(n,u,f,l),i&&f&&Ci(i,n,s.text)}else s.ins==-1?(pr(n,a.off?0:a.len,u,l),i&&Ci(i,n,a.textBit(u))):(pr(n,a.off?0:a.len,s.off?0:s.ins,l),i&&!s.off&&Ci(i,n,s.text));l=(a.ins>u||s.ins>=0&&s.len>u)&&(l||n.length>c),a.forward2(u),s.forward(u)}}}}class jo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ot.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?ot.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class pa{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new pa(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ue.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ue.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ue.range(e.anchor,e.head)}static create(e,t,n){return new pa(e,t,n)}}class ue{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ue.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ue([this.main],0)}addRange(e,t=!0){return ue.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,ue.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ue(e.ranges.map(t=>pa.fromJSON(t)),e.main)}static single(e,t=e){return new ue([ue.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=n:a.from<n)return ue.normalized(e.slice(),t);n=a.to}return new ue(e,t)}static cursor(e,t=0,n,i){return pa.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i!=null?i:16777215)<<6)}static range(e,t,n,i){let a=(n!=null?n:16777215)<<6|(i==null?7:Math.min(6,i));return t<e?pa.create(t,e,48|a):pa.create(e,t,(t>e?8:0)|a)}static normalized(e,t=0){let n=e[t];e.sort((i,a)=>i.from-a.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let a=e[i],s=e[i-1];if(a.empty?a.from<=s.to:a.from<s.to){let l=s.from,u=Math.max(a.to,s.to);i<=t&&t--,e.splice(--i,2,a.anchor>a.head?ue.range(u,l):ue.range(l,u))}}return new ue(e,t)}}function bx(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let yg=0;class $e{constructor(e,t,n,i,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=yg++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new $e(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Og),!!e.static,e.enables)}of(e){return new Au([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Au(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Au(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Og(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}class Au{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=yg++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,a=this.id,s=e[a]>>1,l=this.type==2,u=!1,c=!1,f=[];for(let h of this.dependencies)h=="doc"?u=!0:h=="selection"?c=!0:(((t=e[h.id])!==null&&t!==void 0?t:1)&1)==0&&f.push(e[h.id]);return{create(h){return h.values[s]=n(h),1},update(h,d){if(u&&d.docChanged||c&&(d.docChanged||d.selection)||Pd(h,f)){let p=n(h);if(l?!Ry(p,h.values[s],i):!i(p,h.values[s]))return h.values[s]=p,1}return 0},reconfigure:(h,d)=>{let p,g=d.config.address[a];if(g!=null){let y=fc(d,g);if(this.dependencies.every(m=>m instanceof $e?d.facet(m)===h.facet(m):m instanceof Wt?d.field(m,!1)==h.field(m,!1):!0)||(l?Ry(p=n(h),y,i):i(p=n(h),y)))return h.values[s]=y,0}else p=n(h);return h.values[s]=p,1}}}}function Ry(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function Pd(r,e){let t=!1;for(let n of e)Qo(r,n)&1&&(t=!0);return t}function k8(r,e,t){let n=t.map(u=>r[u.id]),i=t.map(u=>u.type),a=n.filter(u=>!(u&1)),s=r[e.id]>>1;function l(u){let c=[];for(let f=0;f<n.length;f++){let h=fc(u,n[f]);if(i[f]==2)for(let d of h)c.push(d);else c.push(h)}return e.combine(c)}return{create(u){for(let c of n)Qo(u,c);return u.values[s]=l(u),1},update(u,c){if(!Pd(u,a))return 0;let f=l(u);return e.compare(f,u.values[s])?0:(u.values[s]=f,1)},reconfigure(u,c){let f=Pd(u,n),h=c.config.facets[e.id],d=c.facet(e);if(h&&!f&&Og(t,h))return u.values[s]=d,0;let p=l(u);return e.compare(p,d)?(u.values[s]=d,0):(u.values[s]=p,1)}}}const Ly=$e.define({static:!0});class Wt{constructor(e,t,n,i,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let t=new Wt(yg++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ly).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let a=n.values[t],s=this.updateF(a,i);return this.compareF(a,s)?0:(n.values[t]=s,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,Ly.of({field:this,create:e})]}get extension(){return this}}const ca={lowest:4,low:3,default:2,high:1,highest:0};function no(r){return e=>new wx(e,r)}const Wa={highest:no(ca.highest),high:no(ca.high),default:no(ca.default),low:no(ca.low),lowest:no(ca.lowest)};class wx{constructor(e,t){this.inner=e,this.prec=t}}class ma{of(e){return new Cd(this,e)}reconfigure(e){return ma.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Cd{constructor(e,t){this.compartment=e,this.inner=t}}class cc{constructor(e,t,n,i,a,s){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=a,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],a=Object.create(null),s=new Map;for(let d of $8(e,t,s))d instanceof Wt?i.push(d):(a[d.facet.id]||(a[d.facet.id]=[])).push(d);let l=Object.create(null),u=[],c=[];for(let d of i)l[d.id]=c.length<<1,c.push(p=>d.slot(p));let f=n==null?void 0:n.config.facets;for(let d in a){let p=a[d],g=p[0].facet,y=f&&f[d]||[];if(p.every(m=>m.type==0))if(l[g.id]=u.length<<1|1,Og(y,p))u.push(n.facet(g));else{let m=g.combine(p.map(v=>v.value));u.push(n&&g.compare(m,n.facet(g))?n.facet(g):m)}else{for(let m of p)m.type==0?(l[m.id]=u.length<<1|1,u.push(m.value)):(l[m.id]=c.length<<1,c.push(v=>m.dynamicSlot(v)));l[g.id]=c.length<<1,c.push(m=>k8(m,g,p))}}let h=c.map(d=>d(l));return new cc(e,s,h,l,u,a)}}function $8(r,e,t){let n=[[],[],[],[],[]],i=new Map;function a(s,l){let u=i.get(s);if(u!=null){if(u<=l)return;let c=n[u].indexOf(s);c>-1&&n[u].splice(c,1),s instanceof Cd&&t.delete(s.compartment)}if(i.set(s,l),Array.isArray(s))for(let c of s)a(c,l);else if(s instanceof Cd){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(s.compartment)||s.inner;t.set(s.compartment,c),a(c,l)}else if(s instanceof wx)a(s.inner,s.prec);else if(s instanceof Wt)n[l].push(s),s.provides&&a(s.provides,l);else if(s instanceof Au)n[l].push(s),s.facet.extensions&&a(s.facet.extensions,ca.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(c,l)}}return a(r,ca.default),n.reduce((s,l)=>s.concat(l))}function Qo(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let i=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|i}function fc(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const xx=$e.define(),Ed=$e.define({combine:r=>r.some(e=>e),static:!0}),Sx=$e.define({combine:r=>r.length?r[0]:void 0,static:!0}),kx=$e.define(),$x=$e.define(),Px=$e.define(),Cx=$e.define({combine:r=>r.length?r[0]:!1});class ea{constructor(e,t){this.type=e,this.value=t}static define(){return new P8}}class P8{of(e){return new ea(this,e)}}class C8{constructor(e){this.map=e}of(e){return new Xe(this,e)}}class Xe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Xe(this.type,t)}is(e){return this.type==e}static define(e={}){return new C8(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let a=i.map(t);a&&n.push(a)}return n}}Xe.reconfigure=Xe.define();Xe.appendConfig=Xe.define();class jt{constructor(e,t,n,i,a,s){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=a,this.scrollIntoView=s,this._doc=null,this._state=null,n&&bx(n,t.newLength),a.some(l=>l.type==jt.time)||(this.annotations=a.concat(jt.time.of(Date.now())))}static create(e,t,n,i,a,s){return new jt(e,t,n,i,a,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(jt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}jt.time=ea.define();jt.userEvent=ea.define();jt.addToHistory=ea.define();jt.remote=ea.define();function E8(r,e){let t=[];for(let n=0,i=0;;){let a,s;if(n<r.length&&(i==e.length||e[i]>=r[n]))a=r[n++],s=r[n++];else if(i<e.length)a=e[i++],s=e[i++];else return t;!t.length||t[t.length-1]<a?t.push(a,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Ex(r,e,t){var n;let i,a,s;return t?(i=e.changes,a=Vt.empty(e.changes.length),s=r.changes.compose(e.changes)):(i=e.changes.map(r.changes),a=r.changes.mapDesc(e.changes,!0),s=r.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(a):(n=r.selection)===null||n===void 0?void 0:n.map(i),effects:Xe.mapEffects(r.effects,i).concat(Xe.mapEffects(e.effects,a)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Td(r,e,t){let n=e.selection,i=hs(e.annotations);return e.userEvent&&(i=i.concat(jt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Vt?e.changes:Vt.of(e.changes||[],t,r.facet(Sx)),selection:n&&(n instanceof ue?n:ue.single(n.anchor,n.head)),effects:hs(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Tx(r,e,t){let n=Td(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let s=!!e[a].sequential;n=Ex(n,Td(r,e[a],s?n.changes.newLength:r.doc.length),s)}let i=jt.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Q8(t?T8(i):i)}function T8(r){let e=r.startState,t=!0;for(let i of e.facet(kx)){let a=i(r);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:E8(t,a))}if(t!==!0){let i,a;if(t===!1)a=r.changes.invertedDesc,i=Vt.empty(e.doc.length);else{let s=r.changes.filter(t);i=s.changes,a=s.filtered.mapDesc(s.changes).invertedDesc}r=jt.create(e,i,r.selection&&r.selection.map(a),Xe.mapEffects(r.effects,a),r.annotations,r.scrollIntoView)}let n=e.facet($x);for(let i=n.length-1;i>=0;i--){let a=n[i](r);a instanceof jt?r=a:Array.isArray(a)&&a.length==1&&a[0]instanceof jt?r=a[0]:r=Tx(e,hs(a),!1)}return r}function Q8(r){let e=r.startState,t=e.facet(Px),n=r;for(let i=t.length-1;i>=0;i--){let a=t[i](r);a&&Object.keys(a).length&&(n=Ex(n,Td(e,a,r.changes.newLength),!0))}return n==r?r:jt.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const A8=[];function hs(r){return r==null?A8:Array.isArray(r)?r:[r]}var Dt=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Dt||(Dt={}));const D8=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Qd;try{Qd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _8(r){if(Qd)return Qd.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||D8.test(t)))return!0}return!1}function M8(r){return e=>{if(!/\S/.test(e))return Dt.Space;if(_8(e))return Dt.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Dt.Word;return Dt.Other}}class Je{constructor(e,t,n,i,a,s){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Qo(this,l<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Qo(this,n),fc(this,n)}update(...e){return Tx(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let l of e.effects)l.is(ma.reconfigure)?(t&&(i=new Map,t.compartments.forEach((u,c)=>i.set(c,u)),t=null),i.set(l.value.compartment,l.value.extension)):l.is(Xe.reconfigure)?(t=null,n=l.value):l.is(Xe.appendConfig)&&(t=null,n=hs(n).concat(l.value));let a;t?a=e.startState.values.slice():(t=cc.resolve(n,i,this),a=new Je(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,c)=>c.reconfigure(u,this),null).values);let s=e.startState.facet(Ed)?e.newSelection:e.newSelection.asSingle();new Je(t,e.newDoc,s,a,(l,u)=>u.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ue.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),a=[n.range],s=hs(n.effects);for(let l=1;l<t.ranges.length;l++){let u=e(t.ranges[l]),c=this.changes(u.changes),f=c.map(i);for(let d=0;d<l;d++)a[d]=a[d].map(f);let h=i.mapDesc(c,!0);a.push(u.range.map(h)),i=i.compose(f),s=Xe.mapEffects(s,f).concat(Xe.mapEffects(hs(u.effects),h))}return{changes:i,selection:ue.create(a,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Vt?e:Vt.of(e,this.doc.length,this.facet(Je.lineSeparator))}toText(e){return ot.of(e.split(this.facet(Je.lineSeparator)||Sd))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Qo(this,t),fc(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Wt&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let s=n[a],l=e[a];i.push(s.init(u=>s.spec.fromJSON(l,u)))}}return Je.create({doc:e.doc,selection:ue.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=cc.resolve(e.extensions||[],new Map),n=e.doc instanceof ot?e.doc:ot.of((e.doc||"").split(t.staticFacet(Je.lineSeparator)||Sd)),i=e.selection?e.selection instanceof ue?e.selection:ue.single(e.selection.anchor,e.selection.head):ue.single(0);return bx(i,n.length),t.staticFacet(Ed)||(i=i.asSingle()),new Je(t,n,i,t.dynamicSlots.map(()=>null),(a,s)=>s.create(a),null)}get tabSize(){return this.facet(Je.tabSize)}get lineBreak(){return this.facet(Je.lineSeparator)||`
`}get readOnly(){return this.facet(Cx)}phrase(e,...t){for(let n of this.facet(Je.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>t.length?n:t[a-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let a of this.facet(xx))for(let s of a(this,t,n))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return M8(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),s=e-n,l=e-n;for(;s>0;){let u=ar(t,s,!1);if(a(t.slice(u,s))!=Dt.Word)break;s=u}for(;l<i;){let u=ar(t,l);if(a(t.slice(l,u))!=Dt.Word)break;l=u}return s==l?null:ue.range(s+n,l+n)}}Je.allowMultipleSelections=Ed;Je.tabSize=$e.define({combine:r=>r.length?r[0]:4});Je.lineSeparator=Sx;Je.readOnly=Cx;Je.phrases=$e.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(i=>r[i]==e[i])}});Je.languageData=xx;Je.changeFilter=kx;Je.transactionFilter=$x;Je.transactionExtender=Px;ma.reconfigure=Xe.define();function $n(r,e,t={}){let n={};for(let i of r)for(let a of Object.keys(i)){let s=i[a],l=n[a];if(l===void 0)n[a]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(t,a))n[a]=t[a](l,s);else throw new Error("Config merge conflict for field "+a)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Ea{eq(e){return this==e}range(e,t=e){return Go.create(e,t,this)}}Ea.prototype.startSide=Ea.prototype.endSide=0;Ea.prototype.point=!1;Ea.prototype.mapMode=nr.TrackDel;class Go{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Go(e,t,n)}}function Ad(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class bg{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let a=n?this.to:this.from;for(let s=i,l=a.length;;){if(s==l)return s;let u=s+l>>1,c=a[u]-e||(n?this.value[u].endSide:this.value[u].startSide)-t;if(u==s)return c>=0?s:l;c>=0?l=u:s=u+1}}between(e,t,n,i){for(let a=this.findIndex(t,-1e9,!0),s=this.findIndex(n,1e9,!1,a);a<s;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let n=[],i=[],a=[],s=-1,l=-1;for(let u=0;u<this.value.length;u++){let c=this.value[u],f=this.from[u]+e,h=this.to[u]+e,d,p;if(f==h){let g=t.mapPos(f,c.startSide,c.mapMode);if(g==null||(d=p=g,c.startSide!=c.endSide&&(p=t.mapPos(f,c.endSide),p<d)))continue}else if(d=t.mapPos(f,c.startSide),p=t.mapPos(h,c.endSide),d>p||d==p&&c.startSide>0&&c.endSide<=0)continue;(p-d||c.endSide-c.startSide)<0||(s<0&&(s=d),c.point&&(l=Math.max(l,p-d)),n.push(c),i.push(d-s),a.push(p-s))}return{mapped:n.length?new bg(i,a,n,l):null,pos:s}}}class tt{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new tt(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:a=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(n&&(t=t.slice().sort(Ad)),this.isEmpty)return t.length?tt.of(t):this;let l=new Qx(this,null,-1).goto(0),u=0,c=[],f=new Xi;for(;l.value||u<t.length;)if(u<t.length&&(l.from-t[u].from||l.startSide-t[u].value.startSide)>=0){let h=t[u++];f.addInner(h.from,h.to,h.value)||c.push(h)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(l.chunkIndex)<t[u].from)&&(!s||i>this.chunkEnd(l.chunkIndex)||a<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||i>l.to||a<l.from||s(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||c.push(Go.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!c.length?tt.empty:this.nextLayer.update({add:c,filter:s,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],u=this.chunk[s],c=e.touchesRange(l,l+u.length);if(c===!1)i=Math.max(i,u.maxPoint),t.push(u),n.push(e.mapPos(l));else if(c===!0){let{mapped:f,pos:h}=u.map(l,e);f&&(i=Math.max(i,f.maxPoint),t.push(f),n.push(h))}}let a=this.nextLayer.map(e);return t.length==0?a:new tt(n,t,a||tt.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],s=this.chunk[i];if(t>=a&&e<=a+s.length&&s.between(a,e-a,t-a,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Uo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Uo.from(e).goto(t)}static compare(e,t,n,i,a=-1){let s=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=a),l=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=a),u=By(s,l,n),c=new io(s,u,a),f=new io(l,u,a);n.iterGaps((h,d,p)=>Iy(c,h,f,d,p,i)),n.empty&&n.length==0&&Iy(c,0,f,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=1e9-1);let a=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),s=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(a.length!=s.length)return!1;if(!a.length)return!0;let l=By(a,s),u=new io(a,l,0).goto(n),c=new io(s,l,0).goto(n);for(;;){if(u.to!=c.to||!Dd(u.active,c.active)||u.point&&(!c.point||!u.point.eq(c.point)))return!1;if(u.to>i)return!0;u.next(),c.next()}}static spans(e,t,n,i,a=-1){let s=new io(e,null,a).goto(t),l=t,u=s.openStart;for(;;){let c=Math.min(s.to,n);if(s.point){let f=s.activeForPoint(s.to),h=s.pointFrom<t?f.length+1:Math.min(f.length,u);i.point(l,c,s.point,f,h,s.pointRank),u=Math.min(s.openEnd(c),f.length)}else c>l&&(i.span(l,c,s.active,u),u=s.openEnd(c));if(s.to>n)return u+(s.point&&s.to>n?1:0);l=s.to,s.next()}}static of(e,t=!1){let n=new Xi;for(let i of e instanceof Go?[e]:t?Z8(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return tt.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=tt.empty;i=i.nextLayer)t=new tt(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}tt.empty=new tt([],[],null,-1);function Z8(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(Ad(e,n)>0)return r.slice().sort(Ad);e=n}return r}tt.empty.nextLayer=tt.empty;class Xi{finishChunk(e){this.chunks.push(new bg(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Xi)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function By(r,e,t){let n=new Map;for(let a of r)for(let s=0;s<a.chunk.length;s++)a.chunk[s].maxPoint<=0&&n.set(a.chunk[s],a.chunkPos[s]);let i=new Set;for(let a of e)for(let s=0;s<a.chunk.length;s++){let l=n.get(a.chunk[s]);l!=null&&(t?t.mapPos(l):l)==a.chunkPos[s]&&!(t!=null&&t.touchesRange(l,l+a.chunk[s].length))&&i.add(a.chunk[s])}return i}class Qx{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Uo{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let a=0;a<e.length;a++)for(let s=e[a];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&i.push(new Qx(s,t,n,a));return i.length==1?i[0]:new Uo(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)mh(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)mh(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),mh(this.heap,0)}}}function mh(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let i=r[n];if(n+1<r.length&&i.compare(r[n+1])>=0&&(i=r[n+1],n++),t.compare(i)<0)break;r[n]=t,r[e]=i,e=n}}class io{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Uo.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){eu(this.active,e),eu(this.activeTo,e),eu(this.activeRank,e),this.minActive=Ny(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:a}=this.cursor;for(;t<this.activeRank.length&&(a-this.activeRank[t]||i-this.activeTo[t])>0;)t++;tu(this.active,t,n),tu(this.activeTo,t,i),tu(this.activeRank,t,a),e&&tu(e,t,this.cursor.from),this.minActive=Ny(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&eu(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Iy(r,e,t,n,i,a){r.goto(e),t.goto(n);let s=n+i,l=n,u=n-e;for(;;){let c=r.to+u-t.to||r.endSide-t.endSide,f=c<0?r.to+u:t.to,h=Math.min(f,s);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Dd(r.activeForPoint(r.to),t.activeForPoint(t.to))||a.comparePoint(l,h,r.point,t.point):h>l&&!Dd(r.active,t.active)&&a.compareRange(l,h,r.active,t.active),f>s)break;l=f,c<=0&&r.next(),c>=0&&t.next()}}function Dd(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function eu(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function tu(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function Ny(r,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||r[i].endSide-r[t].endSide)<0&&(t=i,n=e[i]);return t}function Xs(r,e,t=r.length){let n=0;for(let i=0;i<t;)r.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=ar(r,i));return n}function _d(r,e,t,n){for(let i=0,a=0;;){if(a>=e)return i;if(i==r.length)break;a+=r.charCodeAt(i)==9?t-a%t:1,i=ar(r,i)}return n===!0?-1:r.length}const Md="\u037C",zy=typeof Symbol=="undefined"?"__"+Md:Symbol.for(Md),Zd=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Wy=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class Vi{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function a(s,l,u,c){let f=[],h=/^@(\w+)\b/.exec(s[0]),d=h&&h[1]=="keyframes";if(h&&l==null)return u.push(s[0]+";");for(let p in l){let g=l[p];if(/&/.test(p))a(p.split(/,\s*/).map(y=>s.map(m=>y.replace(/&/,m))).reduce((y,m)=>y.concat(m)),g,u);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+p+") should be a primitive value.");a(i(p),g,f,d)}else g!=null&&f.push(p.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+g+";")}(f.length||d)&&u.push((n&&!h&&!c?s.map(n):s).join(", ")+" {"+f.join(" ")+"}")}for(let s in e)a(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Wy[zy]||1;return Wy[zy]=e+1,Md+e.toString(36)}static mount(e,t,n){let i=e[Zd],a=n&&n.nonce;i?a&&i.setNonce(a):i=new R8(e,a),i.mount(Array.isArray(t)?t:[t])}}let qy=new Map;class R8{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=qy.get(n);if(a)return e.adoptedStyleSheets=[a.sheet,...e.adoptedStyleSheets],e[Zd]=a;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],qy.set(n,this)}else{this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[Zd]=this}mount(e){let t=this.sheet,n=0,i=0;for(let a=0;a<e.length;a++){let s=e[a],l=this.modules.indexOf(s);if(l<i&&l>-1&&(this.modules.splice(l,1),i--,l=-1),l==-1){if(this.modules.splice(i++,0,s),t)for(let u=0;u<s.rules.length;u++)t.insertRule(s.rules[u],n++)}else{for(;i<l;)n+=this.modules[i++].rules.length;n+=s.rules.length,i++}}if(!t){let a="";for(let s=0;s<this.modules.length;s++)a+=this.modules[s].getRules()+`
`;this.styleTag.textContent=a}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Fi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ho={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},L8=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),B8=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rr=0;rr<10;rr++)Fi[48+rr]=Fi[96+rr]=String(rr);for(var rr=1;rr<=24;rr++)Fi[rr+111]="F"+rr;for(var rr=65;rr<=90;rr++)Fi[rr]=String.fromCharCode(rr+32),Ho[rr]=String.fromCharCode(rr);for(var yh in Fi)Ho.hasOwnProperty(yh)||(Ho[yh]=Fi[yh]);function I8(r){var e=L8&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||B8&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Ho:Fi)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function hc(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Rd(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function N8(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Du(r,e){if(!e.anchorNode)return!1;try{return Rd(r,e.anchorNode)}catch{return!1}}function Ko(r){return r.nodeType==3?Ta(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Ao(r,e,t,n){return t?Yy(r,e,t,n,-1)||Yy(r,e,t,n,1):!1}function Jo(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Yy(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:li(r))){if(r.nodeName=="DIV")return!1;let a=r.parentNode;if(!a||a.nodeType!=1)return!1;e=Jo(r)+(i<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=i<0?li(r):0}else return!1}}function li(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function wg(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function z8(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function Ax(r,e){let t=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function W8(r,e,t,n,i,a,s,l){let u=r.ownerDocument,c=u.defaultView||window;for(let f=r,h=!1;f&&!h;)if(f.nodeType==1){let d,p=f==u.body,g=1,y=1;if(p)d=z8(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(h=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let O=f.getBoundingClientRect();({scaleX:g,scaleY:y}=Ax(f,O)),d={left:O.left,right:O.left+f.clientWidth*g,top:O.top,bottom:O.top+f.clientHeight*y}}let m=0,v=0;if(i=="nearest")e.top<d.top?(v=-(d.top-e.top+s),t>0&&e.bottom>d.bottom+v&&(v=e.bottom-d.bottom+v+s)):e.bottom>d.bottom&&(v=e.bottom-d.bottom+s,t<0&&e.top-v<d.top&&(v=-(d.top+v-e.top+s)));else{let O=e.bottom-e.top,b=d.bottom-d.top;v=(i=="center"&&O<=b?e.top+O/2-b/2:i=="start"||i=="center"&&t<0?e.top-s:e.bottom-b+s)-d.top}if(n=="nearest"?e.left<d.left?(m=-(d.left-e.left+a),t>0&&e.right>d.right+m&&(m=e.right-d.right+m+a)):e.right>d.right&&(m=e.right-d.right+a,t<0&&e.left<d.left+m&&(m=-(d.left+m-e.left+a))):m=(n=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:n=="start"==l?e.left-a:e.right-(d.right-d.left)+a)-d.left,m||v)if(p)c.scrollBy(m,v);else{let O=0,b=0;if(v){let w=f.scrollTop;f.scrollTop+=v/y,b=(f.scrollTop-w)*y}if(m){let w=f.scrollLeft;f.scrollLeft+=m/g,O=(f.scrollLeft-w)*g}e={left:e.left-O,top:e.top-b,right:e.right-O,bottom:e.bottom-b},O&&Math.abs(O-m)<1&&(n="nearest"),b&&Math.abs(b-v)<1&&(i="nearest")}if(p)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function q8(r){let e=r.ownerDocument;for(let t=r.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class Y8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?li(t):0),n,Math.min(e.focusOffset,n?li(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let Ha=null;function Dx(r){if(r.setActive)return r.setActive();if(Ha)return r.focus(Ha);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Ha==null?{get preventScroll(){return Ha={preventScroll:!0},!0}}:void 0),!Ha){Ha=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],a=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let Xy;function Ta(r,e,t=e){let n=Xy||(Xy=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function ds(r,e,t){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",n);i.synthetic=!0,r.dispatchEvent(i);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,r.dispatchEvent(a),i.defaultPrevented||a.defaultPrevented}function X8(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function _x(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function V8(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,li(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=li(t))}else{if(t==r)return!0;n=Jo(t),t=t.parentNode}}function Mx(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}class vr{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new vr(e.parentNode,Jo(e),t)}static after(e,t){return new vr(e.parentNode,Jo(e)+1,t)}}const xg=[];class Pt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,a;for(let s of this.children){if(s.flags&7){if(!s.dom&&(a=i?i.nextSibling:n.firstChild)){let l=Pt.get(a);(!l||!l.parent&&l.canReuseDOM(s))&&s.reuseDOM(a)}s.sync(e,t),s.flags&=-8}if(a=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&a!=s.dom&&(t.written=!0),s.dom.parentNode==n)for(;a&&a!=s.dom;)a=Vy(a);else n.insertBefore(s.dom,a);i=s.dom}for(a=i?i.nextSibling:n.firstChild,a&&t&&t.node==n&&(t.written=!0);a;)a=Vy(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=li(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Pt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,a=0;;i++){let s=this.children[i];if(s.dom==n)return a;a+=s.length+s.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,a=-1,s=-1,l=-1;for(let u=0,c=n,f=n;u<this.children.length;u++){let h=this.children[u],d=c+h.length;if(c<e&&d>t)return h.domBoundsAround(e,t,c);if(d>=e&&i==-1&&(i=u,a=c),c>t&&h.dom.parentNode==this.dom){s=u,l=f;break}f=d,c=d+h.breakAfter}return{from:a,to:l<0?n+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=xg){this.markDirty();for(let i=e;i<t;i++){let a=this.children[i];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,t-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Zx(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,a,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Pt.prototype.breakAfter=0;function Vy(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class Zx{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Rx(r,e,t,n,i,a,s,l,u){let{children:c}=r,f=c.length?c[e]:null,h=a.length?a[a.length-1]:null,d=h?h.breakAfter:s;if(!(e==n&&f&&!s&&!d&&a.length<2&&f.merge(t,i,a.length?h:null,t==0,l,u))){if(n<c.length){let p=c[n];p&&(i<p.length||p.breakAfter&&(h==null?void 0:h.breakAfter))?(e==n&&(p=p.split(i),i=0),!d&&h&&p.merge(0,i,h,!0,0,u)?a[a.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,u),a.push(p))):p!=null&&p.breakAfter&&(h?h.breakAfter=1:s=1),n++}for(f&&(f.breakAfter=s,t>0&&(!s&&a.length&&f.merge(t,f.length,a[0],!1,l,0)?f.breakAfter=a.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,l,0),e++));e<n&&a.length;)if(c[n-1].become(a[a.length-1]))n--,a.pop(),u=a.length?0:l;else if(c[e].become(a[0]))e++,a.shift(),l=a.length?0:u;else break;!a.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,l,u)&&e--,(e<n||a.length)&&r.replaceChildren(e,n,a)}}function Lx(r,e,t,n,i,a){let s=r.childCursor(),{i:l,off:u}=s.findPos(t,1),{i:c,off:f}=s.findPos(e,-1),h=e-t;for(let d of n)h+=d.length;r.length+=h,Rx(r,c,f,l,u,n,0,i,a)}let Vr=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Ld=typeof document!="undefined"?document:{documentElement:{style:{}}};const Bd=/Edge\/(\d+)/.exec(Vr.userAgent),Bx=/MSIE \d/.test(Vr.userAgent),Id=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vr.userAgent),xf=!!(Bx||Id||Bd),Fy=!xf&&/gecko\/(\d+)/i.test(Vr.userAgent),Oh=!xf&&/Chrome\/(\d+)/.exec(Vr.userAgent),jy="webkitFontSmoothing"in Ld.documentElement.style,Ix=!xf&&/Apple Computer/.test(Vr.vendor),Gy=Ix&&(/Mobile\/\w+/.test(Vr.userAgent)||Vr.maxTouchPoints>2);var _e={mac:Gy||/Mac/.test(Vr.platform),windows:/Win/.test(Vr.platform),linux:/Linux|X11/.test(Vr.platform),ie:xf,ie_version:Bx?Ld.documentMode||6:Id?+Id[1]:Bd?+Bd[1]:0,gecko:Fy,gecko_version:Fy?+(/Firefox\/(\d+)/.exec(Vr.userAgent)||[0,0])[1]:0,chrome:!!Oh,chrome_version:Oh?+Oh[1]:0,ios:Gy,android:/Android\b/.test(Vr.userAgent),webkit:jy,safari:Ix,webkit_version:jy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ld.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const F8=256;class ui extends Pt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof ui)||this.length-(t-e)+n.length>F8||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ui(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new vr(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return j8(this.dom,e,t)}}class ci extends Pt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(_x(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,a,s){return n&&(!(n instanceof ci&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&s<=0)?!1:(Lx(this,e,t,n?n.children.slice():[],a-1,s-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,a=0;for(let l of this.children){let u=n+l.length;u>e&&t.push(n<e?l.split(e-n):l),i<0&&n>=e&&(i=a),n=u,a++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ci(this.mark,t,s)}domAtPos(e){return Nx(this,e)}coordsAt(e,t){return Wx(this,e,t)}}function j8(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let i=e,a=e,s=0;e==0&&t<0||e==n&&t>=0?_e.chrome||_e.gecko||(e?(i--,s=1):a<n&&(a++,s=-1)):t<0?i--:a<n&&a++;let l=Ta(r,i,a).getClientRects();if(!l.length)return null;let u=l[(s?s<0:t>=0)?0:l.length-1];return _e.safari&&!s&&u.width==0&&(u=Array.prototype.find.call(l,c=>c.width)||u),s?wg(u,s<0):u||null}class Ei extends Pt{static create(e,t,n){return new Ei(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=Ei.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,a,s){return n&&(!(n instanceof Ei)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&s<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Ei&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ot.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):ot.empty}domAtPos(e){return(this.length?e==0:this.side>0)?vr.before(this.dom):vr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let l=s?i.length-1:0;a=i[l],!(e>0?l==0:l==i.length-1||a.top<a.bottom);l+=s?-1:1);return wg(a,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ws extends Pt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ws&&e.side==this.side}split(){return new ws(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?vr.before(this.dom):vr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ot.empty}get isHidden(){return!0}}ui.prototype.children=Ei.prototype.children=ws.prototype.children=xg;function Nx(r,e){let t=r.dom,{children:n}=r,i=0;for(let a=0;i<n.length;i++){let s=n[i],l=a+s.length;if(!(l==a&&s.getSide()<=0)){if(e>a&&e<l&&s.dom.parentNode==t)return s.domAtPos(e-a);if(e<=a)break;a=l}}for(let a=i;a>0;a--){let s=n[a-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let a=i;a<n.length;a++){let s=n[a];if(s.dom.parentNode==t)return s.domAtPos(0)}return new vr(t,0)}function zx(r,e,t){let n,{children:i}=r;t>0&&e instanceof ci&&i.length&&(n=i[i.length-1])instanceof ci&&n.mark.eq(e.mark)?zx(n,e.children[0],t-1):(i.push(e),e.setParent(r)),r.length+=e.length}function Wx(r,e,t){let n=null,i=-1,a=null,s=-1;function l(c,f){for(let h=0,d=0;h<c.children.length&&d<=f;h++){let p=c.children[h],g=d+p.length;g>=f&&(p.children.length?l(p,f-d):(!a||a.isHidden&&t>0)&&(g>f||d==g&&p.getSide()>0)?(a=p,s=f-d):(d<f||d==g&&p.getSide()<0&&!p.isHidden)&&(n=p,i=f-d)),d=g}}l(r,e);let u=(t<0?n:a)||n||a;return u?u.coordsAt(Math.max(0,u==n?i:s),t):G8(r)}function G8(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=Ko(e);return t[t.length-1]||null}function Nd(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const Uy=Object.create(null);function Sg(r,e,t){if(r==e)return!0;r||(r=Uy),e||(e=Uy);let n=Object.keys(r),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let a of n)if(a!=t&&(i.indexOf(a)==-1||r[a]!==e[a]))return!1;return!0}function zd(r,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?r.style.cssText="":r.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?r.style.cssText=t[i]:r.setAttribute(i,t[i]));return n}function U8(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}class Yt extends Pt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,a,s){if(n){if(!(n instanceof Yt))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),Lx(this,e,t,n?n.children.slice():[],a,s),!0}split(e){let t=new Yt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)t.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Sg(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){zx(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Nd(t,this.attrs||{})),n&&(this.attrs=Nd({class:n},this.attrs||{}))}domAtPos(e){return Nx(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(_x(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(zd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Pt.get(i)instanceof ci;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=Pt.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!_e.ios||!this.children.some(a=>a instanceof ui))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof ui)||/[^ -~]/.test(n.text))return null;let i=Ko(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=Wx(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let s=(a-i.textHeight)/2;return{top:n.top+s,bottom:n.bottom-s,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let a=e.children[n],s=i+a.length;if(s>=t){if(a instanceof Yt)return a;if(s>t)break}i=s+a.breakAfter}return null}}class _i extends Pt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,a,s){return n&&(!(n instanceof _i)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&s<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?vr.before(this.dom):vr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new _i(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return xg}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ot.empty}domBoundsAround(){return null}become(e){return e instanceof _i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class ta{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Pr=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Pr||(Pr={}));class ze extends Ea{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new El(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ji(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:a,end:s}=qx(e,t);n=(a?t?-3e8:-1:5e8)-1,i=(s?t?2e8:1:-6e8)+1}return new ji(e,n,i,t,e.widget||null,!0)}static line(e){return new Tl(e)}static set(e,t=!1){return tt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ze.none=tt.empty;class El extends ze{constructor(e){let{start:t,end:n}=qx(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof El&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Sg(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}El.prototype.point=!1;class Tl extends ze{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Tl&&this.spec.class==e.spec.class&&Sg(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Tl.prototype.mapMode=nr.TrackBefore;Tl.prototype.point=!0;class ji extends ze{constructor(e,t,n,i,a,s){super(t,n,a,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?nr.TrackBefore:nr.TrackAfter:nr.TrackDel}get type(){return this.startSide!=this.endSide?Pr.WidgetRange:this.startSide<=0?Pr.WidgetBefore:Pr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ji&&H8(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ji.prototype.point=!0;function qx(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t!=null?t:e,end:n!=null?n:e}}function H8(r,e){return r==e||!!(r&&e&&r.compare(e))}function Wd(r,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=r?t[i]=Math.max(t[i],e):t.push(r,e)}class Do{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof _i&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Yt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ru(new ws(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof _i)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:s,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(ru(new ui(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,a,s){if(this.disallowBlockEffectsFor[s]&&n instanceof ji){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(n instanceof ji)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new _i(n.widget||new Hy("div"),l,n));else{let u=Ei.create(n.widget||new Hy("span"),l,l?0:n.startSide),c=this.atCursorPos&&!u.isEditable&&a<=i.length&&(e<t||n.startSide>0),f=!u.isEditable&&(e<t||a>i.length||n.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(ru(new ws(1),i),a),a=i.length+Math.max(0,a-i.length)),h.append(ru(u,i),a),this.atCursorPos=f,this.pendingBuffer=f?e<t||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,i,a){let s=new Do(e,t,n,a);return s.openEnd=tt.spans(i,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function ru(r,e){for(let t of e)r=new ci(t,[r],r.length);return r}class Hy extends ta{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Et=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Et||(Et={}));const Qa=Et.LTR,kg=Et.RTL;function Yx(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const K8=Yx("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),J8=Yx("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),qd=Object.create(null),Tn=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);qd[e]=t,qd[t]=-e}function Xx(r){return r<=247?K8[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?J8[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const eU=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ti{get dir(){return this.level%2?kg:Qa}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let a=-1;for(let s=0;s<e.length;s++){let l=e[s];if(l.from<=t&&l.to>=t){if(l.level==n)return s;(a<0||(i!=0?i<0?l.from<t:l.to>t:e[a].level>l.level))&&(a=s)}}if(a<0)throw new RangeError("Index out of range");return a}}function Vx(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!Vx(n.inner,i.inner))return!1}return!0}const pt=[];function tU(r,e,t,n,i){for(let a=0;a<=n.length;a++){let s=a?n[a-1].to:e,l=a<n.length?n[a].from:t,u=a?256:i;for(let c=s,f=u,h=u;c<l;c++){let d=Xx(r.charCodeAt(c));d==512?d=f:d==8&&h==4&&(d=16),pt[c]=d==4?2:d,d&7&&(h=d),f=d}for(let c=s,f=u,h=u;c<l;c++){let d=pt[c];if(d==128)c<l-1&&f==pt[c+1]&&f&24?d=pt[c]=f:pt[c]=256;else if(d==64){let p=c+1;for(;p<l&&pt[p]==64;)p++;let g=c&&f==8||p<t&&pt[p]==8?h==1?1:8:256;for(let y=c;y<p;y++)pt[y]=g;c=p-1}else d==8&&h==1&&(pt[c]=1);f=d,d&7&&(h=d)}}}function rU(r,e,t,n,i){let a=i==1?2:1;for(let s=0,l=0,u=0;s<=n.length;s++){let c=s?n[s-1].to:e,f=s<n.length?n[s].from:t;for(let h=c,d,p,g;h<f;h++)if(p=qd[d=r.charCodeAt(h)])if(p<0){for(let y=l-3;y>=0;y-=3)if(Tn[y+1]==-p){let m=Tn[y+2],v=m&2?i:m&4?m&1?a:i:0;v&&(pt[h]=pt[Tn[y]]=v),l=y;break}}else{if(Tn.length==189)break;Tn[l++]=h,Tn[l++]=d,Tn[l++]=u}else if((g=pt[h])==2||g==1){let y=g==i;u=y?0:1;for(let m=l-3;m>=0;m-=3){let v=Tn[m+2];if(v&2)break;if(y)Tn[m+2]|=2;else{if(v&4)break;Tn[m+2]|=4}}}}}function nU(r,e,t,n){for(let i=0,a=n;i<=t.length;i++){let s=i?t[i-1].to:r,l=i<t.length?t[i].from:e;for(let u=s;u<l;){let c=pt[u];if(c==256){let f=u+1;for(;;)if(f==l){if(i==t.length)break;f=t[i++].to,l=i<t.length?t[i].from:e}else if(pt[f]==256)f++;else break;let h=a==1,d=(f<e?pt[f]:n)==1,p=h==d?h?1:2:n;for(let g=f,y=i,m=y?t[y-1].to:r;g>u;)g==m&&(g=t[--y].from,m=y?t[y-1].to:r),pt[--g]=p;u=f}else a=c,u++}}}function Yd(r,e,t,n,i,a,s){let l=n%2?2:1;if(n%2==i%2)for(let u=e,c=0;u<t;){let f=!0,h=!1;if(c==a.length||u<a[c].from){let y=pt[u];y!=l&&(f=!1,h=y==16)}let d=!f&&l==1?[]:null,p=f?n:n+1,g=u;e:for(;;)if(c<a.length&&g==a[c].from){if(h)break e;let y=a[c];if(!f)for(let m=y.to,v=c+1;;){if(m==t)break e;if(v<a.length&&a[v].from==m)m=a[v++].to;else{if(pt[m]==l)break e;break}}if(c++,d)d.push(y);else{y.from>u&&s.push(new Ti(u,y.from,p));let m=y.direction==Qa!=!(p%2);Xd(r,m?n+1:n,i,y.inner,y.from,y.to,s),u=y.to}g=y.to}else{if(g==t||(f?pt[g]!=l:pt[g]==l))break;g++}d?Yd(r,u,g,n+1,i,d,s):u<g&&s.push(new Ti(u,g,p)),u=g}else for(let u=t,c=a.length;u>e;){let f=!0,h=!1;if(!c||u>a[c-1].to){let y=pt[u-1];y!=l&&(f=!1,h=y==16)}let d=!f&&l==1?[]:null,p=f?n:n+1,g=u;e:for(;;)if(c&&g==a[c-1].to){if(h)break e;let y=a[--c];if(!f)for(let m=y.from,v=c;;){if(m==e)break e;if(v&&a[v-1].to==m)m=a[--v].from;else{if(pt[m-1]==l)break e;break}}if(d)d.push(y);else{y.to<u&&s.push(new Ti(y.to,u,p));let m=y.direction==Qa!=!(p%2);Xd(r,m?n+1:n,i,y.inner,y.from,y.to,s),u=y.from}g=y.from}else{if(g==e||(f?pt[g-1]!=l:pt[g-1]==l))break;g--}d?Yd(r,g,u,n+1,i,d,s):g<u&&s.push(new Ti(g,u,p)),u=g}}function Xd(r,e,t,n,i,a,s){let l=e%2?2:1;tU(r,i,a,n,l),rU(r,i,a,n,l),nU(i,a,n,l),Yd(r,i,a,e,t,n,s)}function iU(r,e,t){if(!r)return[new Ti(0,0,e==kg?1:0)];if(e==Qa&&!t.length&&!eU.test(r))return Fx(r.length);if(t.length)for(;r.length>pt.length;)pt[pt.length]=256;let n=[],i=e==Qa?0:1;return Xd(r,i,i,t,0,r.length,n),n}function Fx(r){return[new Ti(0,r,0)]}let jx="";function aU(r,e,t,n,i){var a;let s=n.head-r.from,l=Ti.find(e,s,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),u=e[l],c=u.side(i,t);if(s==c){let d=l+=i?1:-1;if(d<0||d>=e.length)return null;u=e[l=d],s=u.side(!i,t),c=u.side(i,t)}let f=ar(r.text,s,u.forward(i,t));(f<u.from||f>u.to)&&(f=c),jx=r.text.slice(Math.min(s,f),Math.max(s,f));let h=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return h&&f==c&&h.level+(i?0:1)<u.level?ue.cursor(h.side(!i,t)+r.from,h.forward(i,t)?1:-1,h.level):ue.cursor(f+r.from,u.forward(i,t)?-1:1,u.level)}function sU(r,e,t){for(let n=e;n<t;n++){let i=Xx(r.charCodeAt(n));if(i==1)return Qa;if(i==2||i==4)return kg}return Qa}const Gx=$e.define(),Ux=$e.define(),Hx=$e.define(),Kx=$e.define(),Vd=$e.define(),Jx=$e.define(),eS=$e.define(),tS=$e.define({combine:r=>r.some(e=>e)}),rS=$e.define({combine:r=>r.some(e=>e)});class ps{constructor(e,t="nearest",n="nearest",i=5,a=5,s=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=a,this.isSnapshot=s}map(e){return e.empty?this:new ps(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ps(ue.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const nu=Xe.define({map:(r,e)=>r.map(e)});function Rr(r,e,t){let n=r.facet(Kx);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Sf=$e.define({combine:r=>r.length?r[0]:!0});let oU=0;const Oo=$e.define();class Zt{constructor(e,t,n,i,a){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=a(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:a,decorations:s}=t||{};return new Zt(oU++,e,n,i,l=>{let u=[Oo.of(l)];return s&&u.push(el.of(c=>{let f=c.plugin(l);return f?s(f):ze.none})),a&&u.push(a(l)),u})}static fromClass(e,t){return Zt.define(n=>new e(n),t)}}class bh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Rr(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Rr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Rr(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const nS=$e.define(),$g=$e.define(),el=$e.define(),iS=$e.define(),Pg=$e.define(),aS=$e.define();function Ky(r,e){let t=r.state.facet(aS);if(!t.length)return t;let n=t.map(a=>a instanceof Function?a(r):a),i=[];return tt.spans(n,e.from,e.to,{point(){},span(a,s,l,u){let c=a-e.from,f=s-e.from,h=i;for(let d=l.length-1;d>=0;d--,u--){let p=l[d].spec.bidiIsolate,g;if(p==null&&(p=sU(e.text,c,f)),u>0&&h.length&&(g=h[h.length-1]).to==c&&g.direction==p)g.to=f,h=g.inner;else{let y={from:c,to:f,direction:p,inner:[]};h.push(y),h=y.inner}}}}),i}const sS=$e.define();function oS(r){let e=0,t=0,n=0,i=0;for(let a of r.state.facet(sS)){let s=a(r);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(n=Math.max(n,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:t,top:n,bottom:i}}const bo=$e.define();class nn{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new nn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,a=0,s=0,l=0;;i++){let u=i==e.length?null:e[i],c=s-l,f=u?u.fromB:1e9;for(;a<t.length&&t[a]<f;){let h=t[a],d=t[a+1],p=Math.max(l,h),g=Math.min(f,d);if(p<=g&&new nn(p+c,g+c,p,g).addToSet(n),d>f)break;a+=2}if(!u)return n;new nn(u.fromA,u.toA,u.fromB,u.toB).addToSet(n),s=u.toA,l=u.toB}}}class dc{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Vt.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,s,l,u)=>i.push(new nn(a,s,l,u))),this.changedRanges=i}static create(e,t,n){return new dc(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Jy extends Pt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Yt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new nn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:f})=>f<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!pU(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?uU(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:f}=this.hasComposition;n=new nn(c,f,e.changes.mapPos(c,-1),e.changes.mapPos(f,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(_e.ie||_e.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,l=this.updateDeco(),u=hU(s,l,e.changes);return n=nn.extendWithRanges(n,u),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=_e.chrome||_e.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof _i&&s.widget instanceof eO&&a.push(s.dom);i.updateGaps(a)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let s=i.length-1;;s--){let l=s>=0?i[s]:null;if(!l)break;let{fromA:u,toA:c,fromB:f,toB:h}=l,d,p,g,y;if(n&&n.range.fromB<h&&n.range.toB>f){let w=Do.build(this.view.state.doc,f,n.range.fromB,this.decorations,this.dynamicDecorationMap),x=Do.build(this.view.state.doc,n.range.toB,h,this.decorations,this.dynamicDecorationMap);p=w.breakAtStart,g=w.openStart,y=x.openEnd;let $=this.compositionView(n);x.breakAtStart?$.breakAfter=1:x.content.length&&$.merge($.length,$.length,x.content[0],!1,x.openStart,0)&&($.breakAfter=x.content[0].breakAfter,x.content.shift()),w.content.length&&$.merge(0,0,w.content[w.content.length-1],!0,0,w.openEnd)&&w.content.pop(),d=w.content.concat($).concat(x.content)}else({content:d,breakAtStart:p,openStart:g,openEnd:y}=Do.build(this.view.state.doc,f,h,this.decorations,this.dynamicDecorationMap));let{i:m,off:v}=a.findPos(c,1),{i:O,off:b}=a.findPos(u,-1);Rx(this,O,b,m,v,d,p,g,y)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new ui(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new ci(i,[t],t.length);let n=new Yt;return n.append(t,0),n}fixCompositionDOM(e){let t=(a,s)=>{s.flags|=8|(s.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(s);let l=Pt.get(a);l&&l!=s&&(l.dom=null),s.setDOM(a)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)n=i.childPos(n.off,1),i=i.children[n.i],t(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,a=!i&&Du(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||a))return;let s=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?u:this.moveToLine(this.domAtPos(l.head));if(_e.gecko&&l.empty&&!this.hasComposition&&lU(u)){let h=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(h,u.node.childNodes[u.offset]||null)),u=c=new vr(h,0),s=!0}let f=this.view.observer.selectionRange;(s||!f.focusNode||(!Ao(u.node,u.offset,f.anchorNode,f.anchorOffset)||!Ao(c.node,c.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,l))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(f.focusNode)&&dU(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=hc(this.view.root);if(h)if(l.empty){if(_e.gecko){let d=cU(u.node,u.offset);if(d&&d!=3){let p=uS(u.node,u.offset,d==1?1:-1);p&&(u=new vr(p.node,p.offset))}}h.collapse(u.node,u.offset),l.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=l.bidiLevel)}else if(h.extend){h.collapse(u.node,u.offset);try{h.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();l.anchor>l.head&&([u,c]=[c,u]),d.setEnd(c.node,c.offset),d.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(d)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(u,c)),this.impreciseAnchor=u.precise?null:new vr(f.anchorNode,f.anchorOffset),this.impreciseHead=c.precise?null:new vr(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Ao(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=hc(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let s=Yt.find(this,t.head);if(!s)return;let l=s.posAtStart;if(t.head==l||t.head==l+s.length)return;let u=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!u||!c||u.bottom>c.top)return;let f=this.domAtPos(t.head+t.assoc);n.collapse(f.node,f.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&n.collapse(i,a)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let a=Pt.get(t.childNodes[i]);a instanceof Yt&&(n=a.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let a=Pt.get(t.childNodes[i]);a instanceof Yt&&(n=a.domAtPos(a.length))}return n?new vr(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=Pt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof Yt)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let a=this.length,s=this.children.length-1;s>=0;s--){let l=this.children[s],u=a-l.breakAfter,c=u-l.length;if(u<e)break;c<=e&&(c<e||l.covers(-1))&&(u>e||l.covers(1))&&(!n||l instanceof Yt&&!(n instanceof Yt&&t>=0))&&(n=l,i=c),a=c}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Yt))return null;for(;i.children.length;){let{i:l,off:u}=i.childPos(n,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}n=u}if(!(i instanceof ui))return null;let a=ar(i.text,n);if(a==n)return null;let s=Ta(i.dom,n,a).getClientRects();for(let l=0;l<s.length;l++){let u=s[l];if(l==s.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,a=this.view.contentDOM.clientWidth,s=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,u=this.view.textDirection==Et.LTR;for(let c=0,f=0;f<this.children.length;f++){let h=this.children[f],d=c+h.length;if(d>i)break;if(c>=n){let p=h.dom.getBoundingClientRect();if(t.push(p.height),s){let g=h.dom.lastChild,y=g?Ko(g):[];if(y.length){let m=y[y.length-1],v=u?m.right-p.left:p.right-m.left;v>l&&(l=v,this.minWidth=a,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Et.RTL:Et.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Yt){let s=a.measureTextSize();if(s)return s}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=Ko(e.firstChild)[0];t=e.getBoundingClientRect().height,n=a?a.width/27:7,i=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Zx(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let a=i==t.viewports.length?null:t.viewports[i],s=a?a.from-1:this.length;if(s>n){let l=(t.lineBlockAt(s).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(ze.replace({widget:new eO(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!a)break;n=a.to+1}return ze.set(e)}updateDeco(){let e=this.view.state.facet(el).map((i,a)=>(this.dynamicDecorationMap[a]=typeof i=="function")?i(this.view):i),t=!1,n=this.view.state.facet(iS).map((i,a)=>{let s=typeof i=="function";return s&&(t=!0),s?i(this.view):i});n.length&&(this.dynamicDecorationMap[e.length]=t,e.push(tt.join(n)));for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let a=oS(this.view),s={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:l,offsetHeight:u}=this.view.scrollDOM;W8(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Et.LTR)}}function lU(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class eO extends ta{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function lS(r,e){let t=r.observer.selectionRange,n=t.focusNode&&uS(t.focusNode,t.focusOffset,0);if(!n)return null;let i=e-n.offset;return{from:i,to:i+n.node.nodeValue.length,node:n.node}}function uU(r,e,t){let n=lS(r,t);if(!n)return null;let{node:i,from:a,to:s}=n,l=i.nodeValue;if(/[\n\r]/.test(l)||r.state.doc.sliceString(n.from,n.to)!=l)return null;let u=e.invertedDesc,c=new nn(u.mapPos(a),u.mapPos(s),a,s),f=[];for(let h=i.parentNode;;h=h.parentNode){let d=Pt.get(h);if(d instanceof ci)f.push({node:h,deco:d.mark});else{if(d instanceof Yt||h.nodeName=="DIV"&&h.parentNode==r.contentDOM)return{range:c,text:i,marks:f,line:h};if(h!=r.contentDOM)f.push({node:h,deco:new El({inclusive:!0,attributes:U8(h),tagName:h.tagName.toLowerCase()})});else return null}}}function uS(r,e,t){if(t<=0)for(let n=r,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i>0)n=n.childNodes[i-1],i=li(n);else break}if(t>=0)for(let n=r,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length&&t>=0)n=n.childNodes[i],i=0;else break}return null}function cU(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let fU=class{constructor(){this.changes=[]}compareRange(e,t){Wd(e,t,this.changes)}comparePoint(e,t){Wd(e,t,this.changes)}};function hU(r,e,t){let n=new fU;return tt.compare(r,e,t,n),n.changes}function dU(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function pU(r,e){let t=!1;return e&&r.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function gU(r,e,t=1){let n=r.charCategorizer(e),i=r.doc.lineAt(e),a=e-i.from;if(i.length==0)return ue.cursor(e);a==0?t=1:a==i.length&&(t=-1);let s=a,l=a;t<0?s=ar(i.text,a,!1):l=ar(i.text,a);let u=n(i.text.slice(s,l));for(;s>0;){let c=ar(i.text,s,!1);if(n(i.text.slice(c,s))!=u)break;s=c}for(;l<i.length;){let c=ar(i.text,l);if(n(i.text.slice(l,c))!=u)break;l=c}return ue.range(s+i.from,l+i.from)}function vU(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function mU(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function wh(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function tO(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function rO(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Fd(r,e,t){let n,i,a,s,l=!1,u,c,f,h;for(let g=r.firstChild;g;g=g.nextSibling){let y=Ko(g);for(let m=0;m<y.length;m++){let v=y[m];i&&wh(i,v)&&(v=tO(rO(v,i.bottom),i.top));let O=vU(e,v),b=mU(t,v);if(O==0&&b==0)return g.nodeType==3?nO(g,e,t):Fd(g,e,t);if(!n||s>b||s==b&&a>O){n=g,i=v,a=O,s=b;let w=b?t<v.top?-1:1:O?e<v.left?-1:1:0;l=!w||(w>0?m<y.length-1:m>0)}O==0?t>v.bottom&&(!f||f.bottom<v.bottom)?(u=g,f=v):t<v.top&&(!h||h.top>v.top)&&(c=g,h=v):f&&wh(f,v)?f=rO(f,v.bottom):h&&wh(h,v)&&(h=tO(h,v.top))}}if(f&&f.bottom>=t?(n=u,i=f):h&&h.top<=t&&(n=c,i=h),!n)return{node:r,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return nO(n,d,t);if(l&&n.contentEditable!="false")return Fd(n,d,t);let p=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:r,offset:p}}function nO(r,e,t){let n=r.nodeValue.length,i=-1,a=1e9,s=0;for(let l=0;l<n;l++){let u=Ta(r,l,l+1).getClientRects();for(let c=0;c<u.length;c++){let f=u[c];if(f.top==f.bottom)continue;s||(s=e-f.left);let h=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&h<a){let d=e>=(f.left+f.right)/2,p=d;if((_e.chrome||_e.gecko)&&Ta(r,l).getBoundingClientRect().left==f.right&&(p=!d),h<=0)return{node:r,offset:l+(p?1:0)};i=l+(p?1:0),a=h}}}return{node:r,offset:i>-1?i:s>0?r.nodeValue.length:0}}function cS(r,e,t,n=-1){var i,a;let s=r.contentDOM.getBoundingClientRect(),l=s.top+r.viewState.paddingTop,u,{docHeight:c}=r.viewState,{x:f,y:h}=e,d=h-l;if(d<0)return 0;if(d>c)return r.state.doc.length;for(let w=r.viewState.heightOracle.textHeight/2,x=!1;u=r.elementAtHeight(d),u.type!=Pr.Text;)for(;d=n>0?u.bottom+w:u.top-w,!(d>=0&&d<=c);){if(x)return t?null:0;x=!0,n=-n}h=l+d;let p=u.from;if(p<r.viewport.from)return r.viewport.from==0?0:t?null:iO(r,s,u,f,h);if(p>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:iO(r,s,u,f,h);let g=r.dom.ownerDocument,y=r.root.elementFromPoint?r.root:g,m=y.elementFromPoint(f,h);m&&!r.contentDOM.contains(m)&&(m=null),m||(f=Math.max(s.left+1,Math.min(s.right-1,f)),m=y.elementFromPoint(f,h),m&&!r.contentDOM.contains(m)&&(m=null));let v,O=-1;if(m&&((i=r.docView.nearest(m))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let w=g.caretPositionFromPoint(f,h);w&&({offsetNode:v,offset:O}=w)}else if(g.caretRangeFromPoint){let w=g.caretRangeFromPoint(f,h);w&&({startContainer:v,startOffset:O}=w,(!r.contentDOM.contains(v)||_e.safari&&yU(v,O,f)||_e.chrome&&OU(v,O,f))&&(v=void 0))}}if(!v||!r.docView.dom.contains(v)){let w=Yt.find(r.docView,p);if(!w)return d>u.top+u.height/2?u.to:u.from;({node:v,offset:O}=Fd(w.dom,f,h))}let b=r.docView.nearest(v);if(!b)return null;if(b.isWidget&&((a=b.dom)===null||a===void 0?void 0:a.nodeType)==1){let w=b.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(v,O)+b.posAtStart}function iO(r,e,t,n,i){let a=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let l=r.viewState.heightOracle.textHeight;a+=Math.floor((i-t.top-(r.defaultLineHeight-l)*.5)/l)*r.viewState.heightOracle.lineLength}let s=r.state.sliceDoc(t.from,t.to);return t.from+_d(s,a,r.state.tabSize)}function yU(r,e,t){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let i=r.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Ta(r,n-1,n).getBoundingClientRect().left>t}function OU(r,e,t){if(e!=0)return!1;for(let i=r;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let n=r.nodeType==1?r.getBoundingClientRect():Ta(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function jd(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Pr.Text))return n}return t}function bU(r,e,t,n){let i=jd(r,e.head),a=!n||i.type!=Pr.Text||!(r.lineWrapping||i.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let s=r.dom.getBoundingClientRect(),l=r.textDirectionAt(i.from),u=r.posAtCoords({x:t==(l==Et.LTR)?s.right-1:s.left+1,y:(a.top+a.bottom)/2});if(u!=null)return ue.cursor(u,t?-1:1)}return ue.cursor(t?i.to:i.from,t?-1:1)}function aO(r,e,t,n){let i=r.state.doc.lineAt(e.head),a=r.bidiSpans(i),s=r.textDirectionAt(i.from);for(let l=e,u=null;;){let c=aU(i,a,s,l,t),f=jx;if(!c){if(i.number==(t?r.state.doc.lines:1))return l;f=`
`,i=r.state.doc.line(i.number+(t?1:-1)),a=r.bidiSpans(i),c=r.visualLineSide(i,!t)}if(u){if(!u(f))return l}else{if(!n)return c;u=n(f)}l=c}}function wU(r,e,t){let n=r.state.charCategorizer(e),i=n(t);return a=>{let s=n(a);return i==Dt.Space&&(i=s),i==s}}function xU(r,e,t,n){let i=e.head,a=t?1:-1;if(i==(t?r.state.doc.length:0))return ue.cursor(i,e.assoc);let s=e.goalColumn,l,u=r.contentDOM.getBoundingClientRect(),c=r.coordsAtPos(i,e.assoc||-1),f=r.documentTop;if(c)s==null&&(s=c.left-u.left),l=a<0?c.top:c.bottom;else{let p=r.viewState.lineBlockAt(i);s==null&&(s=Math.min(u.right-u.left,r.defaultCharacterWidth*(i-p.from))),l=(a<0?p.top:p.bottom)+f}let h=u.left+s,d=n!=null?n:r.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=l+(d+p)*a,y=cS(r,{x:h,y:g},!1,a);if(g<u.top||g>u.bottom||(a<0?y<i:y>i)){let m=r.docView.coordsForChar(y),v=!m||g<m.top?-1:1;return ue.cursor(y,v,void 0,s)}}}function _u(r,e,t){for(;;){let n=0;for(let i of r)i.between(e-1,e+1,(a,s,l)=>{if(e>a&&e<s){let u=n||t||(e-a<s-e?-1:1);e=u<0?a:s,n=u}});if(!n)return e}}function xh(r,e,t){let n=_u(r.state.facet(Pg).map(i=>i(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:ue.cursor(n,n<t.from?1:-1)}class SU{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&IU(e.contentDOM.ownerDocument)}handleEvent(e){!AU(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=kU(e),n=this.handlers,i=this.view.contentDOM;for(let a in t)if(a!="scroll"){let s=!t[a].handlers.length,l=n[a];l&&s!=!l.handlers.length&&(i.removeEventListener(a,this.handleEvent),l=null),l||i.addEventListener(a,this.handleEvent,{passive:s})}for(let a in n)a!="scroll"&&!t[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&hS.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=fS.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||$U.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,ds(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function sO(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(i){Rr(t.state,i)}}}function kU(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let i=n.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let s=i.domEventHandlers[a];s&&t(a).handlers.push(sO(n.value,s))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let s=i.domEventObservers[a];s&&t(a).observers.push(sO(n.value,s))}}for(let n in wn)t(n).handlers.push(wn[n]);for(let n in xn)t(n).observers.push(xn[n]);return e}const fS=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$U="dthko",hS=[16,17,18,20,91,92,224,225],iu=6;function au(r){return Math.max(0,r)*.7+8}function PU(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class CU{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=q8(e.contentDOM),this.atoms=e.state.facet(Pg).map(s=>s(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Je.allowMultipleSelections)&&EU(e,t),this.dragging=QU(e,t)&&vS(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&PU(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,a=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},s=oS(this.view);e.clientX-s.left<=a.left+iu?n=-au(a.left-e.clientX):e.clientX+s.right>=a.right-iu&&(n=au(e.clientX-a.right)),e.clientY-s.top<=a.top+iu?i=-au(a.top-e.clientY):e.clientY+s.bottom>=a.bottom-iu&&(i=au(e.clientY-a.bottom)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],a=null;if(i.empty){let s=_u(this.atoms,i.from,0);s!=i.from&&(a=ue.cursor(s,-1))}else{let s=_u(this.atoms,i.from,-1),l=_u(this.atoms,i.to,1);(s!=i.from||l!=i.to)&&(a=ue.range(i.from==i.anchor?s:l,i.from==i.head?s:l))}a&&(t||(t=e.ranges.slice()),t[n]=a)}return t?ue.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function EU(r,e){let t=r.state.facet(Gx);return t.length?t[0](e):_e.mac?e.metaKey:e.ctrlKey}function TU(r,e){let t=r.state.facet(Ux);return t.length?t[0](e):_e.mac?!e.altKey:!e.ctrlKey}function QU(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=hc(r.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let s=i[a];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function AU(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Pt.get(t))&&n.ignoreEvent(e))return!1;return!0}const wn=Object.create(null),xn=Object.create(null),dS=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function DU(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),pS(r,t.value)},50)}function pS(r,e){let{state:t}=r,n,i=1,a=t.toText(e),s=a.lines==t.selection.ranges.length;if(Gd!=null&&t.selection.ranges.every(u=>u.empty)&&Gd==a.toString()){let u=-1;n=t.changeByRange(c=>{let f=t.doc.lineAt(c.from);if(f.from==u)return{range:c};u=f.from;let h=t.toText((s?a.line(i++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:h},range:ue.cursor(c.from+h.length)}})}else s?n=t.changeByRange(u=>{let c=a.line(i++);return{changes:{from:u.from,to:u.to,insert:c.text},range:ue.cursor(u.from+c.length)}}):n=t.replaceSelection(a);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}xn.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};wn.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&(r.inputState.lastEscPress=Date.now()),!1);xn.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};xn.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};wn.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(Hx))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=ZU(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new CU(r,e,t,n)),n&&r.observer.ignore(()=>Dx(r.contentDOM));let i=r.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function oO(r,e,t,n){if(n==1)return ue.cursor(e,t);if(n==2)return gU(r.state,e,t);{let i=Yt.find(r.docView,e),a=r.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:a.from,l=i?i.posAtEnd:a.to;return l<r.state.doc.length&&l==a.to&&l++,ue.range(s,l)}}let gS=(r,e)=>r>=e.top&&r<=e.bottom,lO=(r,e,t)=>gS(e,t)&&r>=t.left&&r<=t.right;function _U(r,e,t,n){let i=Yt.find(r.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let s=i.coordsAt(a,-1);if(s&&lO(t,n,s))return-1;let l=i.coordsAt(a,1);return l&&lO(t,n,l)?1:s&&gS(n,s)?-1:1}function uO(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:_U(r,t,e.clientX,e.clientY)}}const MU=_e.ie&&_e.ie_version<=11;let cO=null,fO=0,hO=0;function vS(r){if(!MU)return r.detail;let e=cO,t=hO;return cO=r,hO=Date.now(),fO=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(fO+1)%3:1}function ZU(r,e){let t=uO(r,e),n=vS(e),i=r.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),i=i.map(a.changes))},get(a,s,l){let u=uO(r,a),c,f=oO(r,u.pos,u.bias,n);if(t.pos!=u.pos&&!s){let h=oO(r,t.pos,t.bias,n),d=Math.min(h.from,f.from),p=Math.max(h.to,f.to);f=d<f.from?ue.range(d,p):ue.range(p,d)}return s?i.replaceRange(i.main.extend(f.from,f.to)):l&&n==1&&i.ranges.length>1&&(c=RU(i,u.pos))?c:l?i.addRange(f):ue.create([f])}}}function RU(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:i}=r.ranges[t];if(n<=e&&i>=e)return ue.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}wn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let i=r.docView.nearest(e.target);if(i&&i.isWidget){let a=i.posAtStart,s=a+i.length;(a>=t.to||s<=t.from)&&(t=ue.range(a,s))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};wn.dragend=r=>(r.inputState.draggedContent=null,!1);function dO(r,e,t,n){if(!t)return;let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=r.inputState,s=n&&a&&TU(r,e)?{from:a.from,to:a.to}:null,l={from:i,insert:t},u=r.state.changes(s?[s,l]:l);r.focus(),r.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),r.inputState.draggedContent=null}wn.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,a=()=>{++i==t.length&&dO(r,e,n.filter(s=>s!=null).join(r.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let l=new FileReader;l.onerror=a,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[s]=l.result),a()},l.readAsText(t[s])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return dO(r,e,n,!0),!0}return!1};wn.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=dS?null:e.clipboardData;return t?(pS(r,t.getData("text/plain")||t.getData("text/uri-text")),!0):(DU(r),!1)};function LU(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function BU(r){let e=[],t=[],n=!1;for(let i of r.selection.ranges)i.empty||(e.push(r.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:a}of r.selection.ranges){let s=r.doc.lineAt(a);s.number>i&&(e.push(s.text),t.push({from:s.from,to:Math.min(r.doc.length,s.to+1)})),i=s.number}n=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:n}}let Gd=null;wn.copy=wn.cut=(r,e)=>{let{text:t,ranges:n,linewise:i}=BU(r.state);if(!t&&!i)return!1;Gd=i?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=dS?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",t),!0):(LU(r,t),!1)};const mS=ea.define();function yS(r,e){let t=[];for(let n of r.facet(eS)){let i=n(r,e);i&&t.push(i)}return t?r.update({effects:t,annotations:mS.of(!0)}):null}function OS(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=yS(r.state,e);t?r.dispatch(t):r.update([])}},10)}xn.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),OS(r)};xn.blur=r=>{r.observer.clearSelectionRange(),OS(r)};xn.compositionstart=xn.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0)};xn.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,_e.chrome&&_e.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50)};xn.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};wn.beforeinput=(r,e)=>{var t;let n;if(_e.chrome&&_e.android&&(n=fS.find(i=>i.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return!1};const pO=new Set;function IU(r){pO.has(r)||(pO.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const gO=["pre-wrap","normal","pre-line","break-spaces"];class NU{constructor(e){this.lineWrapping=e,this.doc=ot.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return gO.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,a,s){let l=gO.indexOf(e)>-1,u=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=a,u){this.heightSamples={};for(let c=0;c<s.length;c++){let f=s[c];f<0?c++:this.heightSamples[Math.floor(f*10)]=!0}}return u}}class zU{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Zn{constructor(e,t,n,i,a){this.from=e,this.length=t,this.top=n,this.height=i,this._content=a}get type(){return typeof this._content=="number"?Pr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ji?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Zn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var kt=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(kt||(kt={}));const Mu=.001;class Cr{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Mu&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Cr.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let a=this,s=n.doc;for(let l=i.length-1;l>=0;l--){let{fromA:u,toA:c,fromB:f,toB:h}=i[l],d=a.lineAt(u,kt.ByPosNoHeight,n.setDoc(t),0,0),p=d.to>=c?d:a.lineAt(c,kt.ByPosNoHeight,n,0,0);for(h+=p.to-c,c=p.to;l>0&&d.from<=i[l-1].toA;)u=i[l-1].fromA,f=i[l-1].fromB,l--,u<d.from&&(d=a.lineAt(u,kt.ByPosNoHeight,n,0,0));f+=d.from-u,u=d.from;let g=Cg.build(n.setDoc(s),e,f,h);a=a.replace(u,c,g)}return a.updateHeight(n,0)}static empty(){return new Wr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,a=0;for(;;)if(t==n)if(i>a*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),n+=1+l.break,i-=l.size}else if(a>i*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,a-=l.size}else break;else if(i<a){let l=e[t++];l&&(i+=l.size)}else{let l=e[--n];l&&(a+=l.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,n++),new WU(Cr.of(e.slice(0,t)),s,Cr.of(e.slice(n)))}}Cr.prototype.size=1;class bS extends Cr{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new Zn(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,a){return this.blockAt(0,n,i,a)}forEachLine(e,t,n,i,a,s){e<=a+this.length&&t>=a&&s(this.blockAt(0,n,i,a))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Wr extends bS{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new Zn(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof Wr||i instanceof er&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof er?i=new Wr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Cr.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class er extends Cr{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,a=i-n+1,s,l=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*a);s=u/a,this.length>a+1&&(l=(this.height-u)/(this.length-a-1))}else s=this.height/a;return{firstLine:n,lastLine:i,perLine:s,perChar:l}}blockAt(e,t,n,i){let{firstLine:a,lastLine:s,perLine:l,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),f=t.doc.lineAt(c),h=l+f.length*u,d=Math.max(n,e-h/2);return new Zn(f.from,f.length,d,h,0)}else{let c=Math.max(0,Math.min(s-a,Math.floor((e-n)/l))),{from:f,length:h}=t.doc.line(a+c);return new Zn(f,h,n+l*c,l,0)}}lineAt(e,t,n,i,a){if(t==kt.ByHeight)return this.blockAt(e,n,i,a);if(t==kt.ByPosNoHeight){let{from:p,to:g}=n.doc.lineAt(e);return new Zn(p,g-p,0,0,0)}let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(n,a),c=n.doc.lineAt(e),f=l+c.length*u,h=c.number-s,d=i+l*h+u*(c.from-a-h);return new Zn(c.from,c.length,Math.max(i,Math.min(d,i+this.height-f)),f,0)}forEachLine(e,t,n,i,a,s){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:l,perLine:u,perChar:c}=this.heightMetrics(n,a);for(let f=e,h=i;f<=t;){let d=n.doc.lineAt(f);if(f==e){let g=d.number-l;h+=u*g+c*(e-a-g)}let p=u+c*d.length;s(new Zn(d.from,d.length,h,p,0)),h+=p,f=d.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let a=n[n.length-1];a instanceof er?n[n.length-1]=new er(a.length+i):n.push(null,new er(i-1))}if(e>0){let a=n[0];a instanceof er?n[0]=new er(e+a.length):n.unshift(new er(e-1),null)}return Cr.of(n)}decomposeLeft(e,t){t.push(new er(e-1),null)}decomposeRight(e,t){t.push(null,new er(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let a=t+this.length;if(i&&i.from<=t+this.length&&i.more){let s=[],l=Math.max(t,i.from),u=-1;for(i.from>t&&s.push(new er(i.from-t-1).updateHeight(e,t));l<=a&&i.more;){let f=e.doc.lineAt(l).length;s.length&&s.push(null);let h=i.heights[i.index++];u==-1?u=h:Math.abs(h-u)>=Mu&&(u=-2);let d=new Wr(f,h);d.outdated=!1,s.push(d),l+=f+1}l<=a&&s.push(null,new er(a-l).updateHeight(e,l));let c=Cr.of(s);return(u<0||Math.abs(c.height-this.height)>=Mu||Math.abs(u-this.heightMetrics(e,t).perLine)>=Mu)&&(e.heightChanged=!0),c}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class WU extends Cr{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,a,i+this.left.length+this.break)}lineAt(e,t,n,i,a){let s=i+this.left.height,l=a+this.left.length+this.break,u=t==kt.ByHeight?e<s:e<l,c=u?this.left.lineAt(e,t,n,i,a):this.right.lineAt(e,t,n,s,l);if(this.break||(u?c.to<l:c.from>l))return c;let f=t==kt.ByPosNoHeight?kt.ByPosNoHeight:kt.ByPos;return u?c.join(this.right.lineAt(l,f,n,s,l)):this.left.lineAt(l,f,n,i,a).join(c)}forEachLine(e,t,n,i,a,s){let l=i+this.left.height,u=a+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,n,i,a,s),t>=u&&this.right.forEachLine(e,t,n,l,u,s);else{let c=this.lineAt(u,kt.ByPos,n,i,a);e<c.from&&this.left.forEachLine(e,c.from-1,n,i,a,s),c.to>=e&&c.from<=t&&s(c),t>c.to&&this.right.forEachLine(c.to+1,t,n,l,u,s)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let a=[];e>0&&this.decomposeLeft(e,a);let s=a.length;for(let l of n)a.push(l);if(e>0&&vO(a,s-1),t<this.length){let l=a.length;this.decomposeRight(t,a),vO(a,l)}return Cr.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Cr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:a,right:s}=this,l=t+a.length+this.break,u=null;return i&&i.from<=t+a.length&&i.more?u=a=a.updateHeight(e,t,n,i):a.updateHeight(e,t,n),i&&i.from<=l+s.length&&i.more?u=s=s.updateHeight(e,l,n,i):s.updateHeight(e,l,n),u?this.balanced(a,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function vO(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof er&&(n=r[e+1])instanceof er&&r.splice(e-1,3,new er(t.length+1+n.length))}const qU=5;class Cg{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Wr?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Wr(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new bS(s,i,n)):(s||a||i>=qU)&&this.addLineDeco(i,a,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Wr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new er(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Wr)return e;let t=new Wr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Wr)&&!this.isCovered?this.nodes.push(new Wr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Wr&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let a=new Cg(n,e);return tt.spans(t,n,i,a,0),a.finish(n)}}function YU(r,e,t){let n=new XU;return tt.compare(r,e,t,n,0),n.changes}class XU{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&Wd(e,t,this.changes,5)}}function VU(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,i=n.defaultView||window,a=Math.max(0,t.left),s=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let c=r.parentNode;c&&c!=n.body;)if(c.nodeType==1){let f=c,h=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&h.overflow!="visible"){let d=f.getBoundingClientRect();a=Math.max(a,d.left),s=Math.min(s,d.right),l=Math.max(l,d.top),u=c==r.parentNode?d.bottom:Math.min(u,d.bottom)}c=h.position=="absolute"||h.position=="fixed"?f.offsetParent:f.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:a-t.left,right:Math.max(a,s)-t.left,top:l-(t.top+e),bottom:Math.max(l,u)-(t.top+e)}}function FU(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Sh{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],a=t[n];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,t){return ze.replace({widget:new jU(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class jU extends ta{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class mO{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=yO,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet($g).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new NU(t),this.stateDeco=e.facet(el).filter(n=>typeof n!="function"),this.heightMap=Cr.empty().applyChanges(this.stateDeco,ot.empty,this.heightOracle.setDoc(e.doc),[new nn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ze.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:a,to:s})=>i>=a&&i<=s)){let{from:a,to:s}=this.lineBlockAt(i);e.push(new su(a,s))}}this.viewports=e.sort((n,i)=>n.from-i.from),this.scaler=this.heightMap.height<=7e6?yO:new HU(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:wo(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(el).filter(f=>typeof f!="function");let i=e.changedRanges,a=nn.extendWithRanges(i,YU(n,this.stateDeco,e?e.changes:Vt.empty(this.state.doc.length))),s=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=s&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let c=!e.changes.empty||e.flags&2||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(rS)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Et.RTL:Et.LTR;let s=this.heightOracle.mustRefreshForWrapping(a),l=t.getBoundingClientRect(),u=s||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,f=0;if(l.width&&l.height){let{scaleX:w,scaleY:x}=Ax(t,l);(this.scaleX!=w||this.scaleY!=x)&&(this.scaleX=w,this.scaleY=x,c|=8,s=u=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Mx(e.scrollDOM);let g=(this.printing?FU:VU)(t,this.paddingTop),y=g.top-this.pixelViewport.top,m=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(u=!0)),!this.inView&&!this.scrollTarget)return 0;let O=l.width;if((this.contentDOMWidth!=O||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),u){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(s=!0),s||i.lineWrapping&&Math.abs(O-this.contentDOMWidth)>i.charWidth){let{lineHeight:x,charWidth:$,textHeight:S}=e.docView.measureTextSize();s=x>0&&i.refresh(a,x,$,S,O/$,w),s&&(e.docView.minWidth=0,c|=8)}y>0&&m>0?f=Math.max(y,m):y<0&&m<0&&(f=Math.min(y,m)),i.heightChanged=!1;for(let x of this.viewports){let $=x.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(x);this.heightMap=(s?Cr.empty().applyChanges(this.stateDeco,ot.empty,this.heightOracle,[new nn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new zU(x.from,$))}i.heightChanged&&(c|=2)}let b=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(this.viewport=this.getViewport(f,this.scrollTarget)),this.updateForViewport(),(c&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:s,visibleBottom:l}=this,u=new su(i.lineAt(s-n*1e3,kt.ByHeight,a,0,0).from,i.lineAt(l+(1-n)*1e3,kt.ByHeight,a,0,0).to);if(t){let{head:c}=t.range;if(c<u.from||c>u.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,kt.ByPos,a,0,0),d;t.y=="center"?d=(h.top+h.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&c<u.from?d=h.top:d=h.bottom-f,u=new su(i.lineAt(d-1e3/2,kt.ByHeight,a,0,0).from,i.lineAt(d+f+1e3/2,kt.ByHeight,a,0,0).to)}}return u}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new su(this.heightMap.lineAt(n,kt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,kt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,kt.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,kt.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:l}=this;return(e==0||i<=s-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=l+Math.max(10,Math.min(n,250)))&&i>s-2*1e3&&a<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new Sh(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,a=i>>1,s=i<<1;if(this.defaultTextDirection!=Et.LTR&&!n)return[];let l=[],u=(c,f,h,d)=>{if(f-c<a)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let m of g)if(m>c&&m<f){u(c,m-10,h,d),u(m+10,f,h,d);return}let y=UU(e,m=>m.from>=h.from&&m.to<=h.to&&Math.abs(m.from-c)<a&&Math.abs(m.to-f)<a&&!g.some(v=>m.from<v&&m.to>v));if(!y){if(f<h.to&&t&&n&&t.visibleRanges.some(m=>m.from<=f&&m.to>=f)){let m=t.moveToLineBoundary(ue.cursor(f),!1,!0).head;m>c&&(f=m)}y=new Sh(c,f,this.gapSize(h,c,f,d))}l.push(y)};for(let c of this.viewportLines){if(c.length<s)continue;let f=GU(c.from,c.to,this.stateDeco);if(f.total<s)continue;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(n){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,m;if(h!=null){let v=lu(f,h),O=((this.visibleBottom-this.visibleTop)/2+g)/c.height;y=v-O,m=v+O}else y=(this.visibleTop-c.top-g)/c.height,m=(this.visibleBottom-c.top+g)/c.height;d=ou(f,y),p=ou(f,m)}else{let g=f.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,m,v;if(h!=null){let O=lu(f,h),b=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/g;m=O-b,v=O+b}else m=(this.pixelViewport.left-y)/g,v=(this.pixelViewport.right+y)/g;d=ou(f,m),p=ou(f,v)}d>c.from&&u(c.from,d,c,f),p<c.to&&u(p,c.to,c,f)}return l}gapSize(e,t,n,i){let a=lu(i,n)-lu(i,t);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){Sh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ze.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];tt.spans(e,this.viewport.from,this.viewport.to,{span(i,a){t.push({from:i,to:a})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=t[a].from||i.to!=t[a].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||wo(this.heightMap.lineAt(e,kt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return wo(this.heightMap.lineAt(this.scaler.fromDOM(e),kt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return wo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class su{constructor(e,t){this.from=e,this.to=t}}function GU(r,e,t){let n=[],i=r,a=0;return tt.spans(t,r,e,{span(){},point(s,l){s>i&&(n.push({from:i,to:s}),a+=s-i),i=l}},20),i<e&&(n.push({from:i,to:e}),a+=e-i),{total:a,ranges:n}}function ou({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let i=0;;i++){let{from:a,to:s}=e[i],l=s-a;if(n<=l)return a+n;n-=l}}function lu(r,e){let t=0;for(let{from:n,to:i}of r.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/r.total}function UU(r,e){for(let t of r)if(e(t))return t}const yO={toDOM(r){return r},fromDOM(r){return r},scale:1};class HU{constructor(e,t,n){let i=0,a=0,s=0;this.viewports=n.map(({from:l,to:u})=>{let c=t.lineAt(l,kt.ByPos,e,0,0).top,f=t.lineAt(u,kt.ByPos,e,0,0).bottom;return i+=f-c,{from:l,to:u,top:c,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=s+(l.top-a)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),a=l.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return i+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,i=a.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,i=a.domBottom}}}function wo(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new Zn(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(i=>wo(i,e)):r._content)}const uu=$e.define({combine:r=>r.join(" ")}),Ud=$e.define({combine:r=>r.indexOf(!0)>-1}),Hd=Vi.newName(),wS=Vi.newName(),xS=Vi.newName(),SS={"&light":"."+wS,"&dark":"."+xS};function Kd(r,e,t){return new Vi(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return r;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):r+" "+n}})}const KU=Kd("."+Hd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},SS),xo="\uFFFF";class JU{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Je.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=xo}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let a=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==t)break;let l=Pt.get(i),u=Pt.get(s);(l&&u?l.breakAfter:(l?l.breakAfter:OO(i))||OO(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=s}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,s=1,l;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(l=i.exec(t))&&(a=l.index,s=l[0].length),this.append(t.slice(n,a<0?t.length:a)),a<0)break;if(this.lineBreak(),s>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=s-1);n=a+s}}readNode(e){if(e.cmIgnore)return;let t=Pt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(e9(e,n.node,n.offset)?t:0))}}function e9(r,e,t){for(;;){if(!e||t<li(e))return!1;if(e==r)return!0;t=Jo(e)+1,e=e.parentNode}}function OO(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class bO{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class t9{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let l=a||s?[]:i9(e),u=new JU(l,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=a9(l,this.bounds.from)}else{let l=e.observer.selectionRange,u=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!Rd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=s&&s.node==l.anchorNode&&s.offset==l.anchorOffset||!Rd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=e.viewport;if(_e.ios&&e.state.selection.main.empty&&u!=c&&(f.from>0||f.to<e.state.doc.length)){let h=f.from-Math.min(u,c),d=f.to-Math.max(u,c);(h==0||h==1)&&(d==0||d==-1)&&(u=0,c=e.state.doc.length)}this.newSel=ue.single(c,u)}}}function kS(r,e){let t,{newSel:n}=e,i=r.state.selection.main,a=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:l}=e.bounds,u=i.from,c=null;(a===8||_e.android&&e.text.length<l-s)&&(u=i.to,c="end");let f=n9(r.state.doc.sliceString(s,l,xo),e.text,u-s,c);f&&(_e.chrome&&a==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==xo+xo&&f.toB--,t={from:s+f.from,to:s+f.toA,insert:ot.of(e.text.slice(f.from,f.toB).split(xo))})}else n&&(!r.hasFocus&&r.state.facet(Sf)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,i.to))}:(_e.mac||_e.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=ue.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:ot.of([" "])}):_e.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=ue.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:ot.of([" "])}),t){if(_e.ios&&r.inputState.flushIOSKey()||_e.android&&(t.from==i.from&&t.to==i.to&&t.insert.length==1&&t.insert.lines==2&&ds(r.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&t.insert.length==0||a==8&&t.insert.length<t.to-t.from&&t.to>i.head)&&ds(r.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&ds(r.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let l,u=()=>l||(l=r9(r,t,n));return r.state.facet(Jx).some(c=>c(r,t.from,t.to,s,u))||r.dispatch(u()),!0}else if(n&&!n.main.eq(i)){let s=!1,l="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(s=!0),l=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:s,userEvent:l}),!0}else return!1}function r9(r,e,t){let n,i=r.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let l=a.from<e.from?i.sliceDoc(a.from,e.from):"",u=a.to>e.to?i.sliceDoc(e.to,a.to):"";n=i.replaceSelection(r.state.toText(l+e.insert.sliceString(0,void 0,r.state.lineBreak)+u))}else{let l=i.changes(e),u=t&&t.main.to<=l.newLength?t.main:void 0;if(i.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let c=r.state.sliceDoc(e.from,e.to),f,h=t&&lS(r,t.main.head);if(h){let g=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-g}}else f=r.state.doc.lineAt(a.head);let d=a.to-e.to,p=a.to-a.from;n=i.changeByRange(g=>{if(g.from==a.from&&g.to==a.to)return{changes:l,range:u||g.map(l)};let y=g.to-d,m=y-c.length;if(g.to-g.from!=p||r.state.sliceDoc(m,y)!=c||g.to>=f.from&&g.from<=f.to)return{range:g};let v=i.changes({from:m,to:y,insert:e.insert}),O=g.to-a.to;return{changes:v,range:u?ue.range(Math.max(0,u.anchor+O),Math.max(0,u.head+O)):g.map(v)}})}else n={changes:l,selection:u&&i.selection.replaceRange(u)}}let s="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,s+=".compose",r.inputState.compositionFirstChange&&(s+=".start",r.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:s,scrollIntoView:!0})}function n9(r,e,t,n){let i=Math.min(r.length,e.length),a=0;for(;a<i&&r.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&r.length==e.length)return null;let s=r.length,l=e.length;for(;s>0&&l>0&&r.charCodeAt(s-1)==e.charCodeAt(l-1);)s--,l--;if(n=="end"){let u=Math.max(0,a-Math.min(s,l));t-=s+u-a}return s<a&&r.length<e.length?(a-=t<=a&&t>=s?a-t:0,l=a+(l-s),s=a):l<a&&(a-=t<=a&&t>=l?a-t:0,s=a+(s-l),l=a),{from:a,toA:s,toB:l}}function i9(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:a}=r.observer.selectionRange;return t&&(e.push(new bO(t,n)),(i!=t||a!=n)&&e.push(new bO(i,a))),e}function a9(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?ue.single(t+e,n+e):null}const s9={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},kh=_e.ie&&_e.ie_version<=11;class o9{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Y8,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),kh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Sf)?n.root.activeElement!=this.dom:!Du(n.dom,i))return;let a=i.anchorNode&&n.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Ao(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=_e.safari&&e.root.nodeType==11&&N8(this.dom.ownerDocument)==this.dom&&l9(this.view)||hc(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=Du(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&V8(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,s9),kh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),kh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&ds(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let a of e){let s=this.readMutation(a);!s||(s.typeOver&&(i=!0),t==-1?{from:t,to:n}=s:(t=Math.min(s.from,t),n=Math.max(s.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&Du(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new t9(this.view,e,t,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=kS(this.view,t);return this.view.state==n&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=wO(t,e.previousSibling||e.target.previousSibling,-1),i=wO(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function wO(r,e,t){for(;e;){let n=Pt.get(e);if(n&&n.parent==r)return n;let i=e.parentNode;e=i!=r.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function l9(r){let e=null;function t(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let n=e.startContainer,i=e.startOffset,a=e.endContainer,s=e.endOffset,l=r.docView.domAtPos(r.state.selection.main.anchor);return Ao(l.node,l.offset,a,s)&&([n,i,a,s]=[a,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:s}}class ke{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(n=>n.forEach(i=>t(i,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||X8(e.parent)||document,this.viewState=new mO(e.state||Je.create(e)),e.scrollTo&&e.scrollTo.is(nu)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Oo).map(n=>new bh(n));for(let n of this.plugins)n.update(this);this.observer=new o9(this),this.inputState=new SU(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Jy(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof jt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,a=this.state;for(let d of e){if(d.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=d.state}if(this.destroyed){this.viewState.state=a;return}let s=this.hasFocus,l=0,u=null;e.some(d=>d.annotation(mS))?(this.inputState.notifiedFocused=s,l=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,u=yS(a,s),u||(l=1));let c=this.observer.delayedAndroidKey,f=null;if(c?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(f=null)):this.observer.clear(),a.facet(Je.phrases)!=this.state.facet(Je.phrases))return this.setState(a);i=dc.create(this,a,e),i.flags|=l;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;h=new ps(p.empty?p:ue.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is(nu)&&(h=p.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=pc.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(bo)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(uu)!=i.state.facet(uu)&&(this.viewState.mustMeasureContent=!0),(t||n||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let d of this.state.facet(Vd))try{d(i)}catch(p){Rr(this.state,p,"update listener")}(u||f)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),f&&!kS(this,f)&&c.force&&ds(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new mO(e),this.plugins=e.facet(Oo).map(n=>new bh(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new Jy(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Oo),n=e.state.facet(Oo);if(t!=n){let i=[];for(let a of n){let s=t.indexOf(a);if(s<0)i.push(new bh(a));else{let l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(s<0)if(Mx(n))a=-1,s=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);a=p.from,s=p.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];u&4||([this.measureRequests,c]=[c,this.measureRequests]);let f=c.map(p=>{try{return p.read(this)}catch(g){return Rr(this.state,g),xO}}),h=dc.create(this,this.state,[]),d=!1;h.flags|=u,t?t.flags|=u:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h));for(let p=0;p<c.length;p++)if(f[p]!=xO)try{let g=c[p];g.write&&g.write(f[p],this)}catch(g){Rr(this.state,g)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let g=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-s;if(g>1||g<-1){i=i+g,n.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Vd))l(t)}get themeClasses(){return Hd+" "+(this.state.facet(Ud)?xS:wS)+" "+this.state.facet(uu)}updateAttrs(){let e=SO(this,nS,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Sf)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),SO(this,$g,t);let n=this.observer.ignore(()=>{let i=zd(this.contentDOM,this.contentAttrs,t),a=zd(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(ke.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(bo);let e=this.state.facet(ke.cspNonce);Vi.mount(this.root,this.styleModules.concat(KU).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return xh(this,e,aO(this,e,t,n))}moveByGroup(e,t){return xh(this,e,aO(this,e,t,n=>wU(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),a=n[t?n.length-1:0];return ue.cursor(a.side(t,i)+e.from,a.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return bU(this,e,t,n)}moveVertically(e,t,n){return xh(this,e,xU(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),cS(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),s=a[Ti.find(a,e-i.from,-1,t)];return wg(n,s.dir==Et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(tS)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>u9)return Fx(e.length);let t=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==t&&(a.fresh||Vx(a.isolates,n=Ky(this,e))))return a.order;n||(n=Ky(this,e));let i=iU(e.text,t,n);return this.bidiCache.push(new pc(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Dx(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return nu.of(new ps(typeof e=="number"?ue.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return nu.of(new ps(ue.cursor(n.from),"start","start",n.top-e,t,!0))}static domEventHandlers(e){return Zt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Zt.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Vi.newName(),i=[uu.of(n),bo.of(Kd(`.${n}`,e))];return t&&t.dark&&i.push(Ud.of(!0)),i}static baseTheme(e){return Wa.lowest(bo.of(Kd("."+Hd,e,SS)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&Pt.get(n)||Pt.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}ke.styleModule=bo;ke.inputHandler=Jx;ke.focusChangeEffect=eS;ke.perLineTextDirection=tS;ke.exceptionSink=Kx;ke.updateListener=Vd;ke.editable=Sf;ke.mouseSelectionStyle=Hx;ke.dragMovesSelection=Ux;ke.clickAddsSelectionRange=Gx;ke.decorations=el;ke.outerDecorations=iS;ke.atomicRanges=Pg;ke.bidiIsolatedRanges=aS;ke.scrollMargins=sS;ke.darkTheme=Ud;ke.cspNonce=$e.define({combine:r=>r.length?r[0]:""});ke.contentAttributes=$g;ke.editorAttributes=nS;ke.lineWrapping=ke.contentAttributes.of({class:"cm-lineWrapping"});ke.announce=Xe.define();const u9=4096,xO={};class pc{constructor(e,t,n,i,a,s){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=a,this.order=s}static update(e,t){if(t.empty&&!e.some(a=>a.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:Et.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let s=e[a];s.dir==i&&!t.touchesRange(s.from,s.to)&&n.push(new pc(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return n}}function SO(r,e,t){for(let n=r.state.facet(e),i=n.length-1;i>=0;i--){let a=n[i],s=typeof a=="function"?a(r):a;s&&Nd(s,t)}return t}const c9=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function f9(r,e){const t=r.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,a,s,l;for(let u=0;u<t.length-1;++u){const c=t[u];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:a=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),a&&(n="Ctrl-"+n),l&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function cu(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const h9=Wa.default(ke.domEventHandlers({keydown(r,e){return PS($S(e.state),r,e,"editor")}})),kf=$e.define({enables:h9}),kO=new WeakMap;function $S(r){let e=r.facet(kf),t=kO.get(e);return t||kO.set(e,t=g9(e.reduce((n,i)=>n.concat(i),[]))),t}function d9(r,e,t){return PS($S(r.state),e,r,t)}let Si=null;const p9=4e3;function g9(r,e=c9){let t=Object.create(null),n=Object.create(null),i=(s,l)=>{let u=n[s];if(u==null)n[s]=l;else if(u!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},a=(s,l,u,c,f)=>{var h,d;let p=t[s]||(t[s]=Object.create(null)),g=l.split(/ (?!$)/).map(v=>f9(v,e));for(let v=1;v<g.length;v++){let O=g.slice(0,v).join(" ");i(O,!0),p[O]||(p[O]={preventDefault:!0,stopPropagation:!1,run:[b=>{let w=Si={view:b,prefix:O,scope:s};return setTimeout(()=>{Si==w&&(Si=null)},p9),!0}]})}let y=g.join(" ");i(y,!1);let m=p[y]||(p[y]={preventDefault:!1,stopPropagation:!1,run:((d=(h=p._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});u&&m.run.push(u),c&&(m.preventDefault=!0),f&&(m.stopPropagation=!0)};for(let s of r){let l=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let c of l){let f=t[c]||(t[c]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let h in f)f[h].run.push(s.any)}let u=s[e]||s.key;if(!!u)for(let c of l)a(c,u,s.run,s.preventDefault,s.stopPropagation),s.shift&&a(c,"Shift-"+u,s.shift,s.preventDefault,s.stopPropagation)}return t}function PS(r,e,t,n){let i=I8(e),a=tr(i,0),s=Yr(a)==i.length&&i!=" ",l="",u=!1,c=!1,f=!1;Si&&Si.view==t&&Si.scope==n&&(l=Si.prefix+" ",hS.indexOf(e.keyCode)<0&&(c=!0,Si=null));let h=new Set,d=m=>{if(m){for(let v of m.run)if(!h.has(v)&&(h.add(v),v(t,e)))return m.stopPropagation&&(f=!0),!0;m.preventDefault&&(m.stopPropagation&&(f=!0),c=!0)}return!1},p=r[n],g,y;return p&&(d(p[l+cu(i,e,!s)])?u=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(g=Fi[e.keyCode])&&g!=i?(d(p[l+cu(g,e,!0)])||e.shiftKey&&(y=Ho[e.keyCode])!=i&&y!=g&&d(p[l+cu(y,e,!1)]))&&(u=!0):s&&e.shiftKey&&d(p[l+cu(i,e,!0)])&&(u=!0),!u&&d(p._any)&&(u=!0)),c&&(u=!0),u&&f&&e.stopPropagation(),u}class Ql{constructor(e,t,n,i,a){this.className=e,this.left=t,this.top=n,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let a=CS(e);return[new Ql(t,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return v9(e,t,n)}}function CS(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Et.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function $O(r,e,t){let n=ue.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(n,!0,!0).from),type:Pr.Text}}function v9(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let n=Math.max(t.from,r.viewport.from),i=Math.min(t.to,r.viewport.to),a=r.textDirection==Et.LTR,s=r.contentDOM,l=s.getBoundingClientRect(),u=CS(r),c=s.querySelector(".cm-line"),f=c&&window.getComputedStyle(c),h=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),d=l.right-(f?parseInt(f.paddingRight):0),p=jd(r,n),g=jd(r,i),y=p.type==Pr.Text?p:null,m=g.type==Pr.Text?g:null;if(y&&(r.lineWrapping||p.widgetLineBreaks)&&(y=$O(r,n,y)),m&&(r.lineWrapping||g.widgetLineBreaks)&&(m=$O(r,i,m)),y&&m&&y.from==m.from)return O(b(t.from,t.to,y));{let x=y?b(t.from,null,y):w(p,!1),$=m?b(null,t.to,m):w(g,!0),S=[];return(y||p).to<(m||g).from-(y&&m?1:0)||p.widgetLineBreaks>1&&x.bottom+r.defaultLineHeight/2<$.top?S.push(v(h,x.bottom,d,$.top)):x.bottom<$.top&&r.elementAtHeight((x.bottom+$.top)/2).type==Pr.Text&&(x.bottom=$.top=(x.bottom+$.top)/2),O(x).concat(S).concat(O($))}function v(x,$,S,T){return new Ql(e,x-u.left,$-u.top-.01,S-x,T-$+.01)}function O({top:x,bottom:$,horizontal:S}){let T=[];for(let k=0;k<S.length;k+=2)T.push(v(S[k],x,S[k+1],$));return T}function b(x,$,S){let T=1e9,k=-1e9,E=[];function P(D,I,A,Q,B){let Y=r.coordsAtPos(D,D==S.to?-2:2),X=r.coordsAtPos(A,A==S.from?2:-2);!Y||!X||(T=Math.min(Y.top,X.top,T),k=Math.max(Y.bottom,X.bottom,k),B==Et.LTR?E.push(a&&I?h:Y.left,a&&Q?d:X.right):E.push(!a&&Q?h:X.left,!a&&I?d:Y.right))}let C=x!=null?x:S.from,M=$!=null?$:S.to;for(let D of r.visibleRanges)if(D.to>C&&D.from<M)for(let I=Math.max(D.from,C),A=Math.min(D.to,M);;){let Q=r.state.doc.lineAt(I);for(let B of r.bidiSpans(Q)){let Y=B.from+Q.from,X=B.to+Q.from;if(Y>=A)break;X>I&&P(Math.max(Y,I),x==null&&Y<=C,Math.min(X,A),$==null&&X>=M,B.dir)}if(I=Q.to+1,I>=A)break}return E.length==0&&P(C,x==null,M,$==null,r.textDirection),{top:T,bottom:k,horizontal:E}}function w(x,$){let S=l.top+($?x.top:x.bottom);return{top:S,bottom:S,horizontal:[]}}}function m9(r,e){return r.constructor==e.constructor&&r.eq(e)}class y9{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Zu)!=e.state.facet(Zu)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,n=e.facet(Zu);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!m9(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Zu=$e.define();function ES(r){return[Zt.define(e=>new y9(e,r)),Zu.of(r)]}const TS=!_e.ios,tl=$e.define({combine(r){return $n(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function O9(r={}){return[tl.of(r),b9,w9,x9,rS.of(!0)]}function QS(r){return r.startState.facet(tl)!=r.state.facet(tl)}const b9=ES({above:!0,markers(r){let{state:e}=r,t=e.facet(tl),n=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||TS:t.drawRangeCursor){let s=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:ue.cursor(i.head,i.head>i.anchor?-1:1);for(let u of Ql.forRange(r,s,l))n.push(u)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=QS(r);return t&&PO(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){PO(e.state,r)},class:"cm-cursorLayer"});function PO(r,e){e.style.animationDuration=r.facet(tl).cursorBlinkRate+"ms"}const w9=ES({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Ql.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||QS(r)},class:"cm-selectionLayer"}),Jd={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};TS&&(Jd[".cm-line"].caretColor="transparent !important",Jd[".cm-content"]={caretColor:"transparent !important"});const x9=Wa.highest(ke.theme(Jd)),AS=Xe.define({map(r,e){return r==null?null:e.mapPos(r)}}),So=Wt.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,n)=>n.is(AS)?n.value:t,r)}}),S9=Zt.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(So);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(So)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(So),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(So)!=r&&this.view.dispatch({effects:AS.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function k9(){return[So,S9]}function CO(r,e,t,n,i){e.lastIndex=0;for(let a=r.iterRange(t,n),s=t,l;!a.next().done;s+=a.value.length)if(!a.lineBreak)for(;l=e.exec(a.value);)i(s+l.index,l)}function $9(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let n=[];for(let{from:i,to:a}of t)i=Math.max(r.state.doc.lineAt(i).from,i-e),a=Math.min(r.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=a:n.push({from:i,to:a});return n}class P9{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:a,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(l,u,c,f)=>i(f,c,c+l[0].length,l,u);else if(typeof n=="function")this.addMatch=(l,u,c,f)=>{let h=n(l,u,c);h&&f(c,c+l[0].length,h)};else if(n)this.addMatch=(l,u,c,f)=>f(c,c+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=s}createDeco(e){let t=new Xi,n=t.add.bind(t);for(let{from:i,to:a}of $9(e,this.maxLength))CO(e.state.doc,this.regexp,i,a,(s,l)=>this.addMatch(l,e,s,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,s,l,u)=>{u>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),i=Math.max(u,i))}),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let a of e.visibleRanges){let s=Math.max(a.from,n),l=Math.min(a.to,i);if(l>s){let u=e.state.doc.lineAt(s),c=u.to<l?e.state.doc.lineAt(l):u,f=Math.max(a.from,u.from),h=Math.min(a.to,c.to);if(this.boundary){for(;s>u.from;s--)if(this.boundary.test(u.text[s-1-u.from])){f=s;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){h=l;break}}let d=[],p,g=(y,m,v)=>d.push(v.range(y,m));if(u==c)for(this.regexp.lastIndex=f-u.from;(p=this.regexp.exec(u.text))&&p.index<h-u.from;)this.addMatch(p,e,p.index+u.from,g);else CO(e.state.doc,this.regexp,f,h,(y,m)=>this.addMatch(m,e,y,g));t=t.update({filterFrom:f,filterTo:h,filter:(y,m)=>y<f||m>h,add:d})}}return t}}const ep=/x/.unicode!=null?"gu":"g",C9=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,ep),E9={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let $h=null;function T9(){var r;if($h==null&&typeof document!="undefined"&&document.body){let e=document.body.style;$h=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return $h||!1}const Ru=$e.define({combine(r){let e=$n(r,{render:null,specialChars:C9,addSpecialChars:null});return(e.replaceTabs=!T9())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ep)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ep)),e}});function Q9(r={}){return[Ru.of(r),A9()]}let EO=null;function A9(){return EO||(EO=Zt.fromClass(class{constructor(r){this.view=r,this.decorations=ze.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(Ru)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new P9({regexp:r.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,a=tr(e[0],0);if(a==9){let s=i.lineAt(n),l=t.state.tabSize,u=Xs(s.text,l,n-s.from);return ze.replace({widget:new Z9((l-u%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=ze.replace({widget:new M9(r,a)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(Ru);r.startState.facet(Ru)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const D9="\u2022";function _9(r){return r>=32?D9:r==10?"\u2424":String.fromCharCode(9216+r)}class M9 extends ta{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=_9(this.code),n=e.state.phrase("Control character")+" "+(E9[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class Z9 extends ta{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function R9(){return B9}const L9=ze.line({class:"cm-activeLine"}),B9=Zt.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let n of r.state.selection.ranges){let i=r.lineBlockAt(n.head);i.from>e&&(t.push(L9.range(i.from)),e=i.from)}return ze.set(t)}},{decorations:r=>r.decorations}),tp=2e3;function I9(r,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),a=[];if(e.off>tp||t.off>tp||e.col<0||t.col<0){let s=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let u=n;u<=i;u++){let c=r.doc.line(u);c.length<=l&&a.push(ue.range(c.from+s,c.to+l))}}else{let s=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let u=n;u<=i;u++){let c=r.doc.line(u),f=_d(c.text,s,r.tabSize,!0);if(f<0)a.push(ue.cursor(c.to));else{let h=_d(c.text,l,r.tabSize);a.push(ue.range(c.from+f,c.from+h))}}}return a}function N9(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function TO(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(t),i=t-n.from,a=i>tp?-1:i==n.length?N9(r,e.clientX):Xs(n.text,r.state.tabSize,t-n.from);return{line:n.number,col:a,off:i}}function z9(r,e){let t=TO(r,e),n=r.state.selection;return t?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(t.line).from),s=i.state.doc.lineAt(a);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},n=n.map(i.changes)}},get(i,a,s){let l=TO(r,i);if(!l)return n;let u=I9(r.state,t,l);return u.length?s?ue.create(u.concat(n.ranges)):ue.create(u):n}}:null}function W9(r){let e=(r==null?void 0:r.eventFilter)||(t=>t.altKey&&t.button==0);return ke.mouseSelectionStyle.of((t,n)=>e(n)?z9(t,n):null)}const q9={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},Y9={style:"cursor: crosshair"};function X9(r={}){let[e,t]=q9[r.key||"Alt"],n=Zt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,ke.contentAttributes.of(i=>{var a;return!((a=i.plugin(n))===null||a===void 0)&&a.isDown?Y9:null})]}const ao="-10000px";class DS{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a),this.tooltipViews=this.tooltips.map(n)}update(e,t){var n;let i=e.state.facet(this.facet),a=i.filter(u=>u);if(i===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let s=[],l=t?[]:null;for(let u=0;u<a.length;u++){let c=a[u],f=-1;if(!!c){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==c.create&&(f=h)}if(f<0)s[u]=this.createTooltipView(c),l&&(l[u]=!!c.above);else{let h=s[u]=this.tooltipViews[f];l&&(l[u]=t[f]),h.update&&h.update(e)}}}for(let u of this.tooltipViews)s.indexOf(u)<0&&(this.removeTooltipView(u),(n=u.destroy)===null||n===void 0||n.call(u));return t&&(l.forEach((u,c)=>t[c]=u),t.length=l.length),this.input=i,this.tooltips=a,this.tooltipViews=s,!0}}function V9(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Ph=$e.define({combine:r=>{var e,t,n;return{position:_e.ios?"absolute":((e=r.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||V9}}}),QO=new WeakMap,Eg=Zt.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(Ph);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new DS(r,$f,t=>this.createTooltip(t),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(Ph);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r){let e=r.create(this.view);if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=ao,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(_e.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==ao&&i.style.left=="0px"){let a=i.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((i,a)=>{let s=this.manager.tooltipViews[a];return s.getCoords?s.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(Ph).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:n,scaleX:i,scaleY:a}=r,s=[];for(let l=0;l<this.manager.tooltips.length;l++){let u=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:f}=c,h=r.pos[l],d=r.size[l];if(!h||h.bottom<=Math.max(t.top,n.top)||h.top>=Math.min(t.bottom,n.bottom)||h.right<Math.max(t.left,n.left)-.1||h.left>Math.min(t.right,n.right)+.1){f.style.top=ao;continue}let p=u.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,y=d.right-d.left,m=(e=QO.get(c))!==null&&e!==void 0?e:d.bottom-d.top,v=c.offset||j9,O=this.view.textDirection==Et.LTR,b=d.width>n.right-n.left?O?n.left:n.right-d.width:O?Math.min(h.left-(p?14:0)+v.x,n.right-y):Math.max(n.left,h.left-y+(p?14:0)-v.x),w=this.above[l];!u.strictSide&&(w?h.top-(d.bottom-d.top)-v.y<n.top:h.bottom+(d.bottom-d.top)+v.y>n.bottom)&&w==n.bottom-h.bottom>h.top-n.top&&(w=this.above[l]=!w);let x=(w?h.top-n.top:n.bottom-h.bottom)-g;if(x<m&&c.resize!==!1){if(x<this.view.defaultLineHeight){f.style.top=ao;continue}QO.set(c,m),f.style.height=(m=x)/a+"px"}else f.style.height&&(f.style.height="");let $=w?h.top-m-g-v.y:h.bottom+g+v.y,S=b+y;if(c.overlap!==!0)for(let T of s)T.left<S&&T.right>b&&T.top<$+m&&T.bottom>$&&($=w?T.top-m-2-g:T.bottom+g+2);if(this.position=="absolute"?(f.style.top=($-r.parent.top)/a+"px",f.style.left=(b-r.parent.left)/i+"px"):(f.style.top=$/a+"px",f.style.left=b/i+"px"),p){let T=h.left+(O?v.x:-v.x)-(b+14-7);p.style.left=T/i+"px"}c.overlap!==!0&&s.push({left:b,top:$,right:S,bottom:$+m}),f.classList.toggle("cm-tooltip-above",w),f.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=ao}},{eventObservers:{scroll(){this.maybeMeasure()}}}),F9=ke.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),j9={x:0,y:0},$f=$e.define({enables:[Eg,F9]}),gc=$e.define();class Pf{static create(e){return new Pf(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new DS(e,gc,t=>this.createHostedView(t),t=>t.dom.remove())}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const G9=$f.compute([gc],r=>{let e=r.facet(gc).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:Pf.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class U9{constructor(e,t,n,i,a){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,a=1;if(n instanceof Ei)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let l=e.coordsAtPos(i);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(f=>f.from<=i&&f.to>=i),c=u&&u.dir==Et.RTL?-1:1;a=t.x<l.left?-c:c}let s=this.source(e,i,a);if(s!=null&&s.then){let l=this.pending={pos:i};s.then(u=>{this.pending==l&&(this.pending=null,u&&e.dispatch({effects:this.setHover.of(u)}))},u=>Rr(e.state,u,"hover tooltip"))}else s&&e.dispatch({effects:this.setHover.of(s)})}get tooltip(){let e=this.view.plugin(Eg),t=e?e.manager.tooltips.findIndex(n=>n.create==Pf.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:i}=this;if(n&&i&&!H9(i.dom,e)||this.pending){let{pos:a}=n||this.pending,s=(t=n==null?void 0:n.end)!==null&&t!==void 0?t:a;(a==s?this.view.posAtCoords(this.lastMove)!=a:!K9(this.view,a,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const fu=4;function H9(r,e){let t=r.getBoundingClientRect();return e.clientX>=t.left-fu&&e.clientX<=t.right+fu&&e.clientY>=t.top-fu&&e.clientY<=t.bottom+fu}function K9(r,e,t,n,i,a){let s=r.scrollDOM.getBoundingClientRect(),l=r.documentTop+r.documentPadding.top+r.contentHeight;if(s.left>n||s.right<n||s.top>i||Math.min(s.bottom,l)<i)return!1;let u=r.posAtCoords({x:n,y:i},!1);return u>=e&&u<=t}function J9(r,e={}){let t=Xe.define(),n=Wt.define({create(){return null},update(i,a){if(i&&(e.hideOnChange&&(a.docChanged||a.selection)||e.hideOn&&e.hideOn(a,i)))return null;if(i&&a.docChanged){let s=a.changes.mapPos(i.pos,-1,nr.TrackDel);if(s==null)return null;let l=Object.assign(Object.create(null),i);l.pos=s,i.end!=null&&(l.end=a.changes.mapPos(i.end)),i=l}for(let s of a.effects)s.is(t)&&(i=s.value),s.is(t6)&&(i=null);return i},provide:i=>gc.from(i)});return[n,Zt.define(i=>new U9(i,r,n,t,e.hoverTime||300)),G9]}function e6(r,e){let t=r.plugin(Eg);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const t6=Xe.define(),AO=$e.define({combine(r){let e,t;for(let n of r)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function rl(r,e){let t=r.plugin(_S),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const _S=Zt.fromClass(class{constructor(r){this.input=r.state.facet(nl),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(AO);this.top=new hu(r,!0,e.topContainer),this.bottom=new hu(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(AO);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new hu(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new hu(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(nl);if(t!=this.input){let n=t.filter(u=>u),i=[],a=[],s=[],l=[];for(let u of n){let c=this.specs.indexOf(u),f;c<0?(f=u(r.view),l.push(f)):(f=this.panels[c],f.update&&f.update(r)),i.push(f),(f.top?a:s).push(f)}this.specs=n,this.panels=i,this.top.sync(a),this.bottom.sync(s);for(let u of l)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>ke.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class hu{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=DO(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=DO(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function DO(r){let e=r.nextSibling;return r.remove(),e}const nl=$e.define({enables:_S});class Vn extends Ea{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Vn.prototype.elementClass="";Vn.prototype.toDOM=void 0;Vn.prototype.mapMode=nr.TrackBefore;Vn.prototype.startSide=Vn.prototype.endSide=-1;Vn.prototype.point=!0;const Lu=$e.define(),r6={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_o=$e.define();function MS(r){return[ZS(),_o.of(Object.assign(Object.assign({},r6),r))]}const rp=$e.define({combine:r=>r.some(e=>e)});function ZS(r){let e=[n6];return r&&r.fixed===!1&&e.push(rp.of(!0)),e}const n6=Zt.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(_o).map(e=>new MO(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(rp),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(rp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=tt.iter(this.view.state.facet(Lu),this.view.viewport.from),n=[],i=this.gutters.map(a=>new i6(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let s=!0;for(let l of a.type)if(l.type==Pr.Text&&s){np(t,n,l.from);for(let u of i)u.line(this.view,l,n);s=!1}else if(l.widget)for(let u of i)u.widget(this.view,l)}else if(a.type==Pr.Text){np(t,n,a.from);for(let s of i)s.line(this.view,a,n)}else if(a.widget)for(let s of i)s.widget(this.view,a);for(let a of i)a.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(_o),t=r.state.facet(_o),n=r.docChanged||r.heightChanged||r.viewportChanged||!tt.eq(r.startState.facet(Lu),r.state.facet(Lu),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(r)&&(n=!0);else{n=!0;let i=[];for(let a of t){let s=e.indexOf(a);s<0?i.push(new MO(this.view,a)):(this.gutters[s].update(r),i.push(this.gutters[s]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>ke.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Et.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function _O(r){return Array.isArray(r)?r:[r]}function np(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class i6{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=tt.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,a=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==i.elements.length){let l=new RS(e,s,a,n);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,s,a,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];np(this.cursor,i,t.from),n.length&&(i=i.concat(n));let a=this.gutter.config.lineMarker(e,t,i);a&&i.unshift(a);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class MO{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let a=i.target,s;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let u=a.getBoundingClientRect();s=(u.top+u.bottom)/2}else s=i.clientY;let l=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[n](e,l,i)&&i.preventDefault()});this.markers=_O(t.markers(e)),t.initialSpacer&&(this.spacer=new RS(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=_O(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!tt.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class RS{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),a6(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let a=0,s=0;;){let l=s,u=a<t.length?t[a++]:null,c=!1;if(u){let f=u.elementClass;f&&(n+=" "+f);for(let h=s;h<this.markers.length;h++)if(this.markers[h].compare(u)){l=h,c=!0;break}}else l=this.markers.length;for(;s<l;){let f=this.markers[s++];if(f.toDOM){f.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!u)break;u.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),c&&s++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function a6(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const s6=$e.define(),is=$e.define({combine(r){return $n(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let a=n[i],s=t[i];n[i]=a?(l,u,c)=>a(l,u,c)||s(l,u,c):s}return n}})}});class Ch extends Vn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Eh(r,e){return r.state.facet(is).formatNumber(e,r.state)}const o6=_o.compute([is],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(s6)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new Ch(Eh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(is)!=e.state.facet(is),initialSpacer(e){return new Ch(Eh(e,ZO(e.state.doc.lines)))},updateSpacer(e,t){let n=Eh(t.view,ZO(t.view.state.doc.lines));return n==e.number?e:new Ch(n)},domEventHandlers:r.facet(is).domEventHandlers}));function l6(r={}){return[is.of(r),ZS(),o6]}function ZO(r){let e=9;for(;e<r;)e=e*10+9;return e}const u6=new class extends Vn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},c6=Lu.compute(["selection"],r=>{let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.head).from;i>t&&(t=i,e.push(u6.range(i)))}return tt.of(e)});function f6(){return c6}const LS=1024;let h6=0;class Th{constructor(e,t){this.from=e,this.to=t}}class Ge{constructor(e={}){this.id=h6++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ur.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Ge.closedBy=new Ge({deserialize:r=>r.split(" ")});Ge.openedBy=new Ge({deserialize:r=>r.split(" ")});Ge.group=new Ge({deserialize:r=>r.split(" ")});Ge.isolate=new Ge({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});Ge.contextHash=new Ge({perNode:!0});Ge.lookAhead=new Ge({perNode:!0});Ge.mounted=new Ge({perNode:!0});class vc{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Ge.mounted.id]}}const d6=Object.create(null);class ur{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):d6,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ur(e.name||"",t,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ge.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(Ge.group),a=-1;a<(i?i.length:0);a++){let s=t[a<0?n.name:i[a]];if(s)return s}}}}ur.none=new ur("",Object.create(null),0,8);class Tg{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let a of e){let s=a(n);s&&(i||(i=Object.assign({},n.props)),i[s[0].id]=s[1])}t.push(i?new ur(n.name,i,n.id,n.flags):n)}return new Tg(t)}}const du=new WeakMap,RO=new WeakMap;var qt;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(qt||(qt={}));class wt{constructor(e,t,n,i,a){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[s,l]of a)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=vc.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ap(this.topNode,e)}cursorAt(e,t=0,n=0){let i=du.get(this)||this.topNode,a=new ap(i);return a.moveTo(e,t),du.set(this,a._tree),a}get topNode(){return new Lr(this,0,0,null)}resolve(e,t=0){let n=il(du.get(this)||this.topNode,e,t,!1);return du.set(this,n),n}resolveInner(e,t=0){let n=il(RO.get(this)||this.topNode,e,t,!0);return RO.set(this,n),n}resolveStack(e,t=0){return v6(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:a=this.length}=e,s=e.mode||0,l=(s&qt.IncludeAnonymous)>0;for(let u=this.cursor(s|qt.IncludeAnonymous);;){let c=!1;if(u.from<=a&&u.to>=i&&(!l&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;c=!0}for(;c&&n&&(l||!u.type.isAnonymous)&&n(u),!u.nextSibling();){if(!u.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Dg(ur.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new wt(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new wt(ur.none,t,n,i)))}static build(e){return m6(e)}}wt.empty=new wt(ur.none,[],[],0);class Qg{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Qg(this.buffer,this.index)}}class Gi{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ur.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return a+"("+s.join(",")+")"}findChild(e,t,n,i,a){let{buffer:s}=this,l=-1;for(let u=e;u!=t&&!(BS(a,i,s[u+1],s[u+2])&&(l=u,n>0));u=s[u+3]);return l}slice(e,t,n){let i=this.buffer,a=new Uint16Array(t-e),s=0;for(let l=e,u=0;l<t;){a[u++]=i[l++],a[u++]=i[l++]-n;let c=a[u++]=i[l++]-n;a[u++]=i[l++]-e,s=Math.max(s,c)}return new Gi(a,s,this.set)}}function BS(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function il(r,e,t,n){for(var i;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let s=!n&&r instanceof Lr&&r.index<0?null:r.parent;if(!s)return r;r=s}let a=n?0:qt.IgnoreOverlays;if(n)for(let s=r,l=s.parent;l;s=l,l=s.parent)s instanceof Lr&&s.index<0&&((i=l.enter(e,t,a))===null||i===void 0?void 0:i.from)!=s.from&&(r=l);for(;;){let s=r.enter(e,t,a);if(!s)return r;r=s}}class IS{cursor(e=0){return new ap(this,e)}getChild(e,t=null,n=null){let i=LO(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return LO(this,e,t,n)}resolve(e,t=0){return il(this,e,t,!1)}resolveInner(e,t=0){return il(this,e,t,!0)}matchContext(e){return ip(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class Lr extends IS{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,a=0){for(let s=this;;){for(let{children:l,positions:u}=s._tree,c=t>0?l.length:-1;e!=c;e+=t){let f=l[e],h=u[e]+s.from;if(!!BS(i,n,h,h+f.length)){if(f instanceof Gi){if(a&qt.ExcludeBuffers)continue;let d=f.findChild(0,f.buffer.length,t,n-h,i);if(d>-1)return new In(new p6(s,f,e,h),null,d)}else if(a&qt.IncludeAnonymous||!f.type.isAnonymous||Ag(f)){let d;if(!(a&qt.IgnoreMounts)&&(d=vc.get(f))&&!d.overlay)return new Lr(d.tree,h,e,s);let p=new Lr(f,h,e,s);return a&qt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?f.children.length-1:0,t,n,i)}}}if(a&qt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&qt.IgnoreOverlays)&&(i=vc.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:s,to:l}of i.overlay)if((t>0?s<=a:s<a)&&(t<0?l>=a:l>a))return new Lr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function LO(r,e,t,n){let i=r.cursor(),a=[];if(!i.firstChild())return a;if(t!=null){for(let s=!1;!s;)if(s=i.type.is(t),!i.nextSibling())return a}for(;;){if(n!=null&&i.type.is(n))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return n==null?a:[]}}function ip(r,e,t=e.length-1){for(let n=r.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class p6{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class In extends IS{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new In(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&qt.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new In(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new In(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new In(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,a=n.buffer[this.index+3];if(a>i){let s=n.buffer[this.index+1];e.push(n.slice(i,a,s)),t.push(0)}return new wt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function NS(r){if(!r.length)return null;let e=0,t=r[0];for(let a=1;a<r.length;a++){let s=r[a];(s.from>t.from||s.to<t.to)&&(t=s,e=a)}let n=t instanceof Lr&&t.index<0?null:t.parent,i=r.slice();return n?i[e]=n:i.splice(e,1),new g6(i,t)}class g6{constructor(e,t){this.heads=e,this.node=t}get next(){return NS(this.heads)}}function v6(r,e,t){let n=r.resolveInner(e,t),i=null;for(let a=n instanceof Lr?n:n.context.parent;a;a=a.parent)if(a.index<0){let s=a.parent;(i||(i=[n])).push(s.resolve(e,t)),a=s}else{let s=vc.get(a.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let l=new Lr(s.tree,s.overlay[0].from+a.from,-1,a);(i||(i=[n])).push(il(l,e,t,!1))}}return i?NS(i):n}class ap{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Lr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Lr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&qt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&qt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&qt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let a=t+e,s=e<0?-1:n._tree.children.length;a!=s;a+=e){let l=n._tree.children[a];if(this.mode&qt.IncludeAnonymous||l instanceof Gi||!l.type.isAnonymous||Ag(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer){e:for(let i=this.index,a=this.stack.length;a>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=a+1;break e}i=this.stack[--a]}}for(let i=n;i<this.stack.length;i++)t=new In(this.buffer,t,this.stack[i]);return this.bufferNode=new In(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return ip(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return ip(this.node,e,i);let s=n[t.buffer[this.stack[a]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function Ag(r){return r.children.some(e=>e instanceof Gi||!e.type.isAnonymous||Ag(e))}function m6(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=LS,reused:a=[],minRepeatType:s=n.types.length}=r,l=Array.isArray(t)?new Qg(t,t.length):t,u=n.types,c=0,f=0;function h(x,$,S,T,k,E){let{id:P,start:C,end:M,size:D}=l,I=f;for(;D<0;)if(l.next(),D==-1){let X=a[P];S.push(X),T.push(C-x);return}else if(D==-3){c=P;return}else if(D==-4){f=P;return}else throw new RangeError(`Unrecognized record size: ${D}`);let A=u[P],Q,B,Y=C-x;if(M-C<=i&&(B=m(l.pos-$,k))){let X=new Uint16Array(B.size-B.skip),W=l.pos-B.size,q=X.length;for(;l.pos>W;)q=v(B.start,X,q);Q=new Gi(X,M-B.start,n),Y=B.start-x}else{let X=l.pos-D;l.next();let W=[],q=[],F=P>=s?P:-1,Z=0,N=M;for(;l.pos>X;)F>=0&&l.id==F&&l.size>=0?(l.end<=N-i&&(g(W,q,C,Z,l.end,N,F,I),Z=W.length,N=l.end),l.next()):E>2500?d(C,X,W,q):h(C,X,W,q,F,E+1);if(F>=0&&Z>0&&Z<W.length&&g(W,q,C,Z,C,N,F,I),W.reverse(),q.reverse(),F>-1&&Z>0){let V=p(A);Q=Dg(A,W,q,0,W.length,0,M-C,V,V)}else Q=y(A,W,q,M-C,I-M)}S.push(Q),T.push(Y)}function d(x,$,S,T){let k=[],E=0,P=-1;for(;l.pos>$;){let{id:C,start:M,end:D,size:I}=l;if(I>4)l.next();else{if(P>-1&&M<P)break;P<0&&(P=D-i),k.push(C,M,D),E++,l.next()}}if(E){let C=new Uint16Array(E*4),M=k[k.length-2];for(let D=k.length-3,I=0;D>=0;D-=3)C[I++]=k[D],C[I++]=k[D+1]-M,C[I++]=k[D+2]-M,C[I++]=I;S.push(new Gi(C,k[2]-M,n)),T.push(M-x)}}function p(x){return($,S,T)=>{let k=0,E=$.length-1,P,C;if(E>=0&&(P=$[E])instanceof wt){if(!E&&P.type==x&&P.length==T)return P;(C=P.prop(Ge.lookAhead))&&(k=S[E]+P.length+C)}return y(x,$,S,T,k)}}function g(x,$,S,T,k,E,P,C){let M=[],D=[];for(;x.length>T;)M.push(x.pop()),D.push($.pop()+S-k);x.push(y(n.types[P],M,D,E-k,C-E)),$.push(k-S)}function y(x,$,S,T,k=0,E){if(c){let P=[Ge.contextHash,c];E=E?[P].concat(E):[P]}if(k>25){let P=[Ge.lookAhead,k];E=E?[P].concat(E):[P]}return new wt(x,$,S,T,E)}function m(x,$){let S=l.fork(),T=0,k=0,E=0,P=S.end-i,C={size:0,start:0,skip:0};e:for(let M=S.pos-x;S.pos>M;){let D=S.size;if(S.id==$&&D>=0){C.size=T,C.start=k,C.skip=E,E+=4,T+=4,S.next();continue}let I=S.pos-D;if(D<0||I<M||S.start<P)break;let A=S.id>=s?4:0,Q=S.start;for(S.next();S.pos>I;){if(S.size<0)if(S.size==-3)A+=4;else break e;else S.id>=s&&(A+=4);S.next()}k=Q,T+=D,E+=A}return($<0||T==x)&&(C.size=T,C.start=k,C.skip=E),C.size>4?C:void 0}function v(x,$,S){let{id:T,start:k,end:E,size:P}=l;if(l.next(),P>=0&&T<s){let C=S;if(P>4){let M=l.pos-(P-4);for(;l.pos>M;)S=v(x,$,S)}$[--S]=C,$[--S]=E-x,$[--S]=k-x,$[--S]=T}else P==-3?c=T:P==-4&&(f=T);return S}let O=[],b=[];for(;l.pos>0;)h(r.start||0,r.bufferStart||0,O,b,-1,0);let w=(e=r.length)!==null&&e!==void 0?e:O.length?b[0]+O[0].length:0;return new wt(u[r.topID],O.reverse(),b.reverse(),w)}const BO=new WeakMap;function Bu(r,e){if(!r.isAnonymous||e instanceof Gi||e.type!=r)return 1;let t=BO.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof wt)){t=1;break}t+=Bu(r,n)}BO.set(e,t)}return t}function Dg(r,e,t,n,i,a,s,l,u){let c=0;for(let g=n;g<i;g++)c+=Bu(r,e[g]);let f=Math.ceil(c*1.5/8),h=[],d=[];function p(g,y,m,v,O){for(let b=m;b<v;){let w=b,x=y[b],$=Bu(r,g[b]);for(b++;b<v;b++){let S=Bu(r,g[b]);if($+S>=f)break;$+=S}if(b==w+1){if($>f){let S=g[w];p(S.children,S.positions,0,S.children.length,y[w]+O);continue}h.push(g[w])}else{let S=y[b-1]+g[b-1].length-x;h.push(Dg(r,g,y,w,b,x,S,null,u))}d.push(x+O-a)}}return p(e,t,n,i,0),(l||u)(h,d,s)}class y6{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof In?this.setBuffer(e.context.buffer,e.index,t):e instanceof Lr&&this.map.set(e.tree,t)}get(e){return e instanceof In?this.getBuffer(e.context.buffer,e.index):e instanceof Lr?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class bn{constructor(e,t,n,i,a=!1,s=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(a?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new bn(0,e.length,e,0,!1,n)];for(let a of t)a.to>e.length&&i.push(a);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],a=1,s=e.length?e[0]:null;for(let l=0,u=0,c=0;;l++){let f=l<t.length?t[l]:null,h=f?f.fromA:1e9;if(h-u>=n)for(;s&&s.from<h;){let d=s;if(u>=d.from||h<=d.to||c){let p=Math.max(d.from,u)-c,g=Math.min(d.to,h)-c;d=p>=g?null:new bn(p,g,d.tree,d.offset+c,l>0,!!f)}if(d&&i.push(d),s.to>h)break;s=a<e.length?e[a++]:null}if(!f)break;u=f.toA,c=f.toA-f.toB}return i}}class _g{startParse(e,t,n){return typeof e=="string"&&(e=new O6(e)),n=n?n.length?n.map(i=>new Th(i.from,i.to)):[new Th(0,0)]:[new Th(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let a=i.advance();if(a)return a}}}class O6{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ge({perNode:!0});let b6=0;class _n{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=b6++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new _n([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new mc;return t=>t.modified.indexOf(e)>-1?t:mc.get(t.base||t,t.modified.concat(e).sort((n,i)=>n.id-i.id))}}let w6=0;class mc{constructor(){this.instances=[],this.id=w6++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(l=>l.base==e&&x6(t,l.modified));if(n)return n;let i=[],a=new _n(i,e,t);for(let l of t)l.instances.push(a);let s=S6(t);for(let l of e.set)if(!l.modified.length)for(let u of s)i.push(mc.get(l,u));return a}}function x6(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function S6(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function Mg(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let a=[],s=2,l=i;for(let h=0;;){if(l=="..."&&h>0&&h+3==i.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new RangeError("Invalid path: "+i);if(a.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){s=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);l=i.slice(h)}let u=a.length-1,c=a[u];if(!c)throw new RangeError("Invalid path: "+i);let f=new yc(n,s,u>0?a.slice(0,u):null);e[c]=f.sort(e[c])}}return zS.add(e)}const zS=new Ge;class yc{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}yc.empty=new yc([],2,null);function WS(r,e){let t=Object.create(null);for(let a of r)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let s of a.tag)t[s.id]=a.class;let{scope:n,all:i=null}=e||{};return{style:a=>{let s=i;for(let l of a)for(let u of l.set){let c=t[u.id];if(c){s=s?s+" "+c:c;break}}return s},scope:n}}function k6(r,e){let t=null;for(let n of r){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function $6(r,e,t,n=0,i=r.length){let a=new P6(n,Array.isArray(e)?e:[e],t);a.highlightRange(r.cursor(),n,i,"",a.highlighters),a.flush(i)}class P6{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,a){let{type:s,from:l,to:u}=e;if(l>=n||u<=t)return;s.isTop&&(a=this.highlighters.filter(p=>!p.scope||p.scope(s)));let c=i,f=C6(e)||yc.empty,h=k6(a,f.tags);if(h&&(c&&(c+=" "),c+=h,f.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,l),c),f.opaque)return;let d=e.tree&&e.tree.prop(Ge.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+l,1),g=this.highlighters.filter(m=>!m.scope||m.scope(d.tree.type)),y=e.firstChild();for(let m=0,v=l;;m++){let O=m<d.overlay.length?d.overlay[m]:null,b=O?O.from+l:u,w=Math.max(t,v),x=Math.min(n,b);if(w<x&&y)for(;e.from<x&&(this.highlightRange(e,w,x,i,a),this.startSpan(Math.min(x,e.to),c),!(e.to>=b||!e.nextSibling())););if(!O||b>n)break;v=O.to+l,v>t&&(this.highlightRange(p.cursor(),Math.max(t,O.from+l),Math.min(n,v),"",g),this.startSpan(Math.min(n,v),c))}y&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,a),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function C6(r){let e=r.type.prop(zS);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const ye=_n.define,pu=ye(),Oi=ye(),IO=ye(Oi),NO=ye(Oi),bi=ye(),gu=ye(bi),Qh=ye(bi),Dn=ye(),sa=ye(Dn),Qn=ye(),An=ye(),sp=ye(),so=ye(sp),vu=ye(),te={comment:pu,lineComment:ye(pu),blockComment:ye(pu),docComment:ye(pu),name:Oi,variableName:ye(Oi),typeName:IO,tagName:ye(IO),propertyName:NO,attributeName:ye(NO),className:ye(Oi),labelName:ye(Oi),namespace:ye(Oi),macroName:ye(Oi),literal:bi,string:gu,docString:ye(gu),character:ye(gu),attributeValue:ye(gu),number:Qh,integer:ye(Qh),float:ye(Qh),bool:ye(bi),regexp:ye(bi),escape:ye(bi),color:ye(bi),url:ye(bi),keyword:Qn,self:ye(Qn),null:ye(Qn),atom:ye(Qn),unit:ye(Qn),modifier:ye(Qn),operatorKeyword:ye(Qn),controlKeyword:ye(Qn),definitionKeyword:ye(Qn),moduleKeyword:ye(Qn),operator:An,derefOperator:ye(An),arithmeticOperator:ye(An),logicOperator:ye(An),bitwiseOperator:ye(An),compareOperator:ye(An),updateOperator:ye(An),definitionOperator:ye(An),typeOperator:ye(An),controlOperator:ye(An),punctuation:sp,separator:ye(sp),bracket:so,angleBracket:ye(so),squareBracket:ye(so),paren:ye(so),brace:ye(so),content:Dn,heading:sa,heading1:ye(sa),heading2:ye(sa),heading3:ye(sa),heading4:ye(sa),heading5:ye(sa),heading6:ye(sa),contentSeparator:ye(Dn),list:ye(Dn),quote:ye(Dn),emphasis:ye(Dn),strong:ye(Dn),link:ye(Dn),monospace:ye(Dn),strikethrough:ye(Dn),inserted:ye(),deleted:ye(),changed:ye(),invalid:ye(),meta:vu,documentMeta:ye(vu),annotation:ye(vu),processingInstruction:ye(vu),definition:_n.defineModifier(),constant:_n.defineModifier(),function:_n.defineModifier(),standard:_n.defineModifier(),local:_n.defineModifier(),special:_n.defineModifier()};WS([{tag:te.link,class:"tok-link"},{tag:te.heading,class:"tok-heading"},{tag:te.emphasis,class:"tok-emphasis"},{tag:te.strong,class:"tok-strong"},{tag:te.keyword,class:"tok-keyword"},{tag:te.atom,class:"tok-atom"},{tag:te.bool,class:"tok-bool"},{tag:te.url,class:"tok-url"},{tag:te.labelName,class:"tok-labelName"},{tag:te.inserted,class:"tok-inserted"},{tag:te.deleted,class:"tok-deleted"},{tag:te.literal,class:"tok-literal"},{tag:te.string,class:"tok-string"},{tag:te.number,class:"tok-number"},{tag:[te.regexp,te.escape,te.special(te.string)],class:"tok-string2"},{tag:te.variableName,class:"tok-variableName"},{tag:te.local(te.variableName),class:"tok-variableName tok-local"},{tag:te.definition(te.variableName),class:"tok-variableName tok-definition"},{tag:te.special(te.variableName),class:"tok-variableName2"},{tag:te.definition(te.propertyName),class:"tok-propertyName tok-definition"},{tag:te.typeName,class:"tok-typeName"},{tag:te.namespace,class:"tok-namespace"},{tag:te.className,class:"tok-className"},{tag:te.macroName,class:"tok-macroName"},{tag:te.propertyName,class:"tok-propertyName"},{tag:te.operator,class:"tok-operator"},{tag:te.comment,class:"tok-comment"},{tag:te.meta,class:"tok-meta"},{tag:te.invalid,class:"tok-invalid"},{tag:te.punctuation,class:"tok-punctuation"}]);var Ah;const al=new Ge;function E6(r){return $e.define({combine:r?e=>e.concat(r):void 0})}class yn{constructor(e,t,n=[]){this.data=e,Je.prototype.hasOwnProperty("tree")||Object.defineProperty(Je.prototype,"tree",{get(){return cr(this)}}),this.parser=t,this.extension=[Ui.of(this),Je.languageData.of((i,a,s)=>i.facet(zO(i,a,s)))].concat(n)}isActiveAt(e,t,n=-1){return zO(e,t,n)==this.data}findRegions(e){let t=e.facet(Ui);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(a,s)=>{if(a.prop(al)==this.data){n.push({from:s,to:s+a.length});return}let l=a.prop(Ge.mounted);if(l){if(l.tree.prop(al)==this.data){if(l.overlay)for(let u of l.overlay)n.push({from:u.from+s,to:u.to+s});else n.push({from:s,to:s+a.length});return}else if(l.overlay){let u=n.length;if(i(l.tree,l.overlay[0].from+s),n.length>u)return}}for(let u=0;u<a.children.length;u++){let c=a.children[u];c instanceof wt&&i(c,a.positions[u]+s)}};return i(cr(e),0),n}get allowsNesting(){return!0}}yn.setState=Xe.define();function zO(r,e,t){let n=r.facet(Ui);if(!n)return null;let i=n.data;if(n.allowsNesting)for(let a=cr(r).topNode;a;a=a.enter(e,t,qt.ExcludeBuffers))i=a.type.prop(al)||i;return i}class op extends yn{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=E6(e.languageData);return new op(t,e.parser.configure({props:[al.add(n=>n.isTop?t:void 0)]}))}configure(e){return new op(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function cr(r){let e=r.field(yn.state,!1);return e?e.tree:wt.empty}class T6{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let oo=null;class Oc{constructor(e,t,n=[],i,a,s,l,u){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=s,this.skipped=l,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Oc(e,t,[],wt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new T6(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wt.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(bn.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(bn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=oo;oo=this;try{return e()}finally{oo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=WO(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:a,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((c,f,h,d)=>u.push({fromA:c,toA:f,fromB:h,toB:d})),n=bn.applyChanges(n,u),i=wt.empty,a=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let f=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);f<h&&l.push({from:f,to:h})}}}return new Oc(this.parser,t,n,i,a,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=WO(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends _g{createParse(t,n,i){let a=i[0].from,s=i[i.length-1].to;return{parsedPos:a,advance(){let u=oo;if(u){for(let c of i)u.tempSkipped.push(c);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=s,new wt(ur.none,[],[],s-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return oo}}function WO(r,e,t){return bn.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class xs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new xs(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Oc.create(e.facet(Ui).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new xs(n)}}yn.state=Wt.define({create:xs.init,update(r,e){for(let t of e.effects)if(t.is(yn.setState))return t.value;return e.startState.facet(Ui)!=e.state.facet(Ui)?xs.init(e.state):r.apply(e)}});let qS=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(qS=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Dh=typeof navigator!="undefined"&&((Ah=navigator.scheduling)===null||Ah===void 0?void 0:Ah.isInputPending)?()=>navigator.scheduling.isInputPending():null,Q6=Zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(yn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(yn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=qS(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,a=n.field(yn.state);if(a.tree==a.context.tree&&a.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Dh?Math.max(25,e.timeRemaining()-5):1e9),l=a.context.treeLen<i&&n.doc.length>i+1e3,u=a.context.work(()=>Dh&&Dh()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:yn.setState.of(new xs(a.context))})),this.chunkBudget>0&&!(u&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Rr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ui=$e.define({combine(r){return r.length?r[0]:null},enables:[yn.state,Q6]});class Gte{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const A6=$e.define(),Cf=$e.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}});function bc(r){let e=r.facet(Cf);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function sl(r,e){let t="",n=r.tabSize;if(r.facet(Cf).charCodeAt(0)==9)for(;e>=n;)t+="	",e-=n;for(let i=0;i<e;i++)t+=" ";return t}function Zg(r,e){r instanceof Je&&(r=new Ef(r));for(let n of r.state.facet(A6)){let i=n(r,e);if(i!=null)return i}let t=cr(r.state);return t?_6(r,t,e):null}class Ef{constructor(e,t={}){this.state=e,this.options=t,this.unit=bc(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.countColumn(n,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(a+=s-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return Xs(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let s=a(i);if(s>-1)return s}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const D6=new Ge;function _6(r,e,t){return YS(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,r)}function M6(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function Z6(r){let e=r.type.prop(D6);if(e)return e;let t=r.firstChild,n;if(t&&(n=t.type.prop(Ge.closedBy))){let i=r.lastChild,a=i&&n.indexOf(i.name)>-1;return s=>I6(s,!0,1,void 0,a&&!M6(s)?i.from:void 0)}return r.parent==null?R6:null}function YS(r,e,t){for(;r;r=r.parent){let n=Z6(r);if(n)return n(Rg.create(t,e,r))}return null}function R6(){return 0}class Rg extends Ef{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new Rg(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(L6(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?YS(e,this.pos,this.base):0}}function L6(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function B6(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=r.options.simulateBreak,a=r.state.doc.lineAt(t.from),s=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let l=t.to;;){let u=e.childAfter(l);if(!u||u==n)return null;if(!u.type.isSkipped)return u.from<s?t:null;l=u.to}}function I6(r,e,t,n,i){let a=r.textAfter,s=a.match(/^\s*/)[0].length,l=n&&a.slice(s,s+n.length)==n||i==r.pos+s,u=e?B6(r):null;return u?l?r.column(u.from):r.column(u.to):r.baseIndent+(l?0:r.unit*t)}function Ute({except:r,units:e=1}={}){return t=>{let n=r&&r.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const N6=200;function z6(){return Je.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:n}=r.newSelection.main,i=t.lineAt(n);if(n>i.from+N6)return r;let a=t.sliceString(i.from,n);if(!e.some(c=>c.test(a)))return r;let{state:s}=r,l=-1,u=[];for(let{head:c}of s.selection.ranges){let f=s.doc.lineAt(c);if(f.from==l)continue;l=f.from;let h=Zg(s,f.from);if(h==null)continue;let d=/^\s*/.exec(f.text)[0],p=sl(s,h);d!=p&&u.push({from:f.from,to:f.from+d.length,insert:p})}return u.length?[r,{changes:u,sequential:!0}]:r})}const W6=$e.define(),q6=new Ge;function Hte(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}function Y6(r,e,t){let n=cr(r);if(n.length<t)return null;let i=n.resolveInner(t),a=null;for(let s=i;s;s=s.parent){if(s.to<=t||s.from>t)continue;if(a&&s.from<e)break;let l=s.type.prop(q6);if(l&&(s.to<n.length-50||n.length==r.doc.length||!X6(s))){let u=l(s,r);u&&u.from<=t&&u.from>=e&&u.to>t&&(a=u)}}return a}function X6(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function wc(r,e,t){for(let n of r.facet(W6)){let i=n(r,e,t);if(i)return i}return Y6(r,e,t)}function XS(r,e){let t=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return t>=n?void 0:{from:t,to:n}}const Tf=Xe.define({map:XS}),Al=Xe.define({map:XS});function VS(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(r.lineBlockAt(t));return e}const Aa=Wt.define({create(){return ze.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)t.is(Tf)&&!V6(r,t.value.from,t.value.to)?r=r.update({add:[qO.range(t.value.from,t.value.to)]}):t.is(Al)&&(r=r.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;r.between(n,n,(i,a)=>{i<n&&a>n&&(t=!0)}),t&&(r=r.update({filterFrom:n,filterTo:n,filter:(i,a)=>a<=n||i>=n}))}return r},provide:r=>ke.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let n=r[t++],i=r[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(qO.range(n,i))}return ze.set(e,!0)}});function xc(r,e,t){var n;let i=null;return(n=r.field(Aa,!1))===null||n===void 0||n.between(e,t,(a,s)=>{(!i||i.from>a)&&(i={from:a,to:s})}),i}function V6(r,e,t){let n=!1;return r.between(e,e,(i,a)=>{i==e&&a==t&&(n=!0)}),n}function FS(r,e){return r.field(Aa,!1)?e:e.concat(Xe.appendConfig.of(US()))}const F6=r=>{for(let e of VS(r)){let t=wc(r.state,e.from,e.to);if(t)return r.dispatch({effects:FS(r.state,[Tf.of(t),jS(r,t)])}),!0}return!1},j6=r=>{if(!r.state.field(Aa,!1))return!1;let e=[];for(let t of VS(r)){let n=xc(r.state,t.from,t.to);n&&e.push(Al.of(n),jS(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function jS(r,e,t=!0){let n=r.state.doc.lineAt(e.from).number,i=r.state.doc.lineAt(e.to).number;return ke.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${i}.`)}const G6=r=>{let{state:e}=r,t=[];for(let n=0;n<e.doc.length;){let i=r.lineBlockAt(n),a=wc(e,i.from,i.to);a&&t.push(Tf.of(a)),n=(a?r.lineBlockAt(a.to):i).to+1}return t.length&&r.dispatch({effects:FS(r.state,t)}),!!t.length},U6=r=>{let e=r.state.field(Aa,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(n,i)=>{t.push(Al.of({from:n,to:i}))}),r.dispatch({effects:t}),!0},H6=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:F6},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:j6},{key:"Ctrl-Alt-[",run:G6},{key:"Ctrl-Alt-]",run:U6}],K6={placeholderDOM:null,placeholderText:"\u2026"},GS=$e.define({combine(r){return $n(r,K6)}});function US(r){let e=[Aa,tH];return r&&e.push(GS.of(r)),e}const qO=ze.replace({widget:new class extends ta{toDOM(r){let{state:e}=r,t=e.facet(GS),n=a=>{let s=r.lineBlockAt(r.posAtDOM(a.target)),l=xc(r.state,s.from,s.to);l&&r.dispatch({effects:Al.of(l)}),a.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(r,n);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=n,i}}}),J6={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class _h extends Vn{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function eH(r={}){let e=Object.assign(Object.assign({},J6),r),t=new _h(e,!0),n=new _h(e,!1),i=Zt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Ui)!=s.state.facet(Ui)||s.startState.field(Aa,!1)!=s.state.field(Aa,!1)||cr(s.startState)!=cr(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Xi;for(let u of s.viewportLineBlocks){let c=xc(s.state,u.from,u.to)?n:wc(s.state,u.from,u.to)?t:null;c&&l.add(u.from,u.from,c)}return l.finish()}}),{domEventHandlers:a}=e;return[i,MS({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(i))===null||l===void 0?void 0:l.markers)||tt.empty},initialSpacer(){return new _h(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(s,l,u)=>{if(a.click&&a.click(s,l,u))return!0;let c=xc(s.state,l.from,l.to);if(c)return s.dispatch({effects:Al.of(c)}),!0;let f=wc(s.state,l.from,l.to);return f?(s.dispatch({effects:Tf.of(f)}),!0):!1}})}),US()]}const tH=ke.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Qf{constructor(e,t){let n;function i(l){let u=Vi.newName();return(n||(n=Object.create(null)))["."+u]=l,u}const a=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof yn?l=>l.prop(al)==s.data:s?l=>l==s:void 0,this.style=WS(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:a}).style,this.module=n?new Vi(n):null,this.themeType=t.themeType}static define(e,t){return new Qf(e,t||{})}}const lp=$e.define(),HS=$e.define({combine(r){return r.length?[r[0]]:null}});function Mh(r){let e=r.facet(lp);return e.length?e:r.facet(HS)}function rH(r,e){let t=[iH],n;return r instanceof Qf&&(r.module&&t.push(ke.styleModule.of(r.module)),n=r.themeType),e!=null&&e.fallback?t.push(HS.of(r)):n?t.push(lp.computeN([ke.darkTheme],i=>i.facet(ke.darkTheme)==(n=="dark")?[r]:[])):t.push(lp.of(r)),t}class nH{constructor(e){this.markCache=Object.create(null),this.tree=cr(e.state),this.decorations=this.buildDeco(e,Mh(e.state))}update(e){let t=cr(e.state),n=Mh(e.state),i=n!=Mh(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return ze.none;let n=new Xi;for(let{from:i,to:a}of e.visibleRanges)$6(this.tree,t,(s,l,u)=>{n.add(s,l,this.markCache[u]||(this.markCache[u]=ze.mark({class:u})))},i,a);return n.finish()}}const iH=Wa.high(Zt.fromClass(nH,{decorations:r=>r.decorations})),aH=Qf.define([{tag:te.meta,color:"#7a757a"},{tag:te.link,textDecoration:"underline"},{tag:te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strong,fontWeight:"bold"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.keyword,color:"#708"},{tag:[te.atom,te.bool,te.url,te.contentSeparator,te.labelName],color:"#219"},{tag:[te.literal,te.inserted],color:"#164"},{tag:[te.string,te.deleted],color:"#a11"},{tag:[te.regexp,te.escape,te.special(te.string)],color:"#e40"},{tag:te.definition(te.variableName),color:"#00f"},{tag:te.local(te.variableName),color:"#30a"},{tag:[te.typeName,te.namespace],color:"#085"},{tag:te.className,color:"#167"},{tag:[te.special(te.variableName),te.macroName],color:"#256"},{tag:te.definition(te.propertyName),color:"#00c"},{tag:te.comment,color:"#940"},{tag:te.invalid,color:"#f00"}]),sH=ke.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),KS=1e4,JS="()[]{}",ek=$e.define({combine(r){return $n(r,{afterCursor:!0,brackets:JS,maxScanDistance:KS,renderMatch:uH})}}),oH=ze.mark({class:"cm-matchingBracket"}),lH=ze.mark({class:"cm-nonmatchingBracket"});function uH(r){let e=[],t=r.matched?oH:lH;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const cH=Wt.define({create(){return ze.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],n=e.state.facet(ek);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=Nn(e.state,i.head,-1,n)||i.head>0&&Nn(e.state,i.head-1,1,n)||n.afterCursor&&(Nn(e.state,i.head,1,n)||i.head<e.state.doc.length&&Nn(e.state,i.head+1,-1,n));a&&(t=t.concat(n.renderMatch(a,e.state)))}return ze.set(t,!0)},provide:r=>ke.decorations.from(r)}),fH=[cH,sH];function hH(r={}){return[ek.of(r),fH]}function up(r,e,t){let n=r.prop(e<0?Ge.openedBy:Ge.closedBy);if(n)return n;if(r.name.length==1){let i=t.indexOf(r.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Nn(r,e,t,n={}){let i=n.maxScanDistance||KS,a=n.brackets||JS,s=cr(r),l=s.resolveInner(e,t);for(let u=l;u;u=u.parent){let c=up(u.type,t,a);if(c&&u.from<u.to)return dH(r,e,t,u,c,a)}return pH(r,e,t,s,l.type,i,a)}function dH(r,e,t,n,i,a){let s=n.parent,l={from:n.from,to:n.to},u=0,c=s==null?void 0:s.cursor();if(c&&(t<0?c.childBefore(n.from):c.childAfter(n.to)))do if(t<0?c.to<=n.from:c.from>=n.to){if(u==0&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:l,end:{from:c.from,to:c.to},matched:!0};if(up(c.type,t,a))u++;else if(up(c.type,-t,a)){if(u==0)return{start:l,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function pH(r,e,t,n,i,a,s){let l=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),u=s.indexOf(l);if(u<0||u%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},f=r.doc.iterRange(e,t>0?r.doc.length:0),h=0;for(let d=0;!f.next().done&&d<=a;){let p=f.value;t<0&&(d+=p.length);let g=e+d*t;for(let y=t>0?0:p.length-1,m=t>0?p.length:-1;y!=m;y+=t){let v=s.indexOf(p[y]);if(!(v<0||n.resolveInner(g+y,1).type!=i))if(v%2==0==t>0)h++;else{if(h==1)return{start:c,end:{from:g+y,to:g+y+1},matched:v>>1==u>>1};h--}}t>0&&(d+=p.length)}return f.done?{start:c,matched:!1}:null}const gH=Object.create(null),YO=[ur.none],XO=[],vH=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])vH[r]=mH(gH,e);function Zh(r,e){XO.indexOf(r)>-1||(XO.push(r),console.warn(e))}function mH(r,e){let t=null;for(let a of e.split(".")){let s=r[a]||te[a];s?typeof s=="function"?t?t=s(t):Zh(a,`Modifier ${a} used at start of tag`):t?Zh(a,`Tag ${a} used as modifier`):t=s:Zh(a,`Unknown highlighting tag ${a}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),i=ur.define({id:YO.length,name:n,props:[Mg({[n]:t})]});return YO.push(i),i.id}class tk{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=cr(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),a=i.search(nk(e,!1));return a<0?null:{from:n+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function VO(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function yH(r){let e=Object.create(null),t=Object.create(null);for(let{label:i}of r){e[i[0]]=!0;for(let a=1;a<i.length;a++)t[i[a]]=!0}let n=VO(e)+VO(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function rk(r){let e=r.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:yH(e);return i=>{let a=i.matchBefore(n);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:t}:null}}function OH(r,e){return t=>{for(let n=cr(t.state).resolveInner(t.pos,-1);n;n=n.parent)if(r.indexOf(n.name)>-1)return null;return e(t)}}class FO{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function Mi(r){return r.selection.main.head}function nk(r,e){var t;let{source:n}=r,i=e&&n[0]!="^",a=n[n.length-1]!="$";return!i&&!a?r:new RegExp(`${i?"^":""}(?:${n})${a?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}function bH(r,e,t,n){return Object.assign(Object.assign({},r.changeByRange(i=>{if(i==r.selection.main)return{changes:{from:t,to:n,insert:e},range:ue.cursor(t+e.length)};let a=n-t;return!i.empty||a&&r.sliceDoc(i.from-a,i.from)!=r.sliceDoc(t,n)?{range:i}:{changes:{from:i.from-a,to:i.from,insert:e},range:ue.cursor(i.from-a+e.length)}})),{userEvent:"input.complete"})}function ik(r,e){const t=e.completion.apply||e.completion.label;let n=e.source;typeof t=="string"?r.dispatch(bH(r.state,t,n.from,n.to)):t(r,e.completion,n.from,n.to)}const jO=new WeakMap;function wH(r){if(!Array.isArray(r))return r;let e=jO.get(r);return e||jO.set(r,e=rk(r)),e}class xH{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=tr(e,t),i=Yr(n);this.chars.push(n);let a=e.slice(t,t+i),s=a.toUpperCase();this.folded.push(tr(s==a?a.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:a,byWord:s}=this;if(t.length==1){let O=tr(e,0);return O==t[0]?[0,0,Yr(O)]:O==n[0]?[-200,0,Yr(O)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let u=t.length,c=0;if(l<0){for(let O=0,b=Math.min(e.length,200);O<b&&c<u;){let w=tr(e,O);(w==t[c]||w==n[c])&&(i[c++]=O),O+=Yr(w)}if(c<u)return null}let f=0,h=0,d=!1,p=0,g=-1,y=-1,m=/[a-z]/.test(e),v=!0;for(let O=0,b=Math.min(e.length,200),w=0;O<b&&h<u;){let x=tr(e,O);l<0&&(f<u&&x==t[f]&&(a[f++]=O),p<u&&(x==t[p]||x==n[p]?(p==0&&(g=O),y=O+1,p++):p=0));let $,S=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:($=mg(x))!=$.toLowerCase()?1:$!=$.toUpperCase()?2:0;(!O||S==1&&m||w==0&&S!=0)&&(t[h]==x||n[h]==x&&(d=!0)?s[h++]=O:s.length&&(v=!1)),w=S,O+=Yr(x)}return h==u&&s[0]==0&&v?this.result(-100+(d?-200:0),s,e):p==u&&g==0?[-200-e.length,0,y]:l>-1?[-700-e.length,l,l+this.pattern.length]:p==u?[-200+-700-e.length,g,y]:h==u?this.result(-100+(d?-200:0)+-700+(v?0:-1100),s,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[e-n.length],a=1;for(let s of t){let l=s+(this.astral?Yr(tr(n,s)):1);a>1&&i[a-1]==s?i[a-1]=l:(i[a++]=s,i[a++]=l)}return i}}const an=$e.define({combine(r){return $n(r,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>SH(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function SH(r,e){return r?e?r+" "+e:r:e}function kH(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i){let a=document.createElement("span");a.className="cm-completionLabel";let{label:s}=t,l=0;for(let u=1;u<i.length;){let c=i[u++],f=i[u++];c>l&&a.appendChild(document.createTextNode(s.slice(l,c)));let h=a.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(s.slice(c,f))),h.className="cm-completionMatchedText",l=f}return l<s.length&&a.appendChild(document.createTextNode(s.slice(l))),a},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function GO(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((r-e)/t);return{from:r-(n+1)*t,to:r-n*t}}class $H{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let n=e.state.field(t),{options:i,selected:a}=n.open,s=e.state.facet(an);this.optionContent=kH(s),this.optionClass=s.optionClass,this.range=GO(i.length,a,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<i.length){ik(e,i[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(i,n.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=GO(t.options.length,t.selected,this.view.state.facet(an).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(n);if(!a)return;"then"in a?a.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>Rr(this.view.state,s,"completion info")):this.addInfoPane(a)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&CH(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.ownerDocument.defaultView,n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),a=e.getBoundingClientRect();if(a.top>Math.min(t.innerHeight,n.bottom)-10||a.bottom<Math.max(0,n.top)+10)return null;let s=this.view.textDirection==Et.RTL,l=s,u=!1,c,f="",h="",d=n.left,p=t.innerWidth-n.right;if(l&&d<Math.min(i.width,p)?l=!1:!l&&p<Math.min(i.width,d)&&(l=!0),i.width<=(l?d:p))f=Math.max(0,Math.min(a.top,t.innerHeight-i.height))-n.top+"px",c=Math.min(400,l?d:p)+"px";else{u=!0,c=Math.min(400,(s?n.right:t.innerWidth-n.left)-30)+"px";let g=t.innerHeight-n.bottom;g>=i.height||g>n.top?f=a.bottom-n.top+"px":h=n.bottom-a.top+"px"}return{top:f,bottom:h,maxWidth:c,class:u?s?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let a=n.from;a<n.to;a++){let{completion:s,match:l}=e[a];const u=i.appendChild(document.createElement("li"));u.id=t+"-"+a,u.setAttribute("role","option");let c=this.optionClass(s);c&&(u.className=c);for(let f of this.optionContent){let h=f(s,this.view.state,l);h&&u.appendChild(h)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function PH(r){return e=>new $H(e,r)}function CH(r,e){let t=r.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<t.top?r.scrollTop-=t.top-n.top:n.bottom>t.bottom&&(r.scrollTop+=n.bottom-t.bottom)}function UO(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function EH(r,e){let t=[],n=0;for(let l of r)if(l.hasResult())if(l.result.filter===!1){let u=l.result.getMatch;for(let c of l.result.options){let f=[1e9-n++];if(u)for(let h of u(c))f.push(h);t.push(new FO(c,l,f))}}else{let u=new xH(e.sliceDoc(l.from,l.to)),c;for(let f of l.result.options)(c=u.match(f.label))&&(f.boost!=null&&(c[0]+=f.boost),t.push(new FO(f,l,c)))}let i=[],a=null,s=e.facet(an).compareCompletions;for(let l of t.sort((u,c)=>c.match[0]-u.match[0]||s(u.completion,c.completion)))!a||a.label!=l.completion.label||a.detail!=l.completion.detail||a.type!=null&&l.completion.type!=null&&a.type!=l.completion.type||a.apply!=l.completion.apply?i.push(l):UO(l.completion)>UO(a)&&(i[i.length-1]=l),a=l.completion;return i}class Mo{constructor(e,t,n,i,a){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Mo(this.options,HO(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,i,a){let s=EH(e,t);if(!s.length)return null;let l=t.facet(an).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==u){l=c;break}}return new Mo(s,HO(n,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:PH(en),above:a.aboveCursor},i?i.timestamp:Date.now(),l)}map(e){return new Mo(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class Sc{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new Sc(AH,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(an),a=(n.override||t.languageDataAt("autocomplete",Mi(t)).map(wH)).map(l=>(this.active.find(c=>c.source==l)||new Mr(l,this.active.some(c=>c.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((l,u)=>l==this.active[u])&&(a=this.active);let s=e.selection||a.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!TH(a,this.active)?Mo.build(a,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&a.every(l=>l.state!=1)&&a.some(l=>l.hasResult())&&(a=a.map(l=>l.hasResult()?new Mr(l.source,0):l));for(let l of e.effects)l.is(sk)&&(s=s&&s.setSelected(l.value,this.id));return a==this.active&&s==this.open?this:new Sc(a,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:QH}}function TH(r,e){if(r==e)return!0;for(let t=0,n=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let i=t==r.length,a=n==e.length;if(i||a)return i==a;if(r[t++].result!=e[n++].result)return!1}}const QH={"aria-autocomplete":"list"};function HO(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const AH=[];function cp(r){return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class Mr{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=cp(e),i=this;n?i=i.handleUserEvent(e,n,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Mr(i.source,0));for(let a of e.effects)if(a.is(Lg))i=new Mr(i.source,1,a.value?Mi(e.state):-1);else if(a.is(kc))i=new Mr(i.source,0);else if(a.is(ak))for(let s of a.value)s.source==i.source&&(i=s);return i}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new Mr(this.source,1)}handleChange(e){return e.changes.touchesRange(Mi(e.startState))?new Mr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Mr(this.source,this.state,e.mapPos(this.explicitPos))}}class Zo extends Mr{constructor(e,t,n,i,a){super(e,2,t),this.result=n,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,t,n){var i;let a=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Mi(e.state);if((this.explicitPos<0?l<=a:l<this.from)||l>s||t=="delete"&&Mi(e.startState)==this.from)return new Mr(this.source,t=="input"&&n.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return DH(this.result.validFor,e.state,a,s)?new Zo(this.source,u,this.result,a,s):this.result.update&&(c=this.result.update(this.result,a,s,new tk(e.state,l,u>=0)))?new Zo(this.source,u,c,c.from,(i=c.to)!==null&&i!==void 0?i:Mi(e.state)):new Mr(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Mr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Zo(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function DH(r,e,t,n){if(!r)return!1;let i=e.sliceDoc(t,n);return typeof r=="function"?r(i,t,n,e):nk(r,!0).test(i)}const Lg=Xe.define(),kc=Xe.define(),ak=Xe.define({map(r,e){return r.map(t=>t.map(e))}}),sk=Xe.define(),en=Wt.define({create(){return Sc.start()},update(r,e){return r.update(e)},provide:r=>[$f.from(r,e=>e.tooltip),ke.contentAttributes.from(r,e=>e.attrs)]});function mu(r,e="option"){return t=>{let n=t.state.field(en,!1);if(!n||!n.open||Date.now()-n.open.timestamp<t.state.facet(an).interactionDelay)return!1;let i=1,a;e=="page"&&(a=e6(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:s}=n.open.options,l=n.open.selected>-1?n.open.selected+i*(r?1:-1):r?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),t.dispatch({effects:sk.of(l)}),!0}}const _H=r=>{let e=r.state.field(en,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<r.state.facet(an).interactionDelay?!1:(ik(r,e.open.options[e.open.selected]),!0)},MH=r=>r.state.field(en,!1)?(r.dispatch({effects:Lg.of(!0)}),!0):!1,ZH=r=>{let e=r.state.field(en,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:kc.of(null)}),!0)};class RH{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const KO=50,LH=50,BH=1e3,IH=Zt.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of r.state.field(en).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(en);if(!r.selectionSet&&!r.docChanged&&r.startState.field(en)==e)return;let t=r.transactions.some(n=>(n.selection||n.docChanged)&&!cp(n));for(let n=0;n<this.running.length;n++){let i=this.running[n];if(t||i.updates.length+r.transactions.length>LH&&Date.now()-i.time>BH){for(let a of i.context.abortListeners)try{a()}catch(s){Rr(this.view.state,s)}i.context.abortListeners=null,this.running.splice(n--,1)}else i.updates.push(...r.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(i=>i.active.source==n.source))?setTimeout(()=>this.startUpdate(),KO):-1,this.composing!=0)for(let n of r.transactions)cp(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:r}=this.view,e=r.field(en);for(let t of e.active)t.state==1&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Mi(e),n=new tk(e,t,r.explicitPos==t),i=new RH(r,n);this.running.push(i),Promise.resolve(r.source(n)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:kc.of(null)}),Rr(this.view.state,a)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),KO))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(an);for(let n=0;n<this.running.length;n++){let i=this.running[n];if(i.done===void 0)continue;if(this.running.splice(n--,1),i.done){let s=new Zo(i.active.source,i.active.explicitPos,i.done,i.done.from,(r=i.done.to)!==null&&r!==void 0?r:Mi(i.updates.length?i.updates[0].startState:this.view.state));for(let l of i.updates)s=s.update(l,t);if(s.hasResult()){e.push(s);continue}}let a=this.view.state.field(en).active.find(s=>s.source==i.active.source);if(a&&a.state==1)if(i.done==null){let s=new Mr(i.active.source,0);for(let l of i.updates)s=s.update(l,t);s.state!=1&&e.push(s)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:ak.of(e)})}},{eventHandlers:{blur(){let r=this.view.state.field(en,!1);r&&r.tooltip&&this.view.state.facet(an).closeOnBlur&&this.view.dispatch({effects:kc.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Lg.of(!1)}),20),this.composing=0}}}),ok=ke.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class NH{constructor(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i}}class Bg{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,nr.TrackDel),n=e.mapPos(this.to,1,nr.TrackDel);return t==null||n==null?null:new Bg(this.field,t,n)}}class Ig{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],i=[t],a=e.doc.lineAt(t),s=/^\s*/.exec(a.text)[0];for(let u of this.lines){if(n.length){let c=s,f=/^\t*/.exec(u)[0].length;for(let h=0;h<f;h++)c+=e.facet(Cf);i.push(t+c.length-f),u=c+u.slice(f)}n.push(u),t+=u.length+1}let l=this.fieldPositions.map(u=>new Bg(u.field,i[u.line]+u.from,i[u.line]+u.to));return{text:n,ranges:l}}static parse(e){let t=[],n=[],i=[],a;for(let s of e.split(/\r\n?|\n/)){for(;a=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let l=a[1]?+a[1]:null,u=a[2]||a[3]||"",c=-1;for(let f=0;f<t.length;f++)(l!=null?t[f].seq==l:u?t[f].name==u:!1)&&(c=f);if(c<0){let f=0;for(;f<t.length&&(l==null||t[f].seq!=null&&t[f].seq<l);)f++;t.splice(f,0,{seq:l,name:u}),c=f;for(let h of i)h.field>=c&&h.field++}i.push(new NH(c,n.length,a.index,a.index+u.length)),s=s.slice(0,a.index)+u+s.slice(a.index+a[0].length)}for(let l;l=/([$#])\\{/.exec(s);){s=s.slice(0,l.index)+l[1]+"{"+s.slice(l.index+l[0].length);for(let u of i)u.line==n.length&&u.from>l.index&&(u.from--,u.to--)}n.push(s)}return new Ig(n,i)}}let zH=ze.widget({widget:new class extends ta{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),WH=ze.mark({class:"cm-snippetField"});class Vs{constructor(e,t){this.ranges=e,this.active=t,this.deco=ze.set(e.map(n=>(n.from==n.to?zH:WH).range(n.from,n.to)))}map(e){let t=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;t.push(i)}return new Vs(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(n=>n.field==this.active&&n.from<=t.from&&n.to>=t.to))}}const Dl=Xe.define({map(r,e){return r&&r.map(e)}}),qH=Xe.define(),ol=Wt.define({create(){return null},update(r,e){for(let t of e.effects){if(t.is(Dl))return t.value;if(t.is(qH)&&r)return new Vs(r.ranges,t.value)}return r&&e.docChanged&&(r=r.map(e.changes)),r&&e.selection&&!r.selectionInsideField(e.selection)&&(r=null),r},provide:r=>ke.decorations.from(r,e=>e?e.deco:ze.none)});function Ng(r,e){return ue.create(r.filter(t=>t.field==e).map(t=>ue.range(t.from,t.to)))}function YH(r){let e=Ig.parse(r);return(t,n,i,a)=>{let{text:s,ranges:l}=e.instantiate(t.state,i),u={changes:{from:i,to:a,insert:ot.of(s)},scrollIntoView:!0};if(l.length&&(u.selection=Ng(l,0)),l.length>1){let c=new Vs(l,0),f=u.effects=[Dl.of(c)];t.state.field(ol,!1)===void 0&&f.push(Xe.appendConfig.of([ol,GH,UH,ok]))}t.dispatch(t.state.update(u))}}function lk(r){return({state:e,dispatch:t})=>{let n=e.field(ol,!1);if(!n||r<0&&n.active==0)return!1;let i=n.active+r,a=r>0&&!n.ranges.some(s=>s.field==i+r);return t(e.update({selection:Ng(n.ranges,i),effects:Dl.of(a?null:new Vs(n.ranges,i))})),!0}}const XH=({state:r,dispatch:e})=>r.field(ol,!1)?(e(r.update({effects:Dl.of(null)})),!0):!1,VH=lk(1),FH=lk(-1),jH=[{key:"Tab",run:VH,shift:FH},{key:"Escape",run:XH}],JO=$e.define({combine(r){return r.length?r[0]:jH}}),GH=Wa.highest(kf.compute([JO],r=>r.facet(JO)));function Dr(r,e){return Object.assign(Object.assign({},e),{apply:YH(r)})}const UH=ke.domEventHandlers({mousedown(r,e){let t=e.state.field(ol,!1),n;if(!t||(n=e.posAtCoords({x:r.clientX,y:r.clientY}))==null)return!1;let i=t.ranges.find(a=>a.from<=n&&a.to>=n);return!i||i.field==t.active?!1:(e.dispatch({selection:Ng(t.ranges,i.field),effects:Dl.of(t.ranges.some(a=>a.field>i.field)?new Vs(t.ranges,i.field):null)}),!0)}}),$c={brackets:["(","[","{","'",'"'],before:")]}:;>"},ga=Xe.define({map(r,e){let t=e.mapPos(r,-1,nr.TrackAfter);return t==null?void 0:t}}),zg=Xe.define({map(r,e){return e.mapPos(r)}}),Wg=new class extends Ea{};Wg.startSide=1;Wg.endSide=-1;const uk=Wt.define({create(){return tt.empty},update(r,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(n,-1)&&(r=tt.empty)}r=r.map(e.changes);for(let t of e.effects)t.is(ga)?r=r.update({add:[Wg.range(t.value,t.value+1)]}):t.is(zg)&&(r=r.update({filter:n=>n!=t.value}));return r}});function HH(){return[JH,uk]}const Rh="()[]{}<>";function ck(r){for(let e=0;e<Rh.length;e+=2)if(Rh.charCodeAt(e)==r)return Rh.charAt(e+1);return mg(r<128?r:r+1)}function fk(r,e){return r.languageDataAt("closeBrackets",e)[0]||$c}const KH=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),JH=ke.inputHandler.of((r,e,t,n)=>{if((KH?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let i=r.state.selection.main;if(n.length>2||n.length==2&&Yr(tr(n,0))==1||e!=i.from||t!=i.to)return!1;let a=rK(r.state,n);return a?(r.dispatch(a),!0):!1}),eK=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=fk(r,r.selection.main.head).brackets||$c.brackets,i=null,a=r.changeByRange(s=>{if(s.empty){let l=nK(r.doc,s.head);for(let u of n)if(u==l&&Af(r.doc,s.head)==ck(tr(u,0)))return{changes:{from:s.head-u.length,to:s.head+u.length},range:ue.cursor(s.head-u.length)}}return{range:i=s}});return i||e(r.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},tK=[{key:"Backspace",run:eK}];function rK(r,e){let t=fk(r,r.selection.main.head),n=t.brackets||$c.brackets;for(let i of n){let a=ck(tr(i,0));if(e==i)return a==i?sK(r,i,n.indexOf(i+i+i)>-1):iK(r,i,a,t.before||$c.before);if(e==a&&hk(r,r.selection.main.from))return aK(r,i,a)}return null}function hk(r,e){let t=!1;return r.field(uk).between(0,r.doc.length,n=>{n==e&&(t=!0)}),t}function Af(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Yr(tr(t,0)))}function nK(r,e){let t=r.sliceString(e-2,e);return Yr(tr(t,0))==t.length?t:t.slice(1)}function iK(r,e,t,n){let i=null,a=r.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:ga.of(s.to+e.length),range:ue.range(s.anchor+e.length,s.head+e.length)};let l=Af(r.doc,s.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+t,from:s.head},effects:ga.of(s.head+e.length),range:ue.cursor(s.head+e.length)}:{range:i=s}});return i?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function aK(r,e,t){let n=null,i=r.selection.ranges.map(a=>a.empty&&Af(r.doc,a.head)==t?ue.cursor(a.head+t.length):n=a);return n?null:r.update({selection:ue.create(i,r.selection.mainIndex),scrollIntoView:!0,effects:r.selection.ranges.map(({from:a})=>zg.of(a))})}function sK(r,e,t){let n=null,i=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:ga.of(a.to+e.length),range:ue.range(a.anchor+e.length,a.head+e.length)};let s=a.head,l=Af(r.doc,s);if(l==e){if(e0(r,s))return{changes:{insert:e+e,from:s},effects:ga.of(s+e.length),range:ue.cursor(s+e.length)};if(hk(r,s)){let u=t&&r.sliceDoc(s,s+e.length*3)==e+e+e;return{range:ue.cursor(s+e.length*(u?3:1)),effects:zg.of(s)}}}else{if(t&&r.sliceDoc(s-2*e.length,s)==e+e&&e0(r,s-2*e.length))return{changes:{insert:e+e+e+e,from:s},effects:ga.of(s+e.length),range:ue.cursor(s+e.length)};if(r.charCategorizer(s)(l)!=Dt.Word){let u=r.sliceDoc(s-1,s);if(u!=e&&r.charCategorizer(s)(u)!=Dt.Word&&!oK(r,s,e))return{changes:{insert:e+e,from:s},effects:ga.of(s+e.length),range:ue.cursor(s+e.length)}}}return{range:n=a}});return n?null:r.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function e0(r,e){let t=cr(r).resolveInner(e+1);return t.parent&&t.from==e}function oK(r,e,t){let n=cr(r).resolveInner(e,-1);for(let i=0;i<5;i++){if(r.sliceDoc(n.from,n.from+t.length)==t){let s=n.firstChild;for(;s&&s.from==n.from&&s.to-s.from>t.length;){if(r.sliceDoc(s.to-t.length,s.to)==t)return!1;s=s.firstChild}return!0}let a=n.to==e&&n.parent;if(!a)break;n=a}return!1}function lK(r={}){return[en,an.of(r),IH,uK,ok]}const dk=[{key:"Ctrl-Space",run:MH},{key:"Escape",run:ZH},{key:"ArrowDown",run:mu(!0)},{key:"ArrowUp",run:mu(!1)},{key:"PageDown",run:mu(!0,"page")},{key:"PageUp",run:mu(!1,"page")},{key:"Enter",run:_H}],uK=Wa.highest(kf.computeN([an],r=>r.facet(an).defaultKeymap?[dk]:[])),cK=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),n=Yg(r.state,t.from);return n.line?fK(r):n.block?dK(r):!1};function qg(r,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=r(e,t);return i?(n(t.update(i)),!0):!1}}const fK=qg(vK,0),hK=qg(pk,0),dK=qg((r,e)=>pk(r,e,gK(e)),0);function Yg(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const lo=50;function pK(r,{open:e,close:t},n,i){let a=r.sliceDoc(n-lo,n),s=r.sliceDoc(i,i+lo),l=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(s)[0].length,c=a.length-l;if(a.slice(c-e.length,c)==e&&s.slice(u,u+t.length)==t)return{open:{pos:n-l,margin:l&&1},close:{pos:i+u,margin:u&&1}};let f,h;i-n<=2*lo?f=h=r.sliceDoc(n,i):(f=r.sliceDoc(n,n+lo),h=r.sliceDoc(i-lo,i));let d=/^\s*/.exec(f)[0].length,p=/\s*$/.exec(h)[0].length,g=h.length-p-t.length;return f.slice(d,d+e.length)==e&&h.slice(g,g+t.length)==t?{open:{pos:n+d+e.length,margin:/\s/.test(f.charAt(d+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function gK(r){let e=[];for(let t of r.selection.ranges){let n=r.doc.lineAt(t.from),i=t.to<=n.to?n:r.doc.lineAt(t.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function pk(r,e,t=e.selection.ranges){let n=t.map(a=>Yg(e,a.from).block);if(!n.every(a=>a))return null;let i=t.map((a,s)=>pK(e,n[s],a.from,a.to));if(r!=2&&!i.every(a=>a))return{changes:e.changes(t.map((a,s)=>i[s]?[]:[{from:a.from,insert:n[s].open+" "},{from:a.to,insert:" "+n[s].close}]))};if(r!=1&&i.some(a=>a)){let a=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let u=n[s],{open:c,close:f}=l;a.push({from:c.pos-u.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+u.close.length})}return{changes:a}}return null}function vK(r,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:a,to:s}of t){let l=n.length,u=1e9,c=Yg(e,a).line;if(!!c){for(let f=a;f<=s;){let h=e.doc.lineAt(f);if(h.from>i&&(a==s||s>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,p=d==h.length,g=h.text.slice(d,d+c.length)==c?d:-1;d<h.text.length&&d<u&&(u=d),n.push({line:h,comment:g,token:c,indent:d,empty:p,single:!1})}f=h.to+1}if(u<1e9)for(let f=l;f<n.length;f++)n[f].indent<n[f].line.text.length&&(n[f].indent=u);n.length==l+1&&(n[l].single=!0)}}if(r!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:l,token:u,indent:c,empty:f,single:h}of n)(h||!f)&&a.push({from:l.from+c,insert:u+" "});let s=e.changes(a);return{changes:s,selection:e.selection.map(s,1)}}else if(r!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:s,comment:l,token:u}of n)if(l>=0){let c=s.from+l,f=c+u.length;s.text[f-s.from]==" "&&f++,a.push({from:c,to:f})}return{changes:a}}return null}const fp=ea.define(),mK=ea.define(),yK=$e.define(),gk=$e.define({combine(r){return $n(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}}),vk=Wt.define({create(){return zn.empty},update(r,e){let t=e.state.facet(gk),n=e.annotation(fp);if(n){let u=Zr.fromTransaction(e,n.selection),c=n.side,f=c==0?r.undone:r.done;return u?f=Pc(f,f.length,t.minDepth,u):f=Ok(f,e.startState.selection),new zn(c==0?n.rest:f,c==0?f:n.rest)}let i=e.annotation(mK);if((i=="full"||i=="before")&&(r=r.isolate()),e.annotation(jt.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let a=Zr.fromTransaction(e),s=e.annotation(jt.time),l=e.annotation(jt.userEvent);return a?r=r.addChanges(a,s,l,t,e):e.selection&&(r=r.addSelection(e.startState.selection,s,l,t.newGroupDelay)),(i=="full"||i=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new zn(r.done.map(Zr.fromJSON),r.undone.map(Zr.fromJSON))}});function OK(r={}){return[vk,gk.of(r),ke.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?mk:e.inputType=="historyRedo"?hp:null;return n?(e.preventDefault(),n(t)):!1}})]}function Df(r,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field(vk,!1);if(!i)return!1;let a=i.pop(r,t,e);return a?(n(a),!0):!1}}const mk=Df(0,!1),hp=Df(1,!1),bK=Df(0,!0),wK=Df(1,!0);class Zr{constructor(e,t,n,i,a){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new Zr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Zr(e.changes&&Vt.fromJSON(e.changes),[],e.mapped&&Yn.fromJSON(e.mapped),e.startSelection&&ue.fromJSON(e.startSelection),e.selectionsAfter.map(ue.fromJSON))}static fromTransaction(e,t){let n=rn;for(let i of e.startState.facet(yK)){let a=i(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new Zr(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,rn)}static selection(e){return new Zr(void 0,rn,void 0,void 0,e)}}function Pc(r,e,t,n){let i=e+1>t+20?e-t-1:0,a=r.slice(i,e);return a.push(n),a}function xK(r,e){let t=[],n=!1;return r.iterChangedRanges((i,a)=>t.push(i,a)),e.iterChangedRanges((i,a,s,l)=>{for(let u=0;u<t.length;){let c=t[u++],f=t[u++];l>=c&&s<=f&&(n=!0)}}),n}function SK(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function yk(r,e){return r.length?e.length?r.concat(e):r:e}const rn=[],kK=200;function Ok(r,e){if(r.length){let t=r[r.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-kK));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),Pc(r,r.length-1,1e9,t.setSelAfter(n)))}else return[Zr.selection([e])]}function $K(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Lh(r,e){if(!r.length)return r;let t=r.length,n=rn;for(;t;){let i=PK(r[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let a=r.slice(0,t);return a[t-1]=i,a}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[Zr.selection(n)]:rn}function PK(r,e,t){let n=yk(r.selectionsAfter.length?r.selectionsAfter.map(l=>l.map(e)):rn,t);if(!r.changes)return Zr.selection(n);let i=r.changes.map(e),a=e.mapDesc(r.changes,!0),s=r.mapped?r.mapped.composeDesc(a):a;return new Zr(i,Xe.mapEffects(r.effects,e),s,r.startSelection.map(a),n)}const CK=/^(input\.type|delete)($|\.)/;class zn{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new zn(this.done,this.undone):this}addChanges(e,t,n,i,a){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||CK.test(n))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,xK(l.changes,e.changes))||n=="input.type.compose")?s=Pc(s,s.length-1,i.minDepth,new Zr(e.changes.compose(l.changes),yk(e.effects,l.effects),l.mapped,l.startSelection,rn)):s=Pc(s,s.length,i.minDepth,e),new zn(s,rn,t,n)}addSelection(e,t,n,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:rn;return a.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&SK(a[a.length-1],e)?this:new zn(Ok(this.done,e),this.undone,t,n)}addMapping(e){return new zn(Lh(this.done,e),Lh(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1],s=a.selectionsAfter[0]||t.selection;if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:fp.of({side:e,rest:$K(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let l=i.length==1?rn:i.slice(0,i.length-1);return a.mapped&&(l=Lh(l,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:fp.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}zn.empty=new zn(rn,rn);const EK=[{key:"Mod-z",run:mk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:hp,preventDefault:!0},{linux:"Ctrl-Shift-z",run:hp,preventDefault:!0},{key:"Mod-u",run:bK,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:wK,preventDefault:!0}];function Fs(r,e){return ue.create(r.ranges.map(e),r.mainIndex)}function Un(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Pn({state:r,dispatch:e},t){let n=Fs(r.selection,t);return n.eq(r.selection,!0)?!1:(e(Un(r,n)),!0)}function _f(r,e){return ue.cursor(e?r.to:r.from)}function bk(r,e){return Pn(r,t=>t.empty?r.moveByChar(t,e):_f(t,e))}function Sr(r){return r.textDirectionAt(r.state.selection.main.head)==Et.LTR}const wk=r=>bk(r,!Sr(r)),xk=r=>bk(r,Sr(r));function Sk(r,e){return Pn(r,t=>t.empty?r.moveByGroup(t,e):_f(t,e))}const TK=r=>Sk(r,!Sr(r)),QK=r=>Sk(r,Sr(r));function AK(r,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function Mf(r,e,t){let n=cr(r).resolveInner(e.head),i=t?Ge.closedBy:Ge.openedBy;for(let u=e.head;;){let c=t?n.childAfter(u):n.childBefore(u);if(!c)break;AK(r,c,i)?n=c:u=t?c.to:c.from}let a=n.type.prop(i),s,l;return a&&(s=t?Nn(r,n.from,1):Nn(r,n.to,-1))&&s.matched?l=t?s.end.to:s.end.from:l=t?n.to:n.from,ue.cursor(l,t?-1:1)}const DK=r=>Pn(r,e=>Mf(r.state,e,!Sr(r))),_K=r=>Pn(r,e=>Mf(r.state,e,Sr(r)));function kk(r,e){return Pn(r,t=>{if(!t.empty)return _f(t,e);let n=r.moveVertically(t,e);return n.head!=t.head?n:r.moveToLineBoundary(t,e)})}const $k=r=>kk(r,!1),Pk=r=>kk(r,!0);function Ck(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let a of r.state.facet(ke.scrollMargins)){let s=a(r);s!=null&&s.top&&(t=Math.max(s==null?void 0:s.top,t)),s!=null&&s.bottom&&(n=Math.max(s==null?void 0:s.bottom,n))}i=r.scrollDOM.clientHeight-t-n}else i=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,i-5)}}function Ek(r,e){let t=Ck(r),{state:n}=r,i=Fs(n.selection,s=>s.empty?r.moveVertically(s,e,t.height):_f(s,e));if(i.eq(n.selection))return!1;let a;if(t.selfScroll){let s=r.coordsAtPos(n.selection.main.head),l=r.scrollDOM.getBoundingClientRect(),u=l.top+t.marginTop,c=l.bottom-t.marginBottom;s&&s.top>u&&s.bottom<c&&(a=ke.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-u}))}return r.dispatch(Un(n,i),{effects:a}),!0}const t0=r=>Ek(r,!1),dp=r=>Ek(r,!0);function ra(r,e,t){let n=r.lineBlockAt(e.head),i=r.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=r.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let a=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(i=ue.cursor(n.from+a))}return i}const MK=r=>Pn(r,e=>ra(r,e,!0)),ZK=r=>Pn(r,e=>ra(r,e,!1)),RK=r=>Pn(r,e=>ra(r,e,!Sr(r))),LK=r=>Pn(r,e=>ra(r,e,Sr(r))),BK=r=>Pn(r,e=>ue.cursor(r.lineBlockAt(e.head).from,1)),IK=r=>Pn(r,e=>ue.cursor(r.lineBlockAt(e.head).to,-1));function NK(r,e,t){let n=!1,i=Fs(r.selection,a=>{let s=Nn(r,a.head,-1)||Nn(r,a.head,1)||a.head>0&&Nn(r,a.head-1,1)||a.head<r.doc.length&&Nn(r,a.head+1,-1);if(!s||!s.end)return a;n=!0;let l=s.start.from==a.head?s.end.to:s.end.from;return t?ue.range(a.anchor,l):ue.cursor(l)});return n?(e(Un(r,i)),!0):!1}const zK=({state:r,dispatch:e})=>NK(r,e,!1);function un(r,e){let t=Fs(r.state.selection,n=>{let i=e(n);return ue.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(Un(r.state,t)),!0)}function Tk(r,e){return un(r,t=>r.moveByChar(t,e))}const Qk=r=>Tk(r,!Sr(r)),Ak=r=>Tk(r,Sr(r));function Dk(r,e){return un(r,t=>r.moveByGroup(t,e))}const WK=r=>Dk(r,!Sr(r)),qK=r=>Dk(r,Sr(r)),YK=r=>un(r,e=>Mf(r.state,e,!Sr(r))),XK=r=>un(r,e=>Mf(r.state,e,Sr(r)));function _k(r,e){return un(r,t=>r.moveVertically(t,e))}const Mk=r=>_k(r,!1),Zk=r=>_k(r,!0);function Rk(r,e){return un(r,t=>r.moveVertically(t,e,Ck(r).height))}const r0=r=>Rk(r,!1),n0=r=>Rk(r,!0),VK=r=>un(r,e=>ra(r,e,!0)),FK=r=>un(r,e=>ra(r,e,!1)),jK=r=>un(r,e=>ra(r,e,!Sr(r))),GK=r=>un(r,e=>ra(r,e,Sr(r))),UK=r=>un(r,e=>ue.cursor(r.lineBlockAt(e.head).from)),HK=r=>un(r,e=>ue.cursor(r.lineBlockAt(e.head).to)),i0=({state:r,dispatch:e})=>(e(Un(r,{anchor:0})),!0),a0=({state:r,dispatch:e})=>(e(Un(r,{anchor:r.doc.length})),!0),s0=({state:r,dispatch:e})=>(e(Un(r,{anchor:r.selection.main.anchor,head:0})),!0),o0=({state:r,dispatch:e})=>(e(Un(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),KK=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),JK=({state:r,dispatch:e})=>{let t=Zf(r).map(({from:n,to:i})=>ue.range(n,Math.min(i+1,r.doc.length)));return e(r.update({selection:ue.create(t),userEvent:"select"})),!0},eJ=({state:r,dispatch:e})=>{let t=Fs(r.selection,n=>{var i;let a=cr(r).resolveStack(n.from,1);for(let s=a;s;s=s.next){let{node:l}=s;if((l.from<n.from&&l.to>=n.to||l.to>n.to&&l.from<=n.from)&&((i=l.parent)===null||i===void 0?void 0:i.parent))return ue.range(l.to,l.from)}return n});return e(Un(r,t)),!0},tJ=({state:r,dispatch:e})=>{let t=r.selection,n=null;return t.ranges.length>1?n=ue.create([t.main]):t.main.empty||(n=ue.create([ue.cursor(t.main.head)])),n?(e(Un(r,n)),!0):!1};function _l(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:n}=r,i=n.changeByRange(a=>{let{from:s,to:l}=a;if(s==l){let u=e(a);u<s?(t="delete.backward",u=yu(r,u,!1)):u>s&&(t="delete.forward",u=yu(r,u,!0)),s=Math.min(s,u),l=Math.max(l,u)}else s=yu(r,s,!1),l=yu(r,l,!0);return s==l?{range:a}:{changes:{from:s,to:l},range:ue.cursor(s,s<a.head?-1:1)}});return i.changes.empty?!1:(r.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ke.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function yu(r,e,t){if(r instanceof ke)for(let n of r.state.facet(ke.atomicRanges).map(i=>i(r)))n.between(e,e,(i,a)=>{i<e&&a>e&&(e=t?a:i)});return e}const Lk=(r,e)=>_l(r,t=>{let n=t.from,{state:i}=r,a=i.doc.lineAt(n),s,l;if(!e&&n>a.from&&n<a.from+200&&!/[^ \t]/.test(s=a.text.slice(0,n-a.from))){if(s[s.length-1]=="	")return n-1;let u=Xs(s,i.tabSize),c=u%bc(i)||bc(i);for(let f=0;f<c&&s[s.length-1-f]==" ";f++)n--;l=n}else l=ar(a.text,n-a.from,e,e)+a.from,l==n&&a.number!=(e?i.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,n-a.from))&&(l=ar(a.text,l-a.from,!1,!1)+a.from);return l}),pp=r=>Lk(r,!1),Bk=r=>Lk(r,!0),Ik=(r,e)=>_l(r,t=>{let n=t.head,{state:i}=r,a=i.doc.lineAt(n),s=i.charCategorizer(n);for(let l=null;;){if(n==(e?a.to:a.from)){n==t.head&&a.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let u=ar(a.text,n-a.from,e)+a.from,c=a.text.slice(Math.min(n,u)-a.from,Math.max(n,u)-a.from),f=s(c);if(l!=null&&f!=l)break;(c!=" "||n!=t.head)&&(l=f),n=u}return n}),Nk=r=>Ik(r,!1),rJ=r=>Ik(r,!0),nJ=r=>_l(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),iJ=r=>_l(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),aJ=r=>_l(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),sJ=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:ot.of(["",""])},range:ue.cursor(n.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},oJ=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let i=n.from,a=r.doc.lineAt(i),s=i==a.from?i-1:ar(a.text,i-a.from,!1)+a.from,l=i==a.to?i+1:ar(a.text,i-a.from,!0)+a.from;return{changes:{from:s,to:l,insert:r.doc.slice(i,l).append(r.doc.slice(s,i))},range:ue.cursor(l)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Zf(r){let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.from),a=r.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=r.doc.lineAt(n.to-1)),t>=i.number){let s=e[e.length-1];s.to=a.to,s.ranges.push(n)}else e.push({from:i.from,to:a.to,ranges:[n]});t=a.number+1}return e}function zk(r,e,t){if(r.readOnly)return!1;let n=[],i=[];for(let a of Zf(r)){if(t?a.to==r.doc.length:a.from==0)continue;let s=r.doc.lineAt(t?a.to+1:a.from-1),l=s.length+1;if(t){n.push({from:a.to,to:s.to},{from:a.from,insert:s.text+r.lineBreak});for(let u of a.ranges)i.push(ue.range(Math.min(r.doc.length,u.anchor+l),Math.min(r.doc.length,u.head+l)))}else{n.push({from:s.from,to:a.from},{from:a.to,insert:r.lineBreak+s.text});for(let u of a.ranges)i.push(ue.range(u.anchor-l,u.head-l))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:ue.create(i,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const lJ=({state:r,dispatch:e})=>zk(r,e,!1),uJ=({state:r,dispatch:e})=>zk(r,e,!0);function Wk(r,e,t){if(r.readOnly)return!1;let n=[];for(let i of Zf(r))t?n.push({from:i.from,insert:r.doc.slice(i.from,i.to)+r.lineBreak}):n.push({from:i.to,insert:r.lineBreak+r.doc.slice(i.from,i.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const cJ=({state:r,dispatch:e})=>Wk(r,e,!1),fJ=({state:r,dispatch:e})=>Wk(r,e,!0),hJ=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(Zf(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),n=Fs(e.selection,i=>r.moveVertically(i,!0)).map(t);return r.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function dJ(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=cr(r).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),a;return n&&i&&n.to<=e&&i.from>=e&&(a=n.type.prop(Ge.closedBy))&&a.indexOf(i.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(i.from).from&&!/\S/.test(r.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const pJ=qk(!1),gJ=qk(!0);function qk(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:a,to:s}=i,l=e.doc.lineAt(a),u=!r&&a==s&&dJ(e,a);r&&(a=s=(s<=l.to?l:e.doc.lineAt(s)).to);let c=new Ef(e,{simulateBreak:a,simulateDoubleBreak:!!u}),f=Zg(c,a);for(f==null&&(f=Xs(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;u?{from:a,to:s}=u:a>l.from&&a<l.from+100&&!/\S/.test(l.text.slice(0,a))&&(a=l.from);let h=["",sl(e,f)];return u&&h.push(sl(e,c.lineIndent(l.from,-1))),{changes:{from:a,to:s,insert:ot.of(h)},range:ue.cursor(a+1+h[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function Xg(r,e){let t=-1;return r.changeByRange(n=>{let i=[];for(let s=n.from;s<=n.to;){let l=r.doc.lineAt(s);l.number>t&&(n.empty||n.to>l.from)&&(e(l,i,n),t=l.number),s=l.to+1}let a=r.changes(i);return{changes:i,range:ue.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const vJ=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),n=new Ef(r,{overrideIndentation:a=>{let s=t[a];return s==null?-1:s}}),i=Xg(r,(a,s,l)=>{let u=Zg(n,a.from);if(u==null)return;/\S/.test(a.text)||(u=0);let c=/^\s*/.exec(a.text)[0],f=sl(r,u);(c!=f||l.from<a.from+c.length)&&(t[a.from]=u,s.push({from:a.from,to:a.from+c.length,insert:f}))});return i.changes.empty||e(r.update(i,{userEvent:"indent"})),!0},Yk=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(Xg(r,(t,n)=>{n.push({from:t.from,insert:r.facet(Cf)})}),{userEvent:"input.indent"})),!0),mJ=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(Xg(r,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let a=Xs(i,r.tabSize),s=0,l=sl(r,Math.max(0,a-bc(r)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;n.push({from:t.from+s,to:t.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),yJ=({state:r,dispatch:e})=>r.selection.ranges.some(t=>!t.empty)?Yk({state:r,dispatch:e}):(e(r.update(r.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),OJ=[{key:"Ctrl-b",run:wk,shift:Qk,preventDefault:!0},{key:"Ctrl-f",run:xk,shift:Ak},{key:"Ctrl-p",run:$k,shift:Mk},{key:"Ctrl-n",run:Pk,shift:Zk},{key:"Ctrl-a",run:BK,shift:UK},{key:"Ctrl-e",run:IK,shift:HK},{key:"Ctrl-d",run:Bk},{key:"Ctrl-h",run:pp},{key:"Ctrl-k",run:nJ},{key:"Ctrl-Alt-h",run:Nk},{key:"Ctrl-o",run:sJ},{key:"Ctrl-t",run:oJ},{key:"Ctrl-v",run:dp}],bJ=[{key:"ArrowLeft",run:wk,shift:Qk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:TK,shift:WK,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:RK,shift:jK,preventDefault:!0},{key:"ArrowRight",run:xk,shift:Ak,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:QK,shift:qK,preventDefault:!0},{mac:"Cmd-ArrowRight",run:LK,shift:GK,preventDefault:!0},{key:"ArrowUp",run:$k,shift:Mk,preventDefault:!0},{mac:"Cmd-ArrowUp",run:i0,shift:s0},{mac:"Ctrl-ArrowUp",run:t0,shift:r0},{key:"ArrowDown",run:Pk,shift:Zk,preventDefault:!0},{mac:"Cmd-ArrowDown",run:a0,shift:o0},{mac:"Ctrl-ArrowDown",run:dp,shift:n0},{key:"PageUp",run:t0,shift:r0},{key:"PageDown",run:dp,shift:n0},{key:"Home",run:ZK,shift:FK,preventDefault:!0},{key:"Mod-Home",run:i0,shift:s0},{key:"End",run:MK,shift:VK,preventDefault:!0},{key:"Mod-End",run:a0,shift:o0},{key:"Enter",run:pJ},{key:"Mod-a",run:KK},{key:"Backspace",run:pp,shift:pp},{key:"Delete",run:Bk},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Nk},{key:"Mod-Delete",mac:"Alt-Delete",run:rJ},{mac:"Mod-Backspace",run:iJ},{mac:"Mod-Delete",run:aJ}].concat(OJ.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),wJ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:DK,shift:YK},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:_K,shift:XK},{key:"Alt-ArrowUp",run:lJ},{key:"Shift-Alt-ArrowUp",run:cJ},{key:"Alt-ArrowDown",run:uJ},{key:"Shift-Alt-ArrowDown",run:fJ},{key:"Escape",run:tJ},{key:"Mod-Enter",run:gJ},{key:"Alt-l",mac:"Ctrl-l",run:JK},{key:"Mod-i",run:eJ,preventDefault:!0},{key:"Mod-[",run:mJ},{key:"Mod-]",run:Yk},{key:"Mod-Alt-\\",run:vJ},{key:"Shift-Mod-k",run:hJ},{key:"Shift-Mod-\\",run:zK},{key:"Mod-/",run:cK},{key:"Alt-A",run:hK}].concat(bJ);class Cc{constructor(e,t,n,i,a,s,l,u,c,f=0,h){this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=a,this.score=s,this.buffer=l,this.bufferBase=u,this.curContext=c,this.lookAhead=f,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let i=e.parser.context;return new Cc(e,[],t,n,n,0,[],0,i?new l0(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=e&65535,{parser:a}=this.p,s=a.dynamicPrecedence(i);if(s&&(this.score+=s),n==0){this.pushState(a.getGoto(this.state,i,!0),this.reducePos),i<a.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(n-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let f=l?this.stack[l-1]:0,h=this.bufferBase+this.buffer.length-f;if(i<a.minRepeatTerm||e&131072){let d=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,u,d,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let d=this.stack[l-3];this.state=a.getGoto(d,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,u)}storeNode(e,t,n,i=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,l=this.buffer.length;if(l==0&&s.parent&&(l=s.bufferBase-s.parent.bufferBase,s=s.parent),l>0&&s.buffer[l-4]==0&&s.buffer[l-1]>-1){if(t==n)return;if(s.buffer[l-2]>=t){s.buffer[l-2]=n;return}}}if(!a||this.pos==n)this.buffer.push(e,t,n,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=i}}shift(e,t,n,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let a=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(a,1)||(this.reducePos=i)),this.pushState(a,n),this.shiftContext(t,n),t<=s.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,n,i){e&65536?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Cc(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new xJ(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(n==0)return!1;if((n&65536)==0)return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let a=0,s;a<t.length;a+=2)(s=t[a+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[a],s);if(this.stack.length<120)for(let a=0;i.length<4<<1&&a<t.length;a+=2){let s=t[a+1];i.some((l,u)=>u&1&&l==s)||i.push(t[a],s)}t=i}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let a=t[i+1];if(a==this.state)continue;let s=this.split();s.pushState(a,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.reducePos=this.pos,s.score-=200,n.push(s)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=t&65535,a=this.stack.length-n*3;if(a<0||e.getGoto(this.stack[a],i,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,a)=>{if(!t.includes(i))return t.push(i),e.allActions(i,s=>{if(!(s&393216))if(s&65536){let l=(s>>19)-a;if(l>1){let u=s&65535,c=this.stack.length-l*3;if(c>=0&&e.getGoto(this.stack[c],u,!1)>=0)return l<<19|65536|u}}else{let l=n(s,a+1);if(l!=null)return l}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new l0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class l0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class xJ{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Ec{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Ec(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ec(this.stack,this.pos,this.index)}}function ko(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let n=0,i=0;n<r.length;){let a=0;for(;;){let s=r.charCodeAt(n++),l=!1;if(s==126){a=65535;break}s>=92&&s--,s>=34&&s--;let u=s-32;if(u>=46&&(u-=46,l=!0),a+=u,l)break;a*=46}t?t[i++]=a:t=new e(a)}return t}class Iu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const u0=new Iu;class SJ{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=u0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,a=this.pos+e;for(;a<n.from;){if(!i)return null;let s=this.ranges[--i];a-=n.from-s.to,n=s}for(;t<0?a>n.to:a>=n.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];a+=s.from-n.to,n=s}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,n,i;if(t>=0&&t<this.chunk.length)n=this.pos+e,i=this.chunk.charCodeAt(t);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(n=a,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let s=this.rangeIndex,l=this.range;for(;l.to<=n;)l=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-n)),i=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),i}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=u0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class gs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;Xk(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}gs.prototype.contextual=gs.prototype.fallback=gs.prototype.extend=!1;class gp{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data=typeof e=="string"?ko(e):e}token(e,t){let n=e.pos,i=0;for(;;){let a=e.next<0,s=e.resolveOffset(1,1);if(Xk(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(a||i++,s==null)break;e.reset(s,e.token)}i&&(e.reset(n,e.token),e.acceptToken(this.elseToken,i))}}gp.prototype.contextual=gs.prototype.fallback=gs.prototype.extend=!1;class Rf{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Xk(r,e,t,n,i,a){let s=0,l=1<<n,{dialect:u}=t.p.parser;e:for(;(l&r[s])!=0;){let c=r[s+1];for(let p=s+3;p<c;p+=2)if((r[p+1]&l)>0){let g=r[p];if(u.allows(g)&&(e.token.value==-1||e.token.value==g||kJ(g,e.token.value,i,a))){e.acceptToken(g);break}}let f=e.next,h=0,d=r[s+2];if(e.next<0&&d>h&&r[c+d*3-3]==65535){s=r[c+d*3-1];continue e}for(;h<d;){let p=h+d>>1,g=c+p+(p<<1),y=r[g],m=r[g+1]||65536;if(f<y)d=p;else if(f>=m)h=p+1;else{s=r[g+2],e.advance();continue e}}break}}function c0(r,e,t){for(let n=e,i;(i=r[n])!=65535;n++)if(i==t)return n-e;return-1}function kJ(r,e,t,n){let i=c0(t,n,e);return i<0||c0(t,n,r)<i}const Nr=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Bh=null;function f0(r,e,t){let n=r.cursor(qt.IncludeAnonymous);for(n.moveTo(e);;)if(!(t<0?n.childBefore(e):n.childAfter(e)))for(;;){if((t<0?n.to<e:n.from>e)&&!n.type.isError)return t<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(r.length,Math.max(n.from+1,e+25));if(t<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return t<0?0:r.length}}class $J{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?f0(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?f0(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=n.children[i],s=this.start[t]+n.positions[i];if(s>e)return this.nextStart=s,null;if(a instanceof wt){if(s==e){if(s<this.safeFrom)return null;let l=s+a.length;if(l<=this.safeTo){let u=a.prop(Ge.lookAhead);if(!u||l+u<this.fragment.to)return a}}this.index[t]++,s+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+a.length}}}class PJ{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new Iu)}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:a}=i,s=i.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let c=0;c<a.length;c++){if((1<<c&s)==0)continue;let f=a[c],h=this.tokens[c];if(!(n&&!f.fallback)&&((f.contextual||h.start!=e.pos||h.mask!=s||h.context!=l)&&(this.updateCachedToken(h,f,e),h.mask=s,h.context=l),h.lookAhead>h.end+25&&(u=Math.max(h.lookAhead,u)),h.value!=0)){let d=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!f.extend&&(n=h,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return u&&e.setLookAhead(u),!n&&e.pos==this.stream.end&&(n=new Iu,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Iu,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:a}=n.p;for(let s=0;s<a.specialized.length;s++)if(a.specialized[s]==e.value){let l=a.specializers[s](this.stream.read(e.start,e.end),n);if(l>=0&&n.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let a=0;a<i;a+=3)if(this.actions[a]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:a}=e,{parser:s}=e.p,{data:l}=s;for(let u=0;u<2;u++)for(let c=s.stateSlot(a,u?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Jn(l,c+2);else{i==0&&l[c+1]==2&&(i=this.putAction(Jn(l,c+2),t,n,i));break}l[c]==t&&(i=this.putAction(Jn(l,c+1),t,n,i))}return i}}class CJ{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new SJ(t,i),this.tokens=new PJ(e,this.stream),this.topTerm=e.top[1];let{from:a}=i[0];this.stacks=[Cc.start(this,e.top[0],a)],this.fragments=n.length&&this.stream.end-a>e.bufferLength*4?new $J(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],i,a;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let l=e[s];for(;;){if(this.tokens.mainToken=null,l.pos>t)n.push(l);else{if(this.advanceStack(l,n,e))continue;{i||(i=[],a=[]),i.push(l);let u=this.tokens.getMainToken(l);a.push(u.value,u.end)}}break}}if(!n.length){let s=i&&QJ(i);if(s)return Nr&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw Nr&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,a,n);if(s)return Nr&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(n.length>s)for(n.sort((l,u)=>u.score-l.score);n.length>s;)n.pop();n.some(l=>l.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let s=0;s<n.length-1;s++){let l=n[s];for(let u=s+1;u<n.length;u++){let c=n[u];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)n.splice(u--,1);else{n.splice(s--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let s=1;s<n.length;s++)n[s].pos<this.minStackPos&&(this.minStackPos=n[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:a}=this,s=Nr?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,f=c?e.curContext.hash:0;for(let h=this.fragments.nodeAt(i);h;){let d=this.parser.nodeSet.types[h.type.id]==h.type?a.getGoto(e.state,h.type.id):-1;if(d>-1&&h.length&&(!c||(h.prop(Ge.contextHash)||0)==f))return e.useNode(h,d),Nr&&console.log(s+this.stackID(e)+` (via reuse of ${a.getName(h.type.id)})`),!0;if(!(h instanceof wt)||h.children.length==0||h.positions[0]>0)break;let p=h.children[0];if(p instanceof wt&&h.positions[0]==0)h=p;else break}}let l=a.stateSlot(e.state,4);if(l>0)return e.reduce(l),Nr&&console.log(s+this.stackID(e)+` (via always-reduce ${a.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let c=0;c<u.length;){let f=u[c++],h=u[c++],d=u[c++],p=c==u.length||!n,g=p?e:e.split(),y=this.tokens.mainToken;if(g.apply(f,h,y?y.start:g.pos,d),Nr&&console.log(s+this.stackID(g)+` (via ${(f&65536)==0?"shift":`reduce of ${a.getName(f&65535)}`} for ${a.getName(h)} @ ${i}${g==e?"":", split"})`),p)return!0;g.pos>i?t.push(g):n.push(g)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return h0(e,t),!0}}runRecovery(e,t,n){let i=null,a=!1;for(let s=0;s<e.length;s++){let l=e[s],u=t[s<<1],c=t[(s<<1)+1],f=Nr?this.stackID(l)+" -> ":"";if(l.deadEnd&&(a||(a=!0,l.restart(),Nr&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,n))))continue;let h=l.split(),d=f;for(let p=0;h.forceReduce()&&p<10&&(Nr&&console.log(d+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,n));p++)Nr&&(d=this.stackID(h)+" -> ");for(let p of l.recoverByInsert(u))Nr&&console.log(f+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,n);this.stream.end>l.pos?(c==l.pos&&(c++,u=0),l.recoverByDelete(u,c),Nr&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),h0(l,n)):(!i||i.score<l.score)&&(i=l)}return i}stackToTree(e){return e.close(),wt.build({buffer:Ec.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Bh||(Bh=new WeakMap)).get(e);return t||Bh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function h0(r,e){for(let t=0;t<e.length;t++){let n=e[t];if(n.pos==r.pos&&n.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class EJ{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}const Ih=r=>r;class TJ{constructor(e){this.start=e.start,this.shift=e.shift||Ih,this.reduce=e.reduce||Ih,this.reuse=e.reuse||Ih,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Tc extends _g{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let n=Object.keys(e.topRules).map(l=>e.topRules[l][1]),i=[];for(let l=0;l<t.length;l++)i.push([]);function a(l,u,c){i[l].push([u,u.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=Ge[u]);for(let c=1;c<l.length;){let f=l[c++];if(f>=0)a(f,u,l[c++]);else{let h=l[c+-f];for(let d=-f;d>0;d--)a(l[c++],u,h);c++}}}this.nodeSet=new Tg(t.map((l,u)=>ur.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:i[u],top:n.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=LS;let s=ko(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(d0),this.states=ko(e.states,Uint32Array),this.data=ko(e.stateData),this.goto=ko(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new gs(s,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new CJ(this,e,t,n);for(let a of this.wrappers)i=a(i,e,t,n);return i}getGoto(e,t,n=!1){let i=this.goto;if(t>=i[0])return-1;for(let a=i[t+1];;){let s=i[a++],l=s&1,u=i[a++];if(l&&n)return u;for(let c=a+(s>>1);a<c;a++)if(i[a]==e)return u;if(l)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let a=this.stateSlot(e,i?2:1),s;;a+=3){if((s=n[a])==65535)if(n[a+1]==1)s=n[a=Jn(n,a+2)];else{if(n[a+1]==2)return Jn(n,a+2);break}if(s==t||s==0)return Jn(n,a+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,n=>n==t?!0:null)}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let a=this.stateSlot(e,1);i==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=Jn(this.data,a+2);else break;i=t(Jn(this.data,a+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Jn(this.data,n+2);else break;if((this.data[n+2]&1)==0){let i=this.data[n+1];t.some((a,s)=>s&1&&a==i)||t.push(this.data[n],i)}}return t}configure(e){let t=Object.assign(Object.create(Tc.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(n=>{let i=e.tokenizers.find(a=>a.from==n);return i?i.to:n})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,i)=>{let a=e.specializers.find(l=>l.from==n.external);if(!a)return n;let s=Object.assign(Object.assign({},n),{external:a.to});return t.specializers[i]=d0(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let a of e.split(" ")){let s=t.indexOf(a);s>=0&&(n[s]=!0)}let i=null;for(let a=0;a<t.length;a++)if(!n[a])for(let s=this.dialects[t[a]],l;(l=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[l]=1;return new EJ(e,n,i)}static deserialize(e){return new Tc(e)}}function Jn(r,e){return r[e]|r[e+1]<<16}function QJ(r){let e=null;for(let t of r){let n=t.p.stoppedAt;(t.pos==t.p.stream.end||n!=null&&t.pos>n)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function d0(r){if(r.external){let e=r.extend?1:0;return(t,n)=>r.external(t,n)<<1|e}return r.get}const AJ=309,p0=1,DJ=2,_J=3,MJ=310,ZJ=312,RJ=313,LJ=4,BJ=5,IJ=0,vp=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Vk=125,NJ=59,mp=47,zJ=42,WJ=43,qJ=45,YJ=60,XJ=44,VJ=new TJ({start:!1,shift(r,e){return e==LJ||e==BJ||e==ZJ?r:e==RJ},strict:!1}),FJ=new Rf((r,e)=>{let{next:t}=r;(t==Vk||t==-1||e.context)&&r.acceptToken(MJ)},{contextual:!0,fallback:!0}),jJ=new Rf((r,e)=>{let{next:t}=r,n;vp.indexOf(t)>-1||t==mp&&((n=r.peek(1))==mp||n==zJ)||t!=Vk&&t!=NJ&&t!=-1&&!e.context&&r.acceptToken(AJ)},{contextual:!0}),GJ=new Rf((r,e)=>{let{next:t}=r;if((t==WJ||t==qJ)&&(r.advance(),t==r.next)){r.advance();let n=!e.context&&e.canShift(p0);r.acceptToken(n?p0:DJ)}},{contextual:!0});function Nh(r,e){return r>=65&&r<=90||r>=97&&r<=122||r==95||r>=192||!e&&r>=48&&r<=57}const UJ=new Rf((r,e)=>{if(r.next!=YJ||!e.dialectEnabled(IJ)||(r.advance(),r.next==mp))return;let t=0;for(;vp.indexOf(r.next)>-1;)r.advance(),t++;if(Nh(r.next,!0)){for(r.advance(),t++;Nh(r.next,!1);)r.advance(),t++;for(;vp.indexOf(r.next)>-1;)r.advance(),t++;if(r.next==XJ)return;for(let n=0;;n++){if(n==7){if(!Nh(r.next,!0))return;break}if(r.next!="extends".charCodeAt(n))break;r.advance(),t++}}r.acceptToken(_J,-t)}),HJ=Mg({"get set async static":te.modifier,"for while do if else switch try catch finally return throw break continue default case":te.controlKeyword,"in of await yield void typeof delete instanceof":te.operatorKeyword,"let var const using function class extends":te.definitionKeyword,"import export from":te.moduleKeyword,"with debugger as new":te.keyword,TemplateString:te.special(te.string),super:te.atom,BooleanLiteral:te.bool,this:te.self,null:te.null,Star:te.modifier,VariableName:te.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":te.function(te.variableName),VariableDefinition:te.definition(te.variableName),Label:te.labelName,PropertyName:te.propertyName,PrivatePropertyName:te.special(te.propertyName),"CallExpression/MemberExpression/PropertyName":te.function(te.propertyName),"FunctionDeclaration/VariableDefinition":te.function(te.definition(te.variableName)),"ClassDeclaration/VariableDefinition":te.definition(te.className),PropertyDefinition:te.definition(te.propertyName),PrivatePropertyDefinition:te.definition(te.special(te.propertyName)),UpdateOp:te.updateOperator,"LineComment Hashbang":te.lineComment,BlockComment:te.blockComment,Number:te.number,String:te.string,Escape:te.escape,ArithOp:te.arithmeticOperator,LogicOp:te.logicOperator,BitOp:te.bitwiseOperator,CompareOp:te.compareOperator,RegExp:te.regexp,Equals:te.definitionOperator,Arrow:te.function(te.punctuation),": Spread":te.punctuation,"( )":te.paren,"[ ]":te.squareBracket,"{ }":te.brace,"InterpolationStart InterpolationEnd":te.special(te.brace),".":te.derefOperator,", ;":te.separator,"@":te.meta,TypeName:te.typeName,TypeDefinition:te.definition(te.typeName),"type enum interface implements namespace module declare":te.definitionKeyword,"abstract global Privacy readonly override":te.modifier,"is keyof unique infer":te.operatorKeyword,JSXAttributeValue:te.attributeValue,JSXText:te.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":te.angleBracket,"JSXIdentifier JSXNameSpacedName":te.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":te.attributeName,"JSXBuiltin/JSXIdentifier":te.standard(te.tagName)}),KJ={__proto__:null,export:18,as:23,from:31,default:34,async:39,function:40,extends:52,this:56,true:64,false:64,null:76,void:80,typeof:84,super:102,new:136,delete:152,yield:161,await:165,class:170,public:227,private:227,protected:227,readonly:229,instanceof:248,satisfies:251,in:252,const:254,import:286,keyof:339,unique:343,infer:349,is:385,abstract:405,implements:407,type:409,let:412,var:414,using:417,interface:423,enum:427,namespace:433,module:435,declare:439,global:443,for:462,of:471,while:474,with:478,do:482,if:486,else:488,switch:492,case:498,try:504,catch:508,finally:512,return:516,throw:520,break:524,continue:528,debugger:532},JJ={__proto__:null,async:123,get:125,set:127,declare:187,public:189,private:189,protected:189,static:191,abstract:193,override:195,readonly:201,accessor:203,new:389},eee={__proto__:null,"<":143},tee=Tc.deserialize({version:14,states:"$<UO%TQ^OOO%[Q^OOO'_Q`OOP(lOWOOO*zQ08SO'#ChO+RO!bO'#CiO+aO#tO'#CiO+oO?MpO'#D^O.QQ^O'#DdO.bQ^O'#DoO%[Q^O'#DyO0fQ^O'#EROOQ07b'#EZ'#EZO1PQWO'#EWOOQO'#El'#ElOOQO'#Ie'#IeO1XQWO'#GmO1dQWO'#EkO1iQWO'#EkO3kQ08SO'#JiO6[Q08SO'#JjO6xQWO'#FZO6}Q&jO'#FqOOQ07b'#Fc'#FcO7YO,YO'#FcO7hQ7[O'#FxO9UQWO'#FwOOQ07b'#Jj'#JjOOQ07`'#Ji'#JiO9ZQWO'#GqOOQU'#KU'#KUO9fQWO'#IRO9kQ07hO'#ISOOQU'#JW'#JWOOQU'#IW'#IWQ`Q^OOO`Q^OOO%[Q^O'#DqO9sQ^O'#D}O9zQ^O'#EPO9aQWO'#GmO:RQ7[O'#CnO:aQWO'#EjO:lQWO'#EuO:qQ7[O'#FbO;`QWO'#GmOOQO'#KV'#KVO;eQWO'#KVO;sQWO'#GuO;sQWO'#GvO;sQWO'#GxO9aQWO'#G{O<jQWO'#HOO>RQWO'#CdO>cQWO'#H[O>kQWO'#HbO>kQWO'#HdO`Q^O'#HfO>kQWO'#HhO>kQWO'#HkO>pQWO'#HqO>uQ07iO'#HwO%[Q^O'#HyO?QQ07iO'#H{O?]Q07iO'#H}O9kQ07hO'#IPO?hQ08SO'#ChO@jQ`O'#DiQOQWOOO%[Q^O'#EPOAQQWO'#ESO:RQ7[O'#EjOA]QWO'#EjOAhQpO'#FbOOQU'#Cf'#CfOOQ07`'#Dn'#DnOOQ07`'#Jm'#JmO%[Q^O'#JmOOQO'#Jq'#JqOOQO'#Ib'#IbOBhQ`O'#EcOOQ07`'#Eb'#EbOCdQ07pO'#EcOCnQ`O'#EVOOQO'#Jp'#JpODSQ`O'#JqOEaQ`O'#EVOCnQ`O'#EcPEnO!0LbO'#CaPOOO)CDu)CDuOOOO'#IX'#IXOEyO!bO,59TOOQ07b,59T,59TOOOO'#IY'#IYOFXO#tO,59TO%[Q^O'#D`OOOO'#I['#I[OFgO?MpO,59xOOQ07b,59x,59xOFuQ^O'#I]OGYQWO'#JkOI[QrO'#JkO+}Q^O'#JkOIcQWO,5:OOIyQWO'#ElOJWQWO'#JyOJcQWO'#JxOJcQWO'#JxOJkQWO,5;YOJpQWO'#JwOOQ07f,5:Z,5:ZOJwQ^O,5:ZOLxQ08SO,5:eOMiQWO,5:mONSQ07hO'#JvONZQWO'#JuO9ZQWO'#JuONoQWO'#JuONwQWO,5;XON|QWO'#JuO!#UQrO'#JjOOQ07b'#Ch'#ChO%[Q^O'#ERO!#tQpO,5:rOOQO'#Jr'#JrOOQO-E<c-E<cO9aQWO,5=XO!$[QWO,5=XO!$aQ^O,5;VO!&dQ7[O'#EgO!'}QWO,5;VO!)mQ7[O'#DsO!)tQ^O'#DxO!*OQ`O,5;`O!*WQ`O,5;`O%[Q^O,5;`OOQU'#FR'#FROOQU'#FT'#FTO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aOOQU'#FX'#FXO!*fQ^O,5;rOOQ07b,5;w,5;wOOQ07b,5;x,5;xO!,iQWO,5;xOOQ07b,5;y,5;yO%[Q^O'#IiO!,qQ07hO,5<eO!&dQ7[O,5;aO!-`Q7[O,5;aO%[Q^O,5;uO!-gQ&jO'#FgO!.dQ&jO'#J}O!.OQ&jO'#J}O!.kQ&jO'#J}OOQO'#J}'#J}O!/PQ&jO,5<POOOS,5<],5<]O!/bQ^O'#FsOOOS'#Ih'#IhO7YO,YO,5;}O!/iQ&jO'#FuOOQ07b,5;},5;}O!0YQMhO'#CuOOQ07b'#Cy'#CyO!0mQWO'#CyO!0rO?MpO'#C}O!1`Q7[O,5<bO!1gQWO,5<dO!3SQ!LQO'#GSO!3aQWO'#GTO!3fQWO'#GTO!3kQ!LQO'#GXO!4jQ`O'#G]OOQO'#Gh'#GhO!(SQ7[O'#GgOOQO'#Gj'#GjO!(SQ7[O'#GiO!5]QMhO'#JdOOQ07b'#Jd'#JdO!5gQWO'#JcO!5uQWO'#JbO!5}QWO'#CtOOQ07b'#Cw'#CwOOQ07b'#DR'#DROOQ07b'#DT'#DTO1SQWO'#DVO!(SQ7[O'#FzO!(SQ7[O'#F|O!6VQWO'#GOO!6[QWO'#GPO!3fQWO'#GVO!(SQ7[O'#G[O!6aQWO'#EmO!7OQWO,5<cOOQ07`'#Cq'#CqO!7WQWO'#EnO!8QQ`O'#EoOOQ07`'#Jw'#JwO!8XQ07hO'#KWO9kQ07hO,5=]O`Q^O,5>mOOQU'#J`'#J`OOQU,5>n,5>nOOQU-E<U-E<UO!:ZQ08SO,5:]O!<wQ08SO,5:iO%[Q^O,5:iO!?bQ08SO,5:kOOQO,5@q,5@qO!@RQ7[O,5=XO!@aQ07hO'#JaO9UQWO'#JaO!@rQ07hO,59YO!@}Q`O,59YO!AVQ7[O,59YO:RQ7[O,59YO!AbQWO,5;VO!AjQWO'#HZO!BOQWO'#KZO%[Q^O,5;zO!7{Q`O,5;|O!BWQWO,5=tO!B]QWO,5=tO!BbQWO,5=tO9kQ07hO,5=tO;sQWO,5=dOOQO'#Cu'#CuO!BpQ`O,5=aO!BxQ7[O,5=bO!CTQWO,5=dO!CYQpO,5=gO!CbQWO'#KVO>pQWO'#HQO9aQWO'#HSO!CgQWO'#HSO:RQ7[O'#HUO!ClQWO'#HUOOQU,5=j,5=jO!CqQWO'#HVO!DSQWO'#CnO!DXQWO,59OO!DcQWO,59OO!FhQ^O,59OOOQU,59O,59OO!FxQ07hO,59OO%[Q^O,59OO!ITQ^O'#H^OOQU'#H_'#H_OOQU'#H`'#H`O`Q^O,5=vO!IkQWO,5=vO`Q^O,5=|O`Q^O,5>OO!IpQWO,5>QO`Q^O,5>SO!IuQWO,5>VO!IzQ^O,5>]OOQU,5>c,5>cO%[Q^O,5>cO9kQ07hO,5>eOOQU,5>g,5>gO!NUQWO,5>gOOQU,5>i,5>iO!NUQWO,5>iOOQU,5>k,5>kO!NZQ`O'#D[O%[Q^O'#JmO!NxQ`O'#JmO# gQ`O'#DjO# xQ`O'#DjO#$ZQ^O'#DjO#$bQWO'#JlO#$jQWO,5:TO#$oQWO'#EpO#$}QWO'#JzO#%VQWO,5;ZO#%[Q`O'#DjO#%iQ`O'#EUOOQ07b,5:n,5:nO%[Q^O,5:nO#%pQWO,5:nO>pQWO,5;UO!@}Q`O,5;UO!AVQ7[O,5;UO:RQ7[O,5;UO#%xQWO,5@XO#%}Q$ISO,5:rOOQO-E<`-E<`O#'TQ07pO,5:}OCnQ`O,5:qO#'_Q`O,5:qOCnQ`O,5:}O!@rQ07hO,5:qOOQ07`'#Ef'#EfOOQO,5:},5:}O%[Q^O,5:}O#'lQ07hO,5:}O#'wQ07hO,5:}O!@}Q`O,5:qOOQO,5;T,5;TO#(VQ07hO,5:}POOO'#IV'#IVP#(kO!0LbO,58{POOO,58{,58{OOOO-E<V-E<VOOQ07b1G.o1G.oOOOO-E<W-E<WO#(vQpO,59zOOOO-E<Y-E<YOOQ07b1G/d1G/dO#({QrO,5>wO+}Q^O,5>wOOQO,5>},5>}O#)VQ^O'#I]OOQO-E<Z-E<ZO#)dQWO,5@VO#)lQrO,5@VO#)sQWO,5@dOOQ07b1G/j1G/jO%[Q^O,5@eO#){QWO'#IcOOQO-E<a-E<aO#)sQWO,5@dOOQ07`1G0t1G0tOOQ07f1G/u1G/uOOQ07f1G0X1G0XO%[Q^O,5@bO#*aQ07hO,5@bO#*rQ07hO,5@bO#*yQWO,5@aO9ZQWO,5@aO#+RQWO,5@aO#+aQWO'#IfO#*yQWO,5@aOOQ07`1G0s1G0sO!*OQ`O,5:tO!*ZQ`O,5:tOOQO,5:v,5:vO#,RQWO,5:vO#,ZQ7[O1G2sO9aQWO1G2sOOQ07b1G0q1G0qO#,iQ08SO1G0qO#-nQ08QO,5;ROOQ07b'#GR'#GRO#.[Q08SO'#JdO!$aQ^O1G0qO#0dQ7[O'#JnO#0nQWO,5:_O#0sQrO'#JoO%[Q^O'#JoO#0}QWO,5:dOOQ07b'#D['#D[OOQ07b1G0z1G0zO%[Q^O1G0zOOQ07b1G1d1G1dO#1SQWO1G0zO#3kQ08SO1G0{O#3rQ08SO1G0{O#6]Q08SO1G0{O#6dQ08SO1G0{O#8nQ08SO1G0{O#9UQ08SO1G0{O#<OQ08SO1G0{O#<VQ08SO1G0{O#>jQ08SO1G0{O#>wQ08SO1G0{O#@uQ08SO1G0{O#CuQ(CYO'#ChO#EsQ(CYO1G1^O#EzQ(CYO'#JjO!,lQWO1G1dO#F[Q08SO,5?TOOQ07`-E<g-E<gO#GOQ08SO1G0{OOQ07b1G0{1G0{O#IZQ08SO1G1aO#I}Q&jO,5<TO#JVQ&jO,5<UO#J_Q&jO'#FlO#JvQWO'#FkOOQO'#KO'#KOOOQO'#Ig'#IgO#J{Q&jO1G1kOOQ07b1G1k1G1kOOOS1G1v1G1vO#K^Q(CYO'#JiO#KhQWO,5<_O!*fQ^O,5<_OOOS-E<f-E<fOOQ07b1G1i1G1iO#KmQ`O'#J}OOQ07b,5<a,5<aO#KuQ`O,5<aOOQ07b,59e,59eO!&dQ7[O'#DPOOOO'#IZ'#IZO#KzO?MpO,59iOOQ07b,59i,59iO%[Q^O1G1|O!6[QWO'#IkO#LVQ7[O,5<uOOQ07b,5<r,5<rO!(SQ7[O'#InO#LuQ7[O,5=RO!(SQ7[O'#IpO#MhQ7[O,5=TO!&dQ7[O,5=VOOQO1G2O1G2OO#MrQpO'#CqO#NVQpO,5<nO#N^QWO'#KRO9aQWO'#KRO#NlQWO,5<pO!(SQ7[O,5<oO#NqQWO'#GUO#N|QWO,5<oO$ RQpO'#GRO$ `QpO'#KSO$ jQWO'#KSO!&dQ7[O'#KSO$ oQWO,5<sO$ tQ`O'#G^O!4eQ`O'#G^O$!VQWO'#G`O$![QWO'#GbO!3fQWO'#GeO$!aQ07hO'#ImO$!lQ`O,5<wOOQ07f,5<w,5<wO$!sQ`O'#G^O$#RQ`O'#G_O$#ZQ`O'#G_O$#`Q7[O,5=RO$#pQ7[O,5=TOOQ07b,5=W,5=WO!(SQ7[O,5?}O!(SQ7[O,5?}O$$QQWO'#IrO$$]QWO,5?|O$$eQWO,59`O$%UQ7[O,59qOOQ07b,59q,59qO$%wQ7[O,5<fO$&jQ7[O,5<hO@bQWO,5<jOOQ07b,5<k,5<kO$&tQWO,5<qO$&yQ7[O,5<vO$'ZQWO'#JuO!$aQ^O1G1}O$'`QWO1G1}O9ZQWO'#JxO9ZQWO'#EpO%[Q^O'#EpO9ZQWO'#ItO$'eQ07hO,5@rOOQU1G2w1G2wOOQU1G4X1G4XOOQ07b1G/w1G/wO!,iQWO1G/wO$)jQ08SO1G0TOOQU1G2s1G2sO!&dQ7[O1G2sO%[Q^O1G2sO#,^QWO1G2sO$+nQ7[O'#EgOOQ07`,5?{,5?{O$+xQ07hO,5?{OOQU1G.t1G.tO!@rQ07hO1G.tO!@}Q`O1G.tO!AVQ7[O1G.tO$,ZQWO1G0qO$,`QWO'#ChO$,kQWO'#K[O$,sQWO,5=uO$,xQWO'#K[O$,}QWO'#K[O$-]QWO'#IzO$-kQWO,5@uO$-sQrO1G1fOOQ07b1G1h1G1hO9aQWO1G3`O@bQWO1G3`O$-zQWO1G3`O$.PQWO1G3`OOQU1G3`1G3`O!CTQWO1G3OO!&dQ7[O1G2{O$.UQWO1G2{OOQU1G2|1G2|O!&dQ7[O1G2|O$.ZQWO1G2|O$.cQ`O'#GzOOQU1G3O1G3OO!4eQ`O'#IvO!CYQpO1G3ROOQU1G3R1G3ROOQU,5=l,5=lO$.kQ7[O,5=nO9aQWO,5=nO$![QWO,5=pO9UQWO,5=pO!@}Q`O,5=pO!AVQ7[O,5=pO:RQ7[O,5=pO$.yQWO'#KYO$/UQWO,5=qOOQU1G.j1G.jO$/ZQ07hO1G.jO@bQWO1G.jO$/fQWO1G.jO9kQ07hO1G.jO$1kQrO,5@wO$1{QWO,5@wO9ZQWO,5@wO$2WQ^O,5=xO$2_QWO,5=xOOQU1G3b1G3bO`Q^O1G3bOOQU1G3h1G3hOOQU1G3j1G3jO>kQWO1G3lO$2dQ^O1G3nO$6hQ^O'#HmOOQU1G3q1G3qO$6uQWO'#HsO>pQWO'#HuOOQU1G3w1G3wO$6}Q^O1G3wO9kQ07hO1G3}OOQU1G4P1G4POOQ07`'#GY'#GYO9kQ07hO1G4RO9kQ07hO1G4TO$;UQWO,5@XO!*fQ^O,5;[O9ZQWO,5;[O>pQWO,5:UO!*fQ^O,5:UO!@}Q`O,5:UO$;ZQ(CYO,5:UOOQO,5;[,5;[O$;eQ`O'#I^O$;{QWO,5@WOOQ07b1G/o1G/oO$<TQ`O'#IdO$<_QWO,5@fOOQ07`1G0u1G0uO# xQ`O,5:UOOQO'#Ia'#IaO$<gQ`O,5:pOOQ07f,5:p,5:pO#%sQWO1G0YOOQ07b1G0Y1G0YO%[Q^O1G0YOOQ07b1G0p1G0pO>pQWO1G0pO!@}Q`O1G0pO!AVQ7[O1G0pOOQ07`1G5s1G5sO!@rQ07hO1G0]OOQO1G0i1G0iO%[Q^O1G0iO$<nQ07hO1G0iO$<yQ07hO1G0iO!@}Q`O1G0]OCnQ`O1G0]O$=XQ07hO1G0iOOQO1G0]1G0]O$=mQ08SO1G0iPOOO-E<T-E<TPOOO1G.g1G.gOOOO1G/f1G/fO$=wQpO,5<eO$>PQrO1G4cOOQO1G4i1G4iO%[Q^O,5>wO$>ZQWO1G5qO$>cQWO1G6OO$>kQrO1G6PO9ZQWO,5>}O$>uQ08SO1G5|O%[Q^O1G5|O$?VQ07hO1G5|O$?hQWO1G5{O$?hQWO1G5{O9ZQWO1G5{O$?pQWO,5?QO9ZQWO,5?QOOQO,5?Q,5?QO$@UQWO,5?QO$'ZQWO,5?QOOQO-E<d-E<dOOQO1G0`1G0`OOQO1G0b1G0bO!,lQWO1G0bOOQU7+(_7+(_O!&dQ7[O7+(_O%[Q^O7+(_O$@dQWO7+(_O$@oQ7[O7+(_O$@}Q08SO,5=RO$CYQ08SO,5=TO$EeQ08SO,5=RO$GvQ08SO,5=TO$JXQ08SO,59qO$LaQ08SO,5<fO$NlQ08SO,5<hO%!wQ08SO,5<vOOQ07b7+&]7+&]O%%YQ08SO7+&]O%%|Q7[O'#I_O%&WQWO,5@YOOQ07b1G/y1G/yO%&`Q^O'#I`O%&mQWO,5@ZO%&uQrO,5@ZOOQ07b1G0O1G0OO%'PQWO7+&fOOQ07b7+&f7+&fO%'UQ(CYO,5:eO%[Q^O7+&xO%'`Q(CYO,5:]O%'mQ(CYO,5:iO%'wQ(CYO,5:kOOQ07b7+'O7+'OOOQO1G1o1G1oOOQO1G1p1G1pO%(RQtO,5<WO!*fQ^O,5<VOOQO-E<e-E<eOOQ07b7+'V7+'VOOOS7+'b7+'bOOOS1G1y1G1yO%(^QWO1G1yOOQ07b1G1{1G1{O%(cQpO,59kOOOO-E<X-E<XOOQ07b1G/T1G/TO%(jQ08SO7+'hOOQ07b,5?V,5?VO%)^QpO,5?VOOQ07b1G2a1G2aP!&dQ7[O'#IkPOQ07b-E<i-E<iO%)|Q7[O,5?YOOQ07b-E<l-E<lO%*oQ7[O,5?[OOQ07b-E<n-E<nO%*yQpO1G2qOOQ07b1G2Y1G2YO%+QQWO'#IjO%+`QWO,5@mO%+`QWO,5@mO%+hQWO,5@mO%+sQWO,5@mOOQO1G2[1G2[O%,RQ7[O1G2ZO!(SQ7[O1G2ZO%,cQ!LQO'#IlO%,sQWO,5@nO!&dQ7[O,5@nO%,{QpO,5@nOOQ07b1G2_1G2_OOQ07`,5<x,5<xOOQ07`,5<y,5<yO$'ZQWO,5<yOC_QWO,5<yO!@}Q`O,5<xOOQO'#Ga'#GaO%-VQWO,5<zOOQ07`,5<|,5<|O$'ZQWO,5=POOQO,5?X,5?XOOQO-E<k-E<kOOQ07f1G2c1G2cO!4eQ`O,5<xO%-_QWO,5<yO$!VQWO,5<zO!4eQ`O,5<yO!(SQ7[O'#InO%.RQ7[O1G2mO!(SQ7[O'#IpO%.tQ7[O1G2oO%/OQ7[O1G5iO%/YQ7[O1G5iOOQO,5?^,5?^OOQO-E<p-E<pOOQO1G.z1G.zO!7{Q`O,59sO%[Q^O,59sO%/gQWO1G2UO!(SQ7[O1G2]O%/lQ08SO7+'iOOQ07b7+'i7+'iO!$aQ^O7+'iO%0`QWO,5;[OOQ07`,5?`,5?`OOQ07`-E<r-E<rOOQ07b7+%c7+%cO%0eQpO'#KTO#%sQWO7+(_O%0oQrO7+(_O$@gQWO7+(_O%0vQ08QO'#ChO%1ZQ08QO,5<}O%1{QWO,5<}OOQ07`1G5g1G5gOOQU7+$`7+$`O!@rQ07hO7+$`O!@}Q`O7+$`O!$aQ^O7+&]O%2QQWO'#IyO%2iQWO,5@vOOQO1G3a1G3aO9aQWO,5@vO%2iQWO,5@vO%2qQWO,5@vOOQO,5?f,5?fOOQO-E<x-E<xOOQ07b7+'Q7+'QO%2vQWO7+(zO9kQ07hO7+(zO9aQWO7+(zO@bQWO7+(zOOQU7+(j7+(jO%2{Q08QO7+(gO!&dQ7[O7+(gO%3VQpO7+(hOOQU7+(h7+(hO!&dQ7[O7+(hO%3^QWO'#KXO%3iQWO,5=fOOQO,5?b,5?bOOQO-E<t-E<tOOQU7+(m7+(mO%4xQ`O'#HTOOQU1G3Y1G3YO!&dQ7[O1G3YO%[Q^O1G3YO%5PQWO1G3YO%5[Q7[O1G3YO9kQ07hO1G3[O$![QWO1G3[O9UQWO1G3[O!@}Q`O1G3[O!AVQ7[O1G3[O%5jQWO'#IxO%6OQWO,5@tO%6WQ`O,5@tOOQ07`1G3]1G3]OOQU7+$U7+$UO@bQWO7+$UO9kQ07hO7+$UO%6cQWO7+$UO%[Q^O1G6cO%[Q^O1G6dO%6hQ07hO1G6cO%6rQ^O1G3dO%6yQWO1G3dO%7OQ^O1G3dOOQU7+(|7+(|O9kQ07hO7+)WO`Q^O7+)YOOQU'#K_'#K_OOQU'#I{'#I{O%7VQ^O,5>XOOQU,5>X,5>XO%[Q^O'#HnO%7dQWO'#HpOOQU,5>_,5>_O9ZQWO,5>_OOQU,5>a,5>aOOQU7+)c7+)cOOQU7+)i7+)iOOQU7+)m7+)mOOQU7+)o7+)oO%7iQ`O1G5sO%7}Q(CYO1G0vO%8XQWO1G0vOOQO1G/p1G/pO%8dQ(CYO1G/pO>pQWO1G/pO!*fQ^O'#DjOOQO,5>x,5>xOOQO-E<[-E<[OOQO,5?O,5?OOOQO-E<b-E<bO!@}Q`O1G/pOOQO-E<_-E<_OOQ07f1G0[1G0[OOQ07b7+%t7+%tO#%sQWO7+%tOOQ07b7+&[7+&[O>pQWO7+&[O!@}Q`O7+&[OOQO7+%w7+%wO$=mQ08SO7+&TOOQO7+&T7+&TO%[Q^O7+&TO%8nQ07hO7+&TO!@rQ07hO7+%wO!@}Q`O7+%wO%8yQ07hO7+&TO%9XQ08SO7++hO%[Q^O7++hO%9iQWO7++gO%9iQWO7++gOOQO1G4l1G4lO9ZQWO1G4lO%9qQWO1G4lOOQO7+%|7+%|O#%sQWO<<KyO%0oQrO<<KyO%:PQWO<<KyOOQU<<Ky<<KyO!&dQ7[O<<KyO%[Q^O<<KyO%:XQWO<<KyO%:dQ08SO,5?YO%<oQ08SO,5?[O%>zQ08SO1G2ZO%A]Q08SO1G2mO%ChQ08SO1G2oO%EsQ7[O,5>yOOQO-E<]-E<]O%E}QrO,5>zO%[Q^O,5>zOOQO-E<^-E<^O%FXQWO1G5uOOQ07b<<JQ<<JQO%FaQ(CYO1G0qO%HkQ(CYO1G0{O%HrQ(CYO1G0{O%JvQ(CYO1G0{O%J}Q(CYO1G0{O%LrQ(CYO1G0{O%MYQ(CYO1G0{O& mQ(CYO1G0{O& tQ(CYO1G0{O&#rQ(CYO1G0{O&$PQ(CYO1G0{O&%}Q(CYO1G0{O&&bQ08SO<<JdO&'gQ(CYO1G0{O&)]Q(CYO'#JdO&+`Q(CYO1G1aO&+mQ(CYO1G0TO!*fQ^O'#FnOOQO'#KP'#KPOOQO1G1r1G1rO&+wQWO1G1qO&+|Q(CYO,5?TOOOS7+'e7+'eOOOO1G/V1G/VOOQ07b1G4q1G4qO!(SQ7[O7+(]O&,WQWO,5?UO9aQWO,5?UOOQO-E<h-E<hO&,fQWO1G6XO&,fQWO1G6XO&,nQWO1G6XO&,yQ7[O7+'uO&-ZQpO,5?WO&-eQWO,5?WO!&dQ7[O,5?WOOQO-E<j-E<jO&-jQpO1G6YO&-tQWO1G6YOOQ07`1G2e1G2eO$'ZQWO1G2eOOQ07`1G2d1G2dO&-|QWO1G2fO!&dQ7[O1G2fOOQ07`1G2k1G2kO!@}Q`O1G2dOC_QWO1G2eO&.RQWO1G2fO&.ZQWO1G2eO&.}Q7[O,5?YOOQ07b-E<m-E<mO&/pQ7[O,5?[OOQ07b-E<o-E<oO!(SQ7[O7++TOOQ07b1G/_1G/_O&/zQWO1G/_OOQ07b7+'p7+'pO&0PQ7[O7+'wO&0aQ08SO<<KTOOQ07b<<KT<<KTO&1TQWO1G0vO!&dQ7[O'#IsO&1YQWO,5@oO!&dQ7[O1G2iOOQU<<Gz<<GzO!@rQ07hO<<GzO&1bQ08SO<<IwOOQ07b<<Iw<<IwOOQO,5?e,5?eO&2UQWO,5?eO&2ZQWO,5?eOOQO-E<w-E<wO&2iQWO1G6bO&2iQWO1G6bO9aQWO1G6bO@bQWO<<LfOOQU<<Lf<<LfO&2qQWO<<LfO9kQ07hO<<LfOOQU<<LR<<LRO%2{Q08QO<<LROOQU<<LS<<LSO%3VQpO<<LSO&2vQ`O'#IuO&3RQWO,5@sO!*fQ^O,5@sOOQU1G3Q1G3QO&3ZQ^O'#JmOOQO'#Iw'#IwO9kQ07hO'#IwO&3eQ`O,5=oOOQU,5=o,5=oO&3lQ`O'#EcO&4QQWO7+(tO&4VQWO7+(tOOQU7+(t7+(tO!&dQ7[O7+(tO%[Q^O7+(tO&4_QWO7+(tOOQU7+(v7+(vO9kQ07hO7+(vO$![QWO7+(vO9UQWO7+(vO!@}Q`O7+(vO&4jQWO,5?dOOQO-E<v-E<vOOQO'#HW'#HWO&4uQWO1G6`O9kQ07hO<<GpOOQU<<Gp<<GpO@bQWO<<GpO&4}QWO7++}O&5SQWO7+,OO%[Q^O7++}O%[Q^O7+,OOOQU7+)O7+)OO&5XQWO7+)OO&5^Q^O7+)OO&5eQWO7+)OOOQU<<Lr<<LrOOQU<<Lt<<LtOOQU-E<y-E<yOOQU1G3s1G3sO&5jQWO,5>YOOQU,5>[,5>[O&5oQWO1G3yO9ZQWO7+&bO!*fQ^O7+&bOOQO7+%[7+%[O&5tQ(CYO1G6PO>pQWO7+%[OOQ07b<<I`<<I`OOQ07b<<Iv<<IvO>pQWO<<IvOOQO<<Io<<IoO$=mQ08SO<<IoO%[Q^O<<IoOOQO<<Ic<<IcO!@rQ07hO<<IcO&6OQ07hO<<IoO&6ZQ08SO<= SO&6kQWO<= ROOQO7+*W7+*WO9ZQWO7+*WOOQUANAeANAeO&6sQWOANAeO!&dQ7[OANAeO#%sQWOANAeO%0oQrOANAeO%[Q^OANAeO&6{Q08SO7+'uO&9^Q08SO,5?YO&;iQ08SO,5?[O&=tQ08SO7+'wO&@VQrO1G4fO&@aQ(CYO7+&]O&BeQ(CYO,5=RO&DlQ(CYO,5=TO&D|Q(CYO,5=RO&E^Q(CYO,5=TO&EnQ(CYO,59qO&GqQ(CYO,5<fO&ItQ(CYO,5<hO&KwQ(CYO,5<vO&MmQ(CYO7+'hO&MzQ(CYO7+'iO&NXQWO,5<YOOQO7+']7+']O&N^Q7[O<<KwOOQO1G4p1G4pO&NeQWO1G4pO&NpQWO1G4pO' OQWO7++sO' OQWO7++sO!&dQ7[O1G4rO' WQpO1G4rO' bQWO7++tOOQ07`7+(P7+(PO$'ZQWO7+(QO' jQpO7+(QOOQ07`7+(O7+(OO$'ZQWO7+(PO' qQWO7+(QO!&dQ7[O7+(QOC_QWO7+(PO' vQ7[O<<NoOOQ07b7+$y7+$yO'!QQpO,5?_OOQO-E<q-E<qO'![Q08QO7+(TOOQUAN=fAN=fO9aQWO1G5POOQO1G5P1G5PO'!lQWO1G5PO'!qQWO7++|O'!qQWO7++|O9kQ07hOANBQO@bQWOANBQOOQUANBQANBQOOQUANAmANAmOOQUANAnANAnO'!yQWO,5?aOOQO-E<s-E<sO'#UQ(CYO1G6_O'%fQrO'#ChOOQO,5?c,5?cOOQO-E<u-E<uOOQU1G3Z1G3ZO&3ZQ^O,5<zOOQU<<L`<<L`O!&dQ7[O<<L`O&4QQWO<<L`O'%pQWO<<L`O%[Q^O<<L`OOQU<<Lb<<LbO9kQ07hO<<LbO$![QWO<<LbO9UQWO<<LbO'%xQ`O1G5OO'&TQWO7++zOOQUAN=[AN=[O9kQ07hOAN=[OOQU<= i<= iOOQU<= j<= jO'&]QWO<= iO'&bQWO<= jOOQU<<Lj<<LjO'&gQWO<<LjO'&lQ^O<<LjOOQU1G3t1G3tO>pQWO7+)eO'&sQWO<<I|O''OQ(CYO<<I|OOQO<<Hv<<HvOOQ07bAN?bAN?bOOQOAN?ZAN?ZO$=mQ08SOAN?ZOOQOAN>}AN>}O%[Q^OAN?ZOOQO<<Mr<<MrOOQUG27PG27PO!&dQ7[OG27PO#%sQWOG27PO''YQWOG27PO%0oQrOG27PO''bQ(CYO<<JdO''oQ(CYO1G2ZO')eQ(CYO,5?YO'+hQ(CYO,5?[O'-kQ(CYO1G2mO'/nQ(CYO1G2oO'1qQ(CYO<<KTO'2OQ(CYO<<IwOOQO1G1t1G1tO!(SQ7[OANAcOOQO7+*[7+*[O'2]QWO7+*[O'2hQWO<= _O'2pQpO7+*^OOQ07`<<Kl<<KlO$'ZQWO<<KlOOQ07`<<Kk<<KkO'2zQpO<<KlO$'ZQWO<<KkOOQO7+*k7+*kO9aQWO7+*kO'3RQWO<= hOOQUG27lG27lO9kQ07hOG27lO!*fQ^O1G4{O'3ZQWO7++yO&4QQWOANAzOOQUANAzANAzO!&dQ7[OANAzO'3cQWOANAzOOQUANA|ANA|O9kQ07hOANA|O$![QWOANA|OOQO'#HX'#HXOOQO7+*j7+*jOOQUG22vG22vOOQUANETANETOOQUANEUANEUOOQUANBUANBUO'3kQWOANBUOOQU<<MP<<MPO!*fQ^OAN?hOOQOG24uG24uO$=mQ08SOG24uO#%sQWOLD,kOOQULD,kLD,kO!&dQ7[OLD,kO'3pQWOLD,kO'3xQ(CYO7+'uO'5nQ(CYO,5?YO'7qQ(CYO,5?[O'9tQ(CYO7+'wO';jQ7[OG26}OOQO<<Mv<<MvOOQ07`ANAWANAWO$'ZQWOANAWOOQ07`ANAVANAVOOQO<<NV<<NVOOQULD-WLD-WO';zQ(CYO7+*gOOQUG27fG27fO&4QQWOG27fO!&dQ7[OG27fOOQUG27hG27hO9kQ07hOG27hOOQUG27pG27pO'<UQ(CYOG25SOOQOLD*aLD*aOOQU!$(!V!$(!VO#%sQWO!$(!VO!&dQ7[O!$(!VO'<`Q08SOG26}OOQ07`G26rG26rOOQULD-QLD-QO&4QQWOLD-QOOQULD-SLD-SOOQU!)9Eq!)9EqO#%sQWO!)9EqOOQU!$(!l!$(!lOOQU!.K;]!.K;]O'>qQ(CYOG26}O!*fQ^O'#DyO1PQWO'#EWO'@gQrO'#JiO!*fQ^O'#DqO'@nQ^O'#D}O'@uQrO'#ChO'C]QrO'#ChO!*fQ^O'#EPO'CmQ^O,5;VO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O'#IiO'EpQWO,5<eO'ExQ7[O,5;aO'GcQ7[O,5;aO!*fQ^O,5;uO!&dQ7[O'#GgO'ExQ7[O'#GgO!&dQ7[O'#GiO'ExQ7[O'#GiO1SQWO'#DVO1SQWO'#DVO!&dQ7[O'#FzO'ExQ7[O'#FzO!&dQ7[O'#F|O'ExQ7[O'#F|O!&dQ7[O'#G[O'ExQ7[O'#G[O!*fQ^O,5:iO!*fQ^O,5@eO'CmQ^O1G0qO'GjQ(CYO'#ChO!*fQ^O1G1|O!&dQ7[O'#InO'ExQ7[O'#InO!&dQ7[O'#IpO'ExQ7[O'#IpO!&dQ7[O,5<oO'ExQ7[O,5<oO'CmQ^O1G1}O!*fQ^O7+&xO!&dQ7[O1G2ZO'ExQ7[O1G2ZO!&dQ7[O'#InO'ExQ7[O'#InO!&dQ7[O'#IpO'ExQ7[O'#IpO!&dQ7[O1G2]O'ExQ7[O1G2]O'CmQ^O7+'iO'CmQ^O7+&]O!&dQ7[OANAcO'ExQ7[OANAcO'GtQWO'#EkO'GyQWO'#EkO'HRQWO'#FZO'HWQWO'#EuO'H]QWO'#JyO'HhQWO'#JwO'HsQWO,5;VO'HxQ7[O,5<bO'IPQWO'#GTO'IUQWO'#GTO'IZQWO,5<cO'IcQWO,5;VO'IkQ(CYO1G1^O'IrQWO,5<oO'IwQWO,5<oO'I|QWO,5<qO'JRQWO,5<qO'JWQWO1G1}O'J]QWO1G0qO'JbQ7[O<<KwO'JiQ7[O<<KwO7hQ7[O'#FxO9UQWO'#FwOA]QWO'#EjO!*fQ^O,5;rO!3fQWO'#GTO!3fQWO'#GTO!3fQWO'#GVO!3fQWO'#GVO!(SQ7[O7+(]O!(SQ7[O7+(]O%*yQpO1G2qO%*yQpO1G2qO!&dQ7[O,5=VO!&dQ7[O,5=V",stateData:"'Km~O'tOS'uOSSOS'vRQ~OPYOQYORfOX!VO`qOczOdyOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![XO!fuO!kZO!nYO!oYO!pYO!rvO!twO!wxO!{]O#s!PO$T|O%b}O%d!QO%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO%s!UO&P!WO&V!XO&X!YO&Z!ZO&]![O&`!]O&f!^O&l!_O&n!`O&p!aO&r!bO&t!cO'{SO'}TO(QUO(XVO(g[O(tiO~OVtO~P`OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~O`!vOo!nO!P!oO!_!xO!`!uO!a!uO!{:dO#P!pO#Q!pO#R!wO#S!pO#T!pO#W!yO#X!yO'|!lO'}TO(QUO([!mO(g!sO~O'v!zO~OP[XZ[X`[Xn[X|[X}[X!P[X!Y[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X'r[X(X[X(h[X(o[X(p[X~O!d$|X~P(qO^!|O'}#OO(O!|O(P#OO~O^#PO(P#OO(Q#OO(R#PO~Ot#RO!R#SO(Y#SO(Z#UO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{:hO'}TO(QUO(XVO(g[O(tiO~O!X#YO!Y#VO!V(_P!V(lP~P+}O!Z#bO~P`OPYOQYORfOc!jOd!iOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'}TO(QUO(XVO(g[O(tiO~Ol#lO!X#hO!{]O#e#kO#f#hO'{:iO!j(iP~P.iO!k#nO'{#mO~O!w#rO!{]O%b#sO~O#g#tO~O!d#uO#g#tO~OP$]OZ$dOn$QO|#yO}#zO!P#{O!Y$aO!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O`(]X'r(]X'p(]X!j(]X!V(]X![(]X%c(]X!d(]X~P1qO#[$eO$O$eOP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X![(^X%c(^X~O`(^X!i(^X'r(^X'p(^X!V(^X!j(^Xr(^X!d(^X~P4XO#[$eO~O$Y$gO$[$fO$c$lO~ORfO![$mO$f$nO$h$pO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz%ZO!P${O![$|O!f%`O!k$xO#f%aO$T%^O$o%[O$q%]O$t%_O'{$rO'}TO(QUO(X$uO(o$}O(p%POf(UP~O!k%bO~O!P%eO![%fO'{%dO~O!d%jO~O`%kO'r%kO~O'|!lO~P%[O%h%rO~P%[Og%VO!k%bO'{%dO'|!lO~Od%yO!k%bO'{%dO~O#r$SO~O|&OO![%{O!k%}O%d&RO'{%dO'|!lO'}TO(QUO_(}P~O!w#rO~O%m&TO!P(yX![(yX'{(yX~O'{&UO~O!t&ZO#s!PO%d!QO%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO~Oc&`Od&_O!w&]O%b&^O%u&[O~P;xOc&cOdyO![&bO!t&ZO!wxO!{]O#s!PO%b}O%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO%s!UO~Oa&fO#[&iO%d&dO'|!lO~P<}O!k&jO!t&nO~O!k#nO~O![XO~O`%kO'q&vO'r%kO~O`%kO'q&yO'r%kO~O`%kO'q&{O'r%kO~O'p[X!V[Xr[X!j[X&T[X![[X%c[X!d[X~P(qO!_'YO!`'RO!a'RO'|!lO'}TO(QUO~Oo'PO!P'OO!X'SO([&}O!Z(`P!Z(nP~P@UOj']O!['ZO'{%dO~Od'bO!k%bO'{%dO~O|&OO!k%}O~Oo!nO!P!oO!{:dO#P!pO#Q!pO#S!pO#T!pO'|!lO'}TO(QUO([!mO(g!sO~O!_'hO!`'gO!a'gO#R!pO#W'iO#X'iO~PApO`%kOg%VO!d#uO!k%bO'r%kO(h'kO~O!o'oO#['mO~PCOOo!nO!P!oO'}TO(QUO([!mO(g!sO~O![XOo(eX!P(eX!_(eX!`(eX!a(eX!{(eX#P(eX#Q(eX#R(eX#S(eX#T(eX#W(eX#X(eX'|(eX'}(eX(Q(eX([(eX(g(eX~O!`'gO!a'gO'|!lO~PCnO'w'sO'x'sO'y'uO~O^!|O'}'wO(O!|O(P'wO~O^#PO(P'wO(Q'wO(R#PO~Ot#RO!R#SO(Y#SO(Z'{O~O!X'}O!V'PX!V'VX!Y'PX!Y'VX~P+}O!Y(PO!V(_X~OP$]OZ$dOn$QO|#yO}#zO!P#{O!Y(PO!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O!V(_X~PGbO!V(UO~O!V(kX!Y(kX!d(kX!j(kX(h(kX~O#[(kX#g#`X!Z(kX~PIhO#[(VO!V(mX!Y(mX~O!Y(WO!V(lX~O!V(ZO~O#[$eO~PIhO!Z([O~P`O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!maZ!man!ma!Y!ma!h!ma!o!ma#j!ma#k!ma#l!ma#m!ma#n!ma#o!ma#p!ma#q!ma#r!ma#t!ma#v!ma#x!ma#y!ma(h!ma(o!ma(p!ma~O`!ma'r!ma'p!ma!V!ma!j!mar!ma![!ma%c!ma!d!ma~PKOO!j(]O~O!d#uO#[(^O(h'kO!Y(jX`(jX'r(jX~O!j(jX~PMnO!P%eO![%fO!{]O#e(cO#f(bO'{%dO~O!Y(dO!j(iX~O!j(fO~O!P%eO![%fO#f(bO'{%dO~OP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!i(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X~O!d#uO!j(^X~P! [O|(gO}(hO!i#wO!k#xO!{!za!P!za~O!w!za%b!za![!za#e!za#f!za'{!za~P!#`O!w(lO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![XO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~O#g(rO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz%ZO!P${O![$|O!f%`O!k$xO#f%aO$T%^O$o%[O$q%]O$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~Of(bP~P!(SO!X(vO!j(cP~P%[O([(xO(g[O~O!P(zO!k#xO([(xO(g[O~OP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![!eO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'{)YO'}TO(QUO(XVO(g[O(t<YO~O})]O!k#xO~O!Y$aO`$ma'r$ma'p$ma!j$ma!V$ma![$ma%c$ma!d$ma~O#s)aO~P!&dO|)dO!d)cO![$ZX$W$ZX$Y$ZX$[$ZX$c$ZX~O!d)cO![(qX$W(qX$Y(qX$[(qX$c(qX~O|)dO~P!.OO|)dO![(qX$W(qX$Y(qX$[(qX$c(qX~O![)fO$W)jO$Y)eO$[)eO$c)kO~O!X)nO~P!*fO$Y$gO$[$fO$c)rO~Oj$uX|$uX!P$uX!i$uX(o$uX(p$uX~OfiXf$uXjiX!YiX#[iX~P!/tOo)tO~Ot)uO(Y)vO(Z)xO~Oj*RO|)zO!P){O(o$}O(p%PO~Of)yO~P!0}Of*SO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'}TO(QUO(X$uO(o$}O(p%PO~O!X*WO'{*TO!j(uP~P!1lO#g*YO~O!k*ZO~O!X*`O'{*]O!V(vP~P!1lOn*lO!P*dO!_*jO!`*cO!a*cO!k*ZO#W*kO%Y*fO'|!lO([!mO~O!Z*iO~P!3xO!i#wOj(WX|(WX!P(WX(o(WX(p(WX!Y(WX#[(WX~Of(WX#|(WX~P!4qOj*qO#[*pOf(VX!Y(VX~O!Y*rOf(UX~O'{&UOf(UP~O!k*yO~O'{(pO~Ol*}O!P%eO!X#hO![%fO!{]O#e#kO#f#hO'{%dO!j(iP~O!d#uO#g+OO~O!P%eO!X+QO!Y(WO![%fO'{%dO!V(lP~Oo'VO!P+SO!X+RO'}TO(QUO([(xO~O!Z(nP~P!7lO!Y+TO`(zX'r(zX~OP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O`!ea!Y!ea'r!ea'p!ea!V!ea!j!ear!ea![!ea%c!ea!d!ea~P!8dO|#yO}#zO!P#{O!i#wO!k#xO(XVOP!qaZ!qan!qa!Y!qa!h!qa!o!qa#j!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#t!qa#v!qa#x!qa#y!qa(h!qa(o!qa(p!qa~O`!qa'r!qa'p!qa!V!qa!j!qar!qa![!qa%c!qa!d!qa~P!:}O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!saZ!san!sa!Y!sa!h!sa!o!sa#j!sa#k!sa#l!sa#m!sa#n!sa#o!sa#p!sa#q!sa#r!sa#t!sa#v!sa#x!sa#y!sa(h!sa(o!sa(p!sa~O`!sa'r!sa'p!sa!V!sa!j!sar!sa![!sa%c!sa!d!sa~P!=hOg%VOj+^O!['ZO%c+]O~O!d+`O`(TX![(TX'r(TX!Y(TX~O`%kO![XO'r%kO~Og%VO!k%bO~Og%VO!k%bO'{%dO~O!d#uO#g(rO~Oa+kO%d+lO'{+hO'}TO(QUO!Z)OP~O!Y+mO_(}X~OZ+qO~O_+rO~O![%{O'{%dO'|!lO_(}P~Og%VO#[+wO~Og%VOj+zO![$|O~O![+|O~O|,OO![XO~O%h%rO~O!w,TO~Od,YO~Oa,ZO'{#mO'}TO(QUO!Z(|P~Od%yO~O%d!QO'{&UO~P<}OZ,`O_,_O~OPYOQYORfOczOdyOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO!fuO!kZO!nYO!oYO!pYO!rvO!wxO!{]O%b}O'}TO(QUO(XVO(g[O(tiO~O![!eO!t!gO$T!kO'{!dO~P!DkO_,_O`%kO'r%kO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~O`,eO!twO#s!OO%f!OO%g!OO%h!OO~P!GTO!k&jO~O&V,kO~O![,mO~O&h,oO&j,pOP&eaQ&eaR&eaX&ea`&eac&ead&eal&ean&eao&eap&eav&eax&eaz&ea!P&ea!T&ea!U&ea![&ea!f&ea!k&ea!n&ea!o&ea!p&ea!r&ea!t&ea!w&ea!{&ea#s&ea$T&ea%b&ea%d&ea%f&ea%g&ea%h&ea%k&ea%m&ea%p&ea%q&ea%s&ea&P&ea&V&ea&X&ea&Z&ea&]&ea&`&ea&f&ea&l&ea&n&ea&p&ea&r&ea&t&ea'p&ea'{&ea'}&ea(Q&ea(X&ea(g&ea(t&ea!Z&ea&^&eaa&ea&c&ea~O'{,uO~Og!bX!Y!OX!Y!bX!Z!OX!Z!bX!d!OX!d!bX!k!bX#[!OX~O!d,zO#[,yOg(aX!Y#dX!Y(aX!Z#dX!Z(aX!d(aX!k(aX~Og%VO!d,|O!k%bO!Y!^X!Z!^X~Oo!nO!P!oO'}TO(QUO([!mO~OP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![!eO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'}TO(QUO(XVO(g[O(t<YO~O'{;]O~P#!ZO!Y-QO!Z(`X~O!Z-SO~O!d,zO#[,yO!Y#dX!Z#dX~O!Y-TO!Z(nX~O!Z-VO~O!`-WO!a-WO'|!lO~P# xO!Z-ZO~P'_Oj-^O!['ZO~O!V-cO~Oo!za!_!za!`!za!a!za#P!za#Q!za#R!za#S!za#T!za#W!za#X!za'|!za'}!za(Q!za([!za(g!za~P!#`O!o-hO#[-fO~PCOO!`-jO!a-jO'|!lO~PCnO`%kO#[-fO'r%kO~O`%kO!d#uO#[-fO'r%kO~O`%kO!d#uO!o-hO#[-fO'r%kO(h'kO~O'w'sO'x'sO'y-oO~Or-pO~O!V'Pa!Y'Pa~P!8dO!X-tO!V'PX!Y'PX~P%[O!Y(PO!V(_a~O!V(_a~PGbO!Y(WO!V(la~O!P%eO!X-xO![%fO'{%dO!V'VX!Y'VX~O#[-zO!Y(ja!j(ja`(ja'r(ja~O!d#uO~P#*aO!Y(dO!j(ia~O!P%eO![%fO#f.OO'{%dO~Ol.TO!P%eO!X.QO![%fO!{]O#e.SO#f.QO'{%dO!Y'YX!j'YX~O}.XO!k#xO~Og%VOj.[O!['ZO%c.ZO~O`#_i!Y#_i'r#_i'p#_i!V#_i!j#_ir#_i![#_i%c#_i!d#_i~P!8dOj<fO|)zO!P){O(o$}O(p%PO~O#g#Za`#Za#[#Za'r#Za!Y#Za!j#Za![#Za!V#Za~P#-]O#g(WXP(WXZ(WX`(WXn(WX}(WX!h(WX!k(WX!o(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#p(WX#q(WX#r(WX#t(WX#v(WX#x(WX#y(WX'r(WX(X(WX(h(WX!j(WX!V(WX'p(WXr(WX![(WX%c(WX!d(WX~P!4qO!Y.iOf(bX~P!0}Of.kO~O!Y.lO!j(cX~P!8dO!j.oO~O!V.qO~OP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O(XVOZ#ii`#iin#ii!Y#ii!h#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#j#ii~P#1XO#j$OO~P#1XOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO(XVOZ#ii`#ii!Y#ii!h#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~On#ii~P#3yOn$QO~P#3yOP$]On$QO|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO(XVO`#ii!Y#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~OZ#ii!h#ii#o#ii#p#ii#q#ii#r#ii~P#6kOZ$dO!h$SO#o$SO#p$SO#q$cO#r$SO~P#6kOP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO(XVO(p#}O`#ii!Y#ii#x#ii#y#ii'r#ii(h#ii(o#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#v$VO~P#9lO#v#ii~P#9lOP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO(XVO`#ii!Y#ii#x#ii#y#ii'r#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#v#ii(o#ii(p#ii~P#<^O#v$VO(o#|O(p#}O~P#<^OP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO(XVO(o#|O(p#}O~O`#ii!Y#ii#y#ii'r#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~P#?UOP[XZ[Xn[X|[X}[X!P[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X!Y[X!Z[X~O#|[X~P#AoOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO#x:uO#y:vO(XVO(h$ZO(o#|O(p#}O~O#|.sO~P#C|O#[:{O$O:{O#|(^X!Z(^X~P! [O`']a!Y']a'r']a'p']a!j']a!V']ar']a![']a%c']a!d']a~P!8dOP#iiZ#ii`#iin#ii}#ii!Y#ii!h#ii!i#ii!k#ii!o#ii#j#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(X#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~P#-]O`#}i!Y#}i'r#}i'p#}i!V#}i!j#}ir#}i![#}i%c#}i!d#}i~P!8dO$Y.xO$[.xO~O$Y.yO$[.yO~O!d)cO#[.zO![$`X$W$`X$Y$`X$[$`X$c$`X~O!X.{O~O![)fO$W.}O$Y)eO$[)eO$c/OO~O!Y:wO!Z(]X~P#C|O!Z/PO~O!d)cO$c(qX~O$c/RO~Ot)uO(Y)vO(Z/UO~O!V/YO~P!&dO(o$}Oj%Za|%Za!P%Za(p%Za!Y%Za#[%Za~Of%Za#|%Za~P#L^O(p%POj%]a|%]a!P%]a(o%]a!Y%]a#[%]a~Of%]a#|%]a~P#MPO!YeX!deX!jeX!j$uX(heX~P!/tO!j/bO~P#-]O!Y/cO!d#uO(h'kO!j(uX~O!j/hO~O!X*WO'{%dO!j(uP~O#g/jO~O!V$uX!Y$uX!d$|X~P!/tO!Y/kO!V(vX~P#-]O!d/mO~O!V/oO~Og%VOn/sO!d#uO!k%bO(h'kO~O'{/uO~O!d+`O~O`%kO!Y/yO'r%kO~O!Z/{O~P!3xO!`/|O!a/|O'|!lO([!mO~O!P0OO([!mO~O#W0PO~Of%Za!Y%Za#[%Za#|%Za~P!0}Of%]a!Y%]a#[%]a#|%]a~P!0}O'{&UOf'fX!Y'fX~O!Y*rOf(Ua~Of0YO~O|0ZO}0ZO!P0[Ojya(oya(pya!Yya#[ya~Ofya#|ya~P$$jO|)zO!P){Oj$na(o$na(p$na!Y$na#[$na~Of$na#|$na~P$%`O|)zO!P){Oj$pa(o$pa(p$pa!Y$pa#[$pa~Of$pa#|$pa~P$&RO#g0^O~Of%Oa!Y%Oa#[%Oa#|%Oa~P!0}O!d#uO~O#g0aO~O!Y+TO`(za'r(za~O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!qiZ!qin!qi!Y!qi!h!qi!o!qi#j!qi#k!qi#l!qi#m!qi#n!qi#o!qi#p!qi#q!qi#r!qi#t!qi#v!qi#x!qi#y!qi(h!qi(o!qi(p!qi~O`!qi'r!qi'p!qi!V!qi!j!qir!qi![!qi%c!qi!d!qi~P$'pOg%VOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'}TO(QUO(X$uO(o$}O(p%PO~Ol0kO'{0jO~P$*ZO!d+`O`(Ta![(Ta'r(Ta!Y(Ta~O#g0qO~OZ[X!YeX!ZeX~O!Y0rO!Z)OX~O!Z0tO~OZ0uO~Oa0wO'{+hO'}TO(QUO~O![%{O'{%dO_'nX!Y'nX~O!Y+mO_(}a~O!j0zO~P!8dOZ0}O~O_1OO~O#[1RO~Oj1UO![$|O~O([(xO!Z({P~Og%VOj1_O![1[O%c1^O~OZ1iO!Y1gO!Z(|X~O!Z1jO~O_1lO`%kO'r%kO~O'{#mO'}TO(QUO~O#[$eO$O$eOP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X~O#r1oO&T1pO`(^X!i(^X~P$/qO#[$eO#r1oO&T1pO~O`1rO~P%[O`1tO~O&^1wOP&[iQ&[iR&[iX&[i`&[ic&[id&[il&[in&[io&[ip&[iv&[ix&[iz&[i!P&[i!T&[i!U&[i![&[i!f&[i!k&[i!n&[i!o&[i!p&[i!r&[i!t&[i!w&[i!{&[i#s&[i$T&[i%b&[i%d&[i%f&[i%g&[i%h&[i%k&[i%m&[i%p&[i%q&[i%s&[i&P&[i&V&[i&X&[i&Z&[i&]&[i&`&[i&f&[i&l&[i&n&[i&p&[i&r&[i&t&[i'p&[i'{&[i'}&[i(Q&[i(X&[i(g&[i(t&[i!Z&[ia&[i&c&[i~Oa1}O!Z1{O&c1|O~P`O![XO!k2PO~O&j,pOP&eiQ&eiR&eiX&ei`&eic&eid&eil&ein&eio&eip&eiv&eix&eiz&ei!P&ei!T&ei!U&ei![&ei!f&ei!k&ei!n&ei!o&ei!p&ei!r&ei!t&ei!w&ei!{&ei#s&ei$T&ei%b&ei%d&ei%f&ei%g&ei%h&ei%k&ei%m&ei%p&ei%q&ei%s&ei&P&ei&V&ei&X&ei&Z&ei&]&ei&`&ei&f&ei&l&ei&n&ei&p&ei&r&ei&t&ei'p&ei'{&ei'}&ei(Q&ei(X&ei(g&ei(t&ei!Z&ei&^&eia&ei&c&ei~O!V2VO~O!Y!^a!Z!^a~P#C|Oo!nO!P!oO!X2]O([!mO!Y'QX!Z'QX~P@UO!Y-QO!Z(`a~O!Y'WX!Z'WX~P!7lO!Y-TO!Z(na~O!Z2dO~P'_O`%kO#[2mO'r%kO~O`%kO!d#uO#[2mO'r%kO~O`%kO!d#uO!o2qO#[2mO'r%kO(h'kO~O`%kO'r%kO~P!8dO!Y$aOr$ma~O!V'Pi!Y'Pi~P!8dO!Y(PO!V(_i~O!Y(WO!V(li~O!V(mi!Y(mi~P!8dO!Y(ji!j(ji`(ji'r(ji~P!8dO#[2sO!Y(ji!j(ji`(ji'r(ji~O!Y(dO!j(ii~O!P%eO![%fO!{]O#e2xO#f2wO'{%dO~O!P%eO![%fO#f2wO'{%dO~Oj3PO!['ZO%c3OO~Og%VOj3PO!['ZO%c3OO~O#g%ZaP%ZaZ%Za`%Zan%Za}%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za'r%Za(X%Za(h%Za!j%Za!V%Za'p%Zar%Za![%Za%c%Za!d%Za~P#L^O#g%]aP%]aZ%]a`%]an%]a}%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a'r%]a(X%]a(h%]a!j%]a!V%]a'p%]ar%]a![%]a%c%]a!d%]a~P#MPO#g%ZaP%ZaZ%Za`%Zan%Za}%Za!Y%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za'r%Za(X%Za(h%Za!j%Za!V%Za'p%Za#[%Zar%Za![%Za%c%Za!d%Za~P#-]O#g%]aP%]aZ%]a`%]an%]a}%]a!Y%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a'r%]a(X%]a(h%]a!j%]a!V%]a'p%]a#[%]ar%]a![%]a%c%]a!d%]a~P#-]O#gyaPyaZya`yanya!hya!iya!kya!oya#jya#kya#lya#mya#nya#oya#pya#qya#rya#tya#vya#xya#yya'rya(Xya(hya!jya!Vya'pyarya![ya%cya!dya~P$$jO#g$naP$naZ$na`$nan$na}$na!h$na!i$na!k$na!o$na#j$na#k$na#l$na#m$na#n$na#o$na#p$na#q$na#r$na#t$na#v$na#x$na#y$na'r$na(X$na(h$na!j$na!V$na'p$nar$na![$na%c$na!d$na~P$%`O#g$paP$paZ$pa`$pan$pa}$pa!h$pa!i$pa!k$pa!o$pa#j$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#t$pa#v$pa#x$pa#y$pa'r$pa(X$pa(h$pa!j$pa!V$pa'p$par$pa![$pa%c$pa!d$pa~P$&RO#g%OaP%OaZ%Oa`%Oan%Oa}%Oa!Y%Oa!h%Oa!i%Oa!k%Oa!o%Oa#j%Oa#k%Oa#l%Oa#m%Oa#n%Oa#o%Oa#p%Oa#q%Oa#r%Oa#t%Oa#v%Oa#x%Oa#y%Oa'r%Oa(X%Oa(h%Oa!j%Oa!V%Oa'p%Oa#[%Oar%Oa![%Oa%c%Oa!d%Oa~P#-]O`#_q!Y#_q'r#_q'p#_q!V#_q!j#_qr#_q![#_q%c#_q!d#_q~P!8dOf'RX!Y'RX~P!(SO!Y.iOf(ba~O!X3ZO!Y'SX!j'SX~P%[O!Y.lO!j(ca~O!Y.lO!j(ca~P!8dO!V3^O~O#|!ma!Z!ma~PKOO#|!ea!Y!ea!Z!ea~P#C|O#|!qa!Z!qa~P!:}O#|!sa!Z!sa~P!=hORfO![3pO$a3qO~O!Z3uO~Or3vO~P#-]O`$jq!Y$jq'r$jq'p$jq!V$jq!j$jqr$jq![$jq%c$jq!d$jq~P!8dO!V3wO~P#-]O|)zO!P){O(p%POj'ba(o'ba!Y'ba#['ba~Of'ba#|'ba~P%)eO|)zO!P){Oj'da(o'da(p'da!Y'da#['da~Of'da#|'da~P%*WO(h$ZO~P#-]O!X3zO'{%dO!Y'^X!j'^X~O!Y/cO!j(ua~O!Y/cO!d#uO!j(ua~O!Y/cO!d#uO(h'kO!j(ua~Of$wi!Y$wi#[$wi#|$wi~P!0}O!X4SO'{*]O!V'`X!Y'`X~P!1lO!Y/kO!V(va~O!Y/kO!V(va~P#-]O!d#uO#r4[O~On4_O!d#uO(h'kO~O(o$}Oj%Zi|%Zi!P%Zi(p%Zi!Y%Zi#[%Zi~Of%Zi#|%Zi~P%-jO(p%POj%]i|%]i!P%]i(o%]i!Y%]i#[%]i~Of%]i#|%]i~P%.]Of(Vi!Y(Vi~P!0}O#[4fOf(Vi!Y(Vi~P!0}O!j4iO~O`$kq!Y$kq'r$kq'p$kq!V$kq!j$kqr$kq![$kq%c$kq!d$kq~P!8dO!V4mO~O!Y4nO![(wX~P#-]O!i#wO~P4XO`$uX![$uX%W[X'r$uX!Y$uX~P!/tO%W4pO`kXjkX|kX!PkX![kX'rkX(okX(pkX!YkX~O%W4pO~Oa4vO%d4wO'{+hO'}TO(QUO!Y'mX!Z'mX~O!Y0rO!Z)Oa~OZ4{O~O_4|O~O`%kO'r%kO~P#-]O![$|O~P#-]O!Y5UO#[5WO!Z({X~O!Z5XO~Oo!nO!P5YO!_!xO!`!uO!a!uO!{:dO#P!pO#Q!pO#R!pO#S!pO#T!pO#W5_O#X!yO'|!lO'}TO(QUO([!mO(g!sO~O!Z5^O~P%3nOj5dO![1[O%c5cO~Og%VOj5dO![1[O%c5cO~Oa5kO'{#mO'}TO(QUO!Y'lX!Z'lX~O!Y1gO!Z(|a~O'}TO(QUO([5mO~O_5qO~O#r5tO&T5uO~PMnO!j5vO~P%[O`5xO~O`5xO~P%[Oa1}O!Z5}O&c1|O~P`O!d6PO~O!d6ROg(ai!Y(ai!Z(ai!d(ai!k(ai~O!Y#di!Z#di~P#C|O#[6SO!Y#di!Z#di~O!Y!^i!Z!^i~P#C|O`%kO#[6]O'r%kO~O`%kO!d#uO#[6]O'r%kO~O!Y(jq!j(jq`(jq'r(jq~P!8dO!Y(dO!j(iq~O!P%eO![%fO#f6dO'{%dO~O!['ZO%c6gO~Oj6jO!['ZO%c6gO~O#g'baP'baZ'ba`'ban'ba}'ba!h'ba!i'ba!k'ba!o'ba#j'ba#k'ba#l'ba#m'ba#n'ba#o'ba#p'ba#q'ba#r'ba#t'ba#v'ba#x'ba#y'ba'r'ba(X'ba(h'ba!j'ba!V'ba'p'bar'ba!['ba%c'ba!d'ba~P%)eO#g'daP'daZ'da`'dan'da}'da!h'da!i'da!k'da!o'da#j'da#k'da#l'da#m'da#n'da#o'da#p'da#q'da#r'da#t'da#v'da#x'da#y'da'r'da(X'da(h'da!j'da!V'da'p'dar'da!['da%c'da!d'da~P%*WO#g$wiP$wiZ$wi`$win$wi}$wi!Y$wi!h$wi!i$wi!k$wi!o$wi#j$wi#k$wi#l$wi#m$wi#n$wi#o$wi#p$wi#q$wi#r$wi#t$wi#v$wi#x$wi#y$wi'r$wi(X$wi(h$wi!j$wi!V$wi'p$wi#[$wir$wi![$wi%c$wi!d$wi~P#-]O#g%ZiP%ZiZ%Zi`%Zin%Zi}%Zi!h%Zi!i%Zi!k%Zi!o%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#p%Zi#q%Zi#r%Zi#t%Zi#v%Zi#x%Zi#y%Zi'r%Zi(X%Zi(h%Zi!j%Zi!V%Zi'p%Zir%Zi![%Zi%c%Zi!d%Zi~P%-jO#g%]iP%]iZ%]i`%]in%]i}%]i!h%]i!i%]i!k%]i!o%]i#j%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#t%]i#v%]i#x%]i#y%]i'r%]i(X%]i(h%]i!j%]i!V%]i'p%]ir%]i![%]i%c%]i!d%]i~P%.]Of'Ra!Y'Ra~P!0}O!Y'Sa!j'Sa~P!8dO!Y.lO!j(ci~O#|#_i!Y#_i!Z#_i~P#C|OP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O(XVOZ#iin#ii!h#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~O#j#ii~P%FnO#j:lO~P%FnOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO(XVOZ#ii!h#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~On#ii~P%HyOn:nO~P%HyOP$]On:nO|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO(XVO#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~OZ#ii!h#ii#o#ii#p#ii#q#ii#r#ii~P%KUOZ:zO!h:pO#o:pO#p:pO#q:yO#r:pO~P%KUOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO(XVO(p#}O#x#ii#y#ii#|#ii(h#ii(o#ii!Y#ii!Z#ii~O#v:sO~P%MpO#v#ii~P%MpOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO(XVO#x#ii#y#ii#|#ii(h#ii!Y#ii!Z#ii~O#v#ii(o#ii(p#ii~P& {O#v:sO(o#|O(p#}O~P& {OP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO#x:uO(XVO(o#|O(p#}O~O#y#ii#|#ii(h#ii!Y#ii!Z#ii~P&$^O`#zy!Y#zy'r#zy'p#zy!V#zy!j#zyr#zy![#zy%c#zy!d#zy~P!8dOj<gO|)zO!P){O(o$}O(p%PO~OP#iiZ#iin#ii}#ii!h#ii!i#ii!k#ii!o#ii#j#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(X#ii(h#ii!Y#ii!Z#ii~P&'UO!i#wOP(WXZ(WXj(WXn(WX|(WX}(WX!P(WX!h(WX!k(WX!o(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#p(WX#q(WX#r(WX#t(WX#v(WX#x(WX#y(WX#|(WX(X(WX(h(WX(o(WX(p(WX!Y(WX!Z(WX~O#|#}i!Y#}i!Z#}i~P#C|O#|!qi!Z!qi~P$'pO!Z6|O~O!Y']a!Z']a~P#C|O!d#uO(h'kO!Y'^a!j'^a~O!Y/cO!j(ui~O!Y/cO!d#uO!j(ui~Of$wq!Y$wq#[$wq#|$wq~P!0}O!V'`a!Y'`a~P#-]O!d7TO~O!Y/kO!V(vi~P#-]O!Y/kO!V(vi~O!V7XO~O!d#uO#r7^O~On7_O!d#uO(h'kO~O|)zO!P){O(p%POj'ca(o'ca!Y'ca#['ca~Of'ca#|'ca~P&.fO|)zO!P){Oj'ea(o'ea(p'ea!Y'ea#['ea~Of'ea#|'ea~P&/XO!V7aO~Of$yq!Y$yq#[$yq#|$yq~P!0}O`$ky!Y$ky'r$ky'p$ky!V$ky!j$kyr$ky![$ky%c$ky!d$ky~P!8dO!d6RO~O!Y4nO![(wa~O`#_y!Y#_y'r#_y'p#_y!V#_y!j#_yr#_y![#_y%c#_y!d#_y~P!8dOZ7fO~Oa7hO'{+hO'}TO(QUO~O!Y0rO!Z)Oi~O_7lO~O([(xO!Y'iX!Z'iX~O!Y5UO!Z({a~OlkO'{7sO~P.iO!Z7vO~P%3nOo!nO!P7wO'}TO(QUO([!mO(g!sO~O![1[O~O![1[O%c7yO~Oj7|O![1[O%c7yO~OZ8RO!Y'la!Z'la~O!Y1gO!Z(|i~O!j8VO~O!j8WO~O!j8ZO~O!j8ZO~P%[O`8]O~O!d8^O~O!j8_O~O!Y(mi!Z(mi~P#C|O`%kO#[8gO'r%kO~O!Y(jy!j(jy`(jy'r(jy~P!8dO!Y(dO!j(iy~O!['ZO%c8jO~O#g$wqP$wqZ$wq`$wqn$wq}$wq!Y$wq!h$wq!i$wq!k$wq!o$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#p$wq#q$wq#r$wq#t$wq#v$wq#x$wq#y$wq'r$wq(X$wq(h$wq!j$wq!V$wq'p$wq#[$wqr$wq![$wq%c$wq!d$wq~P#-]O#g'caP'caZ'ca`'can'ca}'ca!h'ca!i'ca!k'ca!o'ca#j'ca#k'ca#l'ca#m'ca#n'ca#o'ca#p'ca#q'ca#r'ca#t'ca#v'ca#x'ca#y'ca'r'ca(X'ca(h'ca!j'ca!V'ca'p'car'ca!['ca%c'ca!d'ca~P&.fO#g'eaP'eaZ'ea`'ean'ea}'ea!h'ea!i'ea!k'ea!o'ea#j'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#t'ea#v'ea#x'ea#y'ea'r'ea(X'ea(h'ea!j'ea!V'ea'p'ear'ea!['ea%c'ea!d'ea~P&/XO#g$yqP$yqZ$yq`$yqn$yq}$yq!Y$yq!h$yq!i$yq!k$yq!o$yq#j$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#t$yq#v$yq#x$yq#y$yq'r$yq(X$yq(h$yq!j$yq!V$yq'p$yq#[$yqr$yq![$yq%c$yq!d$yq~P#-]O!Y'Si!j'Si~P!8dO#|#_q!Y#_q!Z#_q~P#C|O(o$}OP%ZaZ%Zan%Za}%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za#|%Za(X%Za(h%Za!Y%Za!Z%Za~Oj%Za|%Za!P%Za(p%Za~P&@nO(p%POP%]aZ%]an%]a}%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a#|%]a(X%]a(h%]a!Y%]a!Z%]a~Oj%]a|%]a!P%]a(o%]a~P&BuOj<gO|)zO!P){O(p%PO~P&@nOj<gO|)zO!P){O(o$}O~P&BuO|0ZO}0ZO!P0[OPyaZyajyanya!hya!iya!kya!oya#jya#kya#lya#mya#nya#oya#pya#qya#rya#tya#vya#xya#yya#|ya(Xya(hya(oya(pya!Yya!Zya~O|)zO!P){OP$naZ$naj$nan$na}$na!h$na!i$na!k$na!o$na#j$na#k$na#l$na#m$na#n$na#o$na#p$na#q$na#r$na#t$na#v$na#x$na#y$na#|$na(X$na(h$na(o$na(p$na!Y$na!Z$na~O|)zO!P){OP$paZ$paj$pan$pa}$pa!h$pa!i$pa!k$pa!o$pa#j$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#t$pa#v$pa#x$pa#y$pa#|$pa(X$pa(h$pa(o$pa(p$pa!Y$pa!Z$pa~OP%OaZ%Oan%Oa}%Oa!h%Oa!i%Oa!k%Oa!o%Oa#j%Oa#k%Oa#l%Oa#m%Oa#n%Oa#o%Oa#p%Oa#q%Oa#r%Oa#t%Oa#v%Oa#x%Oa#y%Oa#|%Oa(X%Oa(h%Oa!Y%Oa!Z%Oa~P&'UO#|$jq!Y$jq!Z$jq~P#C|O#|$kq!Y$kq!Z$kq~P#C|O!Z8vO~O#|8wO~P!0}O!d#uO!Y'^i!j'^i~O!d#uO(h'kO!Y'^i!j'^i~O!Y/cO!j(uq~O!V'`i!Y'`i~P#-]O!Y/kO!V(vq~O!V8}O~P#-]O!V8}O~Of(Vy!Y(Vy~P!0}O!Y'ga!['ga~P#-]O`%Vq![%Vq'r%Vq!Y%Vq~P#-]OZ9SO~O!Y0rO!Z)Oq~O#[9WO!Y'ia!Z'ia~O!Y5UO!Z({i~P#C|OP[XZ[Xn[X|[X}[X!P[X!V[X!Y[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X~O!d%TX#r%TX~P'#`O![1[O%c9[O~O'}TO(QUO([9aO~O!Y1gO!Z(|q~O!j9dO~O!j9eO~O!j9fO~O!j9fO~P%[O#[9iO!Y#dy!Z#dy~O!Y#dy!Z#dy~P#C|O!['ZO%c9nO~O#|#zy!Y#zy!Z#zy~P#C|OP$wiZ$win$wi}$wi!h$wi!i$wi!k$wi!o$wi#j$wi#k$wi#l$wi#m$wi#n$wi#o$wi#p$wi#q$wi#r$wi#t$wi#v$wi#x$wi#y$wi#|$wi(X$wi(h$wi!Y$wi!Z$wi~P&'UO|)zO!P){O(p%POP'baZ'baj'ban'ba}'ba!h'ba!i'ba!k'ba!o'ba#j'ba#k'ba#l'ba#m'ba#n'ba#o'ba#p'ba#q'ba#r'ba#t'ba#v'ba#x'ba#y'ba#|'ba(X'ba(h'ba(o'ba!Y'ba!Z'ba~O|)zO!P){OP'daZ'daj'dan'da}'da!h'da!i'da!k'da!o'da#j'da#k'da#l'da#m'da#n'da#o'da#p'da#q'da#r'da#t'da#v'da#x'da#y'da#|'da(X'da(h'da(o'da(p'da!Y'da!Z'da~O(o$}OP%ZiZ%Zij%Zin%Zi|%Zi}%Zi!P%Zi!h%Zi!i%Zi!k%Zi!o%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#p%Zi#q%Zi#r%Zi#t%Zi#v%Zi#x%Zi#y%Zi#|%Zi(X%Zi(h%Zi(p%Zi!Y%Zi!Z%Zi~O(p%POP%]iZ%]ij%]in%]i|%]i}%]i!P%]i!h%]i!i%]i!k%]i!o%]i#j%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#t%]i#v%]i#x%]i#y%]i#|%]i(X%]i(h%]i(o%]i!Y%]i!Z%]i~O#|$ky!Y$ky!Z$ky~P#C|O#|#_y!Y#_y!Z#_y~P#C|O!d#uO!Y'^q!j'^q~O!Y/cO!j(uy~O!V'`q!Y'`q~P#-]O!V9wO~P#-]O!Y0rO!Z)Oy~O!Y5UO!Z({q~O![1[O%c:OO~O!j:RO~O!['ZO%c:WO~OP$wqZ$wqn$wq}$wq!h$wq!i$wq!k$wq!o$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#p$wq#q$wq#r$wq#t$wq#v$wq#x$wq#y$wq#|$wq(X$wq(h$wq!Y$wq!Z$wq~P&'UO|)zO!P){O(p%POP'caZ'caj'can'ca}'ca!h'ca!i'ca!k'ca!o'ca#j'ca#k'ca#l'ca#m'ca#n'ca#o'ca#p'ca#q'ca#r'ca#t'ca#v'ca#x'ca#y'ca#|'ca(X'ca(h'ca(o'ca!Y'ca!Z'ca~O|)zO!P){OP'eaZ'eaj'ean'ea}'ea!h'ea!i'ea!k'ea!o'ea#j'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#t'ea#v'ea#x'ea#y'ea#|'ea(X'ea(h'ea(o'ea(p'ea!Y'ea!Z'ea~OP$yqZ$yqn$yq}$yq!h$yq!i$yq!k$yq!o$yq#j$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#t$yq#v$yq#x$yq#y$yq#|$yq(X$yq(h$yq!Y$yq!Z$yq~P&'UOf%_!Z!Y%_!Z#[%_!Z#|%_!Z~P!0}O!Y'iq!Z'iq~P#C|O!Y#d!Z!Z#d!Z~P#C|O#g%_!ZP%_!ZZ%_!Z`%_!Zn%_!Z}%_!Z!Y%_!Z!h%_!Z!i%_!Z!k%_!Z!o%_!Z#j%_!Z#k%_!Z#l%_!Z#m%_!Z#n%_!Z#o%_!Z#p%_!Z#q%_!Z#r%_!Z#t%_!Z#v%_!Z#x%_!Z#y%_!Z'r%_!Z(X%_!Z(h%_!Z!j%_!Z!V%_!Z'p%_!Z#[%_!Zr%_!Z![%_!Z%c%_!Z!d%_!Z~P#-]OP%_!ZZ%_!Zn%_!Z}%_!Z!h%_!Z!i%_!Z!k%_!Z!o%_!Z#j%_!Z#k%_!Z#l%_!Z#m%_!Z#n%_!Z#o%_!Z#p%_!Z#q%_!Z#r%_!Z#t%_!Z#v%_!Z#x%_!Z#y%_!Z#|%_!Z(X%_!Z(h%_!Z!Y%_!Z!Z%_!Z~P&'UOr(]X~P1qO'|!lO~P!*fO!VeX!YeX#[eX~P'#`OP[XZ[Xn[X|[X}[X!P[X!Y[X!YeX!h[X!i[X!k[X!o[X#[[X#[eX#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X~O!deX!j[X!jeX(heX~P'ASOP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![XO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'{)YO'}TO(QUO(XVO(g[O(t<YO~O!Y:wO!Z$ma~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;RO!P${O![$|O!f<aO!k$xO#f;XO$T%^O$o;TO$q;VO$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~O#s)aO~P'ExO!Z[X!ZeX~P'ASO#g:kO~O!d#uO#g:kO~O#[:{O~O#r:pO~O#[;ZO!Y(mX!Z(mX~O#[:{O!Y(kX!Z(kX~O#g;[O~Of;^O~P!0}O#g;cO~O#g;dO~O!d#uO#g;eO~O!d#uO#g;[O~O#|;fO~P#C|O#g;gO~O#g;hO~O#g;mO~O#g;nO~O#g;oO~O#g;pO~O#|;qO~P!0}O#|;rO~P!0}O!i#P#Q#S#T#W#e#f#q(t$o$q$t%W%b%c%d%k%m%p%q%s%u~'vS#k!U't'|#lo#j#mn|'u$Y'u'{$[([~",goto:"$2p)SPPPPP)TPP)WP)iP*x.|PPPP5pPP6WPP<S?gP?zP?zPPP?zPAxP?zP?zP?zPA|PPBRPBlPGdPPPGhPPPPGhJiPPPJoKjPGhPMxPPPP!!WGhPPPGhPGhP!$fGhP!'z!(|!)VP!)y!)}!)yPPPPP!-Y!(|PP!-v!.pP!1dGhGh!1i!4s!9Y!9Y!=OPPP!=VGhPPPPPPPPPPP!@dP!AqPPGh!CSPGhPGhGhGhGhPGh!DfP!GnP!JrP!Jv!KQ!KU!KUP!GkP!KY!KYP!N^P!NbGhGh!Nh##k?zP?zP?z?zP#$v?z?z#'O?z#)k?z#+m?z?z#,[#.f#.f#.j#.r#.f#.zP#.fP?z#/d?z#3R?z?z5pPPP#6vPPP#7a#7aP#7aP#7w#7aPP#7}P#7tP#7t#8b#7t#8|#9S5m)W#9V)WP#9^#9^#9^P)WP)WP)WP)WPP)WP#9d#9gP#9g)WP#9kP#9nP)WP)WP)WP)WP)WP)W)WPP#9t#9z#:V#:]#:c#:i#:o#:}#;T#;Z#;e#;k#;u#<U#<[#<|#=`#=f#=l#=z#>a#@O#@^#@d#Ax#BW#Cr#DQ#DW#D^#Dd#Dn#Dt#Dz#EU#Eh#EnPPPPPPPPPP#EtPPPPPPP#Fi#Ip#KP#KW#K`PPPP$!d$%Z$+r$+u$+x$,q$,t$,w$-O$-WPP$-^$-b$.Y$/X$/]$/qPP$/u$/{$0PP$0S$0W$0Z$1P$1h$2P$2T$2W$2Z$2a$2d$2h$2lR!{RoqOXst!Z#c%j&m&o&p&r,h,m1w1zY!uQ'Z-Y1[5]Q%pvQ%xyQ&P|Q&e!VS'R!e-QQ'a!iS'g!r!xS*c$|*hQ+f%yQ+s&RQ,X&_Q-W'YQ-b'bQ-j'hQ/|*jQ1f,YR;Y:g%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S,e,h,m-^-f-t-z.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3Z5Y5d5t5u5x6]7w7|8]8gS#p]:d!r)[$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q*u%ZQ+k%{Q,Z&bQ,b&jQ.c;QQ0h+^Q0l+`Q0w+lQ1n,`Q2{.[Q4v0rQ5k1gQ6i3PQ6u;RQ7h4wR8m6j&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]t!nQ!r!u!x!y'R'Y'Z'g'h'i-Q-W-Y-j1[5]5_$v$si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gQ&S|Q'P!eS'V%f-TQ+k%{Q,Z&bQ0]*yQ0w+lQ0|+rQ1m,_Q1n,`Q4v0rQ5P1OQ5k1gQ5n1iQ5o1lQ7h4wQ7k4|Q8U5qQ9V7lR9b8RrnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zR,]&f&v^OPXYstuvwz!Z!`!g!j!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O']'m(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<[<][#[WZ#V#Y'S'}!S%gm#g#h#k%b%e(W(b(c(d+Q+R+T,d,z-x.O.P.Q.S2P2w2x6R6dQ%sxQ%wyS%||&RQ&Y!TQ'^!hQ'`!iQ(k#rS*V$x*ZS+e%x%yQ+i%{Q,S&]Q,W&_S-a'a'bQ.^(lQ/g*WQ0p+fQ0v+lQ0x+mQ0{+qQ1a,TS1e,X,YQ2i-bQ3y/cQ4u0rQ4y0uQ5O0}Q5j1fQ7Q3zQ7g4wQ7j4{Q9R7fR9y9S!O$zi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c!S%uy!i!t%w%x%y'Q'`'a'b'f'p*b+e+f,}-a-b-i/t0p2b2i2p4^Q+_%sQ+x&VQ+{&WQ,V&_Q.](kQ1`,SU1d,W,X,YQ3Q.^Q5e1aS5i1e1fQ8Q5j#W<^#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<go<_:y:z:};P;T;V;X;`;b;d;h;j;l;n;rW%Ti%V*r<YS&V!Q&dQ&W!RQ&X!SR+v&T$w%Si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gT)v$u)wV*v%Z;Q;RU'V!e%f-TS(y#y#zQ+p&OS.V(g(hQ1V+|Q4g0ZR7p5U&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]$i$`c#X#d%n%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.t.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PT#SV#T&}kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q'T!eR2^-Qv!nQ!e!r!u!x!y'R'Y'Z'g'h'i-Q-W-Y-j1[5]5_S*b$|*hS/t*c*jQ/}*kQ1X,OQ4^/|R4a0PnqOXst!Z#c%j&m&o&p&r,h,m1w1zQ&t!^Q'q!wS(m#t:kQ+c%vQ,Q&YQ,R&[Q-_'_Q-l'jS.g(r;[S0`+O;eQ0n+dQ1Z,PQ2O,oQ2Q,pQ2Y,{Q2g-`Q2j-dS4l0a;oQ4q0oS4t0q;pQ6T2[Q6X2hQ6^2oQ7e4rQ8b6VQ8c6YQ8f6_R9h8_$d$_c#X#d%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PS(j#o'dU*o%R(q3mS+Y%n.tQ2|0hQ6f2{Q8l6iR9o8m$d$^c#X#d%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PS(i#o'dS({#z$_S+X%n.tS.W(h(jQ.w)]Q0e+YR2y.X&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]S#p]:dQ&o!XQ&p!YQ&r![Q&s!]R1v,kQ'[!hQ+[%sQ-]'^S.Y(k+_Q2e-[W2}.].^0g0iQ6W2fU6e2z2|3QS8i6f6hS9m8k8lS:U9l9oQ:^:VR:a:_U!vQ'Z-YT5Z1[5]!Q_OXZ`st!V!Z#c#g%b%j&d&f&m&o&p&r(d,h,m.P1w1z]!pQ!r'Z-Y1[5]T#p]:d%Y{OPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gS(y#y#zS.V(g(h!s;v$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Y!tQ'Z-Y1[5]Q'f!rS'p!u!xS'r!y5_S-i'g'hQ-k'iR2p-jQ'o!tS(`#f1qS-h'f'rQ/f*VQ/r*bQ2q-kQ4O/gS4X/s/}Q7P3yS7[4_4aQ8y7QR9Q7_Q#vbQ'n!tS(_#f1qS(a#l*}Q+P%cQ+a%tQ+g%zU-g'f'o'rQ-{(`Q/e*VQ/q*bQ/w*eQ0m+bQ1b,US2n-h-kQ2v.TS3}/f/gS4W/r/}Q4Z/vQ4]/xQ5g1cQ6`2qQ7O3yQ7S4OS7W4X4aQ7]4`Q8O5hS8x7P7QQ8|7XQ9O7[Q9_8PQ9u8yQ9v8}Q9x9QQ:Q9`Q:Y9wQ;y;tQ<U;}R<V<OV!vQ'Z-Y%YaOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gS#vz!j!r;s$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]R;y<[%YbOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gQ%cj!S%ty!i!t%w%x%y'Q'`'a'b'f'p*b+e+f,}-a-b-i/t0p2b2i2p4^S%zz!jQ+b%uQ,U&_W1c,V,W,X,YU5h1d1e1fS8P5i5jQ9`8Q!r;t$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q;}<ZR<O<[$|eOPXYstuvw!Z!`!g!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gY#aWZ#V#Y'}!S%gm#g#h#k%b%e(W(b(c(d+Q+R+T,d,z-x.O.P.Q.S2P2w2x6R6dQ,c&j!p;u$[$m)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]R;x'SS'W!e%fR2`-T%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S,e,h,m-^-f-t-z.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3Z5Y5d5t5u5x6]7w7|8]8g!r)[$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q,b&jQ0h+^Q2{.[Q6i3PR8m6j!b$Uc#X%n'|(S(n(u)W)X)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:e!P:r)Z)l-O.t2W2Z3_3i3j3n3t6U6p6y6z7r8a8n8t8u9{:S<P!f$Wc#X%n'|(S(n(u)T)U)W)X)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:e!T:t)Z)l-O.t2W2Z3_3f3g3i3j3n3t6U6p6y6z7r8a8n8t8u9{:S<P!^$[c#X%n'|(S(n(u)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:eQ3x/az<])Z)l-O.t2W2Z3_3n3t6U6p6y6z7r8a8n8t8u9{:S<PQ<b<dR<c<e&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]S$nh$oR3q.z'TgOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.z.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]T$jf$pQ$hfS)e$k)iR)q$pT$if$pT)g$k)i'ThOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.z.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]T$nh$oQ$qhR)p$o%YjOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8g!s<Z$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]#clOPXZst!Z!`!o#R#c#n#{$m%j&f&i&j&m&o&p&r&v'O'](z)n+S+^,e,h,m-^.[.{0[1_1o1p1r1t1w1z1|3P3p5Y5d5t5u5x6j7w7|8]!O%Ri#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c#W(q#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gQ*z%_Q/W)zo3m:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!O$yi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cQ*[$zS*e$|*hQ*{%`Q/x*f#W;{#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn;|:y:z:};P;T;V;X;`;b;d;h;j;l;n;rQ<Q<^Q<R<_Q<S<`R<T<a!O%Ri#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c#W(q#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<go3m:y:z:};P;T;V;X;`;b;d;h;j;l;n;rnoOXst!Z#c%j&m&o&p&r,h,m1w1zQ*_${Q,v&yQ,w&{R4R/k$v%Si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gQ+y&WQ1T+{Q5S1SR7o5TT*g$|*hS*g$|*hT5[1[5]S/v*d5YT4`0O7wQ+a%tQ/w*eQ0m+bQ1b,UQ5g1cQ8O5hQ9_8PR:Q9`!O%Oi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cr)}$v(s*O*n*|/i0U0V3W4P4j6}7`9t;z<W<XS0Q*m0R#W:|#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn:}:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!^;_(o)`*U*^._.b.f/S/X/a/n0f1Q1S3T4Q4U5R5T6k6n7U7Y7b7d8{9P:X<d<e`;`3l6q6t6x8o9p9s:bS;i.a3UT;j6s8r!O%Qi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cv*P$v(s*Q*m*|/]/i0U0V3W4P4b4j6}7`9t;z<W<XS0S*n0T#W;O#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn;P:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!b;a(o)`*U*^.`.a.f/S/X/a/n0f1Q1S3R3T4Q4U5R5T6k6l6n7U7Y7b7d8{9P:X<d<ed;b3l6r6s6x8o8p9p9q9s:bS;k.b3VT;l6t8srnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zQ&a!UR,e&jrnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zR&a!UQ+}&XR1P+vsnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zQ1],SS5b1`1aU7x5`5a5eS9Z7z7{S9|9Y9]Q:Z9}R:`:[Q&h!VR,^&dR5n1iS%||&RR0x+mQ&m!WR,h&nR,n&sT1x,m1zR,r&tQ,q&tR2R,rQ't!zR-n'tSsOtQ#cXT%ms#cQ!}TR'v!}Q#QUR'x#QQ)w$uR/T)wQ#TVR'z#TQ#WWU(Q#W(R-uQ(R#XR-u(SQ-R'TR2_-RQ.j(sR3X.jQ.m(uS3[.m3]R3].nQ-Y'ZR2c-YY!rQ'Z-Y1[5]R'e!rS#^W%eU(X#^(Y-vQ(Y#_R-v(TQ-U'WR2a-Ut`OXst!V!Z#c%j&d&f&m&o&p&r,h,m1w1zS#gZ%bU#q`#g.PR.P(dQ(e#iQ-|(aW.U(e-|2t6bQ2t-}R6b2uQ)i$kR.|)iQ$ohR)o$oQ$bcU)_$b-q:xQ-q:eR:x)lQ/d*VW3{/d3|7R8zU3|/e/f/gS7R3}4OR8z7S$X)|$v(o(s)`*U*^*m*n*w*x*|.a.b.d.e.f/S/X/]/_/a/i/n0U0V0f1Q1S3R3S3T3W3l4P4Q4U4b4d4j5R5T6k6l6m6n6s6t6v6w6x6}7U7Y7`7b7d8o8p8q8{9P9p9q9r9s9t:X:b;z<W<X<d<eQ/l*^U4T/l4V7VQ4V/nR7V4UQ*h$|R/z*hr*O$v(s*m*n*|/i0U0V3W4P4j6}7`9t;z<W<X!^._(o)`*U*^.a.b.f/S/X/a/n0f1Q1S3T4Q4U5R5T6k6n7U7Y7b7d8{9P:X<d<eU/^*O._6qa6q3l6s6t6x8o9p9s:bQ0R*mQ3U.aU4c0R3U8rR8r6sv*Q$v(s*m*n*|/]/i0U0V3W4P4b4j6}7`9t;z<W<X!b.`(o)`*U*^.a.b.f/S/X/a/n0f1Q1S3R3T4Q4U5R5T6k6l6n7U7Y7b7d8{9P:X<d<eU/`*Q.`6re6r3l6s6t6x8o8p9p9q9s:bQ0T*nQ3V.bU4e0T3V8sR8s6tQ*s%UR0X*sQ4o0fR7c4oQ+U%hR0d+UQ5V1VS7q5V9XR9X7rQ,P&YR1Y,PQ5]1[R7u5]Q1h,ZS5l1h8SR8S5nQ0s+iW4x0s4z7i9TQ4z0vQ7i4yR9T7jQ+n%|R0y+nQ1z,mR5|1zYrOXst#cQ&q!ZQ+W%jQ,g&mQ,i&oQ,j&pQ,l&rQ1u,hS1x,m1zR5{1wQ%lpQ&u!_Q&x!aQ&z!bQ&|!cQ'l!tQ+V%iQ+c%vQ+u&SQ,]&hQ,t&wW-e'f'n'o'rQ-l'jQ/y*gQ0n+dS1k,^,aQ2S,sQ2T,vQ2U,wQ2j-dW2l-g-h-k-mQ4q0oQ4}0|Q5Q1QQ5f1bQ5p1mQ5z1vU6Z2k2n2qQ6^2oQ7e4rQ7m5PQ7n5RQ7t5[Q7}5gQ8T5oS8d6[6`Q8f6_Q9U7kQ9^8OQ9c8UQ9j8eQ9z9VQ:P9_Q:T9kR:]:QQ%vyQ'_!iQ'j!tU+d%w%x%yQ,{'QU-`'`'a'bS-d'f'pQ/p*bS0o+e+fQ2[,}S2h-a-bQ2o-iQ4Y/tQ4r0pQ6V2bQ6Y2iQ6_2pR7Z4^S$wi<YR*t%VU%Ui%V<YR0W*rQ$viS(o#u+`Q(s#wS)`$c$dQ*U$xQ*^${Q*m%OQ*n%QQ*w%[Q*x%]Q*|%aQ.a:|Q.b;OQ.d;SQ.e;UQ.f;WQ/S)uS/X){/ZQ/])}Q/_*PQ/a*RQ/i*YQ/n*`Q0U*pQ0V*qh0f+].Z1^3O5c6g7y8j9[9n:O:WQ1Q+wQ1S+zQ3R;_Q3S;aQ3T;cQ3W.iS3l:y:zQ4P/jQ4Q/kQ4U/mQ4b0QQ4d0SQ4j0^Q5R1RQ5T1UQ6k;gQ6l;iQ6m;kQ6n;mQ6s:}Q6t;PQ6v;TQ6w;VQ6x;XQ6}3xQ7U4SQ7Y4[Q7`4fQ7b4nQ7d4pQ8o;dQ8p;`Q8q;bQ8{7TQ9P7^Q9p;hQ9q;jQ9r;lQ9s;nQ9t8wQ:X;qQ:b;rQ;z<YQ<W<bQ<X<cQ<d<fR<e<gnpOXst!Z#c%j&m&o&p&r,h,m1w1zQ!fPS#eZ#nQ&w!`U'c!o5Y7wQ'y#RQ(|#{Q)m$mS,a&f&iQ,f&jQ,s&vQ,x'OQ-[']Q.p(zQ/Q)nQ0b+SQ0i+^Q1s,eQ2f-^Q2|.[Q3s.{Q4h0[Q5a1_Q5r1oQ5s1pQ5w1rQ5y1tQ6O1|Q6f3PQ6{3pQ7{5dQ8X5tQ8Y5uQ8[5xQ8l6jQ9]7|R9g8]#WcOPXZst!Z!`!o#c#n#{%j&f&i&j&m&o&p&r&v'O'](z+S+^,e,h,m-^.[0[1_1o1p1r1t1w1z1|3P5Y5d5t5u5x6j7w7|8]Q#XWQ#dYQ%nuQ%ovS%qw!gS'|#V(PQ(S#YQ(n#tQ(u#xQ(}$OQ)O$PQ)P$QQ)Q$RQ)R$SQ)S$TQ)T$UQ)U$VQ)V$WQ)W$XQ)X$YQ)Z$[Q)^$aQ)b$eW)l$m)n.{3pQ+Z%pQ+o%}S-O'S2]Q-m'mS-r'}-tQ-w(VQ-y(^Q.h(rQ.n(vQ.r:cQ.t:fQ.u:gQ.v:jQ/V)yQ0_+OQ2W,yQ2Z,|Q2k-fQ2r-zQ3Y.lQ3_:kQ3`:lQ3a:mQ3b:nQ3c:oQ3d:pQ3e:qQ3f:rQ3g:sQ3h:tQ3i:uQ3j:vQ3k.sQ3n:{Q3o;YQ3t:wQ4k0aQ4s0qQ6U;ZQ6[2mQ6a2sQ6o3ZQ6p;[Q6y;^Q6z;eQ7r5WQ8a6SQ8e6]Q8n;fQ8t;oQ8u;pQ9k8gQ9{9WQ:S9iQ:e#RR<P<]R#ZWR'U!eY!tQ'Z-Y1[5]S'Q!e-QQ'f!rS'p!u!xS'r!y5_S,}'R'YS-i'g'hQ-k'iQ2b-WR2p-jR(t#wR(w#xQ!fQT-X'Z-Y]!qQ!r'Z-Y1[5]Q#o]R'd:dT#jZ%bS#iZ%bS%hm,dU(a#g#h#kS-}(b(cQ.R(dQ0c+TQ2u.OU2v.P.Q.SS6c2w2xR8h6d`#]W#V#Y%e'}(W+Q-xr#fZm#g#h#k%b(b(c(d+T.O.P.Q.S2w2x6dQ1q,dQ2X,zQ6Q2PQ8`6RT;w'S+RT#`W%eS#_W%eS(O#V(WS(T#Y+QS-P'S+RT-s'}-xT'X!e%fQ$kfR)s$pT)h$k)iR3r.zT*X$x*ZR*a${Q0g+]Q2z.ZQ5`1^Q6h3OQ7z5cQ8k6gQ9Y7yQ9l8jQ9}9[Q:V9nQ:[:OR:_:WnqOXst!Z#c%j&m&o&p&r,h,m1w1zQ&g!VR,]&dtmOXst!U!V!Z#c%j&d&m&o&p&r,h,m1w1zR,d&jT%im,dR1W+|R,[&bQ&Q|R+t&RR+j%{T&k!W&nT&l!W&nT1y,m1z",nodeNames:"\u26A0 ArithOp ArithOp JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:371,context:VJ,nodeProps:[["isolate",-8,4,5,13,33,35,48,50,52,""],["group",-26,8,16,18,65,201,205,209,210,212,215,218,228,230,236,238,240,242,245,251,257,259,261,263,265,267,268,"Statement",-32,12,13,28,31,32,38,48,51,52,54,59,67,75,79,81,83,84,106,107,116,117,134,137,139,140,141,142,144,145,164,165,167,"Expression",-23,27,29,33,37,39,41,168,170,172,173,175,176,177,179,180,181,183,184,185,195,197,199,200,"Type",-3,87,99,105,"ClassItem"],["openedBy",22,"<",34,"InterpolationStart",53,"[",57,"{",72,"(",157,"JSXStartCloseTag"],["closedBy",23,">",36,"InterpolationEnd",47,"]",58,"}",73,")",162,"JSXEndTag"]],propSources:[HJ],skippedNodes:[0,4,5,271],repeatNodeCount:37,tokenData:"$Fj(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#8g!R![#:v![!]#Gv!]!^#IS!^!_#J^!_!`#Ns!`!a$#_!a!b$(l!b!c$,k!c!}Er!}#O$-u#O#P$/P#P#Q$4h#Q#R$5r#R#SEr#S#T$7P#T#o$8Z#o#p$<k#p#q$=a#q#r$>q#r#s$?}#s$f%Z$f$g+g$g#BYEr#BY#BZ$AX#BZ$ISEr$IS$I_$AX$I_$I|Er$I|$I}$Dd$I}$JO$Dd$JO$JTEr$JT$JU$AX$JU$KVEr$KV$KW$AX$KW&FUEr&FU&FV$AX&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AX?HUOEr(n%d_$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$f&j(R!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(R!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$f&j(OpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(OpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$f&j(Op(R!b't(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST(P#S$f&j'u(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$f&j(Op(R!b'u(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$f&j!o$Ip(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#t$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#t$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/|3l_'}$(n$f&j(R!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$f&j(R!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$f&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$a`$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$a``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$a`$f&j(R!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(R!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$a`(R!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k#%|:hh$f&j(Op(R!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__VS$f&j(Op(R!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]VS$f&j(R!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXVS$f&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSVSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWVS(R!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]VS$f&j(OpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWVS(OpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYVS(Op(R!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S#%|C}i$f&j(g!L^(Op(R!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr#%|EoP;=`<%lCr(CSFRk$f&j(Op(R!b$Y#t'{&;d([!LYOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$f&j(Op(R!b$Y#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv(CSJPP;=`<%lEr%#SJ_`$f&j(Op(R!b#l$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SKl_$f&j$O$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&COLva(p&;`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SNW`$f&j#x$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/|! c_(Q$)`$f&j(OpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$f&j(OpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$f&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$a`$f&j(OpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(OpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$a`(OpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b(*Q!'t_!k(!b$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l!)O_!jM|$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!*[b$f&j(Op(R!b'|#)d#m$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!+o`$f&j(Op(R!b#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!,|`$f&j(Op(R!bn&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!.Z_!Y&;l$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!/ec$f&j(Op(R!b|'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!0ya$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!2Z_!XMt$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!3eg$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!5Vg$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!6wc$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!8_c$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!9uf$f&j(Op(R!b#k$IdOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpxz!;Zz{#,f{!P!;Z!P!Q#-{!Q!^!;Z!^!_#'Z!_!`#5k!`!a#7Q!a!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(r!;fb$f&j(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(Q!<w`$f&j(R!b!USOY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eb!Q!^!<n!^!_!GY!_!}!<n!}#O!Ja#O#P!Dj#P#o!<n#o#p!GY#p;'S!<n;'S;=`!Kj<%lO!<n&n!>Q^$f&j!USOY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@Y!_!}!=y!}#O!Bw#O#P!Dj#P#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!?Ta$f&j!USO!^&c!_#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&cS!@_X!USOY!@YZ!P!@Y!P!Q!@z!Q!}!@Y!}#O!Ac#O#P!Bb#P;'S!@Y;'S;=`!Bq<%lO!@YS!APU!US#Z#[!@z#]#^!@z#a#b!@z#g#h!@z#i#j!@z#m#n!@zS!AfVOY!AcZ#O!Ac#O#P!A{#P#Q!@Y#Q;'S!Ac;'S;=`!B[<%lO!AcS!BOSOY!AcZ;'S!Ac;'S;=`!B[<%lO!AcS!B_P;=`<%l!AcS!BeSOY!@YZ;'S!@Y;'S;=`!Bq<%lO!@YS!BtP;=`<%l!@Y&n!B|[$f&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#O!Bw#O#P!Cr#P#Q!=y#Q#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!CwX$f&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!DgP;=`<%l!Bw&n!DoX$f&jOY!=yYZ&cZ!^!=y!^!_!@Y!_#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!E_P;=`<%l!=y(Q!Eki$f&j(R!b!USOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!Eb#[#]&}#]#^!Eb#^#a&}#a#b!Eb#b#g&}#g#h!Eb#h#i&}#i#j!Eb#j#m&}#m#n!Eb#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!GaZ(R!b!USOY!GYZw!GYwx!@Yx!P!GY!P!Q!HS!Q!}!GY!}#O!Ic#O#P!Bb#P;'S!GY;'S;=`!JZ<%lO!GY!f!HZb(R!b!USOY'}Zw'}x#O'}#P#Z'}#Z#[!HS#[#]'}#]#^!HS#^#a'}#a#b!HS#b#g'}#g#h!HS#h#i'}#i#j!HS#j#m'}#m#n!HS#n;'S'};'S;=`(f<%lO'}!f!IhX(R!bOY!IcZw!Icwx!Acx#O!Ic#O#P!A{#P#Q!GY#Q;'S!Ic;'S;=`!JT<%lO!Ic!f!JWP;=`<%l!Ic!f!J^P;=`<%l!GY(Q!Jh^$f&j(R!bOY!JaYZ&cZw!Jawx!Bwx!^!Ja!^!_!Ic!_#O!Ja#O#P!Cr#P#Q!<n#Q#o!Ja#o#p!Ic#p;'S!Ja;'S;=`!Kd<%lO!Ja(Q!KgP;=`<%l!Ja(Q!KmP;=`<%l!<n'`!Ky`$f&j(Op!USOY!KpYZ&cZr!Kprs!=ys!P!Kp!P!Q!L{!Q!^!Kp!^!_!Ns!_!}!Kp!}#O##z#O#P!Dj#P#o!Kp#o#p!Ns#p;'S!Kp;'S;=`#%T<%lO!Kp'`!MUi$f&j(Op!USOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!L{#[#](r#]#^!L{#^#a(r#a#b!L{#b#g(r#g#h!L{#h#i(r#i#j!L{#j#m(r#m#n!L{#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!NzZ(Op!USOY!NsZr!Nsrs!@Ys!P!Ns!P!Q# m!Q!}!Ns!}#O#!|#O#P!Bb#P;'S!Ns;'S;=`##t<%lO!Nst# tb(Op!USOY)rZr)rs#O)r#P#Z)r#Z#[# m#[#])r#]#^# m#^#a)r#a#b# m#b#g)r#g#h# m#h#i)r#i#j# m#j#m)r#m#n# m#n;'S)r;'S;=`*Z<%lO)rt##RX(OpOY#!|Zr#!|rs!Acs#O#!|#O#P!A{#P#Q!Ns#Q;'S#!|;'S;=`##n<%lO#!|t##qP;=`<%l#!|t##wP;=`<%l!Ns'`#$R^$f&j(OpOY##zYZ&cZr##zrs!Bws!^##z!^!_#!|!_#O##z#O#P!Cr#P#Q!Kp#Q#o##z#o#p#!|#p;'S##z;'S;=`#$}<%lO##z'`#%QP;=`<%l##z'`#%WP;=`<%l!Kp(r#%fk$f&j(Op(R!b!USOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[#%Z#[#]%Z#]#^#%Z#^#a%Z#a#b#%Z#b#g%Z#g#h#%Z#h#i%Z#i#j#%Z#j#m%Z#m#n#%Z#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W#'d](Op(R!b!USOY#'ZZr#'Zrs!GYsw#'Zwx!Nsx!P#'Z!P!Q#(]!Q!}#'Z!}#O#)w#O#P!Bb#P;'S#'Z;'S;=`#*w<%lO#'Z#W#(fe(Op(R!b!USOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[#(]#[#]*g#]#^#(]#^#a*g#a#b#(]#b#g*g#g#h#(]#h#i*g#i#j#(]#j#m*g#m#n#(]#n;'S*g;'S;=`+Z<%lO*g#W#*OZ(Op(R!bOY#)wZr#)wrs!Icsw#)wwx#!|x#O#)w#O#P!A{#P#Q#'Z#Q;'S#)w;'S;=`#*q<%lO#)w#W#*tP;=`<%l#)w#W#*zP;=`<%l#'Z(r#+W`$f&j(Op(R!bOY#*}YZ&cZr#*}rs!Jasw#*}wx##zx!^#*}!^!_#)w!_#O#*}#O#P!Cr#P#Q!;Z#Q#o#*}#o#p#)w#p;'S#*};'S;=`#,Y<%lO#*}(r#,]P;=`<%l#*}(r#,cP;=`<%l!;Z(CS#,sb$f&j(Op(R!b'v(;d!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(CS#.W_$f&j(Op(R!bS(;dOY#-{YZ&cZr#-{rs#/Vsw#-{wx#2gx!^#-{!^!_#4f!_#O#-{#O#P#0X#P#o#-{#o#p#4f#p;'S#-{;'S;=`#5e<%lO#-{(Bb#/`]$f&j(R!bS(;dOY#/VYZ&cZw#/Vwx#0Xx!^#/V!^!_#1j!_#O#/V#O#P#0X#P#o#/V#o#p#1j#p;'S#/V;'S;=`#2a<%lO#/V(AO#0`X$f&jS(;dOY#0XYZ&cZ!^#0X!^!_#0{!_#o#0X#o#p#0{#p;'S#0X;'S;=`#1d<%lO#0X(;d#1QSS(;dOY#0{Z;'S#0{;'S;=`#1^<%lO#0{(;d#1aP;=`<%l#0{(AO#1gP;=`<%l#0X(<v#1qW(R!bS(;dOY#1jZw#1jwx#0{x#O#1j#O#P#0{#P;'S#1j;'S;=`#2Z<%lO#1j(<v#2^P;=`<%l#1j(Bb#2dP;=`<%l#/V(Ap#2p]$f&j(OpS(;dOY#2gYZ&cZr#2grs#0Xs!^#2g!^!_#3i!_#O#2g#O#P#0X#P#o#2g#o#p#3i#p;'S#2g;'S;=`#4`<%lO#2g(<U#3pW(OpS(;dOY#3iZr#3irs#0{s#O#3i#O#P#0{#P;'S#3i;'S;=`#4Y<%lO#3i(<U#4]P;=`<%l#3i(Ap#4cP;=`<%l#2g(=h#4oY(Op(R!bS(;dOY#4fZr#4frs#1jsw#4fwx#3ix#O#4f#O#P#0{#P;'S#4f;'S;=`#5_<%lO#4f(=h#5bP;=`<%l#4f(CS#5hP;=`<%l#-{%#W#5xb$f&j$O$Id(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z+h#7_b$W#t$f&j(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z$/l#8rp$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#U%Z#U#V#>Q#V#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#d#AY#d#l%Z#l#m#D[#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;Rk$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#=R_$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>Zd$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#?tf$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Acc$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Bye$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Deg$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#FXi$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#HT_!d$b$f&j#|%<f(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#I__`l$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^#Jk^g!*v!h'.r(Op(R!b(tSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Kg!Q!^*g!^!_#L]!_!`#M}!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#KpX$h&j(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#LfZ#n$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#MX!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#MbX$O$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#NWX#o$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh$ Oa#[%?x$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$!T!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W$!`_#g$Ih$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh$#nafBf#o$Id$c#|$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$$s!`!a$%}!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$%O_#o$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$&Ya#n$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$'_!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$'j`#n$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$(wc(h$Ip$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$*S!P!^%Z!^!_*g!_!a%Z!a!b$+^!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$*__}'#p$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$+i`$f&j#y$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$,v_!{!Ln$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$.Q_!P(8n$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/UZ$f&jO!^$/w!^!_$0_!_#i$/w#i#j$0d#j#l$/w#l#m$2V#m#o$/w#o#p$0_#p;'S$/w;'S;=`$4b<%lO$/w(n$0OT^#S$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0dO^#S(n$0i[$f&jO!Q&c!Q![$1_![!^&c!_!c&c!c!i$1_!i#T&c#T#Z$1_#Z#o&c#o#p$3u#p;'S&c;'S;=`&w<%lO&c(n$1dZ$f&jO!Q&c!Q![$2V![!^&c!_!c&c!c!i$2V!i#T&c#T#Z$2V#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2[Z$f&jO!Q&c!Q![$2}![!^&c!_!c&c!c!i$2}!i#T&c#T#Z$2}#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3SZ$f&jO!Q&c!Q![$/w![!^&c!_!c&c!c!i$/w!i#T&c#T#Z$/w#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$3xR!Q![$4R!c!i$4R#T#Z$4R#S$4US!Q![$4R!c!i$4R#T#Z$4R#q#r$0_(n$4eP;=`<%l$/w!2r$4s_!V!+S$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$5}`#v$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$7[_$f&j(Op(R!b(X&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$8jk$f&j(Op(R!b'{&;d$[#t([!LYOY%ZYZ&cZr%Zrs&}st%Ztu$8Zuw%Zwx(rx}%Z}!O$:_!O!Q%Z!Q![$8Z![!^%Z!^!_*g!_!c%Z!c!}$8Z!}#O%Z#O#P&c#P#R%Z#R#S$8Z#S#T%Z#T#o$8Z#o#p*g#p$g%Z$g;'S$8Z;'S;=`$<e<%lO$8Z+d$:jk$f&j(Op(R!b$[#tOY%ZYZ&cZr%Zrs&}st%Ztu$:_uw%Zwx(rx}%Z}!O$:_!O!Q%Z!Q![$:_![!^%Z!^!_*g!_!c%Z!c!}$:_!}#O%Z#O#P&c#P#R%Z#R#S$:_#S#T%Z#T#o$:_#o#p*g#p$g%Z$g;'S$:_;'S;=`$<_<%lO$:_+d$<bP;=`<%l$:_(CS$<hP;=`<%l$8Z!5p$<tX![!3l(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g&CO$=la(o&;`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+^#q;'S%Z;'S;=`+a<%lO%Z%#`$?O_!Z$I`r`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$@Y_!pS$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$Aj|$f&j(Op(R!b't(;d$Y#t'{&;d([!LYOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$AX#BZ$ISEr$IS$I_$AX$I_$JTEr$JT$JU$AX$JU$KVEr$KV$KW$AX$KW&FUEr&FU&FV$AX&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AX?HUOEr(CS$Duk$f&j(Op(R!b'u(;d$Y#t'{&;d([!LYOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[jJ,GJ,UJ,2,3,4,5,6,7,8,9,10,11,12,13,FJ,new gp("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOt~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(Z~~",141,332),new gp("j~RQYZXz{^~^O'x~~aP!P!Qd~iO'y~~",25,315)],topRules:{Script:[0,6],SingleExpression:[1,269],SingleClassItem:[2,270]},dialects:{jsx:0,ts:14614},dynamicPrecedences:{69:1,79:1,81:1,165:1,193:1},specialized:[{term:319,get:r=>KJ[r]||-1},{term:334,get:r=>JJ[r]||-1},{term:70,get:r=>eee[r]||-1}],tokenPrec:14638});var zh;const $o=new Ge;function Fk(r){return $e.define({combine:r?e=>e.concat(r):void 0})}const Vg=new Ge;class Wn{constructor(e,t,n=[],i=""){this.data=e,this.name=i,Je.prototype.hasOwnProperty("tree")||Object.defineProperty(Je.prototype,"tree",{get(){return ll(this)}}),this.parser=t,this.extension=[ks.of(this),Je.languageData.of((a,s,l)=>{let u=g0(a,s,l),c=u.type.prop($o);if(!c)return[];let f=a.facet(c),h=u.type.prop(Vg);if(h){let d=u.resolve(s-u.from,l);for(let p of h)if(p.test(d,a)){let g=a.facet(p.facet);return p.type=="replace"?g:g.concat(f)}}return f})].concat(n)}isActiveAt(e,t,n=-1){return g0(e,t,n).type.prop($o)==this.data}findRegions(e){let t=e.facet(ks);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(a,s)=>{if(a.prop($o)==this.data){n.push({from:s,to:s+a.length});return}let l=a.prop(Ge.mounted);if(l){if(l.tree.prop($o)==this.data){if(l.overlay)for(let u of l.overlay)n.push({from:u.from+s,to:u.to+s});else n.push({from:s,to:s+a.length});return}else if(l.overlay){let u=n.length;if(i(l.tree,l.overlay[0].from+s),n.length>u)return}}for(let u=0;u<a.children.length;u++){let c=a.children[u];c instanceof wt&&i(c,a.positions[u]+s)}};return i(ll(e),0),n}get allowsNesting(){return!0}}Wn.setState=Xe.define();function g0(r,e,t){let n=r.facet(ks),i=ll(r).topNode;if(!n||n.allowsNesting)for(let a=i;a;a=a.enter(e,t,qt.ExcludeBuffers))a.type.isTop&&(i=a);return i}class Qc extends Wn{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=Fk(e.languageData);return new Qc(t,e.parser.configure({props:[$o.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Qc(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ll(r){let e=r.field(Wn.state,!1);return e?e.tree:wt.empty}class ree{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let uo=null;class Ac{constructor(e,t,n=[],i,a,s,l,u){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=s,this.skipped=l,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Ac(e,t,[],wt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new ree(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wt.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(bn.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(bn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=uo;uo=this;try{return e()}finally{uo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=v0(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:a,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((c,f,h,d)=>u.push({fromA:c,toA:f,fromB:h,toB:d})),n=bn.applyChanges(n,u),i=wt.empty,a=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let f=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);f<h&&l.push({from:f,to:h})}}}return new Ac(this.parser,t,n,i,a,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=v0(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends _g{createParse(t,n,i){let a=i[0].from,s=i[i.length-1].to;return{parsedPos:a,advance(){let u=uo;if(u){for(let c of i)u.tempSkipped.push(c);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=s,new wt(ur.none,[],[],s-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return uo}}function v0(r,e,t){return bn.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ss{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Ss(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Ac.create(e.facet(ks).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Ss(n)}}Wn.state=Wt.define({create:Ss.init,update(r,e){for(let t of e.effects)if(t.is(Wn.setState))return t.value;return e.startState.facet(ks)!=e.state.facet(ks)?Ss.init(e.state):r.apply(e)}});let jk=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(jk=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Wh=typeof navigator!="undefined"&&((zh=navigator.scheduling)===null||zh===void 0?void 0:zh.isInputPending)?()=>navigator.scheduling.isInputPending():null,nee=Zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Wn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Wn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=jk(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,a=n.field(Wn.state);if(a.tree==a.context.tree&&a.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Wh?Math.max(25,e.timeRemaining()-5):1e9),l=a.context.treeLen<i&&n.doc.length>i+1e3,u=a.context.work(()=>Wh&&Wh()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Wn.setState.of(new Ss(a.context))})),this.chunkBudget>0&&!(u&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Rr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ks=$e.define({combine(r){return r.length?r[0]:null},enables:r=>[Wn.state,nee,ke.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class iee{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const aee=new Ge;function see(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=r.options.simulateBreak,a=r.state.doc.lineAt(t.from),s=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let l=t.to;;){let u=e.childAfter(l);if(!u||u==n)return null;if(!u.type.isSkipped)return u.from<s?t:null;l=u.to}}function oee({closing:r,align:e=!0,units:t=1}){return n=>lee(n,e,t,r)}function lee(r,e,t,n,i){let a=r.textAfter,s=a.match(/^\s*/)[0].length,l=n&&a.slice(s,s+n.length)==n||i==r.pos+s,u=e?see(r):null;return u?l?r.column(u.from):r.column(u.to):r.baseIndent+(l?0:r.unit*t)}const uee=r=>r.baseIndent;function qh({except:r,units:e=1}={}){return t=>{let n=r&&r.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const cee=new Ge;function fee(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}const hee=Object.create(null),m0=[ur.none],y0=[],O0=Object.create(null),dee=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])dee[r]=pee(hee,e);function Yh(r,e){y0.indexOf(r)>-1||(y0.push(r),console.warn(e))}function pee(r,e){let t=[];for(let l of e.split(" ")){let u=[];for(let c of l.split(".")){let f=r[c]||te[c];f?typeof f=="function"?u.length?u=u.map(f):Yh(c,`Modifier ${c} used at start of tag`):u.length?Yh(c,`Tag ${c} used as modifier`):u=Array.isArray(f)?f:[f]:Yh(c,`Unknown highlighting tag ${c}`)}for(let c of u)t.push(c)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(l=>l.id),a=O0[i];if(a)return a.id;let s=O0[i]=ur.define({id:m0.length,name:n,props:[Mg({[n]:t})]});return m0.push(s),s.id}Et.RTL,Et.LTR;const Gk=[Dr("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Dr("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Dr("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Dr("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Dr("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Dr(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Dr("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Dr(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Dr(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Dr('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Dr('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],gee=Gk.concat([Dr("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Dr("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Dr("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),b0=new y6,Uk=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function co(r){return(e,t)=>{let n=e.node.getChild("VariableDefinition");return n&&t(n,r),!0}}const vee=["FunctionDeclaration"],mee={FunctionDeclaration:co("function"),ClassDeclaration:co("class"),ClassExpression:()=>!0,EnumDeclaration:co("constant"),TypeAliasDeclaration:co("type"),NamespaceDeclaration:co("namespace"),VariableDefinition(r,e){r.matchContext(vee)||e(r,"variable")},TypeDefinition(r,e){e(r,"type")},__proto__:null};function Hk(r,e){let t=b0.get(e);if(t)return t;let n=[],i=!0;function a(s,l){let u=r.sliceString(s.from,s.to);n.push({label:u,type:l})}return e.cursor(qt.IncludeAnonymous).iterate(s=>{if(i)i=!1;else if(s.name){let l=mee[s.name];if(l&&l(s,a)||Uk.has(s.name))return!1}else if(s.to-s.from>8192){for(let l of Hk(r,s.node))n.push(l);return!1}}),b0.set(e,n),n}const w0=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Kk=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function yee(r){let e=ll(r.state).resolveInner(r.pos,-1);if(Kk.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&w0.test(r.state.sliceDoc(e.from,e.to));if(!t&&!r.explicit)return null;let n=[];for(let i=e;i;i=i.parent)Uk.has(i.name)&&(n=n.concat(Hk(r.state.doc,i)));return{options:n,from:t?e.from:r.pos,validFor:w0}}const ya=Qc.define({name:"javascript",parser:tee.configure({props:[aee.add({IfStatement:qh({except:/^\s*({|else\b)/}),TryStatement:qh({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:uee,SwitchBody:r=>{let e=r.textAfter,t=/^\s*\}/.test(e),n=/^\s*(case|default)\b/.test(e);return r.baseIndent+(t?0:n?1:2)*r.unit},Block:oee({closing:"}"}),ArrowFunction:r=>r.baseIndent+r.unit,"TemplateString BlockComment":()=>null,"Statement Property":qh({except:/^{/}),JSXElement(r){let e=/^\s*<\//.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},JSXEscape(r){let e=/\s*\}/.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},"JSXOpenTag JSXSelfClosingTag"(r){return r.column(r.node.from)+r.unit}}),cee.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":fee,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Jk={test:r=>/^JSX/.test(r.name),facet:Fk({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Oee=ya.configure({dialect:"ts"},"typescript"),bee=ya.configure({dialect:"jsx",props:[Vg.add(r=>r.isTop?[Jk]:void 0)]}),wee=ya.configure({dialect:"jsx ts",props:[Vg.add(r=>r.isTop?[Jk]:void 0)]},"typescript");let e$=r=>({label:r,type:"keyword"});const t$="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e$),xee=t$.concat(["declare","implements","private","protected","public"].map(e$));function See(r={}){let e=r.jsx?r.typescript?wee:bee:r.typescript?Oee:ya,t=r.typescript?gee.concat(xee):Gk.concat(t$);return new iee(e,[ya.data.of({autocomplete:OH(Kk,rk(t))}),ya.data.of({autocomplete:yee}),r.jsx?Pee:[]])}function kee(r){for(;;){if(r.name=="JSXOpenTag"||r.name=="JSXSelfClosingTag"||r.name=="JSXFragmentTag")return r;if(r.name=="JSXEscape"||!r.parent)return null;r=r.parent}}function x0(r,e,t=r.length){for(let n=e==null?void 0:e.firstChild;n;n=n.nextSibling)if(n.name=="JSXIdentifier"||n.name=="JSXBuiltin"||n.name=="JSXNamespacedName"||n.name=="JSXMemberExpression")return r.sliceString(n.from,Math.min(n.to,t));return""}const $ee=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Pee=ke.inputHandler.of((r,e,t,n,i)=>{if(($ee?r.composing:r.compositionStarted)||r.state.readOnly||e!=t||n!=">"&&n!="/"||!ya.isActiveAt(r.state,e,-1))return!1;let a=i(),{state:s}=a,l=s.changeByRange(u=>{var c;let{head:f}=u,h=ll(s).resolveInner(f-1,-1),d;if(h.name=="JSXStartTag"&&(h=h.parent),!(s.doc.sliceString(f-1,f)!=n||h.name=="JSXAttributeValue"&&h.to>f)){if(n==">"&&h.name=="JSXFragmentTag")return{range:u,changes:{from:f,insert:"</>"}};if(n=="/"&&h.name=="JSXStartCloseTag"){let p=h.parent,g=p.parent;if(g&&p.from==f-2&&((d=x0(s.doc,g.firstChild,f))||((c=g.firstChild)===null||c===void 0?void 0:c.name)=="JSXFragmentTag")){let y=`${d}>`;return{range:ue.cursor(f+y.length,-1),changes:{from:f,insert:y}}}}else if(n==">"){let p=kee(h);if(p&&!/^\/?>|^<\//.test(s.doc.sliceString(f,f+2))&&(d=x0(s.doc,p,f)))return{range:u,changes:{from:f,insert:`</${d}>`}}}}return{range:u}});return l.changes.empty?!1:(r.dispatch([a,s.update(l,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function bt(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?r.setAttribute(n,i):i!=null&&(r[n]=i)}e++}for(;e<arguments.length;e++)r$(r,arguments[e]);return r}function r$(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)r$(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}class Cee{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class fa{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,a=n.facet(va).markerFilter;a&&(i=a(i));let s=ze.set(i.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?ze.widget({widget:new Ree(l),diagnostic:l}).range(l.from):ze.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new fa(s,t,$s(s))}}function $s(r,e=null,t=0){let n=null;return r.between(t,1e9,(i,a,{spec:s})=>{if(!(e&&s.diagnostic!=e))return n=new Cee(i,a,s.diagnostic),!1}),n}function n$(r,e){return!!(r.effects.some(t=>t.is(Lf))||r.changes.touchesRange(e.pos))}function i$(r,e){return r.field(Fr,!1)?e:e.concat(Xe.appendConfig.of(f$))}function Eee(r,e){return{effects:i$(r,[Lf.of(e)])}}const Lf=Xe.define(),Fg=Xe.define(),a$=Xe.define(),Fr=Wt.define({create(){return new fa(ze.none,null,null)},update(r,e){if(e.docChanged){let t=r.diagnostics.map(e.changes),n=null;if(r.selected){let i=e.changes.mapPos(r.selected.from,1);n=$s(t,r.selected.diagnostic,i)||$s(t,null,i)}r=new fa(t,r.panel,n)}for(let t of e.effects)t.is(Lf)?r=fa.init(t.value,r.panel,e.state):t.is(Fg)?r=new fa(r.diagnostics,t.value?Bf.open:null,r.selected):t.is(a$)&&(r=new fa(r.diagnostics,r.panel,t.value));return r},provide:r=>[nl.from(r,e=>e.panel),ke.decorations.from(r,e=>e.diagnostics)]}),Tee=ze.mark({class:"cm-lintRange cm-lintRange-active"});function Qee(r,e,t){let{diagnostics:n}=r.state.field(Fr),i=[],a=2e8,s=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(u,c,{spec:f})=>{e>=u&&e<=c&&(u==c||(e>u||t>0)&&(e<c||t<0))&&(i.push(f.diagnostic),a=Math.min(u,a),s=Math.max(c,s))});let l=r.state.facet(va).tooltipFilter;return l&&(i=l(i)),i.length?{pos:a,end:s,above:r.state.doc.lineAt(a).to<s,create(){return{dom:s$(r,i)}}}:null}function s$(r,e){return bt("ul",{class:"cm-tooltip-lint"},e.map(t=>l$(r,t,!1)))}const Aee=r=>{let e=r.state.field(Fr,!1);(!e||!e.panel)&&r.dispatch({effects:i$(r.state,[Fg.of(!0)])});let t=rl(r,Bf.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},S0=r=>{let e=r.state.field(Fr,!1);return!e||!e.panel?!1:(r.dispatch({effects:Fg.of(!1)}),!0)},Dee=r=>{let e=r.state.field(Fr,!1);if(!e)return!1;let t=r.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},_ee=[{key:"Mod-Shift-m",run:Aee,preventDefault:!0},{key:"F8",run:Dee}],Mee=Zt.fromClass(class{constructor(r){this.view=r,this.timeout=-1,this.set=!0;let{delay:e}=r.state.facet(va);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let r=Date.now();if(r<this.lintTime-10)setTimeout(this.run,this.lintTime-r);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(va);Promise.all(t.map(n=>Promise.resolve(n(this.view)))).then(n=>{let i=n.reduce((a,s)=>a.concat(s));this.view.state.doc==e.doc&&this.view.dispatch(Eee(this.view.state,i))},n=>{Rr(this.view.state,n)})}}update(r){let e=r.state.facet(va);(r.docChanged||e!=r.startState.facet(va)||e.needsRefresh&&e.needsRefresh(r))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),va=$e.define({combine(r){return Object.assign({sources:r.map(e=>e.source)},$n(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function Zee(r,e={}){return[va.of({source:r,config:e}),Mee,f$]}function o$(r){let e=[];if(r)e:for(let{name:t}of r){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function l$(r,e,t){var n;let i=t?o$(e.actions):[];return bt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},bt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,s)=>{let l=!1,u=d=>{if(d.preventDefault(),l)return;l=!0;let p=$s(r.state.field(Fr).diagnostics,e);p&&a.apply(r,p.from,p.to)},{name:c}=a,f=i[s]?c.indexOf(i[s]):-1,h=f<0?c:[c.slice(0,f),bt("u",c.slice(f,f+1)),c.slice(f+1)];return bt("button",{type:"button",class:"cm-diagnosticAction",onclick:u,onmousedown:u,"aria-label":` Action: ${c}${f<0?"":` (access key "${i[s]})"`}.`},h)}),e.source&&bt("div",{class:"cm-diagnosticSource"},e.source))}class Ree extends ta{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return bt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class k0{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=l$(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Bf{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)S0(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],s=o$(a.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==i.keyCode){let u=$s(this.view.state.field(Fr).diagnostics,a);u&&a.actions[l].apply(e,u.from,u.to)}}else return;i.preventDefault()},n=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=bt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=bt("div",{class:"cm-panel-lint"},this.list,bt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>S0(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Fr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Fr),n=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(s,l,{spec:u})=>{let c=-1,f;for(let h=n;h<this.items.length;h++)if(this.items[h].diagnostic==u.diagnostic){c=h;break}c<0?(f=new k0(this.view,u.diagnostic),this.items.splice(n,0,f),i=!0):(f=this.items[c],c>n&&(this.items.splice(n,c-n),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),a=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new k0(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Fr),n=$s(t.diagnostics,this.items[e].diagnostic);!n||this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:a$.of(n)})}static open(e){return new Bf(e)}}function Nu(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Xh(r){return Nu(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Lee=ke.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Xh("#d11")},".cm-lintRange-warning":{backgroundImage:Xh("orange")},".cm-lintRange-info":{backgroundImage:Xh("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class Bee extends Vn{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,n)=>{let i=n.severity;return i=="error"||i=="warning"&&t=="info"?i:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let n=this.diagnostics,i=e.state.facet(If).tooltipFilter;return i&&(n=i(n)),n.length&&(t.onmouseover=()=>Nee(e,t,n)),t}}function Iee(r,e){let t=n=>{let i=e.getBoundingClientRect();if(!(n.clientX>i.left-10&&n.clientX<i.right+10&&n.clientY>i.top-10&&n.clientY<i.bottom+10)){for(let a=n.target;a;a=a.parentNode)if(a.nodeType==1&&a.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),r.state.field(c$)&&r.dispatch({effects:jg.of(null)})}};window.addEventListener("mousemove",t)}function Nee(r,e,t){function n(){let s=r.elementAtHeight(e.getBoundingClientRect().top+5-r.documentTop);r.coordsAtPos(s.from)&&r.dispatch({effects:jg.of({pos:s.from,above:!1,create(){return{dom:s$(r,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Iee(r,e)}let{hoverTime:i}=r.state.facet(If),a=setTimeout(n,i);e.onmouseout=()=>{clearTimeout(a),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(a),a=setTimeout(n,i)}}function zee(r,e){let t=Object.create(null);for(let i of e){let a=r.lineAt(i.from);(t[a.from]||(t[a.from]=[])).push(i)}let n=[];for(let i in t)n.push(new Bee(t[i]).range(+i));return tt.of(n,!0)}const Wee=MS({class:"cm-gutter-lint",markers:r=>r.state.field(u$)}),u$=Wt.define({create(){return tt.empty},update(r,e){r=r.map(e.changes);let t=e.state.facet(If).markerFilter;for(let n of e.effects)if(n.is(Lf)){let i=n.value;t&&(i=t(i||[])),r=zee(e.state.doc,i.slice(0))}return r}}),jg=Xe.define(),c$=Wt.define({create(){return null},update(r,e){return r&&e.docChanged&&(r=n$(e,r)?null:Object.assign(Object.assign({},r),{pos:e.changes.mapPos(r.pos)})),e.effects.reduce((t,n)=>n.is(jg)?n.value:t,r)},provide:r=>$f.from(r)}),qee=ke.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Nu('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Nu('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Nu('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),f$=[Fr,ke.decorations.compute([Fr],r=>{let{selected:e,panel:t}=r.field(Fr);return!e||!t||e.from==e.to?ze.none:ze.set([Tee.range(e.from,e.to)])}),J9(Qee,{hideOn:n$}),Lee],If=$e.define({combine(r){return $n(r,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function $0(r={}){return[If.of(r),u$,Wee,qee,c$]}const P0=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class Ps{constructor(e,t,n=0,i=e.length,a,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=a?l=>a(P0(l)):P0,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return tr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=mg(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Yr(e);let i=this.normalize(t);for(let a=0,s=n;;a++){let l=i.charCodeAt(a),u=this.match(l,s);if(a==i.length-1){if(u)return this.value=u,this;break}s==n&&a<t.length&&t.charCodeAt(a)==l&&s++}}}match(e,t){let n=null;for(let i=0;i<this.matches.length;i+=2){let a=this.matches[i],s=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?n={from:this.matches[i+1],to:t+1}:(this.matches[i]++,s=!0)),s||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol!="undefined"&&(Ps.prototype[Symbol.iterator]=function(){return this});const h$={from:-1,to:-1,match:/.*/.exec("")},Gg="gm"+(/x/.unicode==null?"":"u");class d${constructor(e,t,n,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=h$,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new p$(e,t,n,i,a);this.re=new RegExp(t,Gg+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=Dc(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=Dc(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Vh=new WeakMap;class vs{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=Vh.get(e);if(!i||i.from>=n||i.to<=t){let l=new vs(t,e.sliceString(t,n));return Vh.set(e,l),l}if(i.from==t&&i.to==n)return i;let{text:a,from:s}=i;return s>t&&(a=e.sliceString(t,s)+a,s=t),i.to<n&&(a+=e.sliceString(i.to,n)),Vh.set(e,new vs(s,a)),new vs(t,a.slice(t-s,n-s))}}class p${constructor(e,t,n,i,a){this.text=e,this.to=a,this.done=!1,this.value=h$,this.matchPos=Dc(e,i),this.re=new RegExp(t,Gg+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=vs.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=Dc(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=vs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(d$.prototype[Symbol.iterator]=p$.prototype[Symbol.iterator]=function(){return this});function Yee(r){try{return new RegExp(r,Gg),!0}catch{return!1}}function Dc(r,e){if(e>=r.length)return e;let t=r.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function yp(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=bt("input",{class:"cm-textfield",name:"line",value:e}),n=bt("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),r.dispatch({effects:_c.of(!1)}),r.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},bt("label",r.state.phrase("Go to line"),": ",t)," ",bt("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!a)return;let{state:s}=r,l=s.doc.lineAt(s.selection.main.head),[,u,c,f,h]=a,d=f?+f.slice(1):0,p=c?+c:l.number;if(c&&h){let m=p/100;u&&(m=m*(u=="-"?-1:1)+l.number/s.doc.lines),p=Math.round(s.doc.lines*m)}else c&&u&&(p=p*(u=="-"?-1:1)+l.number);let g=s.doc.line(Math.max(1,Math.min(s.doc.lines,p))),y=ue.cursor(g.from+Math.max(0,Math.min(d,g.length)));r.dispatch({effects:[_c.of(!1),ke.scrollIntoView(y.from,{y:"center"})],selection:y}),r.focus()}return{dom:n}}const _c=Xe.define(),C0=Wt.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(_c)&&(r=t.value);return r},provide:r=>nl.from(r,e=>e?yp:null)}),Xee=r=>{let e=rl(r,yp);if(!e){let t=[_c.of(!0)];r.state.field(C0,!1)==null&&t.push(Xe.appendConfig.of([C0,Vee])),r.dispatch({effects:t}),e=rl(r,yp)}return e&&e.dom.querySelector("input").select(),!0},Vee=ke.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Fee={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},g$=$e.define({combine(r){return $n(r,Fee,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function jee(r){let e=[Jee,Kee];return r&&e.push(g$.of(r)),e}const Gee=ze.mark({class:"cm-selectionMatch"}),Uee=ze.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function E0(r,e,t,n){return(t==0||r(e.sliceDoc(t-1,t))!=Dt.Word)&&(n==e.doc.length||r(e.sliceDoc(n,n+1))!=Dt.Word)}function Hee(r,e,t,n){return r(e.sliceDoc(t,t+1))==Dt.Word&&r(e.sliceDoc(n-1,n))==Dt.Word}const Kee=Zt.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(g$),{state:t}=r,n=t.selection;if(n.ranges.length>1)return ze.none;let i=n.main,a,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return ze.none;let u=t.wordAt(i.head);if(!u)return ze.none;s=t.charCategorizer(i.head),a=t.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return ze.none;if(e.wholeWords){if(a=t.sliceDoc(i.from,i.to),s=t.charCategorizer(i.head),!(E0(s,t,i.from,i.to)&&Hee(s,t,i.from,i.to)))return ze.none}else if(a=t.sliceDoc(i.from,i.to).trim(),!a)return ze.none}let l=[];for(let u of r.visibleRanges){let c=new Ps(t.doc,a,u.from,u.to);for(;!c.next().done;){let{from:f,to:h}=c.value;if((!s||E0(s,t,f,h))&&(i.empty&&f<=i.from&&h>=i.to?l.push(Uee.range(f,h)):(f>=i.to||h<=i.from)&&l.push(Gee.range(f,h)),l.length>e.maxMatches))return ze.none}}return ze.set(l)}},{decorations:r=>r.decorations}),Jee=ke.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),ete=({state:r,dispatch:e})=>{let{selection:t}=r,n=ue.create(t.ranges.map(i=>r.wordAt(i.head)||ue.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(r.update({selection:n})),!0)};function tte(r,e){let{main:t,ranges:n}=r.selection,i=r.wordAt(t.head),a=i&&i.from==t.from&&i.to==t.to;for(let s=!1,l=new Ps(r.doc,e,n[n.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new Ps(r.doc,e,0,Math.max(0,n[n.length-1].from-1)),s=!0}else{if(s&&n.some(u=>u.from==l.value.from))continue;if(a){let u=r.wordAt(l.value.from);if(!u||u.from!=l.value.from||u.to!=l.value.to)continue}return l.value}}const rte=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(a=>a.from===a.to))return ete({state:r,dispatch:e});let n=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(a=>r.sliceDoc(a.from,a.to)!=n))return!1;let i=tte(r,n);return i?(e(r.update({selection:r.selection.addRange(ue.range(i.from,i.to),!1),effects:ke.scrollIntoView(i.to)})),!0):!1},js=$e.define({combine(r){return $n(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new pte(e),scrollToMatch:e=>ke.scrollIntoView(e)})}});class v${constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Yee(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ste(this):new ite(this)}getCursor(e,t=0,n){let i=e.doc?e:Je.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?Ja(this,i,t,n):Ka(this,i,t,n)}}class m${constructor(e){this.spec=e}}function Ka(r,e,t,n){return new Ps(e.doc,r.unquoted,t,n,r.caseSensitive?void 0:i=>i.toLowerCase(),r.wholeWord?nte(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function nte(r,e){return(t,n,i,a)=>((a>t||a+i.length<n)&&(a=Math.max(0,t-2),i=r.sliceString(a,Math.min(r.length,n+2))),(e(Mc(i,t-a))!=Dt.Word||e(Zc(i,t-a))!=Dt.Word)&&(e(Zc(i,n-a))!=Dt.Word||e(Mc(i,n-a))!=Dt.Word))}class ite extends m${constructor(e){super(e)}nextMatch(e,t,n){let i=Ka(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=Ka(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let a=Math.max(t,i-1e4-this.spec.unquoted.length),s=Ka(this.spec,e,a,i),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(a==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=Ka(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=Ka(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function Ja(r,e,t,n){return new d$(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?ate(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function Mc(r,e){return r.slice(ar(r,e,!1),e)}function Zc(r,e){return r.slice(e,ar(r,e))}function ate(r){return(e,t,n)=>!n[0].length||(r(Mc(n.input,n.index))!=Dt.Word||r(Zc(n.input,n.index))!=Dt.Word)&&(r(Zc(n.input,n.index+n[0].length))!=Dt.Word||r(Mc(n.input,n.index+n[0].length))!=Dt.Word)}class ste extends m${nextMatch(e,t,n){let i=Ja(this.spec,e,n,e.doc.length).next();return i.done&&(i=Ja(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let a=Math.max(t,n-i*1e4),s=Ja(this.spec,e,a,n),l=null;for(;!s.next().done;)l=s.value;if(l&&(a==t||l.from>a+10))return l;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:t)}matchAll(e,t){let n=Ja(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let a=Ja(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const ul=Xe.define(),Ug=Xe.define(),Zi=Wt.define({create(r){return new Fh(Op(r).create(),null)},update(r,e){for(let t of e.effects)t.is(ul)?r=new Fh(t.value.create(),r.panel):t.is(Ug)&&(r=new Fh(r.query,t.value?Hg:null));return r},provide:r=>nl.from(r,e=>e.panel)});class Fh{constructor(e,t){this.query=e,this.panel=t}}const ote=ze.mark({class:"cm-searchMatch"}),lte=ze.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ute=Zt.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Zi))}update(r){let e=r.state.field(Zi);(e!=r.startState.field(Zi)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return ze.none;let{view:t}=this,n=new Xi;for(let i=0,a=t.visibleRanges,s=a.length;i<s;i++){let{from:l,to:u}=a[i];for(;i<s-1&&u>a[i+1].from-2*250;)u=a[++i].to;r.highlight(t.state,l,u,(c,f)=>{let h=t.state.selection.ranges.some(d=>d.from==c&&d.to==f);n.add(c,f,h?lte:ote)})}return n.finish()}},{decorations:r=>r.decorations});function Ml(r){return e=>{let t=e.state.field(Zi,!1);return t&&t.query.spec.valid?r(e,t):b$(e)}}const Rc=Ml((r,{query:e})=>{let{to:t}=r.state.selection.main,n=e.nextMatch(r.state,t,t);if(!n)return!1;let i=ue.single(n.from,n.to),a=r.state.facet(js);return r.dispatch({selection:i,effects:[Kg(r,n),a.scrollToMatch(i.main,r)],userEvent:"select.search"}),O$(r),!0}),Lc=Ml((r,{query:e})=>{let{state:t}=r,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let a=ue.single(i.from,i.to),s=r.state.facet(js);return r.dispatch({selection:a,effects:[Kg(r,i),s.scrollToMatch(a.main,r)],userEvent:"select.search"}),O$(r),!0}),cte=Ml((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:ue.create(t.map(n=>ue.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),fte=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,a=[],s=0;for(let l=new Ps(r.doc,r.sliceDoc(n,i));!l.next().done;){if(a.length>1e3)return!1;l.value.from==n&&(s=a.length),a.push(ue.range(l.value.from,l.value.to))}return e(r.update({selection:ue.create(a,s),userEvent:"select.search.matches"})),!0},T0=Ml((r,{query:e})=>{let{state:t}=r,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,n,n);if(!a)return!1;let s=[],l,u,c=[];if(a.from==n&&a.to==i&&(u=t.toText(e.getReplacement(a)),s.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(t,a.from,a.to),c.push(ke.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let f=s.length==0||s[0].from>=a.to?0:a.to-a.from-u.length;l=ue.single(a.from-f,a.to-f),c.push(Kg(r,a)),c.push(t.facet(js).scrollToMatch(l.main,r))}return r.dispatch({changes:s,selection:l,effects:c,userEvent:"input.replace"}),!0}),hte=Ml((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(i=>{let{from:a,to:s}=i;return{from:a,to:s,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:ke.announce.of(n),userEvent:"input.replace.all"}),!0});function Hg(r){return r.state.facet(js).createPanel(r)}function Op(r,e){var t,n,i,a,s;let l=r.selection.main,u=l.empty||l.to>l.from+100?"":r.sliceDoc(l.from,l.to);if(e&&!u)return e;let c=r.facet(js);return new v$({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:c.regexp,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:c.wholeWord})}function y$(r){let e=rl(r,Hg);return e&&e.dom.querySelector("[main-field]")}function O$(r){let e=y$(r);e&&e==r.root.activeElement&&e.select()}const b$=r=>{let e=r.state.field(Zi,!1);if(e&&e.panel){let t=y$(r);if(t&&t!=r.root.activeElement){let n=Op(r.state,e.query.spec);n.valid&&r.dispatch({effects:ul.of(n)}),t.focus(),t.select()}}else r.dispatch({effects:[Ug.of(!0),e?ul.of(Op(r.state,e.query.spec)):Xe.appendConfig.of(vte)]});return!0},w$=r=>{let e=r.state.field(Zi,!1);if(!e||!e.panel)return!1;let t=rl(r,Hg);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:Ug.of(!1)}),!0},dte=[{key:"Mod-f",run:b$,scope:"editor search-panel"},{key:"F3",run:Rc,shift:Lc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Rc,shift:Lc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:w$,scope:"editor search-panel"},{key:"Mod-Shift-l",run:fte},{key:"Mod-Alt-g",run:Xee},{key:"Mod-d",run:rte,preventDefault:!0}];class pte{constructor(e){this.view=e;let t=this.query=e.state.field(Zi).query.spec;this.commit=this.commit.bind(this),this.searchField=bt("input",{value:t.search,placeholder:zr(e,"Find"),"aria-label":zr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=bt("input",{value:t.replace,placeholder:zr(e,"Replace"),"aria-label":zr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=bt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=bt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=bt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,a,s){return bt("button",{class:"cm-button",name:i,onclick:a,type:"button"},s)}this.dom=bt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>Rc(e),[zr(e,"next")]),n("prev",()=>Lc(e),[zr(e,"previous")]),n("select",()=>cte(e),[zr(e,"all")]),bt("label",null,[this.caseField,zr(e,"match case")]),bt("label",null,[this.reField,zr(e,"regexp")]),bt("label",null,[this.wordField,zr(e,"by word")]),...e.state.readOnly?[]:[bt("br"),this.replaceField,n("replace",()=>T0(e),[zr(e,"replace")]),n("replaceAll",()=>hte(e),[zr(e,"replace all")])],bt("button",{name:"close",onclick:()=>w$(e),"aria-label":zr(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new v$({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ul.of(e)}))}keydown(e){d9(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Lc:Rc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),T0(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(ul)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(js).top}}function zr(r,e){return r.state.phrase(e)}const Ou=30,bu=/[\s\.,:;?!]/;function Kg(r,{from:e,to:t}){let n=r.state.doc.lineAt(e),i=r.state.doc.lineAt(t).to,a=Math.max(n.from,e-Ou),s=Math.min(i,t+Ou),l=r.state.sliceDoc(a,s);if(a!=n.from){for(let u=0;u<Ou;u++)if(!bu.test(l[u+1])&&bu.test(l[u])){l=l.slice(u);break}}if(s!=i){for(let u=l.length-1;u>l.length-Ou;u--)if(!bu.test(l[u-1])&&bu.test(l[u])){l=l.slice(0,u);break}}return ke.announce.of(`${r.state.phrase("current match")}. ${l} ${r.state.phrase("on line")} ${n.number}.`)}const gte=ke.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),vte=[Zi,Wa.low(ute),gte];const mte=["id"],yte={__name:"CodeMirror",props:Oa({dense:{type:Boolean,default:null},extensions:{type:Array,default(){return[]}},options:{type:Object,default(){return{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!1,printMargin:!1,tabSize:2}}},mode:{type:[Object,String],default:"javascript"},readonly:{type:Boolean,default:!1},theme:{type:String,meta:{options:[null,"chrome","monokai"]}}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:Oa(["update:view"],["update:modelValue"]),setup(r,{emit:e}){const t=r,n=Nc(r,"modelValue"),i=Er(),a=`domId_${ge.randomId()}`,s=e;ft(!0);let l;ce(()=>ge.isNil(t.dense)?i.screen.gt.sm:t.dense);const u={readonly:Je.readOnly.of(t.readonly)};async function c(f){let h,d=[],p=[];const g=ge.get(f,"language",f),y=ge.get(f,"options",{});if(g==="graphql")h=ge.isEmpty(y)?graphql():graphql(y);else if(g!=="html")if(g==="json"){const{json:v,jsonParseLinter:O}=await G$(()=>import("./index.31fb6f8e.js"),["assets/index.31fb6f8e.js","assets/index.efc25c54.js","assets/index.ba19244c.css","assets/format.e332677a.js","assets/index.61529dc7.js"]);h=v(),d=$0(),p=Zee(O())}else h=See({jsx:!1,typescript:!1}),d=$0();let m=[];return u.language?l.dispatch({effects:u.language.reconfigure(h)}):(u.language=new ma,m.push(u.language.of(h))),u.lintGutter?l.dispatch({effects:u.lintGutter.reconfigure(d)}):(u.lintGutter=new ma,m.push(u.lintGutter.of(d))),u.linter?l.dispatch({effects:u.linter.reconfigure(p)}):(u.linter=new ma,m.push(u.linter.of(p))),m}return Da(()=>t.value,(f,h)=>{!l||l.state.doc.toString()!==f&&l.dispatch({changes:{from:0,to:l.state.doc.length,insert:f}})}),Sp(async()=>{const f=document.querySelector(`#${a}_editor`),h=n.value,d=await c(t.mode);l=new ke({parent:f,state:Je.create({doc:h,extensions:[l6(),f6(),Q9(),OK(),eH(),O9(),k9(),Je.allowMultipleSelections.of(!0),z6(),rH(aH,{fallback:!0}),hH(),HH(),lK(),W9(),X9(),R9(),jee(),kf.of([...tK,...wJ,...dte,...EK,...H6,...dk,..._ee,{key:"Tab",preventDefault:!0,run:yJ}]),u.readonly,...d,ke.updateListener.of(p=>{s("update:view",p),p.docChanged&&(n.value=p.state.doc.toString())})]})})}),(f,h)=>(le(),ri("div",{class:"obiwan-code-mirror",id:`${a}_editor`},null,8,mte))}},Ote=ni("div",{class:"text-h6"},"Edit Properties",-1),jh={__name:"CyStyleEditorEditDialog",props:{dense:{type:Boolean,required:!1,default:null},value:{type:String,default:""}},emits:[...uc.emits],setup(r,{emit:e}){Ic();const t=Er();`${ge.randomId()}`,cl(),Ri("store");const n=r,i=ft(n.value),a=Qt({value:ce({get(){return i.value},set:ge.debounce(d=>{try{JSON.parse(d),i.value=d}catch{}},300)}),value:n.value,mode:"json"});ce(()=>ge.isNil(n.dense)?t.screen.gt.sm:n.dense);const{dialogRef:s,onDialogHide:l,onDialogOK:u,onDialogCancel:c}=uc();function f(){u(a.value)}function h(){c()}return(d,p)=>(le(),fe(M0,{class:"obiwan-custom-dialog obiwan-cy-style-editor-edit-dialog","full-height":"","full-width":"",ref_key:"dialogRef",ref:s,onHide:dt(l)},{default:_(()=>[L(kp,{class:"q-dialog-plugin d-flex-column fit"},{default:_(()=>[L(zu,{class:"flex-grow-0"},{default:_(()=>[Ote]),_:1}),L(zu,{class:"flex-grow-1 overflow-y-auto"},{default:_(()=>[L(yte,{class:"fit",dense:r.dense,mode:a.mode,modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=g=>a.value=g)},null,8,["dense","mode","modelValue"])]),_:1}),L(U$,{class:"flex-grow-0",align:"right"},{default:_(()=>[L(Ke,{color:"primary",label:"OK",onClick:f}),L(Ke,{color:"primary",label:"Cancel",onClick:h})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};function x$(r){return K$()?(J$(r),!0):!1}function Nf(r){return typeof r=="function"?r():dt(r)}const Zl=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const bte=Object.prototype.toString,wte=r=>bte.call(r)==="[object Object]",xte=()=>{};function Ste(r){let e;function t(){return e||(e=r()),e}return t.reset=async()=>{const n=e;e=void 0,n&&await n},t}function kte(r,e,t={}){const{immediate:n=!0}=t,i=ft(!1);let a=null;function s(){a&&(clearTimeout(a),a=null)}function l(){i.value=!1,s()}function u(...c){s(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,r(...c)},Nf(e))}return n&&(i.value=!0,Zl&&u()),x$(l),{isPending:H$(i),start:u,stop:l}}function $te(r){var e;const t=Nf(r);return(e=t==null?void 0:t.$el)!=null?e:t}const Pte=Zl?window:void 0;Zl&&window.document;const S$=Zl?window.navigator:void 0;Zl&&window.location;function k$(...r){let e,t,n,i;if(typeof r[0]=="string"||Array.isArray(r[0])?([t,n,i]=r,e=Pte):[e,t,n,i]=r,!e)return xte;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const a=[],s=()=>{a.forEach(f=>f()),a.length=0},l=(f,h,d,p)=>(f.addEventListener(h,d,p),()=>f.removeEventListener(h,d,p)),u=Da(()=>[$te(e),Nf(i)],([f,h])=>{if(s(),!f)return;const d=wte(h)?{...h}:h;a.push(...t.flatMap(p=>n.map(g=>l(f,p,g,d))))},{immediate:!0,flush:"post"}),c=()=>{u(),s()};return x$(c),c}function Cte(){const r=ft(!1);return Cs()&&Sp(()=>{r.value=!0}),r}function $$(r){const e=Cte();return ce(()=>(e.value,Boolean(r())))}function Bc(r,e={}){const{controls:t=!1,navigator:n=S$}=e,i=$$(()=>n&&"permissions"in n);let a;const s=typeof r=="string"?{name:r}:r,l=ft(),u=()=>{a&&(l.value=a.state)},c=Ste(async()=>{if(!!i.value){if(!a)try{a=await n.permissions.query(s),k$(a,"change",u),u()}catch{l.value="prompt"}return a}});return c(),t?{state:l,isSupported:i,query:c}:l}function Ete(r={}){const{navigator:e=S$,read:t=!1,source:n,copiedDuring:i=1500,legacy:a=!1}=r,s=$$(()=>e&&"clipboard"in e),l=Bc("clipboard-read"),u=Bc("clipboard-write"),c=ce(()=>s.value||a),f=ft(""),h=ft(!1),d=kte(()=>h.value=!1,i);function p(){s.value&&l.value!=="denied"?e.clipboard.readText().then(v=>{f.value=v}):f.value=m()}c.value&&t&&k$(["copy","cut"],p);async function g(v=Nf(n)){c.value&&v!=null&&(s.value&&u.value!=="denied"?await e.clipboard.writeText(v):y(v),f.value=v,h.value=!0,d.start())}function y(v){const O=document.createElement("textarea");O.value=v!=null?v:"",O.style.position="absolute",O.style.opacity="0",document.body.appendChild(O),O.select(),document.execCommand("copy"),O.remove()}function m(){var v,O,b;return(b=(O=(v=document==null?void 0:document.getSelection)==null?void 0:v.call(document))==null?void 0:O.toString())!=null?b:""}return{isSupported:c,text:f,copied:h,copy:g}}const Tte={class:"d-flex items-center bg-white"},Qte=["id"],Ate=["id"],Dte={__name:"ODiagram",props:Oa({dense:{type:Boolean,default:null},edgeHandles:{type:Object},gridGuide:{type:Object,default(){return{snapToGridOnRelease:!1,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:50,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1}}},toolbar:{type:Boolean,default:!0},useMenu:Object,value:{default:null}},{selection:{},selectionModifiers:{}}),emits:Oa(["dblclick","edit","node:added","paste","position","select","update:modelValue"],["update:selection"]),setup(r,{emit:e}){const t=ft(null),n=Er(),i=`domId_${ge.randomId()}`,a=cl();aa.use(pM),aa.use(dM),aa.use(vM),aa.use(Bj),aa.use(NG),aa.use(t8);const{copy:s,isSupported:l,text:u}=Ete({legacy:!0});Bc("clipboard-read"),Bc("clipboard-write");const c=r,f=ft(!0),h=Nc(r,"selection");ce(()=>ge.isNil(c.dense)?n.screen.gt.sm:c.dense);const d=nv({$el:null,cy:null,eh:null});function p(){var P;const{cy:k}=d;k.on("drag",()=>{f.value=!1}),k.on("tapend",C=>{f.value||(h.value&&S(C.cy.$(":selected")),f.value=!0)});const E=ge.debounce(C=>{f.value=!0,h.value&&S(C.cy.$(":selected"))},120);k.on("viewport",C=>{f.value=!1,E(C)}),k.on("resize",C=>{h.value&&S(C.cy.$(":selected"))}),k.on("select",function(C){S(C.cy.$(":selected"))}),k.on("remove",ge.debounce(C=>{S(C.cy.$(":selected"))},10)),k.on("unselect",function(C){S(C.cy.$(":selected"))}),(P=c.edgeHandles)!=null&&P.on&&(k.on("ehcomplete",(...C)=>{var D;C[3].remove(),(D=c.edgeHandles.on.ehcomplete)==null||D.apply(d,C)}),k.on("ehstop",(...C)=>{var D;const{cy:M}=C[0];M.autounselectify(!0),(D=c.edgeHandles.on.ehstop)==null||D.apply(d,C),ge.defer(I=>{I.autounselectify(!1)},M)}),ge.forIn(c.edgeHandles.on,(C,M)=>{M!=="ehcomplete"&&M!=="ehstop"&&k.on(M,(...D)=>{var I;return(I=d.eh.on[M])==null?void 0:I.apply(d,D)})})),console.log("cy.on('tab') nodig?"),k.on("tab",()=>{d.$el.focus})}function g(k){var C,M;if(k.id===((C=d.diagram)==null?void 0:C.id))return;d.diagram=k,d.eh=null;const P={...ge.omit(k,["__typename","elements","modelElement","style"]),container:document.getElementById(`${i}--cy-container`),minZoom:.1,maxZoom:10,style:y(k==null?void 0:k.style)};if(d.config=P,d.cy&&d.cy.destroy(),d.cy=nv(aa(P)),k.bind&&k.bind(d.cy),d.cy.get=function(D){var A;typeof D=="object"&&(D=o.id||((A=o.data)==null?void 0:A.id));const I=d.cy.getElementById(D);return I&&!I.empty()},d.$el=t.value,d.autoPanOnDrag=d.cy.autopanOnDrag({enabled:!0,selector:"node",speed:1}),d.cy.domNode(),d.cy.gridGuide(c.gridGuide),(M=c.edgeHandles)!=null&&M.canConnect){let D={hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0,...ge.omit(c.edgeHandles,["on"])};d.eh=d.cy.edgehandles(D),c.value.scratch.eh=d.eh}p(),P.layout&&d.cy.layout(P.layout).run(),d.cy.center(),d.$el.focus()}function y(k){let E=[{selector:"core",style:{"active-bg-opacity":0}},{selector:"node[label]",style:{label:"data(label)","text-halign":"center","text-valign":"center","text-wrap":"ellipsis"}},{selector:"node[dom]",style:{"background-opacity":0,"background-color":"transparent","border-width":0,shape:"rectangle"}},{selector:"node[?collapsed]",style:{"border-width":1,"border-style":"dotted","border-color":"#ccc"}},{selector:"node[?collapsed] > node",style:{events:"no","text-events":"no",opacity:.2}},{selector:"node:selected",style:{"border-width":"2px","border-color":"#2196f3","background-opacity":0,"border-style":"dashed"}},{selector:"node[?collapsed]:selected",style:{color:"#2196f3"}},{selector:"$node > node:active",style:{"border-width":"0px"}},{selector:"node:active",style:{"underlay-opacity":0,"overlay-opacity":0}},{selector:"edge",style:{width:1,"line-color":"#ccc","curve-style":"straight","target-arrow-color":"#ccc","target-arrow-shape":"triangle","target-arrow-fill":"filled","z-index":1}},{selector:"edge[label]",style:{label:"data(label)","font-size":"10px","text-rotation":"autorotate"}},{selector:"edge[sourceLabel]",style:{"font-size":"10px","source-label":"data(sourceLabel)","source-text-offset":"16px"}},{selector:"edge[targetLabel]",style:{"font-size":"10px","target-label":"data(targetLabel)","target-text-offset":"16px"}},{selector:"edge:selected",style:{width:1,"line-color":"#2196f3","line-style":"dashed","source-arrow-color":"#2196f3","target-arrow-color":"#2196f3"}},{selector:"edge[selectable]",style:{"line-color":"darkblue"}}];if(!ge.isEmpty(k)){const C=ge.keyBy(E,"selector");ge.forEach(k,M=>{const D={selector:M.selector,style:{...M.style}},I=C[D.selector];I?ge.merge(I.style,D.style):E.push(D)})}const P=[{selector:".eh-handle",style:{"background-color":"#1976d2",width:12,height:12,shape:"ellipse","overlay-opacity":0,"border-width":12,"border-opacity":0}},{selector:".eh-hover",style:{"background-color":"#1976d2"}},{selector:".eh-source",style:{"border-width":2,"border-color":"#1976d2","border-style":"solid"}},{selector:".eh-target",style:{"border-width":2,"border-color":"#1976d2"}},{selector:".eh-preview, .eh-ghost-edge",style:{"background-color":"#1976d2","curve-style":"bezier","line-color":"#1976d2","target-arrow-color":"#1976d2","loop-direction":"-90deg","loop-sweep":"-90deg","control-point-step-size":100}},{selector:".eh-ghost-edge.eh-preview-active",style:{"curve-style":"bezier",opacity:0,"loop-direction":"-90deg","loop-sweep":"-90deg","control-point-step-size":100}}];return[...E,...P]}function m(k,E){const P=k;if(P!=="bringForward"){if(P!=="bringToFront"){if(P!=="copy"){if(P!=="cut"){if(P==="delete"){debugger;ge.forEach(ge.castArray(E),C=>{C.modelElement&&C.modelElement.$.remove()})}else if(P==="editJSON")n.dialog({component:jh,componentProps:{value:JSON.stringify(ge.decycle(E.scratch.cyEle.json()),null,2)}}).onOk(C=>{});else if(P==="editModelElement"){const C=E;if(!C)return;const M=C.$.eContainer;M.$.emit("edit",{diagram:M,target:C,modelElement:C.modelElement})}else if(P==="editStyle"){debugger;const C=E.scratch.cyEle.style(),M=new Set,D=Object.keys(C).sort().reduce((I,A)=>(M.has(ge.kebabCase(A))||(I[ge.kebabCase(A)]=C[A],M.add(ge.kebabCase(A))),I),{});n.dialog({component:jh,componentProps:{value:JSON.stringify(ge.decycle(D),null,2)}}).onOk(I=>{})}else if(P==="remove"){debugger;ge.forEach(ge.castArray(E),C=>{const{cyEle:M}=C.scratch;M&&!M.removed()&&M.remove()})}}}}}}function v(k,E){const P=k;P==="setCurveStyle"||P==="editControlPoints"||m(k,E)}function O(k,E){const P=k;P==="align"||P==="layout"||P==="group"||m(k,E)}function b(k,E){const P=k;if(P!=="autoSize")if(P==="createRelationship"){const C=h.value.item,M=ge.get(C,"scratch.cyEle");if(!M)return;d.eh.start(M)}else P==="snapToGrid"||m(k,E)}function w(){var k;(k=d.$el)==null||k.focus()}const x={left({shiftKey:k}){var E;debugger;$((E=h.value)==null?void 0:E.nodes,"x",k?-10:-1)},right({shiftKey:k}){var E;$((E=h.value)==null?void 0:E.nodes,"x",k?10:1)},up({shiftKey:k}){var E;$((E=h.value)==null?void 0:E.nodes,"y",k?-10:-1)},down({shiftKey:k}){var E;$((E=h.value)==null?void 0:E.nodes,"y",k?10:1)},copy(){const k=JSON.stringify({foo:"bar"});s(k)},cut(){x.copy()},paste(){var k;debugger;try{if(!u.value)return;(k=c.value)==null||k.paste(u.value);const E=JSON.parse(u.value);ge.forEach(ge.castArray(E),P=>{P.__typename&&E.id})}catch{}},redo(){},undo(){}};function $(k,E,P){!k||ge.forEach(k,C=>{const{cyEle:M}=C.scratch;M.position(E,M.position(E)+P)})}function S(k){if(k.empty())h.value=null;else{const E=[],P=[],C=[];k.filter(B=>{const Y=B.scratch("ele")||B.scratch("proxy");E.push(Y),B.isNode()?P.push(Y):C.push(Y)});const M={id:ge.randomId(),count:E.length,edges:C,item:E.length>1?null:E[0],items:E,nodes:P,multiple:E.length>1,modelElements:ge.reduce(E,(B,Y)=>(Y.modelElement&&B.push(Y.modelElement),B),[])},D=k.renderedBoundingBox();let I=D.x1+D.w/2,A=D.y1,Q;E.length>1?Q="group":P.length?Q="node":(Q="edge",A=D.y1+D.h/2),M.menu={style:{left:I+"px",top:A-16+"px"},type:Q},h.value=M}d.$el.focus()}function T(...k){if(k[0]==="center")d.cy.center();else if(k[0]!=="delete")if(k[0]==="editSettings")d.diagram.$.emit("edit",{modelElement:d.diagram});else if(k[0]==="editStylesheet"){debugger;n.dialog({component:jh,componentProps:{value:JSON.stringify(ge.decycle(d.cy.json()),null,2)}}).onOk(E=>{})}else k[0]==="export"||k[0]==="filter"||(k[0]==="fitToPage"?d.cy.fit():k[0]==="import"||k[0])}return Da(c.value,()=>{!d._isMounted||g(c.value)},{deep:!1,immediate:!1}),Q0(()=>{d.diagram.$.emit("beforeUnmount")}),Sp(()=>{g(c.value),d._isMounted=!0}),(k,E)=>{var P,C,M,D;return le(),ri("div",{class:"obiwan-diagram relative-position",tabindex:"-1",onCopy:E[3]||(E[3]=(...I)=>k.onCopy&&k.onCopy(...I)),onKeyup:[E[4]||(E[4]=pn($t((...I)=>x.copy&&x.copy(...I),["prevent","ctrl"]),["c"])),E[5]||(E[5]=pn($t((...I)=>x.cut&&x.cut(...I),["prevent","ctrl"]),["x"])),E[6]||(E[6]=pn($t((...I)=>x.paste&&x.paste(...I),["prevent","ctrl"]),["v"])),E[7]||(E[7]=pn($t((...I)=>x.redo&&x.redo(...I),["prevent","ctrl"]),["y"])),E[8]||(E[8]=pn($t((...I)=>x.undo&&x.undo(...I),["prevent","ctrl"]),["z"])),E[9]||(E[9]=pn((...I)=>x.down&&x.down(...I),["down"])),E[10]||(E[10]=pn(I=>x.left(I),["left"])),E[11]||(E[11]=pn((...I)=>x.up&&x.up(...I),["up"])),E[12]||(E[12]=pn((...I)=>x.right&&x.right(...I),["right"]))],ref_key:"el",ref:t,onClick:w},[dt(a).toolbar||r.toolbar?(le(),ri("div",{key:0,class:eP(["d-flex align-center q-pa-md z-1",{"absolute-bottom-center":!1,"absolute-bottom-right":!0}]),tabindex:"-1",onKeydown:E[1]||(E[1]=$t(()=>{},["stop"])),onClick:E[2]||(E[2]=$t(()=>{},["stop"]))},[It(k.$slots,"toolbar",{},()=>[ni("div",Tte,[It(k.$slots,"prepend-toolbar"),L(f8,{maxZoom:r.value.maxZoom,minZoom:r.value.minZoom,zoom:r.value.zoom,"onUpdate:zoom":E[0]||(E[0]=I=>r.value.zoom=I),onClick:T},{prepend:_(()=>[It(k.$slots,"prepend-toolbar-buttons")]),append:_(()=>[It(k.$slots,"append-toolbar-buttons")]),_:3},8,["maxZoom","minZoom","zoom"]),It(k.$slots,"append-toolbar")])])],32)):Ee("",!0),h.value&&f.value?(le(),ri("div",{class:"absolute z-1",id:`${i}--context-menu`,key:((P=h.value)==null?void 0:P.id)||"context-menu-section",style:fl(h.value.menu.style)},[h.value.menu.type==="node"?(le(),fe(m8,{key:0,dense:r.dense,focusOn:"diagram",value:h.value.item,target:`#${i}--context-menu`,useMenu:(C=r.useMenu)==null?void 0:C.node,onCommand:b},{default:_(()=>[It(k.$slots,"node-context-menu-ext",{selection:h.value})]),_:3},8,["dense","value","target","useMenu"])):h.value.menu.type==="edge"?(le(),fe(d8,{key:1,dense:r.dense,focusOn:"diagram",value:h.value.item,target:`#${i}--context-menu`,useMenu:(M=r.useMenu)==null?void 0:M.edge,onCommand:v},{default:_(()=>[It(k.$slots,"edge-context-menu-ext",as(ss(h.value)))]),_:3},8,["dense","value","target","useMenu"])):h.value.menu.type==="group"?(le(),fe(g8,{key:2,dense:r.dense,focusOn:"diagram",value:h.value.nodes,target:`#${i}--context-menu`,useMenu:(D=r.useMenu)==null?void 0:D.group,onCommand:O},{default:_(()=>[It(k.$slots,"group-context-menu-ext",as(ss(h.value)))]),_:3},8,["dense","value","target","useMenu"])):Ee("",!0)],12,Qte)):Ee("",!0),It(k.$slots,"context-menu",as(ss(dt(d)))),ni("div",{id:`${i}--cy-container`,class:"cy-container fit"},null,8,Ate)],544)}}};const _te={class:"d-flex items-center"},Mte={class:"d-flex items-center"},Zte={class:"d-flex items-center"},zf={__name:"DiagramShape",props:Oa({caption:String,dense:{type:Boolean,required:!1,default:null},diagram:{type:Object,required:!0},selection:null,value:{type:Object,required:!0}},{label:{type:String,default:null},labelModifiers:{}}),emits:["update:label"],setup(r){Ic();const e=Er(),t=`domId_${ge.randomId()}`,n=cl(),i=r,a=Nc(r,"label"),s=ft(null),l=ce(()=>ge.isNil(i.dense)?e.screen.gt.sm:i.dense),u=ce(()=>{var p;const d={...i.style};return(p=i.value.parent)!=null&&p.data.collapsed&&(d["pointer-events"]="none",d.opacity=.2),d}),c=ft(!1);Da(i.selection,d=>{var p;c.value=!((p=i.selection.value)!=null&&p.multiple)});const f=Qt({props:{caption:i.caption,dense:l,label:ce({get(){return a==null?void 0:a.value},set(d){a.value=d}}),expanded:!1}});function h(d,p){d||(d=i.value),d.$.eContainer.$.emit("edit",{diagram:d.$.container,target:d,modelElement:d.modelElement,orginalEvent:p})}return(d,p)=>(le(),ri("div",{class:"obiwan-diagram-shape",style:fl(u.value)},[L(kp,{class:"d-flex-column w-100 h-100 bg-grey-1 shadow-1",id:`${t}_card`,ref_key:"card",ref:s},{default:_(()=>[L(zu,{class:"q-pa-xs flex-grow-0 obiwan-diagram-shape-header-section"},{default:_(()=>[L(sr,{dense:"",class:"obiwan-diagram-shape-can-bubble-to-cy"},{default:_(()=>[L(be,null,{default:_(()=>[dt(n)["prepend-header"]?(le(),fe(J,{key:0,side:""},{default:_(()=>[ni("div",_te,[It(d.$slots,"prepend-header",as(ss(f)))])]),_:3})):Ee("",!0),dt(n).expand?(le(),fe(J,{key:1,class:"obiwan-diagram-shape-expand-button",side:""},{default:_(()=>[ni("div",Mte,[L(Ke,{class:"q-mr-xs",dense:"",icon:f.props.expanded?"mdi-minus":"mdi-plus",square:"",outline:"",size:"xs","text-color":"primary",onClick:p[0]||(p[0]=$t(g=>f.props.expanded=!f.props.expanded,["stop"])),onMousedown:p[1]||(p[1]=$t(()=>{},["stop"])),onTouchstart:p[2]||(p[2]=$t(()=>{},["stop"]))},null,8,["icon"])])]),_:1})):Ee("",!0),f.props.label||i.caption||dt(n).label||dt(n).caption?(le(),fe(J,{key:2,class:"flex-grow-1",onDblclick:p[3]||(p[3]=$t(g=>h(i.value),["stop"]))},{default:_(()=>[f.props.label||dt(n).label?(le(),fe(iv,{key:0,class:"text-center"},{default:_(()=>[It(d.$slots,"label",{},()=>[se(Li(f.props.label),1)])]),_:3})):Ee("",!0),i.caption||dt(n).caption?(le(),fe(iv,{key:1,class:"text-center",caption:""},{default:_(()=>[It(d.$slots,"caption",{},()=>[se(Li(i.caption),1)])]),_:3})):Ee("",!0)]),_:3})):Ee("",!0),dt(n)["append-buttons"]?(le(),fe(J,{key:3,class:"obiwan-diagram-shape-append-buttons",side:""},{default:_(()=>[ni("div",Zte,[It(d.$slots,"append-buttons",as(ss(f)))])]),_:3})):Ee("",!0)]),_:3})]),_:3})]),_:3}),dt(n).expand&&f.props.expanded?(le(),fe(zu,{key:0,class:"obiwan-diagram-shape-expand-section q-pa-none flex-grow-1 overflow-y-auto",onDblclick:p[4]||(p[4]=$t(()=>{},["stop"]))},{default:_(()=>[It(d.$slots,"expand",as(ss(f)))]),_:3})):Ee("",!0),It(d.$slots,"actions")]),_:3},8,["id"]),It(d.$slots,"append")],4))}},Rte={__name:"ClassShape",props:{dense:{type:Boolean,required:!1,default:null},diagram:{type:Object,required:!0},selection:null,value:{type:Object,required:!0}},setup(r){const e=Er(),t=`domId_${ge.randomId()}`,n=r,i=ce(()=>ge.isNil(n.dense)?e.screen.gt.sm:n.dense),a=ce(()=>{var y;const p=(y=n.value.modelElement)==null?void 0:y.eStructuralFeatures,g=ge.filter(p,m=>{var v;return(v=m.$)==null?void 0:v.isKindOf("ecore.EAttribute")});return ge.sortBy(g,"name")}),s=ce(()=>{var g;const p=(g=n.value.modelElement)==null?void 0:g.eOperations;return ge.sortBy(p,"name")}),l=ce(()=>{var d,p;return ge.includes(n.value.classes,"element-import")?!1:((d=a.value)==null?void 0:d.length)||((p=s.value)==null?void 0:p.length)}),u=ce(()=>{const d=n.value,{abstract:p,displayName:g,interface:y,name:m}=d.modelElement||{},v={dense:i,label:g||m};return y?v.caption="<< Interface >>":p&&(v.caption="<< Abstract >>"),v});function c(d){const{eType:p,eParameters:g,name:y,visibility:m="public"}=d;let v=m==="private"?"-":"+";if(v+=y,g){const O=ge.reduce(g,(b,w)=>{var x;return w.name&&((x=w.eType)!=null&&x.ns?b.push(`${w.name}:${w.eType.ns}`):b.push(w.name)),b},[]).join(", ");O&&(v+=`(${O})`)}return p!=null&&p.ns?`${v} : ${p.ns}`:v}function f(d,p){const{modelElement:g}=n.value;if(!g)return;let y={id:ge.randomId(),...d};d.__typename==="ecore.EAttribute"?(y.name="Unnamed Attribute",g.$.get("eStructuralFeatures").push(y)):d.__typename==="ecore.EOperation"&&(y.name="Unnamed Operation",g.$.get("eOperations").push(y)),p.props.expanded||(p.props.expanded=!0)}function h(d,p){const g=n.value;g.$.eContainer.$.emit("edit",{diagram:g.$.container,target:g,modelElement:d,orginalEvent:p})}return(d,p)=>(le(),fe(zf,{class:"obiwan-class-shape",caption:u.value.caption,diagram:r.diagram,label:u.value.label,selection:r.selection,style:fl({minWidth:l.value?"200px":"170px"}),value:r.value},Z0({"append-buttons":_(g=>[dt(ge).includes(n.value.classes,"element-import")?Ee("",!0):(le(),fe(Ke,{key:0,class:"q-ml-xs",dense:"",flat:"",icon:"mdi-dots-vertical",round:"","text-color":"primary",size:"sm"},{default:_(()=>[L(ir,null,{default:_(()=>[L(sr,{style:{"min-width":"200px"},dense:i.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:$t(y=>f({__typename:"ecore.EAttribute"},g),["stop"])},{default:_(()=>[L(J,null,{default:_(()=>[se("Create New Attribute")]),_:1})]),_:2},1032,["onClick"])),[[Me]]),Te((le(),fe(be,{clickable:"",onClick:$t(y=>f({__typename:"ecore.EOperation"},g),["stop"])},{default:_(()=>[L(J,null,{default:_(()=>[se("Create New Operation")]),_:1})]),_:2},1032,["onClick"])),[[Me]])]),_:2},1032,["dense"])]),_:2},1024)]),_:2},1024))]),_:2},[l.value?{name:"expand",fn:_(g=>{var y,m;return[g.props.expanded&&((y=a.value)==null?void 0:y.length)?(le(),fe(sr,{key:0,style:{"min-width":"190px"},dense:""},{default:_(()=>[L(gr),(le(!0),ri(Gh,null,Uh(a.value,v=>Te((le(),fe(be,{key:`${t}_attribute_${v.id}`,clickable:"",onDblclick:$t(O=>h(v,O),["stop"])},{default:_(()=>[L(J,{class:"ellipsis"},{default:_(()=>[se(Li(c(v)),1)]),_:2},1024)]),_:2},1032,["onDblclick"])),[[Hh]])),128))]),_:1})):Ee("",!0),g.props.expanded&&((m=s.value)==null?void 0:m.length)?(le(),fe(sr,{key:1,style:{"min-width":"190px"},dense:""},{default:_(()=>[L(gr),(le(!0),ri(Gh,null,Uh(s.value,v=>Te((le(),fe(be,{clickable:"",key:`${t}_operation_${v.id}`,onDblclick:$t(O=>h(v,O),["stop"])},{default:_(()=>[L(J,{class:"ellipsis"},{default:_(()=>[se(Li(c(v)),1)]),_:2},1024)]),_:2},1032,["onDblclick"])),[[Hh]])),128))]),_:1})):Ee("",!0)]}),key:"0"}:void 0]),1032,["caption","diagram","label","selection","style","value"]))}};const Lte={__name:"DataTypeShape",props:{dense:{type:Boolean,required:!1,default:null},diagram:{type:Object,required:!0},selection:null,value:{type:Object,required:!0}},emits:["command"],setup(r,{emit:e}){Ic();const t=Er();`${ge.randomId()}`,Ri("store");const n=r,i=ce(()=>ge.isNil(n.dense)?t.screen.gt.sm:n.dense),a=ce(()=>{const{displayName:s,name:l}=n.value.modelElement;return{dense:i,caption:"<< DataType >>",label:s||l}});return(s,l)=>(le(),fe(zf,{class:"obiwan-datatype-shape",caption:a.value.caption,diagram:r.diagram,label:a.value.label,selection:r.selection,value:r.value},null,8,["caption","diagram","label","selection","value"]))}};var Bte=D0(Lte,[["__scopeId","data-v-6fe0b143"]]);const Ite={__name:"EnumShape",props:{dense:{type:Boolean,required:!1,default:null},diagram:{type:Object,required:!0},selection:null,value:{type:Object,required:!0}},emits:["command"],setup(r,{emit:e}){const t=Er(),n=`domId_${ge.randomId()}`,i=r,a=ce(()=>ge.isNil(i.dense)?t.screen.gt.sm:i.dense),s=ce(()=>{var g;const p=(g=i.value.modelElement)==null?void 0:g.eLiterals;return ge.sortBy(p,"name")}),l=ce(()=>{var d;return(d=s.value)==null?void 0:d.length}),u=ce(()=>{const{displayName:d,name:p}=i.value.modelElement;return{dense:a,caption:"<< Enumeration >>",label:d||p}});function c(d){return d.name}function f(d,p){const{modelElement:g}=i.value;if(!g)return;let y={id:ge.randomId(),__typename:"ecore.EEnumLiteral",name:"Unnamed EnumLiteral",...d};g.$.get("eLiterals").push(y),p.props.expanded||(p.props.expanded=!0)}function h(d,p){const g=i.value;g.$.eContainer.$.emit("edit",{diagram:g.$.container,target:g,modelElement:d,orginalEvent:p})}return(d,p)=>(le(),fe(zf,{class:"obiwan-enum-shape",caption:u.value.caption,diagram:r.diagram,label:u.value.label,selection:r.selection,style:fl({minWidth:l.value?"200px":"170px"}),value:r.value},Z0({"append-buttons":_(g=>[L(Ke,{class:"q-ml-xs",dense:"",flat:"",icon:"mdi-dots-vertical",round:"",size:"sm","text-color":"primary"},{default:_(()=>[L(ir,null,{default:_(()=>[L(sr,{style:{"min-width":"200px"},dense:a.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:$t(y=>f({__typename:"ecore.EEnumLiteral"},g),["stop"])},{default:_(()=>[L(J,null,{default:_(()=>[se("Add Enumeration Literal")]),_:1})]),_:2},1032,["onClick"])),[[Me]])]),_:2},1032,["dense"])]),_:2},1024)]),_:2},1024)]),_:2},[l.value?{name:"expand",fn:_(g=>{var y;return[g.props.expanded&&((y=s.value)==null?void 0:y.length)?(le(),fe(sr,{key:0,style:{"min-width":"190px"},dense:""},{default:_(()=>[L(gr),(le(!0),ri(Gh,null,Uh(s.value,m=>Te((le(),fe(be,{key:`${n}_literal_${m.id}`,clickable:"",onDblclick:$t(v=>h(m,v),["stop"])},{default:_(()=>[L(J,{class:"ellipsis"},{default:_(()=>[se(Li(c(m)),1)]),_:2},1024)]),_:2},1032,["onDblclick"])),[[Hh]])),128))]),_:1})):Ee("",!0)]}),key:"0"}:void 0]),1032,["caption","diagram","label","selection","style","value"]))}};const Nte={__name:"PackageShape",props:{dense:{type:Boolean,required:!1,default:null},diagram:{type:Object,required:!0},selection:null,value:{type:Object,required:!0}},setup(r){const e=Er(),t=r,n=Qt({}),i=t.value;debugger;function a(y){var O;let m=(O=y.scratch("proxy"))==null?void 0:O.parent,v=m===t.value;for(;!v&&m;)m=m.parent,v=m===t.value;return v}debugger;function s(){const m=t.value.scratch.cyEle.children(":visible");if(m.empty())n.marginTop="0px",n.height="40px",n.width="180px";else{n.marginTop="-40px";const v=m.boundingBox();n.height=v.h+10+10+"px",n.width=ge.max([v.w+10+10,240])+"px"}}function l(){const{cyEle:y}=t.value.scratch;y.isChildless()||s();const m=ge.debounce((v,O)=>{const{x1:b,y1:w}=v.boundingBox(),x=v.children(":visible");x.layout({avoidOverlap:!0,avoidOverlapPadding:10,boundingBox:{x1:b,y1:w,w:240,h:x.size()*50+100},cols:1,condense:!0,fit:!1,name:"grid",padding:0}).run(),s(),O&&ge.defer(S=>{S.select()},v)},30);y.on("add",v=>{if(a(v.target)){const O=v.target.parent();let b=O.selected();b&&O.unselect(),y.hasClass("package-import")?m(y,b):(s(),b&&ge.defer(w=>{w.select()},O))}}),y.cy().on("remove",v=>{debugger;a(v.target)&&s()}),y.on("position",v=>{a(v.target)&&s()}),y.on("expanded collapsed",v=>{v.target.id()===t.value.id&&s()})}i.scratch.mounted?l():i.$.once("mounted",()=>{l()});const u=ce(()=>ge.isNil(t.dense)?e.screen.gt.sm:t.dense),c=ft(ge.isNil(t.value.expanded)?!0:t.value.expanded),f=ce(()=>!ge.isEmpty(t.value.children)),h=ce(()=>!!f.value),d=ce(()=>{const{displayName:y,name:m,nsPrefix:v}=t.value.modelElement;return{dense:u,label:y||m||v}});function p(y,m){const{modelElement:v}=t.value;let O={id:ge.randomId(),...y};if(y.__typename==="ecore.EPackage")O.name="Unnamed Package",v.$.get("eSubPackages").push(O);else{v.$.get("eClassifiers").push(O);const b=v.$.store.get(O.id);b.name=`Unnamed ${b.$.eClass.name.slice(1)}`}m.props.expanded||(m.props.expanded=!0)}async function g(y,m){debugger;c.value=y,await A0(),t.value.expanded=y}return(y,m)=>(le(),fe(zf,{class:"obiwan-package-shape",caption:d.value.caption,diagram:r.diagram,label:d.value.label,selection:r.selection,style:fl(n),value:r.value},{"prepend-header":_(()=>[h.value?(le(),fe(Ke,{key:0,class:"q-mr-xs",dense:"",icon:c.value?"mdi-minus":"mdi-plus",square:"",outline:"",size:"xs","text-color":"primary",onClick:m[0]||(m[0]=$t(v=>g(!c.value,v),["stop"])),onMousedown:m[1]||(m[1]=$t(()=>{},["stop"])),onTouchstart:m[2]||(m[2]=$t(()=>{},["stop"]))},null,8,["icon"])):Ee("",!0)]),"append-buttons":_(v=>[dt(ge).includes(t.value.classes,"package-import")?Ee("",!0):(le(),fe(Ke,{key:0,class:"q-ml-xs",dense:"",flat:"",icon:"mdi-dots-vertical",round:"","text-color":"primary",size:"sm"},{default:_(()=>[L(ir,null,{default:_(()=>[L(sr,{style:{"min-width":"200px"},dense:u.value},{default:_(()=>[L(be,{clickable:"",onClick:$t(O=>p({__typename:"ecore.EClass"},v),["stop"])},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-alpha-c-box-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New Class")]),_:1})]),_:2},1032,["onClick"]),L(be,{clickable:"",onClick:$t(O=>p({__typename:"ecore.EDataType"},v),["stop"])},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-alpha-d-box-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New DataType")]),_:1})]),_:2},1032,["onClick"]),L(be,{clickable:"",onClick:$t(O=>p({__typename:"ecore.EEnum"},v),["stop"])},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-alpha-e-box-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New Enumeration")]),_:1})]),_:2},1032,["onClick"]),L(be,{clickable:"",onClick:$t(O=>p({__typename:"ecore.EPackage"},v),["stop"])},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-folder-plus-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New (Sub)Package")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["dense"])]),_:2},1024)]),_:2},1024))]),append:_(()=>[Te(L(kp,{class:"obiwan-package-shape-container bg-grey-1 shadow-1 h-100"},null,512),[[tP,f.value&&c.value]])]),_:1},8,["caption","diagram","label","selection","style","value"]))}},zte={__name:"ClassDiagramMenuList",props:{dense:{type:Boolean,required:!1,default:null}},emits:["command"],setup(r,{emit:e}){const t=Er(),n=r,i=e,a=ce(()=>ge.isNil(n.dense)?t.screen.gt.sm:n.dense);return(s,l)=>(le(),fe(sr,{class:"obiwan-uml-class-diagram-menu-list",style:{"min-width":"100px"},dense:a.value},{default:_(()=>[Te((le(),fe(be,{clickable:"",onClick:l[0]||(l[0]=u=>i("command","edit","ePackage"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-folder-edit-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Edit Package")]),_:1})]),_:1})),[[Me]]),L(gr),L(be,{clickable:""},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-plus"})]),_:1}),L(J,null,{default:_(()=>[se("New ...")]),_:1}),L(ir,{anchor:"top end",self:"top start"},{default:_(()=>[L(sr,null,{default:_(()=>[L(be,{clickable:"",onClick:l[1]||(l[1]=u=>i("command","addNew","class"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-alpha-c-box-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New Class")]),_:1})]),_:1}),L(be,{clickable:"",onClick:l[2]||(l[2]=u=>i("command","addNew","dataType"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-alpha-d-box-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New DataType")]),_:1})]),_:1}),L(be,{clickable:"",onClick:l[3]||(l[3]=u=>i("command","addNew","enum"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-alpha-e-box-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New Enumeration")]),_:1})]),_:1}),L(be,{clickable:"",onClick:l[4]||(l[4]=u=>i("command","addNew","subPackage"))},{default:_(()=>[L(J,{side:""},{default:_(()=>[L(Be,{name:"mdi-folder-plus-outline"})]),_:1}),L(J,null,{default:_(()=>[se("Add New (Sub)Package")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["dense"]))}};const Wte={__name:"ClassDiagram",props:{dense:{type:Boolean,required:!1,default:null},value:{type:Object}},emits:["update:modelValue"],setup(r,{emit:e}){const t=Ri("app"),n=Er(),i=Ri("store");lP(i);const a=r,s=ce(()=>ge.isNil(a.dense)?n.screen.gt.sm:a.dense),l=ft(null),u={canConnect:function(w,x){debugger;const $=w.scratch("modelElement"),S=x.scratch("modelElement");return!(!$||!S||!$.$.isKindOf("ecore.EClass")||!S.$.isKindOf("ecore.EClass"))},on:{async ehcomplete(w,x,$,S){var E,P;const T=x.scratch("modelElement"),k=$.scratch("modelElement");if(T===k){let C={__typename:"ecore.EReference",name:"Unnamed",eType:k};T.$.get("eStructuralFeatures").push(C)}else{const C=[{label:"Association",value:"association",color:"primary"},{label:"Aggregation",value:"aggregation",color:"primary"},{label:"Composition",value:"composition",color:"primary"}],M=(E=T.eAllSuperTypes)==null?void 0:E.find(Q=>Q===k),D=(P=k.eAllSuperTypes)==null?void 0:P.find(Q=>Q===T);!M&&!D&&(T.extends!==k&&k.extends!==T&&C.push({label:"Extends",value:"extends",color:"primary"}),C.push({label:"Inheritence/Generalization",value:"inherits",color:"primary"}));const I={class:"z-max",title:"Select the type of relationship",options:{type:"radio",model:"association",items:C},cancel:!0,persistent:!0},{result:A}=await t.dialog(I);if(!A)return;if(A==="extends")T.extends=k;else if(A==="inherits")T.$.get("eSuperTypes").push(k);else{const Q={__typename:"ecore.EReference",name:"Unnamed",eType:k};A==="aggregation"?Q.aggregation=!0:A==="composition"&&(Q.containment=!0),T.$.get("eStructuralFeatures").push(Q)}}}}},c=function(w){return l.value.get(w)},f=ft(null),h=function(w){const x=[];return Qt({errors:x,errMap:w,addError($){return x.push(w[$]),w[$]},removeError($){return ge.pull(x,w[$]),!0}})},d={edge(w){const{modelElement:x}=w;let $,S=!1;if(x!=null&&x.$.isKindOf("ecore.EReference")){const T={required:"Name is required",memberExists:"The class containing this reference has another member with the same name"},{errors:k,addError:E,removeError:P}=h(T);S={value:{get(){return x.name||""},set(M){x.name=M}},rules:[M=>M?P("required"):E("required"),M=>{if(x.$.isKindOf("ecore.EReference")){const D=x.$.eContainer.getMember(M);return D&&D.id!==x.id?E("memberExists"):P("memberExists")}return!0}],title:"Edit Name"}}return{editLabel:S,setCurveStyle:{options:["straight","segments"]},ext:$}},group(w){let x;return{ext:x}},node(w){if(!w||!w.modelElement)debugger;const{modelElement:x}=w;let $;const S={required:"Name is required",memberWithSameName:"Another eClassifier with this name exists in the same namespace"},{errors:T,addError:k,removeError:E}=h(S);return{editLabel:{errors:T,rules:[C=>C?E("required"):k("required"),C=>x.$.isKindOf("ecore.EClassifier")?ge.find(x.$.eContainer.eClassifiers,D=>{D.name===C&&(D.id,x.id)})?k("memberWithSameName"):E("memberWithSameName"):(x.$.isKindOf("ecore.EPackage"),!0)],title:"Edit Name",value:{get(){return x.name||""},set(C){x.name=C}}},createRelationship:{show(){return x.$.isKindOf("ecore.EClass")}},ext:$}}},p={on:{command(...w){let{modelElement:x}=l.value;const{cy:$}=l.value.scratch,S=w[0];if(S==="addNew"){debugger;let T=!1;const k=w[1];let E=w[2];w[3]&&(x=w[3]);const P=k==="subPackage"?x.$.get("eSubPackages"):x.$.get("eClassifiers");k==="class"?(P.push({__typename:"ecore.EClass",name:"Unnamed Class"}),T=!0):k==="dataType"?(P.push({__typename:"ecore.EDataType",name:"Unnamed DataType"}),T=!0):k==="enum"?(P.push({__typename:"ecore.EEnum",name:"Unnamed Enum"}),T=!0):k==="subPackage"&&(P.push({__typename:"ecore.EPackage",name:"Unnamed Package"}),T=!0),w[3]===x&&(T=!1),T&&(E==null?void 0:E.renderedPosition)&&$.once("add",({target:C})=>{C.renderedPosition(E.renderedPosition)})}else S==="edit"&&(w[1],l.value.$.emit("edit",{modelElement:l.value.modelElement}))}}},g=ft(null);function y({source:w,feature:x}){const{eOpposite:$,eType:S,lowerBound:T=0,upperBound:k=1}=x;if(!c(x)){if(S){const P=c(S);if(P){const C=c(w);if($&&c($))return;const M={classes:["association"],modelElement:x,scratch:{path:"eReferences.eType"},source:C,target:P};w===S?M.classes.push("self-referencing"):x.aggregation?M.classes.push("aggregation"):x.containment&&M.classes.push("composition"),l.value.add(M,!0)}else return m(S),y({source:w,feature:x})}}}function m(w){const x=l.value,$=x.scratch.mounted,S=w.$.eContainer;let T=x.get(S);if(!T){(S===x.modelElement||ge.includes(x.modelElement.eSubPackages,S))&&console.log("Zou niet voor mogen komen");const P={classes:["package-import","readonly"],modelElement:S};T=x.add(P,$)}const k={classes:["element-import","readonly"],data:{parent:T.id},grabbable:!1,modelElement:w,parent:T},E=x.add(k,$);return{ePackageEle:T,eClassEle:E}}function v({source:w,target:x}){const $=w.$.eClass.getEStructuralFeature("eSuperTypes"),S=ge.hash([l.value.id,w.id,$.id,x.id]);if(c(S))return;const k=c(x);if(k){const E=c(w),P={id:S,classes:[],scratch:{path:"eSuperTypes"},source:E,target:k};x.interface?P.classes.push("realization"):P.classes.push("generalization"),l.value.add(P,!0)}else return m(x),v({source:w,target:x})}function O(w){const{elements:x,modelElement:$}=w,S=[],T=w.scratch.mounted;function k(E,P){ge.forEach(E.eSubPackages,C=>{let M=w.get(C);if(!M){const D={modelElement:C};P&&(D.parent=P),M=w.add(D,T)}k(C,M)}),ge.forEach(E.eClassifiers,C=>{let M=w.get(C);if(!M){const D={modelElement:C};P&&(D.parent=P),M=w.add(D,T)}C.$.isKindOf("ecore.EClass")&&S.push(C)})}$&&k($),ge.forEach(S,E=>{ge.forEach(E.eSuperTypes,P=>{v({source:E,target:P})}),ge.forEach(E.eReferences,P=>{y({source:E,feature:P})})})}function b(w){w||(w=i.createNode({data:{__typename:"uml.di.ClassDiagram",modelElement:i.createNode({data:{__typename:"ecore.EPackage"}})}})),w.scratch.createDomNode=function($){if(!$)return;const S={props:{diagram:l.value,selection:g,value:$}};if($.modelElement.$.isKindOf("ecore.EClass"))return t.mount(Rte,S).el;if($.modelElement.$.isKindOf("ecore.EEnum"))return t.mount(Ite,S).el;if($.modelElement.$.isKindOf("ecore.EDataType"))return t.mount(Bte,S).el;if($.modelElement.$.isKindOf("ecore.EPackage"))return t.mount(Nte,S).el},l.value=w,w.$.on("dblclick",$=>{n.dialog({title:"Options",message:"Please select the type of Element you would like to add to this Package",options:{type:"radio",model:"class",items:[{label:"Class (added to this Package's classifiers)",value:"class",color:"primary"},{label:"DataType (added to this Package's classifiers)",value:"dataType",color:"primary"},{label:"Enum (added to this Package's classifiers)",value:"enum",color:"primary"},{label:"Package (added to this Package's subPackages)",value:"subPackage",color:"primary"}]},cancel:!0}).onOk(S=>{p.on.command("addNew",S,$)})}),O(w);const x=ge.debounce(({key:$,modifier:S})=>{O(w)},20);return w.modelElement.$.on("changed",x),w}return Da(a.value,w=>{var x,$;if(!w)b();else if(w.$.isKindOf("ecore.EPackage")){if(((x=l.value)==null?void 0:x.modelElement)!==w){let S=i.findOne({__typename:"uml.di.ClassDiagram",modelElement:{id:w.id}});S||(S=i.createNode({data:{__typename:"uml.di.ClassDiagram",modelElement:w}})),b(S)}}else(($=l.value)==null?void 0:$.id)!==w.id&&b(w)},{immediate:!0}),(w,x)=>l.value?(le(),fe(Dte,{key:0,class:"obiwan-uml-class-diagram",dense:s.value,"edge-handles":u,useMenu:d,ref_key:"graph",ref:f,selection:g.value,"onUpdate:selection":x[0]||(x[0]=$=>g.value=$),value:l.value},{"append-toolbar-buttons":_(()=>[L(gr,{class:"q-mx-xs",vertical:""}),L(Ke,{color:"primary",dense:"",flat:"",icon:"mdi-dots-vertical",size:"md",square:""},{default:_(()=>[L(ir,null,{default:_(()=>[L(zte,rP({dense:s.value},nP(p.on)),null,16,["dense"])]),_:1})]),_:1})]),_:1},8,["dense","selection","value"])):Ee("",!0)}},qte={__name:"LandingPage",props:{dense:{type:Boolean,required:!1,default:null},redirectRoute:{type:[Function,Object,String],default:"home"}},emits:["update:modelValue"],setup(r,{emit:e}){const t=Er(),n=Ri("app"),i=iP(),a=aP(),s=Ri("store"),l=r,u=ce(()=>ge.isNil(l.dense)?t.screen.gt.sm:l.dense);let c=ft(null);async function f(){var y;const g=await((y=s.db)==null?void 0:y._app.get(n.id));g!=null&&g.lastDiagramId&&(c.value=s.get(g.lastDiagramId)),c.value||(c.value=s.createNode({data:{__typename:"uml.di.ClassDiagram",modelElement:s.createNode({data:{__typename:"ecore.EPackage"}})}}),g.lastDiagramId=c.value.id,s.db._app.put(g)),c.value.$.on("edit",({modelElement:m,target:v})=>{if(!m)return;const O=s.createStoreId(m,!0);ge.includes(v==null?void 0:v.classes,"readonly"),a.push(`${a.currentRoute.value.fullPath}${O}`)})}f();const h=ft(!1);Da(i,()=>{h.value=i.name!=="home"},{immediate:!0});function d(){debugger;a.push("/")}function p(g){debugger;const y=s.createStoreId(g,!0);a.push(`${a.currentRoute.value.fullPath}/${y}`)}return(g,y)=>{const m=sP("router-view");return le(),fe(uP,{class:"obiwan-moddle-landing-page"},{default:_(()=>{var v;return[dt(c)?(le(),fe(Wte,{key:0,class:"fit",dense:u.value,value:dt(c),onEdgeDblclick:p,onNodeDblclick:p},null,8,["dense","value"])):Ee("",!0),L(M0,{persistent:"","model-value":h.value,maximized:((v=dt(t).screen)==null?void 0:v.width)<600},{default:_(()=>[L(m,{onClose:d})]),_:1},8,["model-value","maximized"])]}),_:1})}}};var Jte=Object.freeze(Object.defineProperty({__proto__:null,default:qte},Symbol.toStringTag,{value:"Module"}));export{Tc as L,op as a,Hte as b,Ute as c,Gte as d,Jte as e,q6 as f,D6 as i,Mg as s,te as t};
