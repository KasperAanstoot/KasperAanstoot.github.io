import{ay as $,av as yt,ah as ae,dl as dn,dm as Sl,dn as wl,dp as _l,az as yn,aH as Vt,dq as kl,aJ as ot,ar as We,bg as Zl,dr as Jl,_ as I,af as Bt,ds as jn,dt as Cl,du as Dl,dv as Ml,aA as Nn,aB as Gl,aD as zn,aE as ea,au as k,dw as ta,aF as At,dx as na,dy as xl,aS as Vl,ai as Oe,aV as la,dz as aa,a$ as mn,dA as $n,aC as Ln,dB as oa,dC as ll,dD as Xt,dE as ua,dF as ia,dG as Gt,dH as ra,dI as ht,aR as sa,dJ as ca,dK as pn,dL as Ht,dM as da,dN as Yt,aG as fa,dO as ql,dP as $l,aK as va,bh as Ct,aI as El,aQ as Ke,dQ as ma,dR as Ol,dS as Il,aX as ha,dT as ga,aT as Zt,dU as al,dV as ol,dW as ya,dX as Kt,dY as kn,dZ as hn,d_ as en,d$ as En,e0 as ct,e1 as qt,aj as tn,e2 as P,e3 as je,e4 as oe,e5 as Be,e6 as Fl,e7 as Tl,e8 as Me,e9 as X,al as rt,aP as sn,ea as Q,eb as J,ec as gt,ed as Ne,ee as Dt,ef as Ze,eg as xt,b4 as pa,b5 as ba,eh as ul,ei as Sa,b6 as wa,ej as il,b8 as _a,b7 as ka,b9 as Ca,ek as Da,bb as Ma,ba as xa,el as rl,em as Va,en as qa,eo as $a,ep as jt,eq as ln,ag as ze,er as Qe,es as Te,et as Ae,eu as Rn,ev as Nt,ew as nn,ex as gn,ey as an,ez as on,eA as bn,eB as Pn,eC as qe,eD as On,eE as Ea,cF as Kn,aN as Tt,aM as In,at as Oa,eF as Ia,eG as Fa,eH as sl}from"./index.37065221.js";import{b as Al,P as Hl,c as Ta,Q as Aa,a as Ha}from"./lang.fbee3e32.js";const Ya=$("div",{class:"q-space"});var fn=yt({name:"QSpace",setup(){return()=>Ya}}),Ba=yt({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:n,emit:u}){const o=Vt(),a=ae(null);let l=0;const d=[];function r(p){const v=typeof p=="boolean"?p:t.noErrorFocus!==!0,y=++l,b=(x,g)=>{u("validation"+(x===!0?"Success":"Error"),g)},_=x=>{const g=x.validate();return typeof g.then=="function"?g.then(Y=>({valid:Y,comp:x}),Y=>({valid:!1,comp:x,err:Y})):Promise.resolve({valid:g,comp:x})};return(t.greedy===!0?Promise.all(d.map(_)).then(x=>x.filter(g=>g.valid!==!0)):d.reduce((x,g)=>x.then(()=>_(g).then(Y=>{if(Y.valid===!1)return Promise.reject(Y)})),Promise.resolve()).catch(x=>[x])).then(x=>{if(x===void 0||x.length===0)return y===l&&b(!0),!0;if(y===l){const{comp:g,err:Y}=x[0];if(Y!==void 0&&console.error(Y),b(!1,g),v===!0){const ee=x.find(({comp:V})=>typeof V.focus=="function"&&kl(V.$)===!1);ee!==void 0&&ee.comp.focus()}}return!1})}function s(){l++,d.forEach(p=>{typeof p.resetValidation=="function"&&p.resetValidation()})}function w(p){p!==void 0&&ot(p);const v=l+1;r().then(y=>{v===l&&y===!0&&(t.onSubmit!==void 0?u("submit",p):p!==void 0&&p.target!==void 0&&typeof p.target.submit=="function"&&p.target.submit())})}function f(p){p!==void 0&&ot(p),u("reset"),We(()=>{s(),t.autofocus===!0&&t.noResetFocus!==!0&&h()})}function h(){Zl(()=>{if(a.value===null)return;const p=a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),v=>v.tabIndex>-1);p!=null&&p.focus({preventScroll:!0})})}dn(Jl,{bindComponent(p){d.push(p)},unbindComponent(p){const v=d.indexOf(p);v>-1&&d.splice(v,1)}});let S=!1;return Sl(()=>{S=!0}),wl(()=>{S===!0&&t.autofocus===!0&&h()}),_l(()=>{t.autofocus===!0&&h()}),Object.assign(o.proxy,{validate:r,resetValidation:s,submit:w,reset:f,focus:h,getValidationComponents:()=>d}),()=>$("form",{class:"q-form",ref:a,onSubmit:w,onReset:f},yn(n.default))}});function ja(t){const n={String:"EString",Boolean:"EBoolean",Number:"ELong",Float:"EFloat",Date:"EDate"},u={EByte:"Number",EChar:"String",EDouble:"Float",EInt:"Number",EIntegerObject:"Number",EFloatObject:"Float",ELongObject:"Number",EShort:"Number",ELong:"Number",EDoubleObject:"Float",JSObject:"Object"};I.forEach(n,(w,f)=>{u[w]=f});const o={EBoolean:"Boolean",EByte:"Int",EChar:"String",EDate:"DateTime",EDoubleObject:"Float",EDouble:"Float",EFloat:"Float",EInt:"Int",EIntegerObject:"Int",EFloatObject:"Float",ELong:"Int",ELongObject:"Int",EShort:"Int",EString:"String",JSObject:"JSONObject"},a={String:"string",Boolean:"boolean",Number:"number",Integer:"int",Float:"float"},l={};I.forEach(a,(w,f)=>{l[w]=f});const d={String:{fieldType:"string",fieldAnnotation:"String"},Boolean:{fieldType:"number",fieldAnnotation:"Boolean"},Number:{fieldType:"number",fieldAnnotation:"Int"},Integer:{fieldType:"number",fieldAnnotation:"Int"},Float:{fieldType:"number",fieldAnnotation:"Float"}},r={};I.forEach(d,(w,f)=>{r[w]=f});const s={js_ecore:n,js_graphql:a,js_typegraphql:d,ecore_js:u,ecore_graphql:o,graphql_js:l,typegraphql_js:r};return I.isString(t)?{from(w){return{to(f){if(w==="js"&&f==="ecore"){const h=s[`${w.toLowerCase()}_${f.toLowerCase()}`];if(h)return I.get(h,t)}}}}}:{to(w){var f,h;if(w=w.toLowerCase(),t.constructor.name==="EObject"){const S=((f=t.$.get("extensions"))==null?void 0:f.internalType)||t.get("name"),p=s[`ecore_${w}`];if(p)return I.get(p,S)}else if(Bt.isNode(t)){const S=((h=t.extensions)==null?void 0:h.internalType)||t.name,p=s[`ecore_${w}`];if(p)return I.get(p,S)}else{const S=t.name,p=s[`js_${w}`];if(p)return I.get(p,S)}}}}var Na=yt({name:"QField",inheritAttrs:!1,props:{...jn,tag:{type:String,default:"label"}},emits:Cl,setup(){return Dl(Ml({requiredForAttr:!1,tagProp:!0}))}});const za={xs:8,sm:10,md:14,lg:20,xl:24};var La=yt({name:"QChip",props:{...Nn,...Gl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(t,{slots:n,emit:u}){const{proxy:{$q:o}}=Vt(),a=zn(t,o),l=ea(t,za),d=k(()=>t.selected===!0||t.icon!==void 0),r=k(()=>t.selected===!0?t.iconSelected||o.iconSet.chip.selected:t.icon),s=k(()=>t.iconRemove||o.iconSet.chip.remove),w=k(()=>t.disable===!1&&(t.clickable===!0||t.selected!==null)),f=k(()=>{const b=t.outline===!0&&t.color||t.textColor;return"q-chip row inline no-wrap items-center"+(t.outline===!1&&t.color!==void 0?` bg-${t.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(t.disable===!0?" disabled":"")+(t.dense===!0?" q-chip--dense":"")+(t.outline===!0?" q-chip--outline":"")+(t.selected===!0?" q-chip--selected":"")+(w.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(t.square===!0?" q-chip--square":"")+(a.value===!0?" q-chip--dark q-dark":"")}),h=k(()=>{const b=t.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0},_={...b,role:"button","aria-hidden":"false","aria-label":t.removeAriaLabel||o.lang.label.remove};return{chip:b,remove:_}});function S(b){b.keyCode===13&&p(b)}function p(b){t.disable||(u("update:selected",!t.selected),u("click",b))}function v(b){(b.keyCode===void 0||b.keyCode===13)&&(ot(b),t.disable===!1&&(u("update:modelValue",!1),u("remove")))}function y(){const b=[];w.value===!0&&b.push($("div",{class:"q-focus-helper"})),d.value===!0&&b.push($(At,{class:"q-chip__icon q-chip__icon--left",name:r.value}));const _=t.label!==void 0?[$("div",{class:"ellipsis"},[t.label])]:void 0;return b.push($("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},na(n.default,_))),t.iconRight&&b.push($(At,{class:"q-chip__icon q-chip__icon--right",name:t.iconRight})),t.removable===!0&&b.push($(At,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:s.value,...h.value.remove,onClick:v,onKeyup:v})),b}return()=>{if(t.modelValue===!1)return;const b={class:f.value,style:l.value};return w.value===!0&&Object.assign(b,h.value.chip,{onClick:p,onKeyup:S}),ta("div",b,y(),"ripple",t.ripple!==!1&&t.disable!==!0,()=>[[xl,t.ripple]])}}});const ut=1e3,Ra=["start","center","end","start-force","center-force","end-force"],Yl=Array.prototype.filter,Pa=window.getComputedStyle(document.body).overflowAnchor===void 0?Vl:function(t,n){t!==null&&(t._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(t===null)return;t._qOverflowAnimationFrame=void 0;const u=t.children||[];Yl.call(u,a=>a.dataset&&a.dataset.qVsAnchor!==void 0).forEach(a=>{delete a.dataset.qVsAnchor});const o=u[n];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function Ut(t,n){return t+n}function Cn(t,n,u,o,a,l,d,r){const s=t===window?document.scrollingElement||document.documentElement:t,w=a===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-d-r,scrollMaxSize:0,offsetStart:-d,offsetEnd:-r};if(a===!0?(t===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=s.scrollLeft,f.scrollViewSize+=s.clientWidth),f.scrollMaxSize=s.scrollWidth,l===!0&&(f.scrollStart=($n===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(t===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=s.scrollTop,f.scrollViewSize+=s.clientHeight),f.scrollMaxSize=s.scrollHeight),u!==null)for(let h=u.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=h[w]);if(o!==null)for(let h=o.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=h[w]);if(n!==t){const h=s.getBoundingClientRect(),S=n.getBoundingClientRect();a===!0?(f.offsetStart+=S.left-h.left,f.offsetEnd-=S.width):(f.offsetStart+=S.top-h.top,f.offsetEnd-=S.height),t!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function cl(t,n,u,o){n==="end"&&(n=(t===window?document.body:t)[u===!0?"scrollWidth":"scrollHeight"]),t===window?u===!0?(o===!0&&(n=($n===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):u===!0?(o===!0&&(n=($n===!0?t.scrollWidth-t.offsetWidth:0)-n),t.scrollLeft=n):t.scrollTop=n}function Jt(t,n,u,o){if(u>=o)return 0;const a=n.length,l=Math.floor(u/ut),d=Math.floor((o-1)/ut)+1;let r=t.slice(l,d).reduce(Ut,0);return u%ut!==0&&(r-=n.slice(l*ut,u).reduce(Ut,0)),o%ut!==0&&o!==a&&(r-=n.slice(o,d*ut).reduce(Ut,0)),r}const Ka={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Qa={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ka};function Ua({virtualScrollLength:t,getVirtualScrollTarget:n,getVirtualScrollEl:u,virtualScrollItemSizeComputed:o}){const a=Vt(),{props:l,emit:d,proxy:r}=a,{$q:s}=r;let w,f,h,S=[],p;const v=ae(0),y=ae(0),b=ae({}),_=ae(null),N=ae(null),x=ae(null),g=ae({from:0,to:0}),Y=k(()=>l.tableColspan!==void 0?l.tableColspan:100);o===void 0&&(o=k(()=>l.virtualScrollItemSize));const ee=k(()=>o.value+";"+l.virtualScrollHorizontal),V=k(()=>ee.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter);Oe(V,()=>{me()}),Oe(ee,q);function q(){ve(f,!0)}function O(M){ve(M===void 0?f:M)}function j(M,F){const R=n();if(R==null||R.nodeType===8)return;const ie=Cn(R,u(),_.value,N.value,l.virtualScrollHorizontal,s.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);h!==ie.scrollViewSize&&me(ie.scrollViewSize),Z(R,ie,Math.min(t.value-1,Math.max(0,parseInt(M,10)||0)),0,Ra.indexOf(F)>-1?F:f>-1&&M>f?"end":"start")}function L(){const M=n();if(M==null||M.nodeType===8)return;const F=Cn(M,u(),_.value,N.value,l.virtualScrollHorizontal,s.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),R=t.value-1,ie=F.scrollMaxSize-F.offsetStart-F.offsetEnd-y.value;if(w===F.scrollStart)return;if(F.scrollMaxSize<=0){Z(M,F,0,0);return}h!==F.scrollViewSize&&me(F.scrollViewSize),re(g.value.from);const de=Math.floor(F.scrollMaxSize-Math.max(F.scrollViewSize,F.offsetEnd)-Math.min(p[R],F.scrollViewSize/2));if(de>0&&Math.ceil(F.scrollStart)>=de){Z(M,F,R,F.scrollMaxSize-F.offsetEnd-S.reduce(Ut,0));return}let te=0,ne=F.scrollStart-F.offsetStart,we=ne;if(ne<=ie&&ne+F.scrollViewSize>=v.value)ne-=v.value,te=g.value.from,we=ne;else for(let U=0;ne>=S[U]&&te<R;U++)ne-=S[U],te+=ut;for(;ne>0&&te<R;)ne-=p[te],ne>-F.scrollViewSize?(te++,we=ne):we=p[te]+ne;Z(M,F,te,we)}function Z(M,F,R,ie,de){const te=typeof de=="string"&&de.indexOf("-force")>-1,ne=te===!0?de.replace("-force",""):de,we=ne!==void 0?ne:"start";let U=Math.max(0,R-b.value[we]),Ie=U+b.value.total;Ie>t.value&&(Ie=t.value,U=Math.max(0,Ie-b.value.total)),w=F.scrollStart;const he=U!==g.value.from||Ie!==g.value.to;if(he===!1&&ne===void 0){ke(R);return}const{activeElement:Ce}=document,Le=x.value;he===!0&&Le!==null&&Le!==Ce&&Le.contains(Ce)===!0&&(Le.addEventListener("focusout",Se),setTimeout(()=>{Le!==null&&Le.removeEventListener("focusout",Se)})),Pa(Le,R-U);const nt=ne!==void 0?p.slice(U,R).reduce(Ut,0):0;if(he===!0){const Je=Ie>=g.value.from&&U<=g.value.to?g.value.to:Ie;g.value={from:U,to:Je},v.value=Jt(S,p,0,U),y.value=Jt(S,p,Ie,t.value),requestAnimationFrame(()=>{g.value.to!==Ie&&w===F.scrollStart&&(g.value={from:g.value.from,to:Ie},y.value=Jt(S,p,Ie,t.value))})}requestAnimationFrame(()=>{if(w!==F.scrollStart)return;he===!0&&re(U);const Je=p.slice(U,R).reduce(Ut,0),Pe=Je+F.offsetStart+v.value,Ee=Pe+p[R];let dt=Pe+ie;if(ne!==void 0){const $t=Je-nt,Ge=F.scrollStart+$t;dt=te!==!0&&Ge<Pe&&Ee<Ge+F.scrollViewSize?Ge:ne==="end"?Ee-F.scrollViewSize:Pe-(ne==="start"?0:Math.round((F.scrollViewSize-p[R])/2))}w=dt,cl(M,dt,l.virtualScrollHorizontal,s.lang.rtl),ke(R)})}function re(M){const F=x.value;if(F){const R=Yl.call(F.children,U=>U.classList&&U.classList.contains("q-virtual-scroll--skip")===!1),ie=R.length,de=l.virtualScrollHorizontal===!0?U=>U.getBoundingClientRect().width:U=>U.offsetHeight;let te=M,ne,we;for(let U=0;U<ie;){for(ne=de(R[U]),U++;U<ie&&R[U].classList.contains("q-virtual-scroll--with-prev")===!0;)ne+=de(R[U]),U++;we=ne-p[te],we!==0&&(p[te]+=we,S[Math.floor(te/ut)]+=we),te++}}}function Se(){x.value!==null&&x.value!==void 0&&x.value.focus()}function ve(M,F){const R=1*o.value;(F===!0||Array.isArray(p)===!1)&&(p=[]);const ie=p.length;p.length=t.value;for(let te=t.value-1;te>=ie;te--)p[te]=R;const de=Math.floor((t.value-1)/ut);S=[];for(let te=0;te<=de;te++){let ne=0;const we=Math.min((te+1)*ut,t.value);for(let U=te*ut;U<we;U++)ne+=p[U];S.push(ne)}f=-1,w=void 0,v.value=Jt(S,p,0,g.value.from),y.value=Jt(S,p,g.value.to,t.value),M>=0?(re(g.value.from),We(()=>{j(M)})):$e()}function me(M){if(M===void 0&&typeof window!="undefined"){const ne=n();ne!=null&&ne.nodeType!==8&&(M=Cn(ne,u(),_.value,N.value,l.virtualScrollHorizontal,s.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}h=M;const F=parseFloat(l.virtualScrollSliceRatioBefore)||0,R=parseFloat(l.virtualScrollSliceRatioAfter)||0,ie=1+F+R,de=M===void 0||M<=0?1:Math.ceil(M/o.value),te=Math.max(1,de,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/ie));b.value={total:Math.ceil(te*ie),start:Math.ceil(te*F),center:Math.ceil(te*(.5+F)),end:Math.ceil(te*(1+F)),view:de}}function ge(M,F){const R=l.virtualScrollHorizontal===!0?"width":"height",ie={["--q-virtual-scroll-item-"+R]:o.value+"px"};return[M==="tbody"?$(M,{class:"q-virtual-scroll__padding",key:"before",ref:_},[$("tr",[$("td",{style:{[R]:`${v.value}px`,...ie},colspan:Y.value})])]):$(M,{class:"q-virtual-scroll__padding",key:"before",ref:_,style:{[R]:`${v.value}px`,...ie}}),$(M,{class:"q-virtual-scroll__content",key:"content",ref:x,tabindex:-1},F.flat()),M==="tbody"?$(M,{class:"q-virtual-scroll__padding",key:"after",ref:N},[$("tr",[$("td",{style:{[R]:`${y.value}px`,...ie},colspan:Y.value})])]):$(M,{class:"q-virtual-scroll__padding",key:"after",ref:N,style:{[R]:`${y.value}px`,...ie}})]}function ke(M){f!==M&&(l.onVirtualScroll!==void 0&&d("virtualScroll",{index:M,from:g.value.from,to:g.value.to-1,direction:M<f?"decrease":"increase",ref:r}),f=M)}me();const $e=la(L,s.platform.is.ios===!0?120:35);aa(()=>{me()});let He=!1;return Sl(()=>{He=!0}),wl(()=>{if(He!==!0)return;const M=n();w!==void 0&&M!==void 0&&M!==null&&M.nodeType!==8?cl(M,w,l.virtualScrollHorizontal,s.lang.rtl):j(f)}),mn(()=>{$e.cancel()}),Object.assign(r,{scrollTo:j,reset:q,refresh:O}),{virtualScrollSliceRange:g,virtualScrollSliceSizeComputed:b,setVirtualScrollSize:me,onVirtualScrollEvt:$e,localResetVirtualScroll:ve,padVirtualScroll:ge,scrollTo:j,reset:q,refresh:O}}function Wa(t){return t.charAt(0).toUpperCase()+t.slice(1)}function dl(t,n,u){if(u<=n)return n;const o=u-n+1;let a=n+(t-n)%o;return a<n&&(a=o+a),a===0?0:a}function ce(t,n=2,u="0"){if(t==null)return t;const o=""+t;return o.length>=n?o:new Array(n-o.length+1).join(u)+o}const fl=t=>["add","add-unique","toggle"].includes(t),Xa=".*+?^${}()|[]\\",Za=Object.keys(jn);var Ja=yt({name:"QSelect",inheritAttrs:!1,props:{...Qa,...Ln,...jn,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:fl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Cl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(t,{slots:n,emit:u}){const{proxy:o}=Vt(),{$q:a}=o,l=ae(!1),d=ae(!1),r=ae(-1),s=ae(""),w=ae(!1),f=ae(!1);let h=null,S=null,p,v,y,b=null,_,N,x,g;const Y=ae(null),ee=ae(null),V=ae(null),q=ae(null),O=ae(null),j=oa(t),L=ra(rn),Z=k(()=>Array.isArray(t.options)?t.options.length:0),re=k(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:Se,virtualScrollSliceSizeComputed:ve,localResetVirtualScroll:me,padVirtualScroll:ge,onVirtualScrollEvt:ke,scrollTo:$e,setVirtualScrollSize:He}=Ua({virtualScrollLength:Z,getVirtualScrollTarget:St,getVirtualScrollEl:Et,virtualScrollItemSizeComputed:re}),M=Ml(),F=k(()=>{const c=t.mapOptions===!0&&t.multiple!==!0,B=t.modelValue!==void 0&&(t.modelValue!==null||c===!0)?t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue]:[];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const H=t.mapOptions===!0&&p!==void 0?p:[],G=B.map(be=>K(be,H));return t.modelValue===null&&c===!0?G.filter(be=>be!==null):G}return B}),R=k(()=>{const c={};return Za.forEach(B=>{const H=t[B];H!==void 0&&(c[B]=H)}),c}),ie=k(()=>t.optionsDark===null?M.isDark.value:t.optionsDark),de=k(()=>ll(F.value)),te=k(()=>{let c="q-field__input q-placeholder col";return t.hideSelected===!0||F.value.length===0?[c,t.inputClass]:(c+=" q-field__input--padding",t.inputClass===void 0?c:[c,t.inputClass])}),ne=k(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),we=k(()=>Z.value===0),U=k(()=>F.value.map(c=>Ve.value(c)).join(", ")),Ie=k(()=>t.displayValue!==void 0?t.displayValue:U.value),he=k(()=>t.optionsHtml===!0?()=>!0:c=>c!=null&&c.html===!0),Ce=k(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||F.value.some(he.value))),Le=k(()=>M.focused.value===!0?t.tabindex:-1),nt=k(()=>{const c={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":l.value===!0?"true":"false","aria-controls":`${M.targetUid.value}_lb`};return r.value>=0&&(c["aria-activedescendant"]=`${M.targetUid.value}_${r.value}`),c}),Je=k(()=>({id:`${M.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Pe=k(()=>F.value.map((c,B)=>({index:B,opt:c,html:he.value(c),selected:!0,removeAtIndex:pt,toggleOption:et,tabindex:Le.value}))),Ee=k(()=>{if(Z.value===0)return[];const{from:c,to:B}=Se.value;return t.options.slice(c,B).map((H,G)=>{const be=lt.value(H)===!0,pe=ye(H)===!0,Ye=c+G,xe={clickable:!0,active:pe,activeClass:Ge.value,manualFocus:!0,focused:!1,disable:be,tabindex:-1,dense:t.optionsDense,dark:ie.value,role:"option","aria-selected":pe===!0?"true":"false",id:`${M.targetUid.value}_${Ye}`,onClick:()=>{et(H)}};return be!==!0&&(r.value===Ye&&(xe.focused=!0),a.platform.is.desktop===!0&&(xe.onMousemove=()=>{l.value===!0&&D(Ye)})),{index:Ye,opt:H,html:he.value(H),label:Ve.value(H),selected:xe.active,focused:xe.focused,toggleOption:et,setOptionIndex:D,itemProps:xe}})}),dt=k(()=>t.dropdownIcon!==void 0?t.dropdownIcon:a.iconSet.arrow.dropdown),$t=k(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),Ge=k(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),Fe=k(()=>ue(t.optionValue,"value")),Ve=k(()=>ue(t.optionLabel,"label")),lt=k(()=>ue(t.optionDisable,"disable")),ft=k(()=>F.value.map(c=>Fe.value(c))),zt=k(()=>{const c={onInput:rn,onChange:L,onKeydown:vt,onKeyup:De,onKeypress:Ue,onFocus:Re,onClick(B){v===!0&&ht(B)}};return c.onCompositionstart=c.onCompositionupdate=c.onCompositionend=L,c});Oe(F,c=>{p=c,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&M.innerLoading.value!==!0&&(d.value!==!0&&l.value!==!0||de.value!==!0)&&(y!==!0&&Rt(),(d.value===!0||l.value===!0)&&_t(""))},{immediate:!0}),Oe(()=>t.fillInput,Rt),Oe(l,wn),Oe(Z,Xl);function it(c){return t.emitValue===!0?Fe.value(c):c}function at(c){if(c>-1&&c<F.value.length)if(t.multiple===!0){const B=t.modelValue.slice();u("remove",{index:c,value:B.splice(c,1)[0]}),u("update:modelValue",B)}else u("update:modelValue",null)}function pt(c){at(c),M.focus()}function bt(c,B){const H=it(c);if(t.multiple!==!0){t.fillInput===!0&&Ot(Ve.value(c),!0,!0),u("update:modelValue",H);return}if(F.value.length===0){u("add",{index:0,value:H}),u("update:modelValue",t.multiple===!0?[H]:H);return}if(B===!0&&ye(c)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const G=t.modelValue.slice();u("add",{index:G.length,value:H}),G.push(H),u("update:modelValue",G)}function et(c,B){if(M.editable.value!==!0||c===void 0||lt.value(c)===!0)return;const H=Fe.value(c);if(t.multiple!==!0){B!==!0&&(Ot(t.fillInput===!0?Ve.value(c):"",!0,!0),It()),ee.value!==null&&ee.value.focus(),(F.value.length===0||Xt(Fe.value(F.value[0]),H)!==!0)&&u("update:modelValue",t.emitValue===!0?H:c);return}if((v!==!0||w.value===!0)&&M.focus(),Re(),F.value.length===0){const pe=t.emitValue===!0?H:c;u("add",{index:0,value:pe}),u("update:modelValue",t.multiple===!0?[pe]:pe);return}const G=t.modelValue.slice(),be=ft.value.findIndex(pe=>Xt(pe,H));if(be>-1)u("remove",{index:be,value:G.splice(be,1)[0]});else{if(t.maxValues!==void 0&&G.length>=t.maxValues)return;const pe=t.emitValue===!0?H:c;u("add",{index:G.length,value:pe}),G.push(pe)}u("update:modelValue",G)}function D(c){if(a.platform.is.desktop!==!0)return;const B=c>-1&&c<Z.value?c:-1;r.value!==B&&(r.value=B)}function E(c=1,B){if(l.value===!0){let H=r.value;do H=dl(H+c,-1,Z.value-1);while(H!==-1&&H!==r.value&&lt.value(t.options[H])===!0);r.value!==H&&(D(H),$e(H),B!==!0&&t.useInput===!0&&t.fillInput===!0&&wt(H>=0?Ve.value(t.options[H]):_,!0))}}function K(c,B){const H=G=>Xt(Fe.value(G),c);return t.options.find(H)||B.find(H)||c}function ue(c,B){const H=c!==void 0?c:B;return typeof H=="function"?H:G=>G!==null&&typeof G=="object"&&H in G?G[H]:G}function ye(c){const B=Fe.value(c);return ft.value.find(H=>Xt(H,B))!==void 0}function Re(c){t.useInput===!0&&ee.value!==null&&(c===void 0||ee.value===c.target&&c.target.value===U.value)&&ee.value.select()}function W(c){sa(c,27)===!0&&l.value===!0&&(ht(c),It(),Rt()),u("keyup",c)}function De(c){const{value:B}=c.target;if(c.keyCode!==void 0){W(c);return}if(c.target.value="",h!==null&&(clearTimeout(h),h=null),S!==null&&(clearTimeout(S),S=null),Rt(),typeof B=="string"&&B.length!==0){const H=B.toLocaleLowerCase(),G=pe=>{const Ye=t.options.find(xe=>pe.value(xe).toLocaleLowerCase()===H);return Ye===void 0?!1:(F.value.indexOf(Ye)===-1?et(Ye):It(),!0)},be=pe=>{G(Fe)!==!0&&(G(Ve)===!0||pe===!0||_t(B,!0,()=>be(!0)))};be()}else M.clearValue(c)}function Ue(c){u("keypress",c)}function vt(c){if(u("keydown",c),ca(c)===!0)return;const B=s.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),H=c.shiftKey!==!0&&t.multiple!==!0&&(r.value>-1||B===!0);if(c.keyCode===27){Gt(c);return}if(c.keyCode===9&&H===!1){fe();return}if(c.target===void 0||c.target.id!==M.targetUid.value||M.editable.value!==!0)return;if(c.keyCode===40&&M.innerLoading.value!==!0&&l.value===!1){ot(c),tt();return}if(c.keyCode===8&&(t.useChips===!0||t.clearable===!0)&&t.hideSelected!==!0&&s.value.length===0){t.multiple===!0&&Array.isArray(t.modelValue)===!0?at(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&u("update:modelValue",null);return}(c.keyCode===35||c.keyCode===36)&&(typeof s.value!="string"||s.value.length===0)&&(ot(c),r.value=-1,E(c.keyCode===36?1:-1,t.multiple)),(c.keyCode===33||c.keyCode===34)&&ve.value!==void 0&&(ot(c),r.value=Math.max(-1,Math.min(Z.value,r.value+(c.keyCode===33?-1:1)*ve.value.view)),E(c.keyCode===33?1:-1,t.multiple)),(c.keyCode===38||c.keyCode===40)&&(ot(c),E(c.keyCode===38?-1:1,t.multiple));const G=Z.value;if((x===void 0||g<Date.now())&&(x=""),G>0&&t.useInput!==!0&&c.key!==void 0&&c.key.length===1&&c.altKey===!1&&c.ctrlKey===!1&&c.metaKey===!1&&(c.keyCode!==32||x.length!==0)){l.value!==!0&&tt(c);const be=c.key.toLocaleLowerCase(),pe=x.length===1&&x[0]===be;g=Date.now()+1500,pe===!1&&(ot(c),x+=be);const Ye=new RegExp("^"+x.split("").map(_n=>Xa.indexOf(_n)>-1?"\\"+_n:_n).join(".*"),"i");let xe=r.value;if(pe===!0||xe<0||Ye.test(Ve.value(t.options[xe]))!==!0)do xe=dl(xe+1,-1,G-1);while(xe!==r.value&&(lt.value(t.options[xe])===!0||Ye.test(Ve.value(t.options[xe]))!==!0));r.value!==xe&&We(()=>{D(xe),$e(xe),xe>=0&&t.useInput===!0&&t.fillInput===!0&&wt(Ve.value(t.options[xe]),!0)});return}if(!(c.keyCode!==13&&(c.keyCode!==32||t.useInput===!0||x!=="")&&(c.keyCode!==9||H===!1))){if(c.keyCode!==9&&ot(c),r.value>-1&&r.value<G){et(t.options[r.value]);return}if(B===!0){const be=(pe,Ye)=>{if(Ye){if(fl(Ye)!==!0)return}else Ye=t.newValueMode;if(Ot("",t.multiple!==!0,!0),pe==null)return;(Ye==="toggle"?et:bt)(pe,Ye==="add-unique"),t.multiple!==!0&&(ee.value!==null&&ee.value.focus(),It())};if(t.onNewValue!==void 0?u("newValue",s.value,be):be(s.value),t.multiple!==!0)return}l.value===!0?fe():M.innerLoading.value!==!0&&tt()}}function Et(){return v===!0?O.value:V.value!==null&&V.value.contentEl!==null?V.value.contentEl:void 0}function St(){return Et()}function Wt(){return t.hideSelected===!0?[]:n["selected-item"]!==void 0?Pe.value.map(c=>n["selected-item"](c)).slice():n.selected!==void 0?[].concat(n.selected()):t.useChips===!0?Pe.value.map((c,B)=>$(La,{key:"option-"+B,removable:M.editable.value===!0&&lt.value(c.opt)!==!0,dense:!0,textColor:t.color,tabindex:Le.value,onRemove(){c.removeAtIndex(B)}},()=>$("span",{class:"ellipsis",[c.html===!0?"innerHTML":"textContent"]:Ve.value(c.opt)}))):[$("span",{[Ce.value===!0?"innerHTML":"textContent"]:Ie.value})]}function Lt(){if(we.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:s.value}):void 0;const c=n.option!==void 0?n.option:H=>$(Yt,{key:H.index,...H.itemProps},()=>$(Ht,()=>$(da,()=>$("span",{[H.html===!0?"innerHTML":"textContent"]:H.label}))));let B=ge("div",Ee.value.map(c));return n["before-options"]!==void 0&&(B=n["before-options"]().concat(B)),fa(n["after-options"],B)}function un(c,B){const H=B===!0?{...nt.value,...M.splitAttrs.attributes.value}:void 0,G={ref:B===!0?ee:void 0,key:"i_t",class:te.value,style:t.inputStyle,value:s.value!==void 0?s.value:"",type:"search",...H,id:B===!0?M.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":c===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...zt.value};return c!==!0&&v===!0&&(Array.isArray(G.class)===!0?G.class=[...G.class,"no-pointer-events"]:G.class+=" no-pointer-events"),$("input",G)}function rn(c){h!==null&&(clearTimeout(h),h=null),S!==null&&(clearTimeout(S),S=null),!(c&&c.target&&c.target.qComposing===!0)&&(wt(c.target.value||""),y=!0,_=s.value,M.focused.value!==!0&&(v!==!0||w.value===!0)&&M.focus(),t.onFilter!==void 0&&(h=setTimeout(()=>{h=null,_t(s.value)},t.inputDebounce)))}function wt(c,B){s.value!==c&&(s.value=c,B===!0||t.inputDebounce===0||t.inputDebounce==="0"?u("inputValue",c):S=setTimeout(()=>{S=null,u("inputValue",c)},t.inputDebounce))}function Ot(c,B,H){y=H!==!0,t.useInput===!0&&(wt(c,!0),(B===!0||H!==!0)&&(_=c),B!==!0&&_t(c))}function _t(c,B,H){if(t.onFilter===void 0||B!==!0&&M.focused.value!==!0)return;M.innerLoading.value===!0?u("filterAbort"):(M.innerLoading.value=!0,f.value=!0),c!==""&&t.multiple!==!0&&F.value.length!==0&&y!==!0&&c===Ve.value(F.value[0])&&(c="");const G=setTimeout(()=>{l.value===!0&&(l.value=!1)},10);b!==null&&clearTimeout(b),b=G,u("filter",c,(be,pe)=>{(B===!0||M.focused.value===!0)&&b===G&&(clearTimeout(b),typeof be=="function"&&be(),f.value=!1,We(()=>{M.innerLoading.value=!1,M.editable.value===!0&&(B===!0?l.value===!0&&It():l.value===!0?wn(!0):l.value=!0),typeof pe=="function"&&We(()=>{pe(o)}),typeof H=="function"&&We(()=>{H(o)})}))},()=>{M.focused.value===!0&&b===G&&(clearTimeout(b),M.innerLoading.value=!1,f.value=!1),l.value===!0&&(l.value=!1)})}function Sn(){return $(pn,{ref:V,class:ne.value,style:t.popupContentStyle,modelValue:l.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&we.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:ie.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:$t.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Je.value,onScrollPassive:ke,onBeforeShow:el,onBeforeHide:i,onShow:m},Lt)}function i(c){tl(c),fe()}function m(){He()}function C(c){ht(c),ee.value!==null&&ee.value.focus(),w.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function T(c){ht(c),We(()=>{w.value=!1})}function A(){const c=[$(Na,{class:`col-auto ${M.fieldClass.value}`,...R.value,for:M.targetUid.value,dark:ie.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:s.value.length!==0,...M.splitAttrs.listeners.value,onFocus:C,onBlur:T},{...n,rawControl:()=>M.getControl(!0),before:void 0,after:void 0})];return l.value===!0&&c.push($("div",{ref:O,class:ne.value+" scroll",style:t.popupContentStyle,...Je.value,onClick:Gt,onScrollPassive:ke},Lt())),$(Al,{ref:q,modelValue:d.value,position:t.useInput===!0?"top":void 0,transitionShow:N,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:el,onBeforeHide:se,onHide:z,onShow:le},()=>$("div",{class:"q-select__dialog"+(ie.value===!0?" q-select__dialog--dark q-dark":"")+(w.value===!0?" q-select__dialog--focused":"")},c))}function se(c){tl(c),q.value!==null&&q.value.__updateRefocusTarget(M.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),M.focused.value=!1}function z(c){It(),M.focused.value===!1&&u("blur",c),Rt()}function le(){const c=document.activeElement;(c===null||c.id!==M.targetUid.value)&&ee.value!==null&&ee.value!==c&&ee.value.focus(),He()}function fe(){d.value!==!0&&(r.value=-1,l.value===!0&&(l.value=!1),M.focused.value===!1&&(b!==null&&(clearTimeout(b),b=null),M.innerLoading.value===!0&&(u("filterAbort"),M.innerLoading.value=!1,f.value=!1)))}function tt(c){M.editable.value===!0&&(v===!0?(M.onControlFocusin(c),d.value=!0,We(()=>{M.focus()})):M.focus(),t.onFilter!==void 0?_t(s.value):(we.value!==!0||n["no-option"]!==void 0)&&(l.value=!0))}function It(){d.value=!1,fe()}function Rt(){t.useInput===!0&&Ot(t.multiple!==!0&&t.fillInput===!0&&F.value.length!==0&&Ve.value(F.value[0])||"",!0,!0)}function wn(c){let B=-1;if(c===!0){if(F.value.length!==0){const H=Fe.value(F.value[0]);B=t.options.findIndex(G=>Xt(Fe.value(G),H))}me(B)}D(B)}function Xl(c,B){l.value===!0&&M.innerLoading.value===!1&&(me(-1,!0),We(()=>{l.value===!0&&M.innerLoading.value===!1&&(c>B?me():wn(!0))}))}function Gn(){d.value===!1&&V.value!==null&&V.value.updatePosition()}function el(c){c!==void 0&&ht(c),u("popupShow",c),M.hasPopupOpen=!0,M.onControlFocusin(c)}function tl(c){c!==void 0&&ht(c),u("popupHide",c),M.hasPopupOpen=!1,M.onControlFocusout(c)}function nl(){v=a.platform.is.mobile!==!0&&t.behavior!=="dialog"?!1:t.behavior!=="menu"&&(t.useInput===!0?n["no-option"]!==void 0||t.onFilter!==void 0||we.value===!1:!0),N=a.platform.is.ios===!0&&v===!0&&t.useInput===!0?"fade":t.transitionShow}return ua(nl),ia(Gn),nl(),mn(()=>{h!==null&&clearTimeout(h),S!==null&&clearTimeout(S)}),Object.assign(o,{showPopup:tt,hidePopup:It,removeAtIndex:at,add:bt,toggleOption:et,getOptionIndex:()=>r.value,setOptionIndex:D,moveOptionSelection:E,filter:_t,updateMenuPosition:Gn,updateInputValue:Ot,isOptionSelected:ye,getEmittingOptionValue:it,isOptionDisabled:(...c)=>lt.value.apply(null,c)===!0,getOptionValue:(...c)=>Fe.value.apply(null,c),getOptionLabel:(...c)=>Ve.value.apply(null,c)}),Object.assign(M,{innerValue:F,fieldClass:k(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:Y,targetRef:ee,hasValue:de,showPopup:tt,floatingLabel:k(()=>t.hideSelected!==!0&&de.value===!0||typeof s.value=="number"||s.value.length!==0||ll(t.displayValue)),getControlChild:()=>{if(M.editable.value!==!1&&(d.value===!0||we.value!==!0||n["no-option"]!==void 0))return v===!0?A():Sn();M.hasPopupOpen===!0&&(M.hasPopupOpen=!1)},controlEvents:{onFocusin(c){M.onControlFocusin(c)},onFocusout(c){M.onControlFocusout(c,()=>{Rt(),fe()})},onClick(c){if(Gt(c),v!==!0&&l.value===!0){fe(),ee.value!==null&&ee.value.focus();return}tt(c)}},getControl:c=>{const B=Wt(),H=c===!0||d.value!==!0||v!==!0;if(t.useInput===!0)B.push(un(c,H));else if(M.editable.value===!0){const be=H===!0?nt.value:void 0;B.push($("input",{ref:H===!0?ee:void 0,key:"d_t",class:"q-select__focus-target",id:H===!0?M.targetUid.value:void 0,value:Ie.value,readonly:!0,"data-autofocus":c===!0||t.autofocus===!0||void 0,...be,onKeydown:vt,onKeyup:W,onKeypress:Ue})),H===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&B.push($("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:De}))}if(j.value!==void 0&&t.disable!==!0&&ft.value.length!==0){const be=ft.value.map(pe=>$("option",{value:pe,selected:!0}));B.push($("select",{class:"hidden",name:j.value,multiple:t.multiple},be))}const G=t.useInput===!0||H!==!0?void 0:M.splitAttrs.attributes.value;return $("div",{class:"q-field__native row items-center",...G,...M.splitAttrs.listeners.value},B)},getInnerAppend:()=>t.loading!==!0&&f.value!==!0&&t.hideDropdownIcon!==!0?[$(At,{class:"q-select__dropdown-icon"+(l.value===!0?" rotate-180":""),name:dt.value})]:null}),Dl(M)}});const Mt=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ga(t,n,u){return Object.prototype.toString.call(t)==="[object Date]"&&(u=t.getDate(),n=t.getMonth()+1,t=t.getFullYear()),lo(Qn(t,n,u))}function vl(t,n,u){return jl(no(t,n,u))}function eo(t){return to(t)===0}function vn(t,n){return n<=6?31:n<=11||eo(t)?30:29}function to(t){const n=Mt.length;let u=Mt[0],o,a,l,d,r;if(t<u||t>=Mt[n-1])throw new Error("Invalid Jalaali year "+t);for(r=1;r<n&&(o=Mt[r],a=o-u,!(t<o));r+=1)u=o;return d=t-u,a-d<6&&(d=d-a+_e(a+4,33)*33),l=Xe(Xe(d+1,33)-1,4),l===-1&&(l=4),l}function Bl(t,n){const u=Mt.length,o=t+621;let a=-14,l=Mt[0],d,r,s,w,f;if(t<l||t>=Mt[u-1])throw new Error("Invalid Jalaali year "+t);for(f=1;f<u&&(d=Mt[f],r=d-l,!(t<d));f+=1)a=a+_e(r,33)*8+_e(Xe(r,33),4),l=d;w=t-l,a=a+_e(w,33)*8+_e(Xe(w,33)+3,4),Xe(r,33)===4&&r-w===4&&(a+=1);const h=_e(o,4)-_e((_e(o,100)+1)*3,4)-150,S=20+a-h;return n||(r-w<6&&(w=w-r+_e(r+4,33)*33),s=Xe(Xe(w+1,33)-1,4),s===-1&&(s=4)),{leap:s,gy:o,march:S}}function no(t,n,u){const o=Bl(t,!0);return Qn(o.gy,3,o.march)+(n-1)*31-_e(n,7)*(n-7)+u-1}function lo(t){const n=jl(t).gy;let u=n-621,o,a,l;const d=Bl(u,!1),r=Qn(n,3,d.march);if(l=t-r,l>=0){if(l<=185)return a=1+_e(l,31),o=Xe(l,31)+1,{jy:u,jm:a,jd:o};l-=186}else u-=1,l+=179,d.leap===1&&(l+=1);return a=7+_e(l,30),o=Xe(l,30)+1,{jy:u,jm:a,jd:o}}function Qn(t,n,u){let o=_e((t+_e(n-8,6)+100100)*1461,4)+_e(153*Xe(n+9,12)+2,5)+u-34840408;return o=o-_e(_e(t+100100+_e(n-8,6),100)*3,4)+752,o}function jl(t){let n=4*t+139361631;n=n+_e(_e(4*t+183187720,146097)*3,4)*4-3908;const u=_e(Xe(n,1461),4)*5+308,o=_e(Xe(u,153),5)+1,a=Xe(_e(u,153),12)+1;return{gy:_e(n,1461)-100100+_e(8-a,6),gm:a,gd:o}}function _e(t,n){return~~(t/n)}function Xe(t,n){return t-~~(t/n)*n}const ao=["gregorian","persian"],Nl={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:t=>ao.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},zl=["update:modelValue"];function mt(t){return t.year+"/"+ce(t.month)+"/"+ce(t.day)}function Ll(t,n){const u=k(()=>t.disable!==!0&&t.readonly!==!0),o=k(()=>u.value===!0?0:-1),a=k(()=>{const r=[];return t.color!==void 0&&r.push(`bg-${t.color}`),t.textColor!==void 0&&r.push(`text-${t.textColor}`),r.join(" ")});function l(){return t.locale!==void 0?{...n.lang.date,...t.locale}:n.lang.date}function d(r){const s=new Date,w=r===!0?null:0;if(t.calendar==="persian"){const f=Ga(s);return{year:f.jy,month:f.jm,day:f.jd}}return{year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),hour:w,minute:w,second:w,millisecond:w}}return{editable:u,tabindex:o,headerClass:a,getLocale:l,getCurrentDate:d}}const Rl=864e5,oo=36e5,Fn=6e4,Pl="YYYY-MM-DDTHH:mm:ss.SSSZ",uo=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,io=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Dn={};function ro(t,n){const u="("+n.days.join("|")+")",o=t+u;if(Dn[o]!==void 0)return Dn[o];const a="("+n.daysShort.join("|")+")",l="("+n.months.join("|")+")",d="("+n.monthsShort.join("|")+")",r={};let s=0;const w=t.replace(io,h=>{switch(s++,h){case"YY":return r.YY=s,"(-?\\d{1,2})";case"YYYY":return r.YYYY=s,"(-?\\d{1,4})";case"M":return r.M=s,"(\\d{1,2})";case"MM":return r.M=s,"(\\d{2})";case"MMM":return r.MMM=s,d;case"MMMM":return r.MMMM=s,l;case"D":return r.D=s,"(\\d{1,2})";case"Do":return r.D=s++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return r.D=s,"(\\d{2})";case"H":return r.H=s,"(\\d{1,2})";case"HH":return r.H=s,"(\\d{2})";case"h":return r.h=s,"(\\d{1,2})";case"hh":return r.h=s,"(\\d{2})";case"m":return r.m=s,"(\\d{1,2})";case"mm":return r.m=s,"(\\d{2})";case"s":return r.s=s,"(\\d{1,2})";case"ss":return r.s=s,"(\\d{2})";case"S":return r.S=s,"(\\d{1})";case"SS":return r.S=s,"(\\d{2})";case"SSS":return r.S=s,"(\\d{3})";case"A":return r.A=s,"(AM|PM)";case"a":return r.a=s,"(am|pm)";case"aa":return r.aa=s,"(a\\.m\\.|p\\.m\\.)";case"ddd":return a;case"dddd":return u;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return r.Z=s,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return r.ZZ=s,"(Z|[+-]\\d{2}\\d{2})";case"X":return r.X=s,"(-?\\d+)";case"x":return r.x=s,"(-?\\d{4,})";default:return s--,h[0]==="["&&(h=h.substring(1,h.length-1)),h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:r,regex:new RegExp("^"+w)};return Dn[o]=f,f}function Kl(t,n){return t!==void 0?t:n!==void 0?n.date:Ta.date}function ml(t,n=""){const u=t>0?"-":"+",o=Math.abs(t),a=Math.floor(o/60),l=o%60;return u+ce(a)+n+ce(l)}function so(t,n,u){let o=t.getFullYear(),a=t.getMonth();const l=t.getDate();return n.year!==void 0&&(o+=u*n.year,delete n.year),n.month!==void 0&&(a+=u*n.month,delete n.month),t.setDate(1),t.setMonth(2),t.setFullYear(o),t.setMonth(a),t.setDate(Math.min(l,Xn(t))),n.date!==void 0&&(t.setDate(t.getDate()+u*n.date),delete n.date),t}function co(t,n,u){const o=n.year!==void 0?n.year:t[`get${u}FullYear`](),a=n.month!==void 0?n.month-1:t[`get${u}Month`](),l=new Date(o,a+1,0).getDate(),d=Math.min(l,n.date!==void 0?n.date:t[`get${u}Date`]());return t[`set${u}Date`](1),t[`set${u}Month`](2),t[`set${u}FullYear`](o),t[`set${u}Month`](a),t[`set${u}Date`](d),delete n.year,delete n.month,delete n.date,t}function Un(t,n,u){const o=Ql(n),a=new Date(t),l=o.year!==void 0||o.month!==void 0||o.date!==void 0?so(a,o,u):a;for(const d in o){const r=Wa(d);l[`set${r}`](l[`get${r}`]()+u*o[d])}return l}function Ql(t){const n={...t};return t.years!==void 0&&(n.year=t.years,delete n.years),t.months!==void 0&&(n.month=t.months,delete n.months),t.days!==void 0&&(n.date=t.days,delete n.days),t.day!==void 0&&(n.date=t.day,delete n.day),t.hour!==void 0&&(n.hours=t.hour,delete n.hour),t.minute!==void 0&&(n.minutes=t.minute,delete n.minute),t.second!==void 0&&(n.seconds=t.second,delete n.second),t.millisecond!==void 0&&(n.milliseconds=t.millisecond,delete n.millisecond),n}function Ul(t,n,u){const o=Ql(n),a=u===!0?"UTC":"",l=new Date(t),d=o.year!==void 0||o.month!==void 0||o.date!==void 0?co(l,o,a):l;for(const r in o){const s=r.charAt(0).toUpperCase()+r.slice(1);d[`set${a}${s}`](o[r])}return d}function fo(t,n,u){const o=Qt(t,n,u),a=new Date(o.year,o.month===null?null:o.month-1,o.day===null?1:o.day,o.hour,o.minute,o.second,o.millisecond),l=a.getTimezoneOffset();return o.timezoneOffset===null||o.timezoneOffset===l?a:Un(a,{minutes:o.timezoneOffset-l},1)}function Qt(t,n,u,o,a){const l={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(a!==void 0&&Object.assign(l,a),t==null||t===""||typeof t!="string")return l;n===void 0&&(n=Pl);const d=Kl(u,Hl.props),r=d.months,s=d.monthsShort,{regex:w,map:f}=ro(n,d),h=t.match(w);if(h===null)return l;let S="";if(f.X!==void 0||f.x!==void 0){const p=parseInt(h[f.X!==void 0?f.X:f.x],10);if(isNaN(p)===!0||p<0)return l;const v=new Date(p*(f.X!==void 0?1e3:1));l.year=v.getFullYear(),l.month=v.getMonth()+1,l.day=v.getDate(),l.hour=v.getHours(),l.minute=v.getMinutes(),l.second=v.getSeconds(),l.millisecond=v.getMilliseconds()}else{if(f.YYYY!==void 0)l.year=parseInt(h[f.YYYY],10);else if(f.YY!==void 0){const p=parseInt(h[f.YY],10);l.year=p<0?p:2e3+p}if(f.M!==void 0){if(l.month=parseInt(h[f.M],10),l.month<1||l.month>12)return l}else f.MMM!==void 0?l.month=s.indexOf(h[f.MMM])+1:f.MMMM!==void 0&&(l.month=r.indexOf(h[f.MMMM])+1);if(f.D!==void 0){if(l.day=parseInt(h[f.D],10),l.year===null||l.month===null||l.day<1)return l;const p=o!=="persian"?new Date(l.year,l.month,0).getDate():vn(l.year,l.month);if(l.day>p)return l}f.H!==void 0?l.hour=parseInt(h[f.H],10)%24:f.h!==void 0&&(l.hour=parseInt(h[f.h],10)%12,(f.A&&h[f.A]==="PM"||f.a&&h[f.a]==="pm"||f.aa&&h[f.aa]==="p.m.")&&(l.hour+=12),l.hour=l.hour%24),f.m!==void 0&&(l.minute=parseInt(h[f.m],10)%60),f.s!==void 0&&(l.second=parseInt(h[f.s],10)%60),f.S!==void 0&&(l.millisecond=parseInt(h[f.S],10)*10**(3-h[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(S=f.Z!==void 0?h[f.Z].replace(":",""):h[f.ZZ],l.timezoneOffset=(S[0]==="+"?-1:1)*(60*S.slice(1,3)+1*S.slice(3,5)))}return l.dateHash=ce(l.year,6)+"/"+ce(l.month)+"/"+ce(l.day),l.timeHash=ce(l.hour)+":"+ce(l.minute)+":"+ce(l.second)+S,l}function vo(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function mo(t,n){return Ul(new Date,t,n)}function ho(t){const n=new Date(t).getDay();return n===0?7:n}function Tn(t){const n=new Date(t.getFullYear(),t.getMonth(),t.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const u=new Date(n.getFullYear(),0,4);u.setDate(u.getDate()-(u.getDay()+6)%7+3);const o=n.getTimezoneOffset()-u.getTimezoneOffset();n.setHours(n.getHours()-o);const a=(n-u)/(Rl*7);return 1+Math.floor(a)}function go(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Mn(t,n){const u=new Date(t);return n===!0?go(u):u.getTime()}function yo(t,n,u,o={}){const a=Mn(n,o.onlyDate),l=Mn(u,o.onlyDate),d=Mn(t,o.onlyDate);return(d>a||o.inclusiveFrom===!0&&d===a)&&(d<l||o.inclusiveTo===!0&&d===l)}function po(t,n){return Un(t,n,1)}function bo(t,n){return Un(t,n,-1)}function st(t,n,u){const o=new Date(t),a=`set${u===!0?"UTC":""}`;switch(n){case"year":case"years":o[`${a}Month`](0);case"month":case"months":o[`${a}Date`](1);case"day":case"days":case"date":o[`${a}Hours`](0);case"hour":case"hours":o[`${a}Minutes`](0);case"minute":case"minutes":o[`${a}Seconds`](0);case"second":case"seconds":o[`${a}Milliseconds`](0)}return o}function So(t,n,u){const o=new Date(t),a=`set${u===!0?"UTC":""}`;switch(n){case"year":case"years":o[`${a}Month`](11);case"month":case"months":o[`${a}Date`](Xn(o));case"day":case"days":case"date":o[`${a}Hours`](23);case"hour":case"hours":o[`${a}Minutes`](59);case"minute":case"minutes":o[`${a}Seconds`](59);case"second":case"seconds":o[`${a}Milliseconds`](999)}return o}function wo(t){let n=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(u=>{n=Math.max(n,new Date(u))}),n}function _o(t){let n=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(u=>{n=Math.min(n,new Date(u))}),n}function cn(t,n,u){return(t.getTime()-t.getTimezoneOffset()*Fn-(n.getTime()-n.getTimezoneOffset()*Fn))/u}function Wn(t,n,u="days"){const o=new Date(t),a=new Date(n);switch(u){case"years":case"year":return o.getFullYear()-a.getFullYear();case"months":case"month":return(o.getFullYear()-a.getFullYear())*12+o.getMonth()-a.getMonth();case"days":case"day":case"date":return cn(st(o,"day"),st(a,"day"),Rl);case"hours":case"hour":return cn(st(o,"hour"),st(a,"hour"),oo);case"minutes":case"minute":return cn(st(o,"minute"),st(a,"minute"),Fn);case"seconds":case"second":return cn(st(o,"second"),st(a,"second"),1e3)}}function An(t){return Wn(t,st(t,"year"),"days")+1}function ko(t){return ql(t)===!0?"date":typeof t=="number"?"number":"string"}function Co(t,n,u){const o=new Date(t);if(n){const a=new Date(n);if(o<a)return a}if(u){const a=new Date(u);if(o>a)return a}return o}function Do(t,n,u){const o=new Date(t),a=new Date(n);if(u===void 0)return o.getTime()===a.getTime();switch(u){case"second":case"seconds":if(o.getSeconds()!==a.getSeconds())return!1;case"minute":case"minutes":if(o.getMinutes()!==a.getMinutes())return!1;case"hour":case"hours":if(o.getHours()!==a.getHours())return!1;case"day":case"days":case"date":if(o.getDate()!==a.getDate())return!1;case"month":case"months":if(o.getMonth()!==a.getMonth())return!1;case"year":case"years":if(o.getFullYear()!==a.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${u}`)}return!0}function Xn(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function hl(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const gl={YY(t,n,u){const o=this.YYYY(t,n,u)%100;return o>=0?ce(o):"-"+ce(Math.abs(o))},YYYY(t,n,u){return u!=null?u:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return ce(t.getMonth()+1)},MMM(t,n){return n.monthsShort[t.getMonth()]},MMMM(t,n){return n.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return hl(this.Q(t))},D(t){return t.getDate()},Do(t){return hl(t.getDate())},DD(t){return ce(t.getDate())},DDD(t){return An(t)},DDDD(t){return ce(An(t),3)},d(t){return t.getDay()},dd(t,n){return this.dddd(t,n).slice(0,2)},ddd(t,n){return n.daysShort[t.getDay()]},dddd(t,n){return n.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return Tn(t)},ww(t){return ce(Tn(t))},H(t){return t.getHours()},HH(t){return ce(t.getHours())},h(t){const n=t.getHours();return n===0?12:n>12?n%12:n},hh(t){return ce(this.h(t))},m(t){return t.getMinutes()},mm(t){return ce(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return ce(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return ce(Math.floor(t.getMilliseconds()/10))},SSS(t){return ce(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,n,u,o){const a=o==null?t.getTimezoneOffset():o;return ml(a,":")},ZZ(t,n,u,o){const a=o==null?t.getTimezoneOffset():o;return ml(a)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Zn(t,n,u,o,a){if(t!==0&&!t||t===1/0||t===-1/0)return;const l=new Date(t);if(isNaN(l))return;n===void 0&&(n=Pl);const d=Kl(u,Hl.props);return n.replace(uo,(r,s)=>r in gl?gl[r](l,d,o,a):s===void 0?r:s.split("\\]").join("]"))}function Mo(t){return ql(t)===!0?new Date(t.getTime()):t}var xo={isValid:vo,extractDate:fo,buildDate:mo,getDayOfWeek:ho,getWeekOfYear:Tn,isBetweenDates:yo,addToDate:po,subtractFromDate:bo,adjustDate:Ul,startOfDate:st,endOfDate:So,getMaxDate:wo,getMinDate:_o,getDateDiff:Wn,getDayOfYear:An,inferDateFormat:ko,getDateBetween:Co,isSameDate:Do,daysInMonth:Xn,formatDate:Zn,clone:Mo};const Ft=20,Vo=["Calendar","Years","Months"],yl=t=>Vo.includes(t),xn=t=>/^-?[\d]+\/[0-1]\d$/.test(t),Pt=" \u2014 ";function kt(t){return t.year+"/"+ce(t.month)}var qo=yt({name:"QDate",props:{...Nl,...Ln,...Nn,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:xn},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:xn},navigationMaxYearMonth:{type:String,validator:xn},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:yl}},emits:[...zl,"rangeStart","rangeEnd","navigation"],setup(t,{slots:n,emit:u}){const{proxy:o}=Vt(),{$q:a}=o,l=zn(t,a),{getCache:d}=ma(),{tabindex:r,headerClass:s,getLocale:w,getCurrentDate:f}=Ll(t,a);let h;const S=$l(t),p=El(S),v=ae(null),y=ae(pt()),b=ae(w()),_=k(()=>pt()),N=k(()=>w()),x=k(()=>f()),g=ae(et(y.value,b.value)),Y=ae(t.defaultView),ee=a.lang.rtl===!0?"right":"left",V=ae(ee.value),q=ae(ee.value),O=g.value.year,j=ae(O-O%Ft-(O<0?Ft:0)),L=ae(null),Z=k(()=>{const i=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${i} q-date--${i}-${t.minimal===!0?"minimal":"standard"}`+(l.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),re=k(()=>t.color||"primary"),Se=k(()=>t.textColor||"white"),ve=k(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),me=k(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),ge=k(()=>me.value.filter(i=>typeof i=="string").map(i=>bt(i,y.value,b.value)).filter(i=>i.dateHash!==null&&i.day!==null&&i.month!==null&&i.year!==null)),ke=k(()=>{const i=m=>bt(m,y.value,b.value);return me.value.filter(m=>va(m)===!0&&m.from!==void 0&&m.to!==void 0).map(m=>({from:i(m.from),to:i(m.to)})).filter(m=>m.from.dateHash!==null&&m.to.dateHash!==null&&m.from.dateHash<m.to.dateHash)}),$e=k(()=>t.calendar!=="persian"?i=>new Date(i.year,i.month-1,i.day):i=>{const m=vl(i.year,i.month,i.day);return new Date(m.gy,m.gm-1,m.gd)}),He=k(()=>t.calendar==="persian"?mt:(i,m,C)=>Zn(new Date(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),m===void 0?y.value:m,C===void 0?b.value:C,i.year,i.timezoneOffset)),M=k(()=>ge.value.length+ke.value.reduce((i,m)=>i+1+Wn($e.value(m.to),$e.value(m.from)),0)),F=k(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(L.value!==null){const C=L.value.init,T=$e.value(C);return b.value.daysShort[T.getDay()]+", "+b.value.monthsShort[C.month-1]+" "+C.day+Pt+"?"}if(M.value===0)return Pt;if(M.value>1)return`${M.value} ${b.value.pluralDay}`;const i=ge.value[0],m=$e.value(i);return isNaN(m.valueOf())===!0?Pt:b.value.headerTitle!==void 0?b.value.headerTitle(m,i):b.value.daysShort[m.getDay()]+", "+b.value.monthsShort[i.month-1]+" "+i.day}),R=k(()=>ge.value.concat(ke.value.map(m=>m.from)).sort((m,C)=>m.year-C.year||m.month-C.month)[0]),ie=k(()=>ge.value.concat(ke.value.map(m=>m.to)).sort((m,C)=>C.year-m.year||C.month-m.month)[0]),de=k(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(M.value===0)return Pt;if(M.value>1){const i=R.value,m=ie.value,C=b.value.monthsShort;return C[i.month-1]+(i.year!==m.year?" "+i.year+Pt+C[m.month-1]+" ":i.month!==m.month?Pt+C[m.month-1]:"")+" "+m.year}return ge.value[0].year}),te=k(()=>{const i=[a.iconSet.datetime.arrowLeft,a.iconSet.datetime.arrowRight];return a.lang.rtl===!0?i.reverse():i}),ne=k(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):b.value.firstDayOfWeek),we=k(()=>{const i=b.value.daysShort,m=ne.value;return m>0?i.slice(m,7).concat(i.slice(0,m)):i}),U=k(()=>{const i=g.value;return t.calendar!=="persian"?new Date(i.year,i.month,0).getDate():vn(i.year,i.month)}),Ie=k(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),he=k(()=>{if(t.navigationMinYearMonth===void 0)return null;const i=t.navigationMinYearMonth.split("/");return{year:parseInt(i[0],10),month:parseInt(i[1],10)}}),Ce=k(()=>{if(t.navigationMaxYearMonth===void 0)return null;const i=t.navigationMaxYearMonth.split("/");return{year:parseInt(i[0],10),month:parseInt(i[1],10)}}),Le=k(()=>{const i={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return he.value!==null&&he.value.year>=g.value.year&&(i.year.prev=!1,he.value.year===g.value.year&&he.value.month>=g.value.month&&(i.month.prev=!1)),Ce.value!==null&&Ce.value.year<=g.value.year&&(i.year.next=!1,Ce.value.year===g.value.year&&Ce.value.month<=g.value.month&&(i.month.next=!1)),i}),nt=k(()=>{const i={};return ge.value.forEach(m=>{const C=kt(m);i[C]===void 0&&(i[C]=[]),i[C].push(m.day)}),i}),Je=k(()=>{const i={};return ke.value.forEach(m=>{const C=kt(m.from),T=kt(m.to);if(i[C]===void 0&&(i[C]=[]),i[C].push({from:m.from.day,to:C===T?m.to.day:void 0,range:m}),C<T){let A;const{year:se,month:z}=m.from,le=z<12?{year:se,month:z+1}:{year:se+1,month:1};for(;(A=kt(le))<=T;)i[A]===void 0&&(i[A]=[]),i[A].push({from:void 0,to:A===T?m.to.day:void 0,range:m}),le.month++,le.month>12&&(le.year++,le.month=1)}}),i}),Pe=k(()=>{if(L.value===null)return;const{init:i,initHash:m,final:C,finalHash:T}=L.value,[A,se]=m<=T?[i,C]:[C,i],z=kt(A),le=kt(se);if(z!==Ee.value&&le!==Ee.value)return;const fe={};return z===Ee.value?(fe.from=A.day,fe.includeFrom=!0):fe.from=1,le===Ee.value?(fe.to=se.day,fe.includeTo=!0):fe.to=U.value,fe}),Ee=k(()=>kt(g.value)),dt=k(()=>{const i={};if(t.options===void 0){for(let C=1;C<=U.value;C++)i[C]=!0;return i}const m=typeof t.options=="function"?t.options:C=>t.options.includes(C);for(let C=1;C<=U.value;C++){const T=Ee.value+"/"+ce(C);i[C]=m(T)}return i}),$t=k(()=>{const i={};if(t.events===void 0)for(let m=1;m<=U.value;m++)i[m]=!1;else{const m=typeof t.events=="function"?t.events:C=>t.events.includes(C);for(let C=1;C<=U.value;C++){const T=Ee.value+"/"+ce(C);i[C]=m(T)===!0&&Ie.value(T)}}return i}),Ge=k(()=>{let i,m;const{year:C,month:T}=g.value;if(t.calendar!=="persian")i=new Date(C,T-1,1),m=new Date(C,T-1,0).getDate();else{const A=vl(C,T,1);i=new Date(A.gy,A.gm-1,A.gd);let se=T-1,z=C;se===0&&(se=12,z--),m=vn(z,se)}return{days:i.getDay()-ne.value-1,endDay:m}}),Fe=k(()=>{const i=[],{days:m,endDay:C}=Ge.value,T=m<0?m+7:m;if(T<6)for(let z=C-T;z<=C;z++)i.push({i:z,fill:!0});const A=i.length;for(let z=1;z<=U.value;z++){const le={i:z,event:$t.value[z],classes:[]};dt.value[z]===!0&&(le.in=!0,le.flat=!0),i.push(le)}if(nt.value[Ee.value]!==void 0&&nt.value[Ee.value].forEach(z=>{const le=A+z-1;Object.assign(i[le],{selected:!0,unelevated:!0,flat:!1,color:re.value,textColor:Se.value})}),Je.value[Ee.value]!==void 0&&Je.value[Ee.value].forEach(z=>{if(z.from!==void 0){const le=A+z.from-1,fe=A+(z.to||U.value)-1;for(let tt=le;tt<=fe;tt++)Object.assign(i[tt],{range:z.range,unelevated:!0,color:re.value,textColor:Se.value});Object.assign(i[le],{rangeFrom:!0,flat:!1}),z.to!==void 0&&Object.assign(i[fe],{rangeTo:!0,flat:!1})}else if(z.to!==void 0){const le=A+z.to-1;for(let fe=A;fe<=le;fe++)Object.assign(i[fe],{range:z.range,unelevated:!0,color:re.value,textColor:Se.value});Object.assign(i[le],{flat:!1,rangeTo:!0})}else{const le=A+U.value-1;for(let fe=A;fe<=le;fe++)Object.assign(i[fe],{range:z.range,unelevated:!0,color:re.value,textColor:Se.value})}}),Pe.value!==void 0){const z=A+Pe.value.from-1,le=A+Pe.value.to-1;for(let fe=z;fe<=le;fe++)i[fe].color=re.value,i[fe].editRange=!0;Pe.value.includeFrom===!0&&(i[z].editRangeFrom=!0),Pe.value.includeTo===!0&&(i[le].editRangeTo=!0)}g.value.year===x.value.year&&g.value.month===x.value.month&&(i[A+x.value.day-1].today=!0);const se=i.length%7;if(se>0){const z=7-se;for(let le=1;le<=z;le++)i.push({i:le,fill:!0})}return i.forEach(z=>{let le="q-date__calendar-item ";z.fill===!0?le+="q-date__calendar-item--fill":(le+=`q-date__calendar-item--${z.in===!0?"in":"out"}`,z.range!==void 0&&(le+=` q-date__range${z.rangeTo===!0?"-to":z.rangeFrom===!0?"-from":""}`),z.editRange===!0&&(le+=` q-date__edit-range${z.editRangeFrom===!0?"-from":""}${z.editRangeTo===!0?"-to":""}`),(z.range!==void 0||z.editRange===!0)&&(le+=` text-${z.color}`)),z.classes=le}),i}),Ve=k(()=>t.disable===!0?{"aria-disabled":"true"}:{});Oe(()=>t.modelValue,i=>{if(h===i)h=0;else{const m=et(y.value,b.value);De(m.year,m.month,m)}}),Oe(Y,()=>{v.value!==null&&o.$el.contains(document.activeElement)===!0&&v.value.focus()}),Oe(()=>g.value.year+"|"+g.value.month,()=>{u("navigation",{year:g.value.year,month:g.value.month})}),Oe(_,i=>{un(i,b.value,"mask"),y.value=i}),Oe(N,i=>{un(y.value,i,"locale"),b.value=i});function lt(){const{year:i,month:m,day:C}=x.value,T={...g.value,year:i,month:m,day:C},A=nt.value[kt(T)];(A===void 0||A.includes(T.day)===!1)&&Wt(T),it(T.year,T.month)}function ft(i){yl(i)===!0&&(Y.value=i)}function zt(i,m){["month","year"].includes(i)&&(i==="month"?E:K)(m===!0?-1:1)}function it(i,m){Y.value="Calendar",De(i,m)}function at(i,m){if(t.range===!1||!i){L.value=null;return}const C=Object.assign({...g.value},i),T=m!==void 0?Object.assign({...g.value},m):C;L.value={init:C,initHash:mt(C),final:T,finalHash:mt(T)},it(C.year,C.month)}function pt(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function bt(i,m,C){return Qt(i,m,C,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function et(i,m){const C=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(C.length===0)return D();const T=C[C.length-1],A=bt(T.from!==void 0?T.from:T,i,m);return A.dateHash===null?D():A}function D(){let i,m;if(t.defaultYearMonth!==void 0){const C=t.defaultYearMonth.split("/");i=parseInt(C[0],10),m=parseInt(C[1],10)}else{const C=x.value!==void 0?x.value:f();i=C.year,m=C.month}return{year:i,month:m,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:i+"/"+ce(m)+"/01"}}function E(i){let m=g.value.year,C=Number(g.value.month)+i;C===13?(C=1,m++):C===0&&(C=12,m--),De(m,C),ve.value===!0&&vt("month")}function K(i){const m=Number(g.value.year)+i;De(m,g.value.month),ve.value===!0&&vt("year")}function ue(i){De(i,g.value.month),Y.value=t.defaultView==="Years"?"Months":"Calendar",ve.value===!0&&vt("year")}function ye(i){De(g.value.year,i),Y.value="Calendar",ve.value===!0&&vt("month")}function Re(i,m){const C=nt.value[m];(C!==void 0&&C.includes(i.day)===!0?Lt:Wt)(i)}function W(i){return{year:i.year,month:i.month,day:i.day}}function De(i,m,C){if(he.value!==null&&i<=he.value.year&&((m<he.value.month||i<he.value.year)&&(m=he.value.month),i=he.value.year),Ce.value!==null&&i>=Ce.value.year&&((m>Ce.value.month||i>Ce.value.year)&&(m=Ce.value.month),i=Ce.value.year),C!==void 0){const{hour:A,minute:se,second:z,millisecond:le,timezoneOffset:fe,timeHash:tt}=C;Object.assign(g.value,{hour:A,minute:se,second:z,millisecond:le,timezoneOffset:fe,timeHash:tt})}const T=i+"/"+ce(m)+"/01";T!==g.value.dateHash&&(V.value=g.value.dateHash<T==(a.lang.rtl!==!0)?"left":"right",i!==g.value.year&&(q.value=V.value),We(()=>{j.value=i-i%Ft-(i<0?Ft:0),Object.assign(g.value,{year:i,month:m,day:1,dateHash:T})}))}function Ue(i,m,C){const T=i!==null&&i.length===1&&t.multiple===!1?i[0]:i;h=T;const{reason:A,details:se}=Et(m,C);u("update:modelValue",T,A,se)}function vt(i){const m=ge.value[0]!==void 0&&ge.value[0].dateHash!==null?{...ge.value[0]}:{...g.value};We(()=>{m.year=g.value.year,m.month=g.value.month;const C=t.calendar!=="persian"?new Date(m.year,m.month,0).getDate():vn(m.year,m.month);m.day=Math.min(Math.max(1,m.day),C);const T=St(m);h=T;const{details:A}=Et("",m);u("update:modelValue",T,i,A)})}function Et(i,m){return m.from!==void 0?{reason:`${i}-range`,details:{...W(m.target),from:W(m.from),to:W(m.to)}}:{reason:`${i}-day`,details:W(m)}}function St(i,m,C){return i.from!==void 0?{from:He.value(i.from,m,C),to:He.value(i.to,m,C)}:He.value(i,m,C)}function Wt(i){let m;if(t.multiple===!0)if(i.from!==void 0){const C=mt(i.from),T=mt(i.to),A=ge.value.filter(z=>z.dateHash<C||z.dateHash>T),se=ke.value.filter(({from:z,to:le})=>le.dateHash<C||z.dateHash>T);m=A.concat(se).concat(i).map(z=>St(z))}else{const C=me.value.slice();C.push(St(i)),m=C}else m=St(i);Ue(m,"add",i)}function Lt(i){if(t.noUnset===!0)return;let m=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const C=St(i);i.from!==void 0?m=t.modelValue.filter(T=>T.from!==void 0?T.from!==C.from&&T.to!==C.to:!0):m=t.modelValue.filter(T=>T!==C),m.length===0&&(m=null)}Ue(m,"remove",i)}function un(i,m,C){const T=ge.value.concat(ke.value).map(A=>St(A,i,m)).filter(A=>A.from!==void 0?A.from.dateHash!==null&&A.to.dateHash!==null:A.dateHash!==null);u("update:modelValue",(t.multiple===!0?T:T[0])||null,C)}function rn(){if(t.minimal!==!0)return $("div",{class:"q-date__header "+s.value},[$("div",{class:"relative-position"},[$(Ct,{name:"q-transition--fade"},()=>$("div",{key:"h-yr-"+de.value,class:"q-date__header-subtitle q-date__header-link "+(Y.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...d("vY",{onClick(){Y.value="Years"},onKeyup(i){i.keyCode===13&&(Y.value="Years")}})},[de.value]))]),$("div",{class:"q-date__header-title relative-position flex no-wrap"},[$("div",{class:"relative-position col"},[$(Ct,{name:"q-transition--fade"},()=>$("div",{key:"h-sub"+F.value,class:"q-date__header-title-label q-date__header-link "+(Y.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:r.value,...d("vC",{onClick(){Y.value="Calendar"},onKeyup(i){i.keyCode===13&&(Y.value="Calendar")}})},[F.value]))]),t.todayBtn===!0?$(Ke,{class:"q-date__header-today self-start",icon:a.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:r.value,onClick:lt}):null])])}function wt({label:i,type:m,key:C,dir:T,goTo:A,boundaries:se,cls:z}){return[$("div",{class:"row items-center q-date__arrow"},[$(Ke,{round:!0,dense:!0,size:"sm",flat:!0,icon:te.value[0],tabindex:r.value,disable:se.prev===!1,...d("go-#"+m,{onClick(){A(-1)}})})]),$("div",{class:"relative-position overflow-hidden flex flex-center"+z},[$(Ct,{name:"q-transition--jump-"+T},()=>$("div",{key:C},[$(Ke,{flat:!0,dense:!0,noCaps:!0,label:i,tabindex:r.value,...d("view#"+m,{onClick:()=>{Y.value=m}})})]))]),$("div",{class:"row items-center q-date__arrow"},[$(Ke,{round:!0,dense:!0,size:"sm",flat:!0,icon:te.value[1],tabindex:r.value,disable:se.next===!1,...d("go+#"+m,{onClick(){A(1)}})})])]}const Ot={Calendar:()=>[$("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[$("div",{class:"q-date__navigation row items-center no-wrap"},wt({label:b.value.months[g.value.month-1],type:"Months",key:g.value.month,dir:V.value,goTo:E,boundaries:Le.value.month,cls:" col"}).concat(wt({label:g.value.year,type:"Years",key:g.value.year,dir:q.value,goTo:K,boundaries:Le.value.year,cls:""}))),$("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},we.value.map(i=>$("div",{class:"q-date__calendar-item"},[$("div",i)]))),$("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[$(Ct,{name:"q-transition--slide-"+V.value},()=>$("div",{key:Ee.value,class:"q-date__calendar-days fit"},Fe.value.map(i=>$("div",{class:i.classes},[i.in===!0?$(Ke,{class:i.today===!0?"q-date__today":"",dense:!0,flat:i.flat,unelevated:i.unelevated,color:i.color,textColor:i.textColor,label:i.i,tabindex:r.value,...d("day#"+i.i,{onClick:()=>{_t(i.i)},onMouseover:()=>{Sn(i.i)}})},i.event!==!1?()=>$("div",{class:"q-date__event bg-"+i.event}):null):$("div",""+i.i)]))))])])],Months(){const i=g.value.year===x.value.year,m=T=>he.value!==null&&g.value.year===he.value.year&&he.value.month>T||Ce.value!==null&&g.value.year===Ce.value.year&&Ce.value.month<T,C=b.value.monthsShort.map((T,A)=>{const se=g.value.month===A+1;return $("div",{class:"q-date__months-item flex flex-center"},[$(Ke,{class:i===!0&&x.value.month===A+1?"q-date__today":null,flat:se!==!0,label:T,unelevated:se,color:se===!0?re.value:null,textColor:se===!0?Se.value:null,tabindex:r.value,disable:m(A+1),...d("month#"+A,{onClick:()=>{ye(A+1)}})})])});return t.yearsInMonthView===!0&&C.unshift($("div",{class:"row no-wrap full-width"},[wt({label:g.value.year,type:"Years",key:g.value.year,dir:q.value,goTo:K,boundaries:Le.value.year,cls:" col"})])),$("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},C)},Years(){const i=j.value,m=i+Ft,C=[],T=A=>he.value!==null&&he.value.year>A||Ce.value!==null&&Ce.value.year<A;for(let A=i;A<=m;A++){const se=g.value.year===A;C.push($("div",{class:"q-date__years-item flex flex-center"},[$(Ke,{key:"yr"+A,class:x.value.year===A?"q-date__today":null,flat:!se,label:A,dense:!0,unelevated:se,color:se===!0?re.value:null,textColor:se===!0?Se.value:null,tabindex:r.value,disable:T(A),...d("yr#"+A,{onClick:()=>{ue(A)}})})]))}return $("div",{class:"q-date__view q-date__years flex flex-center"},[$("div",{class:"col-auto"},[$(Ke,{round:!0,dense:!0,flat:!0,icon:te.value[0],tabindex:r.value,disable:T(i),...d("y-",{onClick:()=>{j.value-=Ft}})})]),$("div",{class:"q-date__years-content col self-stretch row items-center"},C),$("div",{class:"col-auto"},[$(Ke,{round:!0,dense:!0,flat:!0,icon:te.value[1],tabindex:r.value,disable:T(m),...d("y+",{onClick:()=>{j.value+=Ft}})})])])}};function _t(i){const m={...g.value,day:i};if(t.range===!1){Re(m,Ee.value);return}if(L.value===null){const C=Fe.value.find(A=>A.fill!==!0&&A.i===i);if(t.noUnset!==!0&&C.range!==void 0){Lt({target:m,from:C.range.from,to:C.range.to});return}if(C.selected===!0){Lt(m);return}const T=mt(m);L.value={init:m,initHash:T,final:m,finalHash:T},u("rangeStart",W(m))}else{const C=L.value.initHash,T=mt(m),A=C<=T?{from:L.value.init,to:m}:{from:m,to:L.value.init};L.value=null,Wt(C===T?m:{target:m,...A}),u("rangeEnd",{from:W(A.from),to:W(A.to)})}}function Sn(i){if(L.value!==null){const m={...g.value,day:i};Object.assign(L.value,{final:m,finalHash:mt(m)})}}return Object.assign(o,{setToday:lt,setView:ft,offsetCalendar:zt,setCalendarTo:it,setEditingRange:at}),()=>{const i=[$("div",{class:"q-date__content col relative-position"},[$(Ct,{name:"q-transition--fade"},Ot[Y.value])])],m=yn(n.default);return m!==void 0&&i.push($("div",{class:"q-date__actions"},m)),t.name!==void 0&&t.disable!==!0&&p(i,"push"),$("div",{class:Z.value,...Ve.value},[rn(),$("div",{ref:v,class:"q-date__main col column",tabindex:-1},i)])}}}),Vn=yt({name:"QPopupProxy",props:{...Ol,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:n,emit:u,attrs:o}){const{proxy:a}=Vt(),{$q:l}=a,d=ae(!1),r=ae(null),s=k(()=>parseInt(t.breakpoint,10)),{canShow:w}=Il({showing:d});function f(){return l.screen.width<s.value||l.screen.height<s.value?"dialog":"menu"}const h=ae(f()),S=k(()=>h.value==="menu"?{maxHeight:"99vh"}:{});Oe(()=>f(),y=>{d.value!==!0&&(h.value=y)});function p(y){d.value=!0,u("show",y)}function v(y){d.value=!1,h.value=f(),u("hide",y)}return Object.assign(a,{show(y){w(y)===!0&&r.value.show(y)},hide(y){r.value.hide(y)},toggle(y){r.value.toggle(y)}}),ha(a,"currentComponent",()=>({type:h.value,ref:r.value})),()=>{const y={ref:r,...S.value,...o,onShow:p,onHide:v};let b;return h.value==="dialog"?b=Al:(b=pn,Object.assign(y,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),$(b,y,n.default)}}});function qn(t,n,u){const o=hn(t);let a,l=o.left-n.event.x,d=o.top-n.event.y,r=Math.abs(l),s=Math.abs(d);const w=n.direction;w.horizontal===!0&&w.vertical!==!0?a=l<0?"left":"right":w.horizontal!==!0&&w.vertical===!0?a=d<0?"up":"down":w.up===!0&&d<0?(a="up",r>s&&(w.left===!0&&l<0?a="left":w.right===!0&&l>0&&(a="right"))):w.down===!0&&d>0?(a="down",r>s&&(w.left===!0&&l<0?a="left":w.right===!0&&l>0&&(a="right"))):w.left===!0&&l<0?(a="left",r<s&&(w.up===!0&&d<0?a="up":w.down===!0&&d>0&&(a="down"))):w.right===!0&&l>0&&(a="right",r<s&&(w.up===!0&&d<0?a="up":w.down===!0&&d>0&&(a="down")));let f=!1;if(a===void 0&&u===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};a=n.event.lastDir,f=!0,a==="left"||a==="right"?(o.left-=l,r=0,l=0):(o.top-=d,s=0,d=0)}return{synthetic:f,payload:{evt:t,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:o,direction:a,isFirst:n.event.isFirst,isFinal:u===!0,duration:Date.now()-n.event.time,distance:{x:r,y:s},offset:{x:l,y:d},delta:{x:o.left-n.event.lastX,y:o.top-n.event.lastY}}}}let $o=0;var Eo=ga({name:"touch-pan",beforeMount(t,{value:n,modifiers:u}){if(u.mouse!==!0&&Zt.has.touch!==!0)return;function o(l,d){u.mouse===!0&&d===!0?ot(l):(u.stop===!0&&ht(l),u.prevent===!0&&Gt(l))}const a={uid:"qvtp_"+$o++,handler:n,modifiers:u,direction:al(u),noop:Vl,mouseStart(l){ol(l,a)&&ya(l)&&(Kt(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(l,!0))},touchStart(l){if(ol(l,a)){const d=l.target;Kt(a,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),a.start(l)}},start(l,d){if(Zt.is.firefox===!0&&kn(t,!0),a.lastEvt=l,d===!0||u.stop===!0){if(a.direction.all!==!0&&(d!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const w=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&Gt(w),l.cancelBubble===!0&&ht(w),Object.assign(w,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[a.uid]:l.qClonedBy.concat(a.uid)}),a.initialEvent={target:l.target,event:w}}ht(l)}const{left:r,top:s}=hn(l);a.event={x:r,y:s,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:s}},move(l){if(a.event===void 0)return;const d=hn(l),r=d.left-a.event.x,s=d.top-a.event.y;if(r===0&&s===0)return;a.lastEvt=l;const w=a.event.mouse===!0,f=()=>{o(l,w);let p;u.preserveCursor!==!0&&u.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),w===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),En(),a.styleCleanup=v=>{if(a.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),w===!0){const y=()=>{document.body.classList.remove("no-pointer-events--children")};v!==void 0?setTimeout(()=>{y(),v()},50):y()}else v!==void 0&&v()}};if(a.event.detected===!0){a.event.isFirst!==!0&&o(l,a.event.mouse);const{payload:p,synthetic:v}=qn(l,a,!1);p!==void 0&&(a.handler(p)===!1?a.end(l):(a.styleCleanup===void 0&&a.event.isFirst===!0&&f(),a.event.lastX=p.position.left,a.event.lastY=p.position.top,a.event.lastDir=v===!0?void 0:p.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||w===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){f(),a.event.detected=!0,a.move(l);return}const h=Math.abs(r),S=Math.abs(s);h!==S&&(a.direction.horizontal===!0&&h>S||a.direction.vertical===!0&&h<S||a.direction.up===!0&&h<S&&s<0||a.direction.down===!0&&h<S&&s>0||a.direction.left===!0&&h>S&&r<0||a.direction.right===!0&&h>S&&r>0?(a.event.detected=!0,a.move(l)):a.end(l,!0))},end(l,d){if(a.event!==void 0){if(en(a,"temp"),Zt.is.firefox===!0&&kn(t,!1),d===!0)a.styleCleanup!==void 0&&a.styleCleanup(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(qn(l===void 0?a.lastEvt:l,a).payload);const{payload:r}=qn(l===void 0?a.lastEvt:l,a,!0),s=()=>{a.handler(r)};a.styleCleanup!==void 0?a.styleCleanup(s):s()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(t.__qtouchpan=a,u.mouse===!0){const l=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";Kt(a,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}Zt.has.touch===!0&&Kt(a,"main",[[t,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const u=t.__qtouchpan;u!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&u.end(),u.handler=n.value),u.direction=al(n.modifiers))},beforeUnmount(t){const n=t.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),en(n,"main"),en(n,"temp"),Zt.is.firefox===!0&&kn(t,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete t.__qtouchpan)}});function Oo(t,n){if(t.hour!==null){if(t.minute===null)return"minute";if(n===!0&&t.second===null)return"second"}return"hour"}function Io(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}var Fo=yt({name:"QTime",props:{...Nn,...Ln,...Nl,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:zl,setup(t,{slots:n,emit:u}){const o=Vt(),{$q:a}=o.proxy,l=zn(t,a),{tabindex:d,headerClass:r,getLocale:s,getCurrentDate:w}=Ll(t,a),f=$l(t),h=El(f);let S,p;const v=ae(null),y=k(()=>de()),b=k(()=>s()),_=k(()=>te()),N=Qt(t.modelValue,y.value,b.value,t.calendar,_.value),x=ae(Oo(N)),g=ae(N),Y=ae(N.hour===null||N.hour<12),ee=k(()=>`q-time q-time--${t.landscape===!0?"landscape":"portrait"}`+(l.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),V=k(()=>{const D=g.value;return{hour:D.hour===null?"--":q.value===!0?ce(D.hour):String(Y.value===!0?D.hour===0?12:D.hour:D.hour>12?D.hour-12:D.hour),minute:D.minute===null?"--":ce(D.minute),second:D.second===null?"--":ce(D.second)}}),q=k(()=>t.format24h!==null?t.format24h:a.lang.date.format24h),O=k(()=>{const D=x.value==="hour",E=D===!0?12:60,K=g.value[x.value];let ye=`rotate(${Math.round(K*(360/E))-180}deg) translateX(-50%)`;return D===!0&&q.value===!0&&g.value.hour>=12&&(ye+=" scale(.7)"),{transform:ye}}),j=k(()=>g.value.hour!==null),L=k(()=>j.value===!0&&g.value.minute!==null),Z=k(()=>t.hourOptions!==void 0?D=>t.hourOptions.includes(D):t.options!==void 0?D=>t.options(D,null,null):null),re=k(()=>t.minuteOptions!==void 0?D=>t.minuteOptions.includes(D):t.options!==void 0?D=>t.options(g.value.hour,D,null):null),Se=k(()=>t.secondOptions!==void 0?D=>t.secondOptions.includes(D):t.options!==void 0?D=>t.options(g.value.hour,g.value.minute,D):null),ve=k(()=>{if(Z.value===null)return null;const D=F(0,11,Z.value),E=F(12,11,Z.value);return{am:D,pm:E,values:D.values.concat(E.values)}}),me=k(()=>re.value!==null?F(0,59,re.value):null),ge=k(()=>Se.value!==null?F(0,59,Se.value):null),ke=k(()=>{switch(x.value){case"hour":return ve.value;case"minute":return me.value;case"second":return ge.value}}),$e=k(()=>{let D,E,K=0,ue=1;const ye=ke.value!==null?ke.value.values:void 0;x.value==="hour"?q.value===!0?(D=0,E=23):(D=0,E=11,Y.value===!1&&(K=12)):(D=0,E=55,ue=5);const Re=[];for(let W=D,De=D;W<=E;W+=ue,De++){const Ue=W+K,vt=ye!==void 0&&ye.includes(Ue)===!1,Et=x.value==="hour"&&W===0?q.value===!0?"00":"12":W;Re.push({val:Ue,index:De,disable:vt,label:Et})}return Re}),He=k(()=>[[Eo,U,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Oe(()=>t.modelValue,D=>{const E=Qt(D,y.value,b.value,t.calendar,_.value);(E.dateHash!==g.value.dateHash||E.timeHash!==g.value.timeHash)&&(g.value=E,E.hour===null?x.value="hour":Y.value=E.hour<12)}),Oe([y,b],()=>{We(()=>{pt()})});function M(){const D={...w(),...Io()};pt(D),Object.assign(g.value,D),x.value="hour"}function F(D,E,K){const ue=Array.apply(null,{length:E+1}).map((ye,Re)=>{const W=Re+D;return{index:W,val:K(W)===!0}}).filter(ye=>ye.val===!0).map(ye=>ye.index);return{min:ue[0],max:ue[ue.length-1],values:ue,threshold:E+1}}function R(D,E,K){const ue=Math.abs(D-E);return Math.min(ue,K-ue)}function ie(D,{min:E,max:K,values:ue,threshold:ye}){if(D===E)return E;if(D<E||D>K)return R(D,E,ye)<=R(D,K,ye)?E:K;const Re=ue.findIndex(Ue=>D<=Ue),W=ue[Re-1],De=ue[Re];return D-W<=De-D?W:De}function de(){return t.calendar!=="persian"&&t.mask!==null?t.mask:`HH:mm${t.withSeconds===!0?":ss":""}`}function te(){if(typeof t.defaultDate!="string"){const D=w(!0);return D.dateHash=mt(D),D}return Qt(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}function ne(){return kl(o)===!0||ke.value!==null&&(ke.value.values.length===0||x.value==="hour"&&q.value!==!0&&ve.value[Y.value===!0?"am":"pm"].values.length===0)}function we(){const D=v.value,{top:E,left:K,width:ue}=D.getBoundingClientRect(),ye=ue/2;return{top:E+ye,left:K+ye,dist:ye*.7}}function U(D){if(ne()!==!0){if(D.isFirst===!0){S=we(),p=he(D.evt,S);return}p=he(D.evt,S,p),D.isFinal===!0&&(S=!1,p=null,Ie())}}function Ie(){x.value==="hour"?x.value="minute":t.withSeconds&&x.value==="minute"&&(x.value="second")}function he(D,E,K){const ue=hn(D),ye=Math.abs(ue.top-E.top),Re=Math.sqrt(Math.pow(Math.abs(ue.top-E.top),2)+Math.pow(Math.abs(ue.left-E.left),2));let W,De=Math.asin(ye/Re)*(180/Math.PI);if(ue.top<E.top?De=E.left<ue.left?90-De:270+De:De=E.left<ue.left?De+90:270-De,x.value==="hour"){if(W=De/30,ve.value!==null){const Ue=q.value!==!0?Y.value===!0:ve.value.am.values.length!==0&&ve.value.pm.values.length!==0?Re>=E.dist:ve.value.am.values.length!==0;W=ie(W+(Ue===!0?0:12),ve.value[Ue===!0?"am":"pm"])}else W=Math.round(W),q.value===!0?Re<E.dist?W<12&&(W+=12):W===12&&(W=0):Y.value===!0&&W===12?W=0:Y.value===!1&&W!==12&&(W+=12);q.value===!0&&(Y.value=W<12)}else W=Math.round(De/6)%60,x.value==="minute"&&me.value!==null?W=ie(W,me.value):x.value==="second"&&ge.value!==null&&(W=ie(W,ge.value));return K!==W&&lt[x.value](W),W}const Ce={hour(){x.value="hour"},minute(){x.value="minute"},second(){x.value="second"}};function Le(D){D.keyCode===13&&ft()}function nt(D){D.keyCode===13&&zt()}function Je(D){ne()!==!0&&(a.platform.is.desktop!==!0&&he(D,we()),Ie())}function Pe(D){ne()!==!0&&he(D,we())}function Ee(D){if(D.keyCode===13)x.value="hour";else if([37,39].includes(D.keyCode)){const E=D.keyCode===37?-1:1;if(ve.value!==null){const K=q.value===!0?ve.value.values:ve.value[Y.value===!0?"am":"pm"].values;if(K.length===0)return;if(g.value.hour===null)Ge(K[0]);else{const ue=(K.length+K.indexOf(g.value.hour)+E)%K.length;Ge(K[ue])}}else{const K=q.value===!0?24:12,ue=q.value!==!0&&Y.value===!1?12:0,ye=g.value.hour===null?-E:g.value.hour;Ge(ue+(24+ye+E)%K)}}}function dt(D){if(D.keyCode===13)x.value="minute";else if([37,39].includes(D.keyCode)){const E=D.keyCode===37?-1:1;if(me.value!==null){const K=me.value.values;if(K.length===0)return;if(g.value.minute===null)Fe(K[0]);else{const ue=(K.length+K.indexOf(g.value.minute)+E)%K.length;Fe(K[ue])}}else{const K=g.value.minute===null?-E:g.value.minute;Fe((60+K+E)%60)}}}function $t(D){if(D.keyCode===13)x.value="second";else if([37,39].includes(D.keyCode)){const E=D.keyCode===37?-1:1;if(ge.value!==null){const K=ge.value.values;if(K.length===0)return;if(g.value.seconds===null)Ve(K[0]);else{const ue=(K.length+K.indexOf(g.value.second)+E)%K.length;Ve(K[ue])}}else{const K=g.value.second===null?-E:g.value.second;Ve((60+K+E)%60)}}}function Ge(D){g.value.hour!==D&&(g.value.hour=D,at())}function Fe(D){g.value.minute!==D&&(g.value.minute=D,at())}function Ve(D){g.value.second!==D&&(g.value.second=D,at())}const lt={hour:Ge,minute:Fe,second:Ve};function ft(){Y.value===!1&&(Y.value=!0,g.value.hour!==null&&(g.value.hour-=12,at()))}function zt(){Y.value===!0&&(Y.value=!1,g.value.hour!==null&&(g.value.hour+=12,at()))}function it(D){const E=t.modelValue;x.value!==D&&E!==void 0&&E!==null&&E!==""&&typeof E!="string"&&(x.value=D)}function at(){if(Z.value!==null&&Z.value(g.value.hour)!==!0){g.value=Qt(),it("hour");return}if(re.value!==null&&re.value(g.value.minute)!==!0){g.value.minute=null,g.value.second=null,it("minute");return}if(t.withSeconds===!0&&Se.value!==null&&Se.value(g.value.second)!==!0){g.value.second=null,it("second");return}g.value.hour===null||g.value.minute===null||t.withSeconds===!0&&g.value.second===null||pt()}function pt(D){const E=Object.assign({...g.value},D),K=t.calendar==="persian"?ce(E.hour)+":"+ce(E.minute)+(t.withSeconds===!0?":"+ce(E.second):""):Zn(new Date(E.year,E.month===null?null:E.month-1,E.day,E.hour,E.minute,E.second,E.millisecond),y.value,b.value,E.year,E.timezoneOffset);E.changed=K!==t.modelValue,u("update:modelValue",K,E)}function bt(){const D=[$("div",{class:"q-time__link "+(x.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:Ce.hour,onKeyup:Ee},V.value.hour),$("div",":"),$("div",j.value===!0?{class:"q-time__link "+(x.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:dt,onClick:Ce.minute}:{class:"q-time__link"},V.value.minute)];t.withSeconds===!0&&D.push($("div",":"),$("div",L.value===!0?{class:"q-time__link "+(x.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:$t,onClick:Ce.second}:{class:"q-time__link"},V.value.second));const E=[$("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},D)];return q.value===!1&&E.push($("div",{class:"q-time__header-ampm column items-between no-wrap"},[$("div",{class:"q-time__link "+(Y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:ft,onKeyup:Le},"AM"),$("div",{class:"q-time__link "+(Y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:zt,onKeyup:nt},"PM")])),$("div",{class:"q-time__header flex flex-center no-wrap "+r.value},E)}function et(){const D=g.value[x.value];return $("div",{class:"q-time__content col relative-position"},[$(Ct,{name:"q-transition--scale"},()=>$("div",{key:"clock"+x.value,class:"q-time__container-parent absolute-full"},[$("div",{ref:v,class:"q-time__container-child fit overflow-hidden"},[ct($("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Je,onMousedown:Pe},[$("div",{class:"q-time__clock-circle fit"},[$("div",{class:"q-time__clock-pointer"+(g.value[x.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:O.value}),$e.value.map(E=>$("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${E.index}`+(E.val===D?" q-time__clock-position--active "+r.value:E.disable===!0?" q-time__clock-position--disable":"")},[$("span",E.label)]))])]),He.value)])])),t.nowBtn===!0?$(Ke,{class:"q-time__now-button absolute",icon:a.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:d.value,onClick:M}):null])}return o.proxy.setNow=M,()=>{const D=[et()],E=yn(n.default);return E!==void 0&&D.push($("div",{class:"q-time__actions"},E)),t.name!==void 0&&t.disable!==!0&&h(D,"push"),$("div",{class:ee.value,tabindex:-1},[bt(),$("div",{class:"q-time__main col overflow-auto"},D)])}}});const To={key:6,class:"q-pa-md",style:{"max-width":"300px"}},Ao={class:"row items-center justify-end"},Ho={class:"row items-center justify-end"},Yo={key:7},Bo="DD-MM-YYYY HH:mm:ss",jo={__name:"DataFormField",props:{component:Object,dense:{type:Boolean,default:null},feature:Object,field:Object,name:String,initialValue:null,modelValue:null},emits:["update:modelValue"],setup(t,{emit:n}){const u=qt(),{extractDate:o,formatDate:a}=xo,l=t,d=n;I.randomId();const r=k(()=>I.isNil(l.dense)?u.screen.gt.sm:l.dense),{type:s}=l.field,w=I.includes(["Float","Int","Number"],s);function f(){const p={},v=p.props={...l.field,dense:r,hideBottomSpace:!0};return I.isEmpty(v.items)?s==="String"?(p.is="textarea",v.autogrow=!0,v.rows=1,v.type="textarea"):s==="Boolean"?p.is="toggle":w?(p.is="text-field",v.type="number"):s==="Date"?(p.is="date-picker",v.name=`${v.name}_textfield`,v.type="text",v.value=k(()=>{const y=v.value;return I.isNil(y)?"":v.format?a(y,v.format):a(y,"DD-MM-YYYY HH:mm")}),p.date={props:{}},v.min&&(p.date.props.min=v.min),v.max&&(p.date.props.max=v.max)):s==="Object"&&(p.is="data-form-field-code-editor",v.readonly=!0,p.codeEditor={props:{lang:"json"}}):p.is="autocomplete",p}let h=l.component||tn(f()),S=k({get(){const p=l.modelValue;if(I.isNil(p))return s==="Boolean"?!1:null;if(s==="Date")return a(p,mask);if(h.is==="code-editor")debugger;return p},set(p){let v=I.isNil(p)?null:p;if(v===""&&(v=null),w)v=parseFloat(p),isNaN(v)&&(v=null);else if(s==="Date")v=o(p,Bo);else if(h.is==="code-editor")v={};else if(s==="Boolean"){debugger;v===!1&&!l.feature.required&&(v=void 0)}d("update:modelValue",v)}});return(p,v)=>(P(),je("div",{class:xt(["obiwan-data-form-field",{row:X(h).is==="checkbox"}])},[t.field.component?(P(),oe(Tl(t.field.component.is),Be({key:0,class:t.field.component.class,style:t.field.component.style},t.field.component.props,Fl(t.field.component.on)),null,16,["class","style"])):Me("",!0),X(h).is==="textarea"?(P(),oe(sn,Be({key:1},X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[0]||(v[0]=y=>rt(S)?S.value=y:S=y),type:"textarea"}),null,16,["modelValue"])):X(h).is==="text-field"?(P(),oe(sn,Be({key:2},X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[1]||(v[1]=y=>rt(S)?S.value=y:S=y)}),null,16,["modelValue"])):X(h).is==="autocomplete"?(P(),oe(Ja,Be({key:3},X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[2]||(v[2]=y=>rt(S)?S.value=y:S=y),"use-input":"","hide-selected":"","input-debounce":"0",onFilter:p.filterFn}),{"no-option":Q(()=>[J(Yt,null,{default:Q(()=>[J(Ht,{class:"text-grey"},{default:Q(()=>[gt(" No results ")]),_:1})]),_:1})]),_:1},16,["modelValue","onFilter"])):X(h).is==="checkbox"?(P(),oe(Aa,Be({key:4,class:"q-py-md","left-label":""},X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[3]||(v[3]=y=>rt(S)?S.value=y:S=y)}),null,16,["modelValue"])):X(h).is==="toggle"?(P(),oe(Ha,Be({key:5,style:{"margin-top":r.value?"8px":"12px"},color:X(S)?"primary":void 0,"checked-icon":"mdi-check","toggle-indeterminate":!1,"keep-color":"","left-label":"","unchecked-icon":"mdi-close"},X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[4]||(v[4]=y=>rt(S)?S.value=y:S=y)}),null,16,["style","color","modelValue"])):X(h).is==="date-picker"?(P(),je("div",To,[J(sn,Be(X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[7]||(v[7]=y=>rt(S)?S.value=y:S=y)}),{prepend:Q(()=>[J(At,{name:"event",class:"cursor-pointer"},{default:Q(()=>[J(Vn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Q(()=>[J(qo,Be(X(h).date.props,{modelValue:X(S),"onUpdate:modelValue":v[5]||(v[5]=y=>rt(S)?S.value=y:S=y),mask:"DD-MM-YYYY HH:mm","today-btn":""}),{default:Q(()=>[Ne("div",Ao,[ct(J(Ke,{label:"Close",color:"primary",flat:""},null,512),[[Dt]])])]),_:1},16,["modelValue"])]),_:1})]),_:1})]),append:Q(()=>[J(At,{name:"access_time",class:"cursor-pointer"},{default:Q(()=>[J(Vn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Q(()=>[J(Fo,{modelValue:X(S),"onUpdate:modelValue":v[6]||(v[6]=y=>rt(S)?S.value=y:S=y),mask:"DD-MM-YYYY HH:mm",format24h:""},{default:Q(()=>[Ne("div",Ho,[ct(J(Ke,{label:"Close",color:"primary",flat:""},null,512),[[Dt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},16,["modelValue"])])):X(h).is==="data-form-field-code-editor"?(P(),je("div",Yo,[J(sn,Be(X(h).props,{modelValue:X(S),"onUpdate:modelValue":v[8]||(v[8]=y=>rt(S)?S.value=y:S=y)}),{append:Q(()=>[J(At,{name:"mdi-code-json",class:"cursor-pointer"},{default:Q(()=>[J(Vn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Q(()=>[ct(J(Ze,{type:"Cancel"},null,512),[[Dt]])]),_:1})]),_:1})]),_:1},16,["modelValue"])])):Me("",!0)],2))}};var No=yt({name:"QTooltip",inheritAttrs:!1,props:{...Ol,...pa,...ba,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ul},self:{type:String,default:"top middle",validator:ul},offset:{type:Array,default:()=>[14,14],validator:Sa},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...wa],setup(t,{slots:n,emit:u,attrs:o}){let a,l;const d=Vt(),{proxy:{$q:r}}=d,s=ae(null),w=ae(!1),f=k(()=>il(t.anchor,r.lang.rtl)),h=k(()=>il(t.self,r.lang.rtl)),S=k(()=>t.persistent!==!0),{registerTick:p,removeTick:v}=_a(),{registerTimeout:y}=ka(),{transitionProps:b,transitionStyle:_}=Ca(t),{localScrollTarget:N,changeScrollEvent:x,unconfigureScrollTarget:g}=Da(t,He),{anchorEl:Y,canShow:ee,anchorEvents:V}=Il({showing:w,configureAnchorEl:$e}),{show:q,hide:O}=Ma({showing:w,canShow:ee,handleShow:re,handleHide:Se,hideOnRouteChange:S,processOnMount:!0});Object.assign(V,{delayShow:ge,delayHide:ke});const{showPortal:j,hidePortal:L,renderPortal:Z}=xa(d,s,F,"tooltip");if(r.platform.is.mobile===!0){const R={anchorEl:Y,innerRef:s,onClickOutside(de){return O(de),de.target.classList.contains("q-dialog__backdrop")&&ot(de),!0}},ie=k(()=>t.modelValue===null&&t.persistent!==!0&&w.value===!0);Oe(ie,de=>{(de===!0?$a:rl)(R)}),mn(()=>{rl(R)})}function re(R){j(),p(()=>{l=new MutationObserver(()=>me()),l.observe(s.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),me(),He()}),a===void 0&&(a=Oe(()=>r.screen.width+"|"+r.screen.height+"|"+t.self+"|"+t.anchor+"|"+r.lang.rtl,me)),y(()=>{j(!0),u("show",R)},t.transitionDuration)}function Se(R){v(),L(),ve(),y(()=>{L(!0),u("hide",R)},t.transitionDuration)}function ve(){l!==void 0&&(l.disconnect(),l=void 0),a!==void 0&&(a(),a=void 0),g(),en(V,"tooltipTemp")}function me(){Va({targetEl:s.value,offset:t.offset,anchorEl:Y.value,anchorOrigin:f.value,selfOrigin:h.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function ge(R){if(r.platform.is.mobile===!0){En(),document.body.classList.add("non-selectable");const ie=Y.value,de=["touchmove","touchcancel","touchend","click"].map(te=>[ie,te,"delayHide","passiveCapture"]);Kt(V,"tooltipTemp",de)}y(()=>{q(R)},t.delay)}function ke(R){r.platform.is.mobile===!0&&(en(V,"tooltipTemp"),En(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{O(R)},t.hideDelay)}function $e(){if(t.noParentEvent===!0||Y.value===null)return;const R=r.platform.is.mobile===!0?[[Y.value,"touchstart","delayShow","passive"]]:[[Y.value,"mouseenter","delayShow","passive"],[Y.value,"mouseleave","delayHide","passive"]];Kt(V,"anchor",R)}function He(){if(Y.value!==null||t.scrollTarget!==void 0){N.value=qa(Y.value,t.scrollTarget);const R=t.noParentEvent===!0?me:O;x(N.value,R)}}function M(){return w.value===!0?$("div",{...o,ref:s,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,_.value],role:"tooltip"},yn(n.default)):null}function F(){return $(Ct,b.value,M)}return mn(ve),Object.assign(d.proxy,{updatePosition:me}),Z}});function zo(t){return t?k(()=>{if(!t)return;const n={class:{"bg-primary":!0,"text-white":!0},props:{anchor:"center left",self:"center right"}};return I.isString(t)?(n.text=t,n):t.props?I.merge(n,t):I.merge(n,{text:t.text,props:t})}):!1}function Lo({feature:t,readonly:n,value:u}){const o=!I.isEmpty(u);!t&&u instanceof jt&&(t=u.$.feature);let a=!1,l=!1,d=!1,r=!1;return Bt.isNode(u)?a=!0:u instanceof jt&&(a=o),n||(t.containment?t.upperBound===-1?d=!0:d=I.castArray(u||[]).length<t.upperBound:l=!0,r=u?I.castArray(u).length>t.lowerBound:!1),{edit:a,link:l,set:d,unset:r}}function Ro(t,n){if(!(t!=null&&t.eType))return[];const u=t.$.store,o={[t.eType.ns]:{__typename:!0,id:!0,name:!0,ns:!0}};return I.isEmpty(n)||(t.many?o[t.eType.ns].__args={id:{$nin:[I.flatMap(n,"id")]}}:o[t.eType.ns].__args={id:{$ne:n.id}}),u.query(o)}function Hn(t){return t!=null&&t.eType?[t.eType,...t.eType.eAllSubTypes].filter(n=>!n.abstract&&!n.interface):[]}function Po({action:t,feature:n,readonly:u,value:o}){if(!n&&o instanceof jt&&(n=o.$.feature),t==="edit")return n.many?u?"View List":"Edit List":u?"View Node":"Edit Node";if(t==="set")return n.containment?`Create a new ${n.eType.ns}`:o?`Update link to another ${n.eType.ns}`:`Create a Link to an existing ${n.eType.ns}`;if(t==="unset")return n.many?n.containment?"Remove list and all contained items":"Remove list":"Remove"}function Ko(t){const{$router:n,$store:u}=this;let{data:o,feature:a,source:l,on:d}=t;!d&&this.on&&(d=this.on);const{fullPath:r}=n.currentRoute.value;if(d!=null&&d.edit)return d.edit({feature:a,source:l,value:o});if(o instanceof jt)n.push(`${r}/${a.name}`);else if(Bt.isNode(o)){const s=u.createStoreId(o,!0);n.push(`${r}/${s}`)}}function pl(t){var w;const{$router:n,$store:u}=this;let{feature:o,source:a,target:l,targetType:d,on:r}=t;if(!r&&this.on&&(r=this.on),r!=null&&r.set)return r.set({feature:o,source:a,target:l,targetType:d});function s(f){o.many?a[o.name]?a[o.name].push(f):a[o.name]=[f]:a[o.name]=f}if(l)s(l);else{const f=d.ns;l=u.construct({__typename:f});const{isValid:h}=l.$.validate();if(h)s(l);else{const S=u.once(`created:${l.id}`,({node:b})=>{s(b)}),p=u.createStoreId(l,!0);if(r!=null&&r.edit)return r.edit({cancel(){debugger;S.off()},feature:o,source:a,value:l,storeId:p});const{fullPath:v,params:y}=n.currentRoute.value;((w=y.fragment)==null?void 0:w.length)%2===0?n.push(v+`/${o.name}/${p}`):n.push(v+`/${p}`)}}}function Jn({on:t,props:n,router:u,store:o}){let a=n.feature,l=n.source,d=n.value;if(I.isString(n.source)&&(l=o.get(n.source)),I.isString(n.feature)&&l&&(a=l.$.eClass.getEStructuralFeature(n.feature)),I.isString(n.value)?d=o.get(n.value):n.value?(d=n.value,d instanceof jt&&(l=n.value.$.owner,a=n.value.$.feature)):l&&a&&(d=l[a.name]||null,a.many&&!d&&(d=[])),!a)return;const r=!I.isEmpty(d);let{edit:s,link:w,set:f,unset:h}=Lo({feature:a,readonly:n.readonly,value:d});l.$.storedAt||(s=!1,w=!1,f=!1,h=!1);function S(b,_){debugger;!_&&b instanceof Event&&(_=b),_&&_.stopPropagation();const{feature:N}=this;if(t!=null&&t.edit)return t.edit({...this,target:b},_);const x=u==null?void 0:u.currentRoute.value.fullPath;if(N.many)u.push(x+`/${N.name}`);else if(Bt.isNode(b)){const g=b.$.getStoreId(),Y=`/${N.name}/${g}`;u.push(x+Y)}}function p(){return this.feature.ns}function v(b,_){debugger;!_&&b instanceof Event&&(_=target),_&&_.stopPropagation();const{feature:N,source:x}=this;function g(Y){N.many?x[N.name]?x[N.name].push(Y):x[N.name]=[Y]:x[N.name]=Y}if(Bt.isNode(b))if(b.$.isKindOf("ecore.EClass")){const Y=b.ns,ee=o.construct({__typename:Y}),{isValid:V}=ee.$.validate();if(V)g(ee);else if(t!=null&&t.set)return o.once(`created:${ee.id}`,({node:q})=>{g(q)}),t.set({...this,target:ee},_)}else g(b)}function y(b){const{feature:_,source:N}=this;let x;if(!N||!_)return!1;if(I.isString(b))if(b===_.name){const g=N[_.name];return t!=null&&t.unset?t.unset(this,e):(delete N[_.name],g)}else x=o.get(b);else x=b;if(x)return t!=null&&t.unset?t.unset({...this,target:x},e):_.many?(I.pull(N[_.name],x),x):(delete N[_.name],x)}return{feature:a,hasData:r,readonly:n.readonly,source:l,value:d,canEdit:s,canLink:w,canSet:f,canUnset:h,edit:S,getAllowedTargets(){return Ro(this.feature,this.value)},getAllowedTargetTypes(){return Hn(this.feature)},getDisplayName:p,getTooltip(b){const{feature:_,readonly:N,value:x}=this;return Po({action:b,feature:_,readonly:N,value:x})},set:v,unset:y}}const Yn={__name:"AddLinkButton",props:{feature:{type:Object,required:!0},menu:Object},emits:["click"],setup(t,{emit:n}){const u=ln(),o=qt(),a=I.randomId(),l=n;ze("store");const d=t,r=k(()=>{const h={color:"primary",flat:!u.round,size:o.platform.is.desktop?"sm":"md",...u};return h.icon&&!h.label&&(h.dense=!0),h}),s=k(()=>({anchor:"bottom end",self:"top end",...d.menu})),w=k(()=>u.dense!==void 0?u.dense:o.screen.gt.sm),f=zo(u.tooltip);return(h,S)=>X(Hn)(d.feature).length>1?(P(),oe(Ke,Be({key:0,class:"obiwan-add-link-button"},r.value,{onClick:S[0]||(S[0]=gn(()=>{},["stop"]))}),{default:Q(()=>[X(f)?(P(),oe(No,Be({key:0,class:X(f).class},X(f).props),{default:Q(()=>[gt(Qe(X(f).text),1)]),_:1},16,["class"])):Me("",!0),J(pn,Te(Ae(s.value)),{default:Q(()=>[J(Rn,{dense:w.value,style:{"min-width":"100px"}},{default:Q(()=>[(P(!0),je(Nt,null,nn(X(Hn)(d.feature),p=>ct((P(),oe(Yt,{clickable:"",key:`${X(a)}_${p.id}`,onClick:v=>l("click",v,p)},{default:Q(()=>[J(Ht,null,{default:Q(()=>[gt(Qe(p.ns),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[Dt]])),128))]),_:1},8,["dense"])]),_:1},16)]),_:1},16)):(P(),oe(Ze,Be({key:1,class:"obiwan-add-link-button"},r.value,{onClick:S[1]||(S[1]=p=>l("click",p,d.feature.eType))}),null,16))}},Qo={class:"q-ml-md float-left d-flex items-center q-ml-auto"},Uo={__name:"OReference",props:{contentClass:[Object,String],dense:{type:Boolean,required:!1,default:null},feature:{type:[String,Object],required:!0},keyClass:[Object,String],readonly:Boolean,source:[String,Object],value:Object,valueClass:[Object,String]},setup(t){const n=qt();ze("bus"),ae(null),`${I.randomId()}`,an(),on(),bn();const u=ze("store"),o=t,a=ze("onEditReference"),l=ze("onSetReference"),d=ze("selectLink"),r=k(()=>I.isNil(o.dense)?n.screen.gt.sm:o.dense),s=k(()=>{const y={};return o.value instanceof jt?y.value=o.value:o.source&&o.feature&&(y.feature=o.feature,y.source=o.source),Jn({props:y,store:u})}),w=k(()=>{const{value:y}=s.value;return I.isNil(y)?"null":I.isArray(y)?`[${y.length}]`:typeof y=="object"?`{ ${Pn(y)}`:JSON.stringify(y)}),f=k(()=>{var b;let y={"cursor-pointer":(b=s.value)==null?void 0:b.canEdit};return I.isString(o.contentClass)?I.forEach(I.split(o.contentClass," "),_=>{y[_.trim()]=!0}):o.contentClass&&(y=o.contentClass),{"obiwan-reference__dense":r.value,...y}});function h(y){y.stopPropagation();const{feature:b,source:_,value:N}=s.value;a({data:N,feature:b,source:_})}function S(y){y.stopPropagation();const{feature:b,source:_,value:N}=s.value;d.show({feature:b,source:_,value:N})}function p(y,b){b.stopPropagation();const{feature:_,source:N}=s.value;y||(y=_.eType),l({feature:_,source:N,targetType:y},b)}function v(y){y.stopPropagation();const{feature:b,value:_}=s.value;Bt.isNode(_)?s.value.unset(item):s.value.unset(b.name)}return(y,b)=>(P(),je("div",{class:xt(["obiwan-reference d-flex items-center w-100",f.value]),onClick:b[4]||(b[4]=gn(_=>h(_),["stop"]))},[qe(y.$slots,"prepend",Te(Ae({source:s.value.source,feature:s.value.feature,value:s.value.value}))),qe(y.$slots,"default",Te(Ae({source:s.value.source,feature:s.value.feature,value:s.value.value})),()=>[Ne("div",{class:xt(["obiwan-reference-key q-mr-xs",t.keyClass])},Qe(s.value.feature.name)+": ",3),Ne("div",{class:xt(["obiwan-reference-value ellipsis",t.valueClass])},Qe(w.value),3)]),Ne("div",Qo,[s.value.canUnset?(P(),oe(Ze,{key:0,icon:"",type:"delete",tooltip:s.value.getTooltip("unset"),onClick:b[0]||(b[0]=_=>v(_))},null,8,["tooltip"])):Me("",!0),s.value.canLink?(P(),oe(Ze,{key:1,icon:s.value.value?"mdi-link-edit":"mdi-link-plus",type:"link",onClick:b[1]||(b[1]=_=>S(_)),tooltip:s.value.getTooltip("set",s.value.value)},null,8,["icon","tooltip"])):Me("",!0),s.value.canEdit?(P(),oe(Ze,{key:2,icon:"",type:"edit",onClick:b[2]||(b[2]=_=>h(_)),tooltip:s.value.getTooltip("edit")},null,8,["tooltip"])):Me("",!0),s.value.canSet?(P(),oe(Yn,{key:3,icon:"mdi-plus",dense:r.value,feature:s.value.feature,tooltip:s.value.getTooltip("set",s.value.value),onClick:b[3]||(b[3]=(_,N)=>p(N,_))},null,8,["dense","feature","tooltip"])):Me("",!0)]),qe(y.$slots,"append",Te(Ae({source:s.value.source,feature:s.value.feature,value:s.value.value})))],2))}};class Wo{constructor(n,u={}){this.rules=[];let{changeable:o,defaultValue:a,defaultLiteralValue:l,derived:d,description:r,displayName:s,eType:w,extensions:f,iD:h,name:S,ns:p,lowerBound:v,transient:y,unsettable:b,volatile:_}=n;if(!w){this.disable=!0;return}this.label=s||S,this.name="DataFormField:"+n.$.get("ns"),this.readonly=u.readonly||o===!1,(h||d)&&(this.readonly=!0),v>0&&(this.clearable=!1,this.rules.push(g=>I.isNil(g)||g===""?`${this.label} is required`:!0)),w.$.isKindOf("ecore.EEnum")?(this.type="String",this.options=[],I.forEach(w.eLiterals,g=>{const Y={label:g.literal||g.name,value:g.literal||g.name},ee=g.extensions,V=I.get(ee,"components.dataForm.icon")||I.get(ee,"components.DataFormField.icon");V&&(Y.icon=V),this.options.push(Y)})):this.type=ja(w).to("js");const N=I.get(f,"components.dataFormField");N&&I.merge(this,N);const x=I.get(u,`schema.properties.${S}`);x&&I.merge(this,x)}}const Xo={class:"obiwan-data-form-actions flex-grow-0 row q-mt-lg"},bl={__name:"DataForm",props:{can:{type:[Object,Function]},dense:{type:Boolean,default:null},commitMode:{type:String,default:"manual",extensions:{options:["manual","immediate","onLostFocus"]}},disabled:{type:Boolean},lazyValidation:{type:Boolean,meta:{description:"If enabled, the form's valid state will always be true unless there are visible validation errors. You can still call validate() to manually trigger validation"}},meta:{type:Object,default(){return{}}},readonly:{type:[Boolean,Function]},schema:{type:Object,meta:{description:"Allows for redifinition of form fields en validationRules. Also allows for mapping fields to custom inputs."}},showButtons:{type:[Object,Boolean],default(){return{reset:!1}}},showDerived:{type:[Boolean,Function,Object]},type:{type:[String,Object]},value:{type:Object,required:!0}},emits:["change","commit","update","update:modelValue","removed","restore","submit"],setup(t,{emit:n}){const u=n,o=ln(),a=qt(),l=ze("store"),d=ze("useMeta"),r=t,s=I.randomId(),w=k(()=>I.isNil(r.dense)?a.screen.gt.sm:r.dense);function f(V){return!(V.readonly||V.derived)}function h(V,q){const{eClass:O}=V.$;if(!O)return;const j={};return I.forEach(O.eAllStructuralFeatures,L=>{if(L.derived){if(r.showDerived===!1)return;I.isFunction(r.showDerived)||r.showDerived}const Z=new Wo(L);L.derived&&(Z.readonly=!0),!Z.disable&&(L.$.isKindOf("ecore.EReference")&&(Z.type="reference"),j[L.name]=Z)}),j}const S=ae(null),p=k(()=>S.value?I.every(S.value.getValidationComponents(),q=>!q.hasError):!1),v=tn({fields:null,hasChanges:k(()=>{const V=v,{modifier:q}=V;return I.isEmpty(q)?!1:(r.commitMode==="immediate"?p.value&&u("update:modelValue",{value:r.value,modifier:q}):p.value&&u("update",{value:r.value,modifier:q}),!0)}),initialValues:{},isValid:p,modifier:k(()=>{const V=v;return V.node.$.diff(V.values)}),node:null,props:{...o,autofocus:!0,dense:w,disabled:r.disabled===!0?!0:void 0,value:null},reset(){I.forIn(v.fields,(V,q)=>{const O=v.initialValues[q];v.values[q]=O}),v.resetValidation()},resetValidation(){S.value&&S.value.resetValidation()},setInitialValues(V){const q={},O={};return I.forIn(v.fields,(j,L)=>{f(j);const Z=V[L];I.isNil(Z)?(q[L]=null,O[L]=null):(q[L]=Z,O[L]=Z)}),v.node=V,v.ele=V,v.initialValues=q,v.values=O,v.values},values:{},async validate(){We(async()=>{var q;await((q=S.value)==null?void 0:q.validate())||I.find(S.value.getValidationComponents(),{hasError:!0}).focus()})},validationRules:[]});Oe(r.value,function(V){var O,j,L;if(((O=v.node)==null?void 0:O.id)===V.id)return;let q;if(Bt.isNode(r.value)?q=r.value:(j=r.value)!=null&&j.id&&(q=l.get(r.value.id)),!q)if((L=r.value)!=null&&L.__typename)q=l.construct(r.value);else return y();v.fields=h(q),v.setInitialValues(q),v.validate(),d&&(v.meta=k(d(v)))},{immediate:!0});function y(){v.fields=[],v.initialValues={},v.node=null,v.values={}}function b(V){return v.node.$.eClass.getEStructuralFeature(V)}function _(V,q){var O;return!!(r.readonly&&I.isNil(v.values[q])||v.meta&&((O=v.meta[q])==null?void 0:O.isHidden)===!0)}function N(V,q){if(r.readonly)return!1;if(V==="cancel"){if(!l.get(r.value.id))return!0}else{if(V==="remove")return!!l.get(r.value.id);if(V==="restore")return v.hasChanges.value}}function x(){l.get(r.value.id)&&v.node.$.remove(),u("update:modelValue",null),u("removed",v.node)}function g(){debugger}function Y(){const{node:V,modifier:q}=v;function O(j){if(j||(j=v.node),!!l.get(j.id))v.setInitialValues(j);else{const Z=l.createNode({data:j.$.node});v.setInitialValues(Z)}}if(o.submit)u("submit",{node:V,modifier:q,done:O});else{const j=q.apply();O(j)}}function ee(){}return _l(()=>{v.validate()}),(V,q)=>(P(),oe(Ba,Be({style:{"min-width":w.value?"400px":"auto"},class:"obiwan-data-form d-flex-column",autocapitalize:"off",autofocus:"",greedy:""},v.props,{modelValue:v.props.value,"onUpdate:modelValue":q[0]||(q[0]=O=>v.props.value=O),ref_key:"formRef",ref:S,onReset:ee,onKeydown:q[1]||(q[1]=Ea(gn(()=>{},["prevent"]),["enter"])),onSubmit:gn(Y,["prevent"])}),{default:Q(()=>[Ne("div",{class:xt(["obiwan-data-form-fields flex-grow-1",{"obiwan-data-form-fields__dense":w.value}])},[qe(V.$slots,"prepend-fields",Te(Ae({form:v}))),(P(!0),je(Nt,null,nn(v.fields,(O,j)=>(P(),je(Nt,null,[O.type==="reference"&&_(O,j)!==!0?(P(),oe(Uo,{class:"q-mt-md",dense:w.value,feature:j,key:X(s)+"__reference__"+j,readonly:O.readonly,keyClass:"q-field__label no-pointer-events",source:v.node},null,8,["dense","feature","readonly","source"])):_(O,j)!==!0?(P(),oe(jo,{class:xt(O.class),style:On(O.style),dense:w.value,key:X(s)+"__attribute__"+j,feature:b(j),field:O,initialValue:v.initialValues[j],name:j,modelValue:v.values[j],"onUpdate:modelValue":L=>v.values[j]=L},null,8,["class","style","dense","feature","field","initialValue","name","modelValue","onUpdate:modelValue"])):Me("",!0)],64))),256)),qe(V.$slots,"append-fields",Te(Ae({form:v})))],2),Ne("div",Xo,[qe(V.$slots,"actions",{},()=>[qe(V.$slots,"prepend-buttons",Te(Ae({form:v}))),J(fn),qe(V.$slots,"default",Te(Ae({form:v})),()=>[N("remove")?(P(),oe(Ze,{key:0,type:"delete",onClick:x})):Me("",!0),N("restore")?(P(),oe(Ze,{key:1,class:"q-ml-sm",label:"reset",type:"reset",onClick:g})):Me("",!0),J(Ze,{class:"q-ml-sm",disabled:!p.value||!v.hasChanges,type:"submit"},null,8,["disabled"])]),qe(V.$slots,"append-buttons",Te(Ae({form:v})))])])]),_:3},16,["style","modelValue"]))}};function Bn({emit:t,source:n,key:u}){let o,a=ae(null),l=!1;return k({get(){const d=n[u];return l?o!==d&&(a.value=o=d):(o=d,a.value=d===void 0?null:d,l=!0),a.value},set(d){a.value=d,t&&t(`update:${u}`,d)}})}const Zo={class:"d-flex items-center"},Jo={key:0,class:"flex-grow-1 ellipsis"},Go={class:"text-h6 ellipsis"},eu={key:1,class:"text-subtitle2"},tu={class:"w-100 d-flex items-center"},nu=["onClick","onDblclick"],lu={__name:"OList",props:{dense:{type:Boolean,required:!1,default:null},disabledKey:[Function,String],filter:[Function,String],filterable:{type:Boolean,default:!0},filterKey:[Function,String],itemKey:{type:[Function,String],meta:{description:"The property name of each item object that holds a unique id"}},labelKey:{type:[Function,String]},items:{type:Array,default(){return[]}},orderBy:{type:[Array,Function,String],default:"displayName ASC, name ASC, id ASC"},readonly:Boolean,sortKeysBy:{type:[Array,Function,String],default:"displayName, name, id"},selected:null,subtitle:String,ticked:Array,title:String,ripple:{type:Boolean,default:!1}},emits:["click","dblclick","update:selected"],setup(t,{emit:n}){const u=ln(),o=qt();ze("bus");const a=n;an(),on();const l=bn();ze("store");const d=t,r=`domId_${I.randomId()}`;ae("");const s=Bn({emit:a,source:d,key:"selected"});Bn({emit:a,source:d,key:"filter"});const w=k(()=>{const _={props:{flat:!0}};return u.card&&I.merge(_.props,u.card),_}),f=k(()=>I.isNil(d.dense)?o.screen.gt.sm:d.dense);function h(_){return d.itemKey?I.isString(_)?`${r}_${_[d.itemKey]}`:`${r}_${d.itemKey(_)}`:`${r}_${(_==null?void 0:_.id)||_}`}function S(_){return d.labelKey?I.isString(_)?_[d.itemKey]:d.labelKey(_):typeof _=="object"&&_!==null?_.displayName||_.title||_.label||_.name||_.id:_}function p(_){return d.disabledKey?I.isString(_)?_[d.disabledKey]:d.disabledKey(_):!1}function v(_){return s.value?h(s.value)===h(_):!1}function y(_,N){a("dblclick",_,N)}function b(_,N){p(_)||(s.value===_?s.value=null:s.value=_,a("click",_,N))}return(_,N)=>(P(),oe(In,Te(Ae(w.value.props)),{default:Q(()=>[t.title||t.subtitle||X(l).header?(P(),oe(Tt,{key:0},{default:Q(()=>[Ne("div",Zo,[qe(_.$slots,"before-header",Te(Ae({selected:X(s)})),void 0,!0),qe(_.$slots,"header",Te(Ae({selected:X(s)})),()=>[t.title?(P(),je("div",Jo,[Ne("span",Go,Qe(t.title),1)])):Me("",!0),t.subtitle?(P(),je("div",eu,Qe(t.subtitle),1)):Me("",!0)],!0),qe(_.$slots,"after-header",Te(Ae({selected:X(s)})),void 0,!0)])]),_:3})):Me("",!0),J(Tt,{class:"q-py-none"},{default:Q(()=>[J(Rn,{class:xt({"obiwan-list":!f.value,"obiwan-list--dense":f.value}),dense:f.value},{default:Q(()=>[qe(_.$slots,"before-items",Te(Ae({items:t.items,selected:X(s)})),void 0,!0),(P(!0),je(Nt,null,nn(t.items,x=>ct((P(),oe(Yt,{clickable:"",disable:p(x),key:`${r}_item_${h(x)}`},{default:Q(()=>[J(Ht,null,{default:Q(()=>[Ne("div",tu,[qe(_.$slots,"before",Te(Ae({item:x,selected:v(x)})),void 0,!0),Ne("div",{class:"flex-grow-1 ellipsis",onClick:g=>b(x,g),onDblclick:g=>y(x,g)},[Ne("span",{class:xt({"q-item--selected":v(x)})},[qe(_.$slots,"default",Te(Ae({item:x,selected:v(x)})),()=>[gt(Qe(S(x)),1)],!0)],2)],40,nu),qe(_.$slots,"after",Te(Ae({item:x,selected:v(x)})),void 0,!0)])]),_:2},1024)]),_:2},1032,["disable"])),[[xl,t.ripple]])),128)),qe(_.$slots,"after-items",Te(Ae({items:t.items,selected:X(s)})),void 0,!0)]),_:3},8,["class","dense"])]),_:3}),qe(_.$slots,"append",{},void 0,!0)]),_:3},16))}};var Wl=Kn(lu,[["__scopeId","data-v-1de1be54"]]);const au={class:"q-ml-md float-left d-flex items-center"},ou={key:1},uu={__name:"ListEditor",props:{dense:{type:Boolean,required:!1,default:null},feature:Object,source:Object,title:[Boolean,String],value:Array},emits:["edit:reference","set:reference","unset:reference"],setup(t,{emit:n}){ln();const u=qt();ze("bus"),`${I.randomId()}`;const o=n;an(),on(),bn();const a=ze("store"),l=ze("onEditReference"),d=ze("onSetReference"),r=t,s=k(()=>I.isNil(r.dense)?u.screen.gt.sm:r.dense),w=k(()=>{if(r.title!==!1)return`Edit ${f.value.getDisplayName()}`}),f=k(()=>{var y;const v={};return r.value instanceof jt?v.value=r.value:r.source&&((y=r.feature)==null?void 0:y.many)&&(v.feature=r.feature,v.source=r.source,v.value=r.source[r.feature.name]||[]),Jn({on:{edit(b){debugger;o("edit:reference",b)},set(b){debugger;o("set:reference",b)}},props:v,store:a})});function h(v,y){debugger;const{feature:b,source:_}=f.value;l({data:v,feature:b,source:_})}function S(v,y){debugger;const{feature:b,source:_}=f.value;d({feature:b,source:_,targetType:v},y)}function p(v,y){debugger;f.value.unset(v)}return(v,y)=>(P(),je(Nt,null,[f.value.hasData?(P(),oe(Wl,{key:0,class:"obiwan-list-editor",title:w.value,items:f.value.value,onDblclick:h},{"after-header":Q(()=>[f.value.canSet?(P(),oe(Yn,{key:0,icon:"mdi-plus",dense:s.value,feature:f.value.feature,round:!0,tooltip:f.value.getTooltip("set"),onClick:y[0]||(y[0]=(b,_)=>S(_,b))},null,8,["dense","feature","tooltip"])):Me("",!0)]),default:Q(({item:b})=>[gt(Qe(X(Pn)(b)),1)]),after:Q(({item:b,selected:_})=>[Ne("div",au,[_&&f.value.canUnset?(P(),oe(Ze,{key:0,type:"delete",icon:"",onClick:N=>p(b)},null,8,["onClick"])):Me("",!0),_&&f.value.canEdit?(P(),oe(Ze,{key:1,type:"edit",icon:"",onClick:N=>h(b,N)},null,8,["onClick"])):Me("",!0)])]),_:1},8,["title","items"])):(P(),je("div",ou," No links to show ")),f.value.canSet?(P(),oe(Yn,{key:2,class:"absolute-bottom-right q-mr-md q-mb-md",icon:"mdi-plus",fab:!0,dense:s.value,feature:f.value.feature,round:!0,tooltip:f.value.getTooltip("set"),onClick:y[1]||(y[1]=(b,_)=>S(_,b))},null,8,["dense","feature","tooltip"])):Me("",!0)],64))}};var iu=Kn(uu,[["__scopeId","data-v-4cdbc9a6"]]);const ru={__name:"SelectLink",props:{dense:{type:Boolean,required:!1,default:null},feature:[Object,String],filterKey:String,readonly:Boolean,selected:null,source:[Object,String],value:[Array,Object,String]},emits:["update:modelValue"],setup(t,{emit:n}){ln();const u=qt();ze("bus"),`${I.randomId()}`;const o=n;an();const a=on();bn();const l=ze("store"),d=t;k(()=>I.isNil(d.dense)?u.screen.gt.sm:d.dense);const r=Jn({props:d,router:a,store:l}),s=Bn({emit:o,source:d,key:"selected"}),w=k(()=>r.getAllowedTargets());return(f,h)=>(P(),oe(Wl,{class:"obiwan-select-link",items:w.value,selected:X(s),"onUpdate:selected":h[0]||(h[0]=S=>rt(s)?s.value=S:null)},{default:Q(({item:S})=>[gt(Qe(X(Pn)(S)),1)]),_:1},8,["items","selected"]))}};const su={class:"d-flex items-center"},cu={key:1,class:"text-h6 ellipsis"},du={key:3},fu={class:"text-h6 ellipsis"},vu=1e3,mu={__name:"NodeEditor",props:{__typename:String,dense:{type:Boolean,default:null},editRoute:[Object,String],onError:{type:Function},value:Object},emits:["update:modelValue","close"],setup(t,{emit:n}){const u=qt(),o=`domId_${I.randomId()}`,a=n,l=an(),d=on(),r=ze("store"),s=t;let w;s.editRoute&&(w={edit(V){debugger;let q=_(V);d.push(q,params)}}),dn("onEditReference",Ko.bind({$route:l,$router:d,$store:r,on:w})),dn("onSetReference",pl.bind({$route:l,$router:d,$store:r,on:w}));const f=tn({revealStyle:{height:"0px"},on:{beforeEnter(){f.revealStyle},enter(){f.revealStyle},afterEnter(){f.revealStyle.height="calc(100% - 160px)"},beforeLeave(){f.revealStyle},leave(){f.revealStyle},afterLeave(){f.revealStyle.height="0px"}},feature:null,reveal:!1,selected:null,source:null,value:null,close(){this.feature=null,this.selected=null,this.source=null,this.value=null,this.reveal=!1},set(V){const q=pl.call({$route:l,$router:d,$store:r,on:w},{feature:this.feature,source:this.source,target:this.selected});return this.close(),q},show({feature:V,source:q,value:O}){debugger;this.feature=V||null,this.selected=null,this.source=q||null,this.value=O||null,this.reveal=!0}});dn("selectLink",f);const h=tn({is:null,props:null});k(()=>I.isNil(s.dense)?u.screen.gt.sm:s.dense);const S=ae(!1),p=k(()=>{var V;if(((V=u.screen)==null?void 0:V.width)>=600)return S.value?{minWidth:"calc(100% - 48px)",minHeight:"calc(100% - 48px)"}:{minWidth:"600px"}}),v=k(function(){const{is:V,props:q}=h;if(!!q){if(V==="NodeEditor"){const O=r.get(q.value.id)||r.construct(q.value);return`Edit { ${O.$.getDisplayName()}:${O.$.eClass.ns} }`}else if(V==="ListEditor"){const{feature:O,source:j}=q;return`Edit { ${j.$.getDisplayName()}:${j.$.eClass.ns} }.${O.name}`}}}),y=tn({selected:"dataForm",selectedView:null,components:k(()=>{var O,j;const{is:V,props:q}=h;if(V==="NodeEditor"){const L=r.getType((O=q==null?void 0:q.value)==null?void 0:O.__typename);if(!L)return;const Z=L.components||((j=L.extensions)==null?void 0:j.components);return Z?{data:Z,index:I.keyBy(Z,re=>re.ns||re.name)}:void 0}}),select(V){debugger;const{is:q,ns:O,name:j,style:L}=V;y.selected=O||j;let Z;I.isFunction(V.props)?Z=V.props(h.props):V.props!==void 0?Z=I.merge({...h.props},V.props):Z=h.props;const re={is:q,props:Z};V.class&&(re.class=V.class),L&&(re.style=L),I.get(V,"extensions.editor.props.maximize")&&(S.value=!0),y.selectedView=Oa(re)}});function b(V){var q;if(V==="maximize")return((q=u.screen)==null?void 0:q.width)>=vu}function _(V){let q=I.isFunction(s.editRoute)?s.editRoute(V):s.editRoute;return I.isString(q)&&(q={path:nextRoute,params:V}),q}function N(){S.value=!S.value}let x={};Ia(()=>{const V=r.getRootClasses();x=I.keyBy(V,"ns")});function g(V){const{__typename:q,fragment:O,id:j}=V,L=r.get(j);return O?!!L:L||x[q]}function Y(V){return g(V)?!0:(s.onError&&s.onError({message:"Node not editable",router:d,route:l,store:r,data:V}),!1)}function ee(V){let{storeId:q,fragment:O}=V.params;const[j,L]=atob(q).split(":");if(!Y({__typename:j,fragment:O,id:L}))return;let re,Se;if(O){const ve=I.isArray(O)?O:O.split("/");if(ve.length){let me=I.last(ve),ge=ve[ve.length-2];if(ve.length%2===0){re="NodeEditor";const[ke,$e]=atob(me).split(":");Se={value:{__typename:ke,id:$e}}}else{re="ListEditor";const ke=ge;ge=me;const $e=ke?atob(ke).split(":")[1]:L,He=r.get($e);Se={feature:He.$.eClass.getEStructuralFeature(ge),source:He}}}else re="NodeEditor",Se={value:{__typename:j,id:L}}}else re="NodeEditor",Se={value:{__typename:j,id:L}};h.is!==re?(h.is=re,h.props=Se):I.merge(h.props,Se)}if(s.value){let V;Oe(s,()=>{s.value!==V&&(h.is="NodeEditor",h.props={value:s.value},V=s.value)},{immediate:!0})}else Oe(l,()=>{var V;(V=l.params)!=null&&V.storeId&&ee(l)},{immediate:!0});return(V,q)=>(P(),oe(In,{class:"obiwan-node-editor d-flex-column",style:On(p.value)},{default:Q(()=>[J(Tt,{class:"flex-grow-0"},{default:Q(()=>[Ne("div",su,[y.components?(P(),oe(Ke,{key:0,color:"primary",dense:"",flat:"",icon:"mdi-pencil-box-multiple-outline"},{default:Q(()=>[J(pn,null,{default:Q(()=>[J(Rn,{style:{"min-width":"100px"}},{default:Q(()=>[ct((P(),oe(Yt,{clickable:"",onClick:q[0]||(q[0]=O=>y.selected="dataForm")},{default:Q(()=>[J(Ht,null,{default:Q(()=>[gt("Data Form")]),_:1})]),_:1})),[[Dt]]),ct((P(),oe(Yt,{clickable:"",disable:"",onClick:q[1]||(q[1]=O=>y.selected="jsonEditor")},{default:Q(()=>[J(Ht,null,{default:Q(()=>[gt("JSON Editor")]),_:1})]),_:1})),[[Dt]]),(P(!0),je(Nt,null,nn(y.components.data,O=>ct((P(),oe(Yt,{key:`${o}_views_menuItem_${O.id}`,clickable:"",onClick:j=>y.select(O)},{default:Q(()=>[J(Ht,null,{default:Q(()=>[gt(Qe(X(I).startCase(O.name)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[Dt]])),128))]),_:1})]),_:1})]),_:1})):Me("",!0),v.value?(P(),je("div",cu,[Ne("span",null,Qe(v.value),1)])):Me("",!0),J(fn),b("maximize")?(P(),oe(Ze,{key:2,dense:"",icon:"",tooltip:"",type:S.value?"minimize":"maximize",size:"md",onClick:N},null,8,["type"])):Me("",!0),ct(J(Ze,{dense:"",icon:"",tooltip:"",type:"close",size:"md",onClick:q[2]||(q[2]=O=>a("close"))},null,512),[[Dt]])])]),_:1}),J(Tt,{class:"flex-grow-1 overflow-y-auto q-pt-none"},{default:Q(()=>[h.is==="NodeEditor"&&y.components?(P(),oe(Fa,{key:0,class:"h-100",modelValue:y.selected,"onUpdate:modelValue":q[4]||(q[4]=O=>y.selected=O),animated:""},{default:Q(()=>[J(sl,{class:"q-pt-none",name:"dataForm"},{default:Q(()=>[J(bl,Be(h.props,{onRemoved:q[3]||(q[3]=O=>a("close"))}),null,16)]),_:1}),(P(!0),je(Nt,null,nn(y.components.data,O=>(P(),oe(sl,{class:"q-pa-none",key:`${o}_views_tabPanel_${O.id}`,name:O.ns||O.name},{default:Q(()=>[(P(),oe(Tl(y.selectedView.is),Be({class:y.selectedView.class,style:y.selectedView.style},y.selectedView.props),null,16,["class","style"]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):h.is==="NodeEditor"?(P(),oe(bl,Be({key:1},h.props,{onRemoved:q[5]||(q[5]=O=>a("close"))}),null,16)):h.is==="ListEditor"?(P(),oe(iu,Be({key:2,class:"h-100"},h.props,{title:!1}),null,16)):h.is==="NoData"?(P(),je("div",du,Qe(h.props.message),1)):Me("",!0)]),_:1}),J(Ct,Fl(f.on),{default:Q(()=>[f.reveal?(P(),je("div",{key:0,class:"obiwan-node-editor-reveal absolute-bottom d-flex justify-center",style:On([{"max-height":"calc(100% - 160px)",overflow:"hidden"},f.revealStyle])},[qe(V.$slots,"reveal",{},()=>[J(In,{class:"bg-light-blue-1 h-100 w-100 d-flex-column"},{default:Q(()=>[J(Tt,{class:"d-flex flex-grow-0"},{default:Q(()=>[Ne("div",fu,[Ne("span",null,Qe(v.value.replace("Edit","Set"))+"."+Qe(f.feature.name),1)]),J(fn),J(Ze,{dense:"",icon:"",tooltip:"",type:"close",size:"md",onClick:q[6]||(q[6]=O=>f.close(O))})]),_:1}),J(Tt,{class:"flex-grow-1 overflow-auto q-pb-none"},{default:Q(()=>[qe(V.$slots,"reveal-content",{},()=>[J(ru,{class:"bg-light-blue-1",feature:f.feature,selected:f.selected,"onUpdate:selected":q[7]||(q[7]=O=>f.selected=O),source:f.source,value:f.value},null,8,["feature","selected","source","value"])],!0)]),_:3}),J(Tt,{class:"flex-grow-0 d-flex"},{default:Q(()=>[J(fn),J(Ke,{color:"primary",disable:!f.selected,flat:"",label:"Create Link",onClick:q[8]||(q[8]=O=>f.set(O))},null,8,["disable"])]),_:1})]),_:3})],!0)],4)):Me("",!0)]),_:3},16)]),_:3},8,["style"]))}};var yu=Kn(mu,[["__scopeId","data-v-ba42583c"]]);export{yu as default};
