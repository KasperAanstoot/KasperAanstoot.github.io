import{_ as u,D as E,f as H,k as l}from"./index.efc25c54.js";class _{constructor(){this.__stack={}}on(t,r,d){return(this.__stack[t]||(this.__stack[t]=[])).push({fn:r,ctx:d}),this}once(t,r,d){const n=(...s)=>{this.off(t,n),r.apply(d,s)};return n.__callback=r,this.on(t,n,d)}emit(t){const r=this.__stack[t];if(r!==void 0){const d=[].slice.call(arguments,1);r.forEach(n=>{n.fn.apply(n.ctx,d)})}return this}off(t,r){const d=this.__stack[t];if(d===void 0)return this;if(r===void 0)return delete this.__stack[t],this;const n=d.filter(s=>s.fn!==r&&s.fn.__callback!==r);return n.length!==0?this.__stack[t]=n:delete this.__stack[t],this}}function h(c,{props:t,children:r,element:d,app:n}={}){let s=d,f=H(c,t,r);n&&n._context&&(f.appContext=n._context),s?l(f,s):typeof document!="undefined"&&l(f,s=document.createElement("div"));const a=f.destroy=()=>{s&&l(null,s),s=null,f=null};return{vNode:f,destroy:a,el:s}}function m(c){function t({ele:e,values:i}){var o;return u.merge(f({ele:e,values:i}),{maximumOpen:{isHidden:!0},minimumOpen:{isHidden:!0},multipleOf:{isHidden:!0},pattern:{isHidden:!!((o=e.eType)!=null&&o.$.isKindOf("ecore.EString"))}})}function r({ele:e,values:i}){return u.merge(a({ele:e,values:i}),{eGenericSuperTypes:{isHidden:!0},abstract:{isHidden:i.interface===!0},interface:{isHidden:i.abstract===!0}})}function d({ele:e,values:i}){return u.merge(f({ele:e,values:i}),{eGenericType:{isHidden:!0},resolveProxies:{isHidden:!0}})}function n({ele:e,values:i}){return u.merge(a({ele:e,values:i}),{eGenericExceptions:{isHidden:!0},eGenericType:{isHidden:!0},resolveProxies:{isHidden:!0},ordered:{isHidden:u.isNil(i.upperBound)||i.upperBound===1},unique:{isHidden:u.isNil(i.upperBound)||i.upperBound===1}})}function s({ele:e,values:i}){return u.merge(a({ele:e,values:i}),{eGenericType:{isHidden:!0}})}function f({ele:e,values:i}){return u.merge(a({ele:e,values:i}),{ordered:{isHidden:u.isNil(i.upperBound)||i.upperBound===1},unique:{isHidden:u.isNil(i.upperBound)||i.upperBound===1},redefines:{isHidden:!0},transient:{isHidden:!!i.derived&&!i.volatile},volatile:{isHidden:!!i.derived}})}function a({ele:e,values:i}){return{eAnnotations:{isHidden:!0},eTypeParameters:{isHidden:!0}}}return function(){const{ele:e,fields:i,values:o,initialValues:p}=c;if(e.$.isKindOf("ecore.EAttribute"))return t({ele:e,values:o});if(e.$.isKindOf("ecore.EClass"))return r({ele:e,values:o});if(e.$.isKindOf("ecore.EEnum"))return a({ele:e,values:o});if(e.$.isKindOf("ecore.EEnumLiteral"))return{eAnnotations:{isHidden:!0}};if(e.$.isKindOf("ecore.EDataType"))return a({ele:e,values:o});if(e.$.isKindOf("ecore.EOperation"))return n({ele:e,values:o});if(e.$.isKindOf("ecore.EParameter"))return s({ele:e,values:o});if(e.$.isKindOf("ecore.EReference"))return d({ele:e,values:o})}}var O=({app:c,eventBus:t})=>{const r="@kasper-aanstoot/moddle",d="UML Class Diagramming App";let n={}.title;const s="0.0.1";!n&&r&&(n=u.last(r.split("/")),n=u.startCase(n));const f={id:u.hash(r),description:d,dialog(a){return new Promise((e,i)=>{let o=!0;E.create(a).onOk((p={})=>{o=!1,e({result:p,event:"ok"})}).onCancel(()=>{o=!1,e({event:"cancel"})}).onDismiss(()=>{o&&e({event:"dismiss"})})})},mount(a,e={}){return e.app||(e.app=c),h(a,e)},name:r,title:n,version:s};c.config.globalProperties.$app=f,c.provide("app",f),c.config.globalProperties.$useMeta=m,c.provide("useMeta",m),t||(t=new _),c.config.globalProperties.$bus=t,c.provide("bus",t)};export{O as default};
